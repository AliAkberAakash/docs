<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160407-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160407.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160407.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160407-backwards-incompatible-changes">Backwards-incompatible Changes</h3>

* Any databases using the [`DECIMAL`](../v1.0/decimal.html) type will need to be deleted and
  created from scratch. Columns of this type were encoded incorrectly
  by `beta-20160330`.
  [#5820](https://github.com/cockroachdb/cockroach/pull/5820)
* [`SELECT`](../v1.0/select.html) statements must now specify one or more columns or
  expressions. Previously, statements such as `SELECT FROM t` were
  allowed but the results would confuse many clients.
  [#5859](https://github.com/cockroachdb/cockroach/pull/5859)
* It is now an error to insert a value that is too large into a column
  with a type of limited length such as [`VARCHAR(n)`](../v1.0/string.html).
  [#5750](https://github.com/cockroachdb/cockroach/pull/5750)

<h3 id="beta-20160407-compatibility">Compatibility</h3>

* Added support for the "flush" message in the PostgreSQL network
  protocol, which improves compatibility with the [node.js driver](../v1.0/install-client-drivers.html).
  [#5740](https://github.com/cockroachdb/cockroach/pull/5740)
* Fixed a panic when handling certain queries sent by the PHP PDO
  library. [#5783](https://github.com/cockroachdb/cockroach/pull/5783)
* Improved parsing of timestamps for compatibility with the Go
  `lib/pq` client library.
  [#5877](https://github.com/cockroachdb/cockroach/pull/5877)

<h3 id="beta-20160407-new-features">New Features</h3>

* Index hints: `SELECT FROM tbl@idx` or `SELECT FROM
  tbl@{FORCE_INDEX=idx}` instructs the query planner to use the given
  index. [#5785](https://github.com/cockroachdb/cockroach/pull/5785)
  and [#5806](https://github.com/cockroachdb/cockroach/pull/5806)
* The `cockroach` command-line client now accepts environment
  variables as default values for many command-line flags. See
  `--help` for details.
  [#5430](https://github.com/cockroachdb/cockroach/pull/5430)
* Added SQL `version()` [function](../v1.0/functions-and-operators.html).
  [#5763](https://github.com/cockroachdb/cockroach/pull/5763)
* Added compiler and platform information to `cockroach version`
  output. [#5766](https://github.com/cockroachdb/cockroach/pull/5766)
* Debugging tools show fractional seconds in timestamps.
  [#5736](https://github.com/cockroachdb/cockroach/pull/5736)
* In secure mode, plain HTTP requests to the [`http-port`](../v1.0/start-a-node.html) used by the
  admin UI are now redirected to HTTPS.
  [#5746](https://github.com/cockroachdb/cockroach/pull/5746)
* Links to debugging pages are available on the HTTP port at
  `/debug/`.
  [#5795](https://github.com/cockroachdb/cockroach/pull/5795)
* The [`cockroach zone set`](../v1.0/configure-replication-zones.html) command now echos the new configuration.
  [#5829](https://github.com/cockroachdb/cockroach/pull/5829)

<h3 id="beta-20160407-bug-fixes">Bug Fixes</h3>

* Improved flow control for raft snapshots, fixing an issue that could
  lead to nodes running out of memory.
  [#5721](https://github.com/cockroachdb/cockroach/pull/5721)
* Fixed a deadlock scenario in which two conflicting transactions
  would both be unable to make progress.
  [#5710](https://github.com/cockroachdb/cockroach/pull/5710)
* Fixed a panic while executing certain [`DELETE`](../v1.0/delete.html) statements.
  [#5840](https://github.com/cockroachdb/cockroach/pull/5840)

<h3 id="beta-20160407-internal-changes">Internal Changes</h3>

* Clock offsets are now measured continuously.
  [#5512](https://github.com/cockroachdb/cockroach/pull/5512)
* Improved caching to avoid redundant range descriptor lookups.
  [#5627](https://github.com/cockroachdb/cockroach/pull/5627)
* Reduced log spam when nodes are down.
  [#5883](https://github.com/cockroachdb/cockroach/pull/5883)

<h3 id="beta-20160407-contributors">Contributors</h3>

This release includes 77 merged PRs by 18 authors. We would like to
thank the following contributors from the CockroachDB community,
especially
[first-time contributor Seif Lotfy](https://github.com/cockroachdb/cockroach/pull/5747).

* Kenji Kaneda
* Seif Lotfy
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160414-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160414.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160414.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160414-backwards-incompatible-changes">Backwards-incompatible Changes</h3>

* Any databases using the [`DECIMAL`](../v1.0/decimal.html) type will need to be deleted and created from scratch. Columns of this type were encoded incorrectly in older beta releases. (Again! We apologize for the inconvenience.) [#5994](https://github.com/cockroachdb/cockroach/pull/5994)
* The [SQL function](../v1.0/functions-and-operators.html) `transaction_timestamp_unique` has been removed in favor of the new `cluster_logical_timestamp` function described below.

<h3 id="beta-20160414-new-features">New Features</h3>

* [`ALTER TABLE`](../v1.0/alter-table.html) supports several new operations: `ADD COLUMN` with a
  default value
  ([#5759](https://github.com/cockroachdb/cockroach/pull/5759)),
  `ALTER COLUMN SET DEFAULT`, `ALTER COLUMN DROP DEFAULT`, and `ALTER
  COLUMN DROP NOT NULL`
  ([#5947](https://github.com/cockroachdb/cockroach/pull/5947))
* The `TIMESTAMPTZ` type is now accepted as an alias for [`TIMESTAMP`](../v1.0/timestamp.html)
  for compatibility with PostgreSQL; our `TIMESTAMP` type already
  supports time zones in the same way as PostgreSQL's `TIMESTAMPTZ`.
  [#5893](https://github.com/cockroachdb/cockroach/pull/5893)
* The [`STRING`](../v1.0/string.html) type now accepts a length parameter (e.g.,
  `STRING(50)`), similar to `CHAR` and `VARCHAR`.
  [#5918](https://github.com/cockroachdb/cockroach/pull/5918)
* The `LIMIT` clause now accepts placeholders.
  [#5977](https://github.com/cockroachdb/cockroach/pull/5977)
* The `RETURNING` clause of [`INSERT`](../v1.0/insert.html), [`DELETE`](../v1.0/delete.html), and [`UPDATE`](../v1.0/update.html)
  statements now accepts placeholders.
  [#5934](https://github.com/cockroachdb/cockroach/pull/5934)
* When sending queries to the `cockroach sql` tool via `stdin`, a
  terminating semicolon is not required and instructions for
  interactive mode are no longer printed (similar to the existing
  behavior of `-e`).
  [#5988](https://github.com/cockroachdb/cockroach/pull/5988)
* The `experimental_uuid_v4()` [SQL function](../v1.0/functions-and-operators.html) has been renamed to
  `uuid_v4()`. The old name remains as a deprecated alias.
  [#5886](https://github.com/cockroachdb/cockroach/pull/5886)

<h3 id="beta-20160414-performance-improvements">Performance Improvements</h3>

* Reduced the number of files created in the data directory, and fixed
  issues in which the process could run out of file descriptors.
  [#5888](https://github.com/cockroachdb/cockroach/pull/5888)
* Introduced a special fast path for transactions that are contained
  entirely within one range. [#5966](https://github.com/cockroachdb/cockroach/pull/5966)
* Reduced the number of unnecessary network round trips by ensuring
  that the range lease holder and the raft leader coincide.
  [#5973](https://github.com/cockroachdb/cockroach/pull/5973)

<h3 id="beta-20160414-bug-fixes">Bug Fixes</h3>

* The gossip system no longer recommends redundant forwarding
  addresses, which could prevent the cluster from fully connecting.
  [#5901](https://github.com/cockroachdb/cockroach/pull/5901)
* Timestamps are now correctly reported in the network protocol as
  having time zone offsets.
  [#5909](https://github.com/cockroachdb/cockroach/pull/5909)
* Buffered data is now flushed to the network immediately on error.
  [#5909](https://github.com/cockroachdb/cockroach/pull/5909)
* Timeseries data no longer diverges across replicas.
  [#5905](https://github.com/cockroachdb/cockroach/pull/5905)

<h3 id="beta-20160414-internal-changes">Internal Changes</h3>

* [SQL functions](../v1.0/functions-and-operators.html) related to the current time (`now`,
  `current_timestamp`, `statement_timestamp`, `statement_timestamp`)
  now use the clock of the node that executed them instead of a
  timestamp derived from the internal hybrid logical clock. This means
  that these functions are less likely to produce duplicate values,
  but it is more likely for one transaction to see a timestamp that is
  less than a timestamp already seen in another transaction.
  Applications that require a globally monotonic timestamp-like value
  can use the new function `cluster_logical_timestamp` instead.
  [#5805](https://github.com/cockroachdb/cockroach/pull/5805)
* New HTTP endpoint `/debug/metrics` exposes internal metric data in
  JSON format.
  [#5894](https://github.com/cockroachdb/cockroach/pull/5894)
* [Logs](../v1.0/debug-and-error-logs.html) are no longer written to `stderr` by default, only to the
  `logs` subdirectory of the data directory.
  [#5979](https://github.com/cockroachdb/cockroach/pull/5979)

<h3 id="beta-20160414-contributors">Contributors</h3>

This release includes 58 merged PRs by 18 authors. We would like to
thank the following contributors from the CockroachDB community,
especially
[first-time contributor Andrey Shinkevich](https://github.com/cockroachdb/cockroach/pull/5956).

* Andrey Shinkevich
* Kenji Kaneda
* Seif Lotfy
* es-chow
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160421-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160421.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160421.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160421-upgrade-procedure">Upgrade Procedure</h3>

* This release cannot be run concurrently with older beta releases.
  Please stop all nodes running older releases before restarting any
  node with this version.

<h3 id="beta-20160421-new-features">New Features</h3>

* [`UPDATE`](../v1.0/update.html) statements may now set columns which are part of the
  primary key.
  [#6043](https://github.com/cockroachdb/cockroach/pull/6043)
* `CHECK` constraints can now be defined when creating tables and will
  be enforced for [`INSERT`](../v1.0/insert.html) statements (but not yet for [`UPDATE`](../v1.0/update.html)
  statements).
  [#6044](https://github.com/cockroachdb/cockroach/pull/6044)
* The `pow()` and `exp()` [functions](../v1.0/functions-and-operators.html) on `DECIMAL` values no longer lose
  precision.
  [#6170](https://github.com/cockroachdb/cockroach/pull/6170)
* In the [`cockroach sql`](../v1.0/use-the-built-in-sql-client.html) shell, the special command `!` can now be used
  to execute a system command and display its output. `|` executes a
  system command and runs its output as a SQL statement.
  [#5961](https://github.com/cockroachdb/cockroach/pull/5961)
* Added `SHOW CREATE TABLE`.
  [#6158](https://github.com/cockroachdb/cockroach/pull/6158)
* The `RETURNING` clause of [`INSERT`](../v1.0/insert.html) statements can now refer to tables
  by aliases defined with `AS`.
  [#5903](https://github.com/cockroachdb/cockroach/pull/5903)
* The SQL parser now accepts the `CASCADE` and `RESTRICT` keywords in
  the [`DROP INDEX`](../v1.0/drop-index.html), [`TRUNCATE TABLE`](../v1.0/truncate.html), [`ALTER TABLE DROP COLUMN`](../v1.0/alter-table.html), and [`ALTER TABLE DROP CONSTRAINT`](../v1.0/alter-table.html) statements. These keywords relate to
  features we have not yet implemented, so they do nothing, but this change
  improves compatibility with frameworks that like to send these
  keywords.
  [#5957](https://github.com/cockroachdb/cockroach/pull/5957)

<h3 id="beta-20160421-admin-ui">Admin UI</h3>

* The time scale used for graphs can now be changed.
  [#6145](https://github.com/cockroachdb/cockroach/pull/6145)
* Some UI elements now include tooltips with additional explanations.
  [#6006](https://github.com/cockroachdb/cockroach/pull/6006)
* A warning is displayed when the cluster is unreachable.
  [#6042](https://github.com/cockroachdb/cockroach/pull/6042)
* There are now fewer unnecessary scrollbars.
  [#6018](https://github.com/cockroachdb/cockroach/pull/6018)

<h3 id="beta-20160421-bug-fixes">Bug fixes</h3>

* The rebalancer is now better at distributing ranges across the nodes
  in a cluster.
  [#6133](https://github.com/cockroachdb/cockroach/pull/6133)
* Fixed a major cause of "timestamp in future" errors.
  [#5845](https://github.com/cockroachdb/cockroach/pull/5845)
* Fixed several potential panics.
  [#6111](https://github.com/cockroachdb/cockroach/pull/6111)
  [#6143](https://github.com/cockroachdb/cockroach/pull/6143)

<h3 id="beta-20160421-performance-improvements">Performance Improvements</h3>

* Improved the performance of schema changes while data is being
  modified.
  [#5996](https://github.com/cockroachdb/cockroach/pull/5996)
* The RPC subsystem is now bypassed for requests to the local node.
  [#6021](https://github.com/cockroachdb/cockroach/pull/6021)
* Information about completed transactions is now cleaned up more
  efficiently.
  [#5882](https://github.com/cockroachdb/cockroach/pull/5882)
* Fixed a leak of goroutines.
  [#6010](https://github.com/cockroachdb/cockroach/pull/6010)
* Reduced memory allocations on the critical path.
  [#6117](https://github.com/cockroachdb/cockroach/pull/6117)
  [#6119](https://github.com/cockroachdb/cockroach/pull/6119)
  [#6140](https://github.com/cockroachdb/cockroach/pull/6140)
  [#6141](https://github.com/cockroachdb/cockroach/pull/6141)
  [#6142](https://github.com/cockroachdb/cockroach/pull/6142)

<h3 id="beta-20160421-doc-improvements">Doc Improvements</h3>

* Overview of [SQL privileges](../v1.0/privileges.html).
* Summaries and required privileges for all supported [SQL statements](../v1.0/sql-statements.html).
* Reference docs for [`DROP DATABASE`](../v1.0/drop-database.html), [`DROP TABLE`](../v1.0/drop-table.html), [`GRANT`](../v1.0/grant.html), [`RENAME DATABASE`](../v1.0/rename-database.html), [`RENAME TABLE`](../v1.0/rename-table.html), [`REVOKE`](../v1.0/revoke.html), and [`SHOW INDEX`](../v1.0/show-index.html).

<h3 id="beta-20160421-contributors">Contributors</h3>

This release includes 74 merged PRs by 21 authors. We would like to
thank the following contributors from the CockroachDB community,
especially first-time contributor
[Andrew NS Yeow](https://github.com/cockroachdb/cockroach/pull/6109).

* Andrew NS Yeow
* Kenji Kaneda
* Kenjiro Nakayama
* Lu Guanqun
* Seif Lotfy
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160428-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160428.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160428.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160428-backwards-incompatible-changes">Backwards-Incompatible Changes</h3>

* Time zone offsets are no longer shown when querying columns of type
  `TIMESTAMP`; the new type `TIMESTAMP WITH TIME ZONE` should be used
  instead. This is more consistent with other databases.
  [#6165](https://github.com/cockroachdb/cockroach/pull/6165)

<h3 id="beta-20160428-new-features">New Features</h3>

* `INTERVAL` values accept two new formats: ISO8601 (`P2H30M`) and the
  PostgreSQL format (`2 hours 30 minutes`) in addition to the existing
  Go style (`2h30m`).
  [#6216](https://github.com/cockroachdb/cockroach/pull/6216)
* Tuples can now be compared in SQL expressions.
  [#6217](https://github.com/cockroachdb/cockroach/pull/6217)
* The server now implements the `systemd` `NOTIFY_SOCKET` protocol.
  [#6268](https://github.com/cockroachdb/cockroach/pull/6268)
* The new flag `cockroach start --background` can be used to start a
  server in the background. This is better than appending `&` because
  the process doesn't return until it is ready to receive traffic.
  [#6268](https://github.com/cockroachdb/cockroach/pull/6268)

<h3 id="beta-20160428-bug-fixes">Bug fixes</h3>

* The SQL shell can once again be suspended with `ctrl-z`.
  [#6171](https://github.com/cockroachdb/cockroach/pull/6171)
* Fixed an error in the SQL shell when the history file contains empty
  lines. [#6192](https://github.com/cockroachdb/cockroach/pull/6192)
* The `--store` and `--key-size` command-line flags are no longer
  marked as required.
  [#6229](https://github.com/cockroachdb/cockroach/pull/6229)
* The command line interface is better about printing errors to
  `stderr`, not just the log file.
  [#6258](https://github.com/cockroachdb/cockroach/pull/6258)
* The `INFO` log file is now created in the correct default location
  (`cockroach-data/logs`) instead of `$TMPDIR`.
  [#6265](https://github.com/cockroachdb/cockroach/pull/6265)
* Fixed errors that could be introduced by updating tables while a
  schema change is in progress.
  [#6160](https://github.com/cockroachdb/cockroach/pull/6160)
* Fixed several potential panics.
  [#6187](https://github.com/cockroachdb/cockroach/pull/6187),
  [#6235](https://github.com/cockroachdb/cockroach/pull/6235),
  [#6242](https://github.com/cockroachdb/cockroach/pull/6242)

<h3 id="beta-20160428-performance-improvements">Performance Improvements</h3>

* Raft processing is no longer blocked while generating a snapshot for
  a new replica.
  [#6253](https://github.com/cockroachdb/cockroach/pull/6253)

<h3 id="beta-20160428-contributors">Contributors</h3>

This release includes 89 merged PRs by 19 authors. We would like to
thank the following contributors from the CockroachDB community,
especially first-time contributor
[Karl Southern](https://github.com/cockroachdb/cockroach/pull/4858).

* Karl Southern
* Kenjiro Nakayama
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160505-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160505.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160505.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160505-new-features">New Features</h3>

* New SQL command `UPSERT` is available. This is syntactically similar
  to `INSERT` but will update the row with the supplied columns if
  there is a conflicting row for the primary key.
  [#6456](https://github.com/cockroachdb/cockroach/pull/6456)
* The SQL type system has been overhauled, reducing the number of
  explicit casts required.
  [RFC](https://github.com/cockroachdb/cockroach/blob/master/docs/RFCS/20160203_typing.md)
* Tuples are now considered for index selection, so `SELECT * FROM t
  WHERE (a, b) > ($1, $2)` can use an index defined on `(a, b)`.
  [#6332](https://github.com/cockroachdb/cockroach/pull/6332)

<h3 id="beta-20160505-performance-improvements">Performance improvements</h3>

* Bulk inserts to previously-empty table spans are now faster.
  [#6375](https://github.com/cockroachdb/cockroach/pull/6375),
  [#6414](https://github.com/cockroachdb/cockroach/pull/6414)
* Ranges that have grown above the target size are now split before
  being rebalanced, reducing memory usage.
  [#6447](https://github.com/cockroachdb/cockroach/pull/6447)
* Reduced rapid memory growth during partitions.
  [#6448](https://github.com/cockroachdb/cockroach/pull/6448)
* [`ALTER TABLE`](../v1.0/alter-table.html) now performs backfill operations in chunks.
  [#6056](https://github.com/cockroachdb/cockroach/pull/6056)
* [`DROP TABLE`](../v1.0/drop-table.html) now uses the schema change mechanism intead of
  synchronously deleting all data.
  [#6336](https://github.com/cockroachdb/cockroach/pull/6336)
* Scanning over records that have only one MVCC version is faster.
  [#6351](https://github.com/cockroachdb/cockroach/pull/6351)
* The command queue now uses coarse-grained spans until a conflict has
  occurred.
  [#6412](https://github.com/cockroachdb/cockroach/pull/6412)
* When a replica is rebalanced from one node to another, the old node
  no longer triggers unnecessary Raft elections.
  [#6423](https://github.com/cockroachdb/cockroach/pull/6423)

<h3 id="beta-20160505-production">Production</h3>

* Servers now attempt to drain more gracefully when restarted.
  [#6313](https://github.com/cockroachdb/cockroach/pull/6313)
* Metrics on lease requests are now available internally.
  [#5596](https://github.com/cockroachdb/cockroach/pull/5596)
* The RocksDB cache will no longer use all available memory if
  `cgroups` reports a limit higher than physical memory.
  [#6379](https://github.com/cockroachdb/cockroach/pull/6379)

<h3 id="beta-20160505-bug-fixes">Bug Fixes</h3>

* The range descriptor cache is now invalidated correctly, fixing a
  bug in which requests could be retried repeatedly on the wrong node.
  [#6425](https://github.com/cockroachdb/cockroach/pull/6425)
* Fixed a bug with some queries using aggregate functions like `MIN()`
  and `MAX()`. [#6380](https://github.com/cockroachdb/cockroach/pull/6380)
* Tuple comparisons now work correctly when one tuple contains `NULL`.
  [#6370](https://github.com/cockroachdb/cockroach/pull/6370)

<h3 id="beta-20160505-doc-updates">Doc Updates</h3>

* Community-supported docs and configuration files for [running CockroachDB inside a single VirtualBox virtual machine](http://uptimedba.github.io/cockroach-vb-single/cockroach-vb-single/home.html). [#263](https://github.com/cockroachdb/docs/pull/263)
* Docs on using [environment variables](../v1.0/cockroach-commands.html#environment-variables) as default values for command-line flags. [#235](https://github.com/cockroachdb/docs/pull/235)
* Docs on using the [`version`](../v1.0/view-version-details.html) and [`node`](../v1.0/view-node-details.html) commands.

<h3 id="beta-20160505-contributors">Contributors</h3>

This release includes 66 merged PRs by 18 authors. We would like to
thank the following contributors from the CockroachDB community, especially first-time contributor [Paul Steffensen](https://github.com/uptimeDBA).

* Bogdan Batog
* il9ue
* Kenji Kaneda
* Paul Steffensen
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160512-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160512.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160512.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160512-upgrade-procedure">Upgrade Procedure</h3>

- This release cannot be run concurrently with older beta releases. Please stop all nodes running older releases before restarting any node with this version.

<h3 id="beta-20160512-new-features">New Features</h3>

- The [`INSERT`](../v1.0/insert.html) statement now accepts an `ON CONFLICT` clause, for a more flexible alternative to `UPSERT`. [#6591](https://github.com/cockroachdb/cockroach/pull/6591)
- The new [`EXPLAIN (TYPES)`](../v1.0/explain.html) subcommand prints information about the types of expressions in a statement. [#6482](https://github.com/cockroachdb/cockroach/pull/6482)
- Added the aggregate functions [`BOOL_AND()`](../v1.0/functions-and-operators.html) and [`BOOL_OR()`](../v1.0/functions-and-operators.html). [#6535](https://github.com/cockroachdb/cockroach/pull/6535)
- The aggregate functions [`SUM(INT)`](../v1.0/functions-and-operators.html) and [`AVG(INT)`](../v1.0/functions-and-operators.html) now return `DECIMAL` instead of `INT` and `FLOAT` respectively. [#6532](https://github.com/cockroachdb/cockroach/pull/6532)
- The new command-line flag [`--raft-tick-interval`](../v1.0/start-a-node.html) allows the raft heartbeat frequency to be changed in high-latency deployments. [#6615](https://github.com/cockroachdb/cockroach/pull/6615)
- [`TIMESTAMP`](../v1.0/timestamp.html) values can now be cast to type `STRING`. [#6605](https://github.com/cockroachdb/cockroach/pull/6605)
- The [`CREATE DATABASE`](../v1.0/create-database.html) statement now accepts an `ENCODING` option for compatibility with PostgreSQL, although `UTF8` is the only supported encoding. [#6614](https://github.com/cockroachdb/cockroach/pull/6614)

<h3 id="beta-20160512-bug-fixes">Bug Fixes</h3>

- Fixed a bug when a single [`INSERT`](../v1.0/insert.html) statement inserts multiple values for the same primary key. [#6564](https://github.com/cockroachdb/cockroach/pull/6564)
- Fixed an inconsistency that could occur when a transaction in [`SNAPSHOT` isolation](../v1.0/transactions.html#isolation-levels) used the internal `DeleteRange` operation. [#6548](https://github.com/cockroachdb/cockroach/pull/6548)
- Fixed an integer underflow that could result in log messages like `transport: http2Server received 4294965918-bytes`. [#6567](https://github.com/cockroachdb/cockroach/pull/6567)
- Long-running transactions are no longer allowed to exceed their table descriptor lease. [#6418](https://github.com/cockroachdb/cockroach/pull/6418)
- Subtracting an `INTERVAL` from a `TIMESTAMP WITH TIME ZONE` returns a `TIMESTAMP WITH TIME ZONE` instead of one without a time zone. [#6540](https://github.com/cockroachdb/cockroach/pull/6540)
- Improved type checking of comparisons involving tuples. [#6517](https://github.com/cockroachdb/cockroach/pull/6517)
- [`CREATE TABLE`](../v1.0/create-table.html), [`ALTER TABLE`](../v1.0/alter-table.html), and [`DROP INDEX`](../v1.0/drop-index.html) now do more validation of their arguments. [#6492](https://github.com/cockroachdb/cockroach/pull/6492)

<h3 id="beta-20160512-performance-improvments">Performance improvments</h3>

- Improved tracking of keys modified during a transaction, improving performance of bulk inserts. [#6611](https://github.com/cockroachdb/cockroach/pull/6611)
- Schema changes can now continue past transient errors. [#6552](https://github.com/cockroachdb/cockroach/pull/6552)

<h3 id="beta-20160512-doc-updates">Doc Updates</h3>

- The new [Tech Talks](https://www.cockroachlabs.com/community/tech-talks/) page links to recordings and slides from talks by CockroachDB founders and engineers.
- Docs for the [built-in SQL client](../v1.0/use-the-built-in-sql-client.html) now demonstrate various ways to execute SQL statements from the command line and run external commands from the interactive shell.
- [Data type](../v1.0/data-types.html) docs now provide details about storage size.
- Although it's not possible to access CockroachDB's key-value store directly, the [FAQ](../v1.0/frequently-asked-questions.html#can-i-use-cockroachdb-as-a-key-value-store) now suggests a SQL alternative.
- [Replication recommendations](../v1.0/configure-replication-zones.html#node-replica-recommendations) now address cross-datacenter scenarios.

<h3 id="beta-20160512-contributors">Contributors</h3>

This release includes 87 merged PRs by 18 authors. We would like to
thank the following contributor from the CockroachDB community:

* Kenji Kaneda
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160519-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160519.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160519.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160519-backwards-incompatible-changes">Backwards-Incompatible Changes</h3>

- [`TIMESTAMP`](../v1.0/timestamp.html) values are now truncated to microsecond resolution when sent over the network for compatibility with the PostgreSQL protocol. The `format_timestamp_ns(ts)` or `extract(nanosecond from ts)` [functions](../v1.0/functions-and-operators.html) can be used to access the full nanosecond precision of a timestamp. The `now()`, `current_timestamp()`, and `statement_timestamp()` functions are truncated to microsecond resolution to avoid confusion when timestamp values are used in unique indexes; the new `current_timestamp_ns()` function can be used to get a non-truncated timestamp. [#6604](https://github.com/cockroachdb/cockroach/pull/6604)

<h3 id="beta-20160519-new-features">New Features</h3>

- `DO NOTHING` is now supported in [`INSERT ... ON CONFLICT`](../v1.0/insert.html) statements. [#6633](https://github.com/cockroachdb/cockroach/pull/6633)
- [`CHECK`](../v1.0/check.html) constraints can now be specified at the table level. [#6625](https://github.com/cockroachdb/cockroach/pull/6625)
- Binary encoding is now supported in the network protocol for `BOOL`, `FLOAT`, `DECIMAL`, and `STRING` types, improving compatiblity with some PostgreSQL drivers. [#6661](https://github.com/cockroachdb/cockroach/pull/6661)
- The new `cockroach freeze-cluster` [command](../v1.0/cockroach-commands.html) has been added to the command-line interface; it will be used in the upgrade process for a future beta release. [#6675](https://github.com/cockroachdb/cockroach/pull/6675)

<h3 id="beta-20160519-bug-fixes">Bug Fixes</h3>

- [`EXPLAIN DELETE`](../v1.0/explain.html) no longer executes the `DELETE` statement. [#6622](https://github.com/cockroachdb/cockroach/pull/6622)
- [`CHECK`](../v1.0/check.html) constraints are now enforced during [`UPDATE`](../v1.0/update.html) statements. [#6753](https://github.com/cockroachdb/cockroach/pull/6753)
- [`CHECK`](../v1.0/check.html) constraints now work correctly when columns have been dropped. [#6730](https://github.com/cockroachdb/cockroach/pull/6730)
- Tuples and the `DEFAULT` keyword now work in [`INSERT ... ON CONFLICT DO UPDATE`](../v1.0/insert.html) statements. [#6636](https://github.com/cockroachdb/cockroach/pull/6636)
- Errors are now reported with standard PostgreSQL error codes in more places. [#6652](https://github.com/cockroachdb/cockroach/pull/6652), [#6554](https://github.com/cockroachdb/cockroach/pull/6554)
- Fixed a panic while a node is attempting a clean shutdown. [#6677](https://github.com/cockroachdb/cockroach/pull/6677)
- Internal retry logic has been improved so requests are no longer stuck retrying endlessly on the wrong replica. [#6688](https://github.com/cockroachdb/cockroach/pull/6688)

<h3 id="beta-20160519-performance-improvements">Performance Improvements</h3>

- Snapshot generation is now throttled to reduce peak memory consumption.
  [#6632](https://github.com/cockroachdb/cockroach/pull/6632)
- Improved performance for transactions with low contention. [#6413](https://github.com/cockroachdb/cockroach/pull/6413)
- Improved performance for `UPSERT` statements (and the equivalent [`INSERT ... ON CONFLICT DO UPDATE`](../v1.0/insert.html) statements) when the table has no secondary indexes and values are supplied for all columns in the table. [#6673](https://github.com/cockroachdb/cockroach/pull/6673)

<h3 id="beta-20160519-doc-updates">Doc Updates</h3>

- [SQL Grammar](../v1.0/sql-grammar.html) diagrams have been streamlined to reduce unnecessary duplication.   
- Docs on SQL [Constraints](../v1.0/constraints.html) are now available. [#280](https://github.com/cockroachdb/docs/pull/280)
- Docs on the [`CREATE TABLE`](../v1.0/create-table.html) statement are now available. [#296](https://github.com/cockroachdb/docs/pull/296)

<h3 id="beta-20160519-contributors">Contributors</h3>

This release includes 65 merged PRs by 18 authors. We would like to
thank the following contributor from the CockroachDB community:

* Kenji Kaneda
* Paul Steffensen
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160526-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160526.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160526.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160526-backwards-incompatible-changes">Backwards-Incompatible Changes</h3>

- Numeric literals containing a decimal point are now treated as type [`DECIMAL`](../v1.0/decimal.html) instead of type [`FLOAT`](../v1.0/float.html), unless type inference determines that `FLOAT` should be used. In some cases, an explicit `CAST(x AS FLOAT)` may be needed. [#6752](https://github.com/cockroachdb/cockroach/pull/6752)
- The custom error codes `CR000` (indicating a transaction needs to be [retried](../v1.0/transactions.html#transaction-retries)) and `CR001` (indicating a transaction is in an invalid state) have been replaced with the PostgreSQL standard error codes `40001` (serialization failure) and `25000` (invalid transaction state), respectively. [#6797](https://github.com/cockroachdb/cockroach/pull/6797)

<h3 id="beta-20160526-bug-fixes">Bug Fixes</h3>

- Fixed problems when tables are renamed or dropped and recreated in rapid succession. [#6595](https://github.com/cockroachdb/cockroach/pull/6595)
- [`DROP DATABASE`](../v1.0/drop-database.html) now works correctly with quoted names. [#6851](https://github.com/cockroachdb/cockroach/pull/6851)
- Gracefully shutting down a node now completes faster. [#6777](https://github.com/cockroachdb/cockroach/pull/6777)
- [`INSERT ... ON CONFLICT DO NOTHING`](../v1.0/insert.html) no longer crashes the server when no conflicting index is given. [#6795](https://github.com/cockroachdb/cockroach/pull/6795)
- [`INSERT ... ON CONFLICT DO NOTHING`](../v1.0/insert.html) now requires only the `INSERT` permission instead of both `INSERT` and `UPDATE`. [#6827](https://github.com/cockroachdb/cockroach/pull/6827)
- Numeric literals in scientific notation are now case-insensitive. [#6864](https://github.com/cockroachdb/cockroach/pull/6864)
- `TIMESTAMP WITHOUT TIME ZONE` is now recognized as a synonym for [`TIMESTAMP`](../v1.0/timestamp.html). [#6888](https://github.com/cockroachdb/cockroach/pull/6888)
- Attempting to access a database that does not exist now returns PostgreSQL error code `3D000` ("invalid catalog name") instead of a generic error. [#6680](https://github.com/cockroachdb/cockroach/pull/6680)

<h3 id="beta-20160526-internal-changes">Internal Changes</h3>

- Most of the `/_status/` HTTP endpoints now use GRPC internally. [#6702](https://github.com/cockroachdb/cockroach/pull/6702) [#6788](https://github.com/cockroachdb/cockroach/pull/6788)
- The `cockroach exterminate` command (which did not work) has been removed. [#6780](https://github.com/cockroachdb/cockroach/pull/6780)
- Garbage collection now retains the first value outside the configured interval, since it was the current value at the start of the interval. [#6778](https://github.com/cockroachdb/cockroach/pull/6778)

<h3 id="beta-20160526-doc-updates">Doc Updates</h3>

- Docs on the [`INSERT`](../v1.0/insert.html) statement are now available. [#308](https://github.com/cockroachdb/docs/pull/308)
- Docs on the [`UPSERT`](../v1.0/upsert.html) statement are now available. [#308](https://github.com/cockroachdb/docs/pull/308)

<h3 id="beta-20160526-contributors">Contributors</h3>

This release includes 58 merged PRs by 16 authors. We would like to
thank the following contributor from the CockroachDB community:

* Kenji Kaneda
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160602-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160602.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160602.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160602-new-features">New Features</h3>

- String literals can now be parsed as [`DATE`](../v1.0/date.html), [`TIMESTAMP`](../v1.0/timestamp.html), [`TIMESTAMPTZ`](../v1.0/timestamp.html), or [`INTERVAL`](../v1.0/interval.html) without an explicit cast. [#6925](https://github.com/cockroachdb/cockroach/pull/6925)
- Floor division is now supported with a new [operator](../v1.0/functions-and-operators.html#operators), `//`. [#6642](https://github.com/cockroachdb/cockroach/pull/6642)
- Sub-queries are now allowed in `LIMIT`, `OFFSET`, and `RETURNING` expressions. [#6735](https://github.com/cockroachdb/cockroach/pull/6735)

<h3 id="beta-20160602-bug-fixes">Bug Fixes</h3>

- Fixed a missing error check that could result in inconsistencies when transactions conflict. [#6899](https://github.com/cockroachdb/cockroach/pull/6899)

<h3 id="beta-20160602-performance-improvements">Performance Improvements</h3>

- Improved performance of one-phase transactions. [#6857](https://github.com/cockroachdb/cockroach/pull/6857), [#6861](https://github.com/cockroachdb/cockroach/pull/6861)
- Improved the ability of `MIN()` and `MAX()` [functions](../v1.0/functions-and-operators.html) to detect the ordering of the data and read only a single row. [#6891](https://github.com/cockroachdb/cockroach/pull/6891)

<h3 id="beta-20160602-doc-updates">Doc Updates</h3>

- Added a tutorial on [building an Application with CockroachDB and SQLAlchemy](https://www.cockroachlabs.com/blog/building-application-cockroachdb-sqlalchemy-2/)
- Added docs on [how CockroachDB handles `NULL` values](../v1.0/null-handling.html) in various contexts. [#333](https://github.com/cockroachdb/docs/pull/333)
- Improved guidance on [Contributing to CockroachDB docs](https://github.com/cockroachdb/docs/blob/master/CONTRIBUTING.md). [#344](https://github.com/cockroachdb/docs/pull/344)
- Improved [zone configuration examples](../v1.0/configure-replication-zones.html#basic-examples). [#327](https://github.com/cockroachdb/docs/pull/327)

<h3 id="beta-20160602-contributors">Contributors</h3>

This release includes 55 merged PRs by 18 authors. We would like to
thank the following contributors from the CockroachDB community, especially first-time contributors, Sean Loiselle and Thonakom Sangnetra:

- Sean Loiselle
- Thanakom Sangnetra
- Paul Steffensen
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160609-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160609.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160609.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160609-new-features">New Features</h3>

- The [`SERIAL`](../v1.0/serial.html) column type is now supported as an alias for `INT DEFAULT unique_rowid()`. In CockroachDB, this type defaults to a unique 64-bit signed integer that is the combination of the insert timestamp and the ID of the node executing the insert. It therefore differs from similar types in PostgreSQL and MySQL, which auto-increment integers in an approximate sequence. [#7032](https://github.com/cockroachdb/cockroach/pull/7032)
- For client-side [transaction retries](../v1.0/transactions.html#transaction-retries), reissuing the original `SAVEPOINT cockroach_restart` now has the same effect as `ROLLBACK TO SAVEPOINT cockroach_restart`. This improves compatibility with some client drivers. [#6955](https://github.com/cockroachdb/cockroach/pull/6955)
- `FAMILY` is now a reserved word in the SQL dialect in preparation for a future feature. [#7069](https://github.com/cockroachdb/cockroach/pull/7069)

<h3 id="beta-20160609-bug-fixes">Bug Fixes</h3>

- The [command-line SQL shell](../v1.0/use-the-built-in-sql-client.html) is now able to print non-ASCII characters. [#7045](https://github.com/cockroachdb/cockroach/pull/7045), [#7048](https://github.com/cockroachdb/cockroach/pull/7048)
- Commands issued with a timestamp outside the garbage collection window will now always fail. [#6992](https://github.com/cockroachdb/cockroach/pull/6992)
- All aggregate functions now return `NULL` when run on a table with no rows. [#7043](https://github.com/cockroachdb/cockroach/pull/7043)

<h3 id="beta-20160609-performance-improvements">Performance Improvements</h3>

- <a href="http://www.canonware.com/jemalloc/" data-proofer-ignore><code>jemalloc</code></a> is now used as the memory allocator for the C++ portions of the server. The build tag `stdmalloc` can be used to switch back to the standard `malloc`. [#7006](https://github.com/cockroachdb/cockroach/pull/7006)
- Raft logs are now garbage collected more aggressively. This should generally make snapshots smaller, reducing memory pressure, but sometimes it may cause more snapshots to be sent. [#7040](https://github.com/cockroachdb/cockroach/pull/7040)
- Reduced allocations in [`INSERT`](../v1.0/insert.html) and [`UPDATE`](../v1.0/update.html) statements involving secondary indexes. [#7011](https://github.com/cockroachdb/cockroach/pull/7011)
- Improved performance of conditional puts with no existing value. [#7016](https://github.com/cockroachdb/cockroach/pull/7016)
- Improved performance of small transactions. [#7015](https://github.com/cockroachdb/cockroach/pull/7015)

<h3 id="beta-20160609-doc-updates">Doc Updates</h3>

- The [Build an App](../v1.0/build-a-rust-app-with-cockroachdb.html) tutorial now demonstrates connecting to CockroachDB from the [Rust Postgres driver](../v1.0/install-client-drivers.html).
- Docs on the [`CREATE TABLE`](../v1.0/create-table.html) statement now offer both basic and expanded grammar diagrams. [#347](https://github.com/cockroachdb/docs/pull/347)
- Docs on [constraints](../v1.0/constraints.html) now include diagrams of all table-level and row-level constraints. [#361](https://github.com/cockroachdb/docs/pull/361)

<h3 id="beta-20160609-contributors">Contributors</h3>

This release includes 56 merged PRs by 17 authors. We would like to
thank the following contributors from the CockroachDB community, especially first-time contributor Alex Robinson:

- Alex Robinson
- Kenji Kaneda
- Paul Steffensen
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160616-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160616.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160616.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160616-deprecation-notice">Deprecation Notice</h3>

- Integers with a leading zero (e.g., `0755`) are currently treated as octal. In a future release, leading zeros will be ignored and the numbers will be treated as decimal. [#7205](https://github.com/cockroachdb/cockroach/pull/7205)

<h3 id="beta-20160616-new-features">New Features</h3>

- `SELECT` statements now accept an `AS OF SYSTEM TIME` clause to read values from the recent past (up to the GC policy set in the [zone configuration](../v1.0/configure-replication-zones.html)). [#7139](https://github.com/cockroachdb/cockroach/pull/7139)
- [Hexadecimal byte string literals](../v1.0/string.html) of the form `x'f00d'` can now be used to create byte strings containing arbitrary characters. [#7138](https://github.com/cockroachdb/cockroach/pull/7138)
- `BIGSERIAL` and `SMALLSERIAL` are now supported as aliases for [`SERIAL`](../v1.0/serial.html). All three types use the same 64-bit value size. [#7187](https://github.com/cockroachdb/cockroach/pull/7187)

<h3 id="beta-20160616-bug-fixes">Bug Fixes</h3>

- Fixed a panic in some uses of subqueries. [#6994](https://github.com/cockroachdb/cockroach/pull/6994), [#7146](https://github.com/cockroachdb/cockroach/pull/7146)
- [`ALTER TABLE ADD COLUMN`](../v1.0/alter-table.html) now allows the addition of columns with a uniqueness constraint only when the table is empty. [#7094](https://github.com/cockroachdb/cockroach/pull/7094)
- Improved availability when [`--raft-tick-interval`](../v1.0/start-a-node.html#flags) is increased from its default value. [#7086](https://github.com/cockroachdb/cockroach/pull/7086)
- Improved reporting of errors from single statements run outside transactions. [#7080](https://github.com/cockroachdb/cockroach/pull/7080)
- Invalid octal literals (e.g., `09`) no longer crash the server. [#7134](https://github.com/cockroachdb/cockroach/pull/7134)
- When [`ALTER TABLE`](../v1.0/alter-table.html) fails, it now rolls back dependent items in the correct order. [#6789](https://github.com/cockroachdb/cockroach/pull/6789)
- [Aggregate functions](../v1.0/functions-and-operators.html#aggregate-functions) like `SUM()` are no longer allowed in `CHECK` or `DEFAULT` expressions. [#7221](https://github.com/cockroachdb/cockroach/pull/7221)

<h3 id="beta-20160616-performance-improvements">Performance Improvements</h3>

- Improved rate limiting of snapshots during rebalancing, reducing memory usage and improving availability. [#6878](https://github.com/cockroachdb/cockroach/pull/6878)
- Splitting a range that has grown beyond the target size is now faster. [#7118](https://github.com/cockroachdb/cockroach/pull/7118)
- Raft elections are now initiated lazily instead of shortly after server startup. [#7085](https://github.com/cockroachdb/cockroach/pull/7085)
- The raft log is now garbage-collected more eagerly. [#7125](https://github.com/cockroachdb/cockroach/pull/7125)
- Increased RocksDB block size, which reduces memory usage. [#7219](https://github.com/cockroachdb/cockroach/pull/7219)

<h3 id="beta-20160616-doc-updates">Doc Updates</h3>

- Docs on the [Built-in SQL client](../v1.0/use-the-built-in-sql-client.html) now cover pretty-printing to the standard output when executing SQL from the command line. The examples have been improved as well. [#373](https://github.com/cockroachdb/docs/pull/373)
- Docs on the [`STRING`](../v1.0/string.html) and [`INT`](../v1.0/int.html) data types now cover hexadecimal-encoded literal format. Also, the `STRING` docs now cover escape string format. [#392](https://github.com/cockroachdb/docs/pull/392)
- On [Functions and Operators](../v1.0/functions-and-operators.html), functions are now identified as "built-in" or "aggregate". Also, function categorization has been improved. [#379](https://github.com/cockroachdb/docs/pull/379), [#387](https://github.com/cockroachdb/docs/pull/387)
- On [`CREATE INDEX`](../v1.0/create-index.html), the syntax diagram has been clarified and expanded. [#382](https://github.com/cockroachdb/docs/pull/382)

<h3 id="beta-20160616-contributors">Contributors</h3>

This release includes 80 merged PRs by 19 authors. We would like to
thank the following contributors from the CockroachDB community:

- Kenji Kaneda
- Paul Steffensen
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160629-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160629.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160629.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160629-new-features">New Features</h3>

- A prototype implementation of `JOIN` (non-optimized) is now available. [#7202](https://github.com/cockroachdb/cockroach/pull/7202)
- [Column Families](../v1.0/column-families.html) are a new, more efficient representation of SQL tables. Each column family is a group of columns in a table that are stored as a single underlying key-value pair. New tables created with multi-column families will not be compatible with versions of CockroachDB earlier than `beta-20160629`. However, no migration of existing tables is necessary; the previous format corresponds to a separate column family for each column in the table. [#7466](https://github.com/cockroachdb/cockroach/pull/7466), [#7408](https://github.com/cockroachdb/cockroach/pull/7408), [RFC](https://github.com/cockroachdb/cockroach/blob/master/docs/RFCS/20151214_sql_column_families.md)
- [`EXPLAIN`](../v1.0/explain.html) can now be used with `CREATE`, `DROP`, and `ALTER` statements. [#7269](https://github.com/cockroachdb/cockroach/pull/7269)
- The [built-in SQL client](../v1.0/use-the-built-in-sql-client.html) now prints tab-separated values instead of ASCII-art tables when `stdout` is not a TTY (unless `--pretty` is used). [#7268](https://github.com/cockroachdb/cockroach/pull/7268)
- In interactive mode, the [built-in SQL client](../v1.0/use-the-built-in-sql-client.html) now prints the number of rows at the end of a result set. [#7266](https://github.com/cockroachdb/cockroach/pull/7266)
- Prepared statements can now be deallocated with the `DEALLOCATE` command. [#7367](https://github.com/cockroachdb/cockroach/pull/7367)
- Added support for interval types in placeholders. [#7382](https://github.com/cockroachdb/cockroach/pull/7382)
- Added support for hexadecimal-encoded [`STRING`](../v1.0/string.html) literals. [#7138](https://github.com/cockroachdb/cockroach/pull/7138)

<h3 id="beta-20160629-performance-improvements">Performance Improvements</h3>

- The load balancing system now operates at a steadier pace, reducing spikes in memory usage and reaching equilibrium more quickly. [#7147](https://github.com/cockroachdb/cockroach/pull/7147)
- The block cache is now shared across stores on the same node. [#7496](https://github.com/cockroachdb/cockroach/pull/7496)
- Initial replication in a new cluster is now significantly faster. [#7355](https://github.com/cockroachdb/cockroach/pull/7355)
- The Raft log is now more aggressively truncated. [#7125](https://github.com/cockroachdb/cockroach/pull/7125)
- The RocksDB block-size is now set to a more reasonable value. [#7276](https://github.com/cockroachdb/cockroach/pull/7276)
- A new reservation system now ensures that there is enough free space and not too many existing reservations before trying to replicate a range to a new store. This stops the thundering herd that can occur when adding a new node to a cluster. [#7147](https://github.com/cockroachdb/cockroach/pull/7147)
- Miscellaneous performance improvements in the underlying data distribution and replication protocol.

<h3 id="beta-20160629-bug-fixes">Bug Fixes</h3>

- Fixed a bug that could cause a server crash on startup. [#7447](https://github.com/cockroachdb/cockroach/pull/7447)
- Improved the handling of `NULL` values in arithmetic and comparison operations. [#7341](https://github.com/cockroachdb/cockroach/pull/7341)
- Fixed a crash when session arguments could not be parsed. [#7231](https://github.com/cockroachdb/cockroach/pull/7231)
- Improved error messages for parts of the PostgreSQL protocol we do not support. [#7233](https://github.com/cockroachdb/cockroach/pull/7233)
- `AS OF SYSTEM TIME` can now be used in prepared statements. [#7251](https://github.com/cockroachdb/cockroach/pull/7251)
- Raft messages are no longer canceled due to unrelated errors. [#7252](https://github.com/cockroachdb/cockroach/pull/7252)
- [Constraint](../v1.0/constraints.html) names that are specified at the column level are now preserved. [#7271](https://github.com/cockroachdb/cockroach/pull/7271)
- When [`COMMIT`](../v1.0/commit-transaction.html) returns an error, the transaction is considered closed and a separate `ROLLBACK` is no longer necessary. [#7282](https://github.com/cockroachdb/cockroach/pull/7282)
- The [built-in SQL client](../v1.0/use-the-built-in-sql-client.html) now escapes strings in a format that the SQL parser will accept. [#7294](https://github.com/cockroachdb/cockroach/pull/7294)
- Fixed issues when two snapshots were being sent simultaneously. [#7299](https://github.com/cockroachdb/cockroach/pull/7299)
- When a column is [renamed](../v1.0/rename-column.html), any `CHECK` constraints referring to that column are now updated. [#7311](https://github.com/cockroachdb/cockroach/pull/7311)
- When piping commands into the [built-in SQL client](../v1.0/use-the-built-in-sql-client.html), the last line was previously ignored. Now it will be executed if it ends with a semicolon, or report an error if it is non-empty but not a complete statement. [#7328](https://github.com/cockroachdb/cockroach/pull/7328)
- When [`cockroach quit`](../v1.0/stop-a-node.html) fails to drain a node, it is now forced to quit. [#7483](https://github.com/cockroachdb/cockroach/pull/7483)
- Fixed a case in which a removed replica could prevent the rebalance queue from making progress. [#7507](https://github.com/cockroachdb/cockroach/pull/7507)
- Fixed a bug that slowed down population of new replicas. [#7252](https://github.com/cockroachdb/cockroach/pull/7252)

<h3 id="beta-20160629-internal-changes">Internal Changes</h3>

- The Admin UI has been rewritten in a new framework. [#7242](https://github.com/cockroachdb/cockroach/pull/7242)
- The Admin UI now uses serialized protocol buffers when communicating with CockroachDB servers. [#7178](https://github.com/cockroachdb/cockroach/pull/7178), [#7242](https://github.com/cockroachdb/cockroach/pull/7242)

<h3 id="beta-20160629-contributors">Contributors</h3>

This release includes 160 merged PRs by 22 authors. We would like to
thank the following contributors from the CockroachDB community, especially first-time contributor [phynalle](https://github.com/cockroachdb/cockroach/pull/7361):

- Jingguo Yao
- Kenji Kaneda
- phynalle
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160714-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160714.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160714.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160714-upgrade-notes">Upgrade Notes</h3>

- This release cannot be run concurrently with older beta releases. Please stop all nodes running older releases before restarting any node with this version.
- After running this release, it is impossible to downgrade to any release older than [`beta-20160629`](beta-20160629.html).
- This release uses more open file descriptors than older releases. It is recommended to set the process's file descriptor limit to at least 10000. See [Recommended Production Settings](../v1.0/recommended-production-settings.html) for more details.

<h3 id="beta-20160714-new-features">New Features</h3>

- The `cockroach dump` command can now be used to back up the contents of a table. The output of `dump` is a series of SQL statements that can be used to recreate the table. [#7511](https://github.com/cockroachdb/cockroach/pull/7511)
- The `ILIKE` [operator](../v1.0/functions-and-operators.html) for case-insensitive matching is now supported. [#7635](https://github.com/cockroachdb/cockroach/pull/7635)
- Four new [operators](../v1.0/functions-and-operators.html) for regular expression matches are now supported: `~` (regex match), `!~` (negated regex match), `~*` (case-insensitive regex match), `!~*` (negated case-insensitive regex matcH). [#7686](https://github.com/cockroachdb/cockroach/pull/7686)
- The new `SHOW CONSTRAINTS` statement can be used to show the constraints on a table. [#7584](https://github.com/cockroachdb/cockroach/pull/7584)
- `FOREIGN KEY` constraints can now have names. [#7627](https://github.com/cockroachdb/cockroach/pull/7627)
- The [`--http-addr`](../v1.0/start-a-node.html) flag can be used to control the network interface used for the web UI. [#7475](https://github.com/cockroachdb/cockroach/pull/7475)
- [`ALTER TABLE ADD COLUMN`](../v1.0/alter-table.html) can now be used to create [column families](../v1.0/column-families.html). [#7711](https://github.com/cockroachdb/cockroach/pull/7711)
- CockroachDB can now be built on FreeBSD. See this [blog post](https://www.cockroachlabs.com/blog/critters-in-a-jar-running-cockroachdb-in-a-freebsd-jail/) for details. [#7545](https://github.com/cockroachdb/cockroach/pull/7545)
- The `uidebug` `Makefile` target, used for development of the web UI, has been replaced with the environment variable `COCKROACH_DEBUG_UI=1`. [#7601](https://github.com/cockroachdb/cockroach/pull/7601)

<h3 id="beta-20160714-performance-improvements">Performance Improvements</h3>

- [Column families](../v1.0/column-families.html) are now used by default, improving performance of all tables created in this release and beyond. [#7623](https://github.com/cockroachdb/cockroach/pull/7623)
- Removed replicas are now garbage collected more quickly. [#7533](https://github.com/cockroachdb/cockroach/pull/7533)
- RocksDB is now configured to use more, smaller files. This improves performance by reducing the amount of data rewritten during compactions, but increases the number of open file descriptors used by the process. [#7532](https://github.com/cockroachdb/cockroach/pull/7532)
- The server now increases its soft file descriptor limit if it is too low and this is allowed by the hard limit. [#7747](https://github.com/cockroachdb/cockroach/pull/7747)
- The raft log can now be truncated even if a replica is behind, reducing the size of snapshots that must be transmitted over the network (but somewhat increasing the likelihood that a snapshot will be needed instead of replaying the log). [#7438](https://github.com/cockroachdb/cockroach/pull/7438)
- Raft-related messages are now sent in separate streams for each range. [#7534](https://github.com/cockroachdb/cockroach/pull/7534)
- Raft commands for queries that have been abandoned by the client are no longer retried internally. [#7605](https://github.com/cockroachdb/cockroach/pull/7605)
- Table leases are now released when connections are closed, allowing schema changes to proceed without waiting for leases to expire. [#7661](https://github.com/cockroachdb/cockroach/pull/7661)

<h3 id="beta-20160714-bug-fixes">Bug Fixes</h3>

- The [command-line SQL client](../v1.0/use-the-built-in-sql-client.html) is now smarter about semicolons and `` commands inside string literals. [#7510](https://github.com/cockroachdb/cockroach/pull/7510)
- `LIMIT` is now applied correctly on queries that use `JOIN`. [#7546](https://github.com/cockroachdb/cockroach/pull/7546)
- The "CGo Calls" graph in the web UI is now displayed as a rate instead of a cumulative total. [#7597](https://github.com/cockroachdb/cockroach/pull/7597)
- The [`cockroach quit`](../v1.0/stop-a-node.html) command now waits for the server to stop before returning. [#7603](https://github.com/cockroachdb/cockroach/pull/7603)
- Building CockroachDB in a Docker container on Linux with `build/builder.sh` no longer requires the container and host toolchains to be the same. [#7626](https://github.com/cockroachdb/cockroach/pull/7626)
- Fixed a deadlock in table lease acquisition. [#7504](https://github.com/cockroachdb/cockroach/pull/7504)
- The [`TIMESTAMP WITH TIME ZONE`](../v1.0/timestamp.html) type is now reported correctly in the network protocol. [#7642](https://github.com/cockroachdb/cockroach/pull/7642)
- [Constraint](../v1.0/constraints.html) names are now required to be unique. [#7629](https://github.com/cockroachdb/cockroach/pull/7629)
- The "Events" tab in the web UI now includes events for schema changes. [#7571](https://github.com/cockroachdb/cockroach/pull/7571)
- Fixed several server panics in expression normalization. [#7512](https://github.com/cockroachdb/cockroach/pull/7512)
- Fixed a data race when a transaction is abandoned by the client. [#7738](https://github.com/cockroachdb/cockroach/pull/7738)
- Fixed a scenario in which intents could not be resolved. [#7744](https://github.com/cockroachdb/cockroach/pull/7744)
- RocksDB is no longer allowed to use all available file descriptors. [#7747](https://github.com/cockroachdb/cockroach/pull/7747)
- Using `*` as an argument to functions other than `COUNT(*)` no longer causes the server to panic. [#7751](https://github.com/cockroachdb/cockroach/pull/7751)
- Fixed a deadlock during shutdown. [#7770](https://github.com/cockroachdb/cockroach/pull/7770)

<h3 id="beta-20160714-doc-updates">Doc Updates</h3>

- Docs on [installing CockroachDB in Docker](../v1.0/install-cockroachdb.html) now recommend using the new Docker applications for Mac and Windows.
- The new [Start a Cluster in Docker](../v1.0/start-a-local-cluster-in-docker.html) page demonstrates how to run a multi-node cluster across multiple Docker containers on a single host, using Docker volumes to persist node data.
- Docs on the [`DELETE`](../v1.0/delete.html) statement are now available.

<h3 id="beta-20160714-contributors">Contributors</h3>

This release includes 131 merged PRs by 25 authors. We would like to
thank the following contributors from the CockroachDB community, especially first-time contributor [songhao](https://github.com/cockroachdb/cockroach/pull/7692):

- Jason E. Aten
- Jingguo Yao
- Kenji Kaneda
- Sean Loiselle
- songhao
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160721-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160721.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160721.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160721-new-features">New Features</h3>

- Metrics are now exported on `/_status/vars` in a format suitable for aggregation by Prometheus. [#7895](https://github.com/cockroachdb/cockroach/pull/7895)

<h3 id="beta-20160721-build-changes">Build Changes</h3>

- Go 1.6.3 and 1.7rc2 are now supported. [#7811](https://github.com/cockroachdb/cockroach/pull/7811)
- The versions of Docker built for Mac and Windows are now supported. Users of a `docker-machine` VM may need to set environment variables by hand as this case is no longer detected automatically. [#7820](https://github.com/cockroachdb/cockroach/pull/7820)

<h3 id="beta-20160721-ui-changes">UI Changes</h3>

- The Admin UI now displays a warning when there are fewer than three nodes. [#7783](https://github.com/cockroachdb/cockroach/pull/7783)

<h3 id="beta-20160721-performance-improvements">Performance Improvements</h3>

- Writes to different ranges are now performed in parallel. [#7860](https://github.com/cockroachdb/cockroach/pull/7860)
- The first range descriptor is kept more up-to-date. [#7766](https://github.com/cockroachdb/cockroach/pull/7766)
- Ranges are now considered for splits after any replication or rebalancing change. [#7800](https://github.com/cockroachdb/cockroach/pull/7800)
- An existing table lease can now be reused without writing to the lease table as long as it has enough time left before expiration. [#7781](https://github.com/cockroachdb/cockroach/pull/7781)
- The rebalancing system now avoids moving the current leader of a range. [#7918](https://github.com/cockroachdb/cockroach/pull/7918)
- Transaction records related to splits are now garbage-collected promptly. [#7903](https://github.com/cockroachdb/cockroach/pull/7903)

<h3 id="beta-20160721-bug-fixes">Bug Fixes</h3>

- Command history works again in the [command-line SQL interface](../v1.0/use-the-built-in-sql-client.html). [#7818](https://github.com/cockroachdb/cockroach/pull/7818)
- The [`cockroach dump`](../v1.0/sql-dump.html) command now works with tables that have [`DECIMAL`](../v1.0/decimal.html) columns that specify a precision and scale. [#7842](https://github.com/cockroachdb/cockroach/pull/7842)
- Fixed several panics when handling invalid SQL commands. [#7867](https://github.com/cockroachdb/cockroach/pull/7867) [#7868](https://github.com/cockroachdb/cockroach/pull/7868)
- [`ALTER TABLE ADD COLUMN`](../v1.0/alter-table.html) now supports the `IF NOT EXISTS` modifier. [#7898](https://github.com/cockroachdb/cockroach/pull/7898)
- Fixed a race in gossip status logging. [#7836](https://github.com/cockroachdb/cockroach/pull/7836)

<h3 id="beta-20160721-doc-updates">Doc Updates</h3>

- Feedback can now be submitted from the bottom of any page of our docs. [#467](https://github.com/cockroachdb/docs/pull/467)
- Updated [Recommended Production Settings](../v1.0/recommended-production-settings.html) to provide OS-specific instructions for increasing the file descriptors limit. [#459](https://github.com/cockroachdb/docs/pull/459)
- Updated [INTERVAL](../v1.0/interval.html) to cover all supported interval formats: Golang, Traditional Postgres, and ISO 8601. [#462](https://github.com/cockroachdb/docs/pull/462)
- Updated [Start a Cluster in Docker](../v1.0/start-a-local-cluster-in-docker.html) to work for Docker on Windows. [#457](https://github.com/cockroachdb/docs/pull/457)

<h3 id="beta-20160721-contributors">Contributors</h3>

This release includes 76 merged PRs by 21 authors. We would especially like to
thank first-time contributors [Christian Meunier](https://github.com/cockroachdb/cockroach/pull/7937) and [Dharmesh Kakadia](https://github.com/dharmeshkakadia) from the CockroachDB community.
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160728-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160728.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160728.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160728-new-features">New Features</h3>

- Foreign keys can now reference multiple columns. [#8033](https://github.com/cockroachdb/cockroach/pull/8033)
- The [`dump`](../v1.0/sql-dump.html) command can now be run by any user with `SELECT` privilege on the table. [#7974](https://github.com/cockroachdb/cockroach/pull/7974)
- [`INTEGER`](../v1.0/int.html) and [`DECIMAL`](../v1.0/decimal.html) types can now be mixed in arithmetic expressions without casts. [#7756](https://github.com/cockroachdb/cockroach/pull/7756)
- The [`--join`](../v1.0/start-a-node.html) flag can now be specified multiple times, as an alternative to specifying a comma-separated list. [#7876](https://github.com/cockroachdb/cockroach/pull/7876)

<h3 id="beta-20160728-bug-fixes">Bug Fixes</h3>

- Range leases are now preserved across splits, fixing a source of inconsistent reads. [#7955](https://github.com/cockroachdb/cockroach/pull/7955)
- Fixed a panic when single-statement [transactions](../v1.0/transactions.html) were aborted after an automatic retry. [#8010](https://github.com/cockroachdb/cockroach/pull/8010)
- Parsing of time zone offsets is now more lenient, improving compatibility with JDBC drivers. [#7929](https://github.com/cockroachdb/cockroach/pull/7929)
- Unbounded columns are now allowed in empty [column families](../v1.0/column-families.html). [#7969](https://github.com/cockroachdb/cockroach/pull/7969)
- The target columns of [`INSERT`](../v1.0/insert.html) and [`UPDATE`](../v1.0/update.html) statements are now required to be given in unqualified form. [#7911](https://github.com/cockroachdb/cockroach/pull/7911)
- Fixed a potential deadlock in the gossip subsystem and SQL leases. [#8011](https://github.com/cockroachdb/cockroach/pull/8011), [#8019](https://github.com/cockroachdb/cockroach/pull/8019)

<h3 id="beta-20160728-performance-improvements">Performance Improvements</h3>

- Snapshots are now sent prior to the Raft configuration change, minimizing the window of reduced availability. [#7833](https://github.com/cockroachdb/cockroach/pull/7833)

<h3 id="beta-20160728-doc-updates">Doc Updates</h3>

- Added docs on the [`cockroach dump`](../v1.0/sql-dump.html) command. [#472](https://github.com/cockroachdb/docs/pull/472)
- Updated [Recommended Production Settings](../v1.0/recommended-production-settings.html) to clarify how CockroachDB allocates file descriptors when the limit is under the recommended amount. [#480](https://github.com/cockroachdb/docs/pull/480)
- [SQL statements](../v1.0/sql-statements.html), [data types](../v1.0/data-types.html), and data definition topics are now available at-a-glance in the sidebar. [#483](https://github.com/cockroachdb/docs/pull/483)

<h3 id="beta-20160728-contributors">Contributors</h3>

This release includes 63 merged PRs by 17 authors. We would like to thank first-time contributor [Rushi Agrawal](https://github.com/cockroachdb/cockroach/pull/7876) from the CockroachDB community.
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160829-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160829.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160829.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160829-general-changes">General Changes</h3>

- CockroachDB now uses Go 1.7. [#8579](https://github.com/cockroachdb/cockroach/pull/8579)
- CockroachDB now uses RocksDB 4.9. [#8815](https://github.com/cockroachdb/cockroach/pull/8815)

<h3 id="beta-20160829-command-line-interface-changes">Command-Line Interface Changes</h3>

- The [`cockroach zone set`](../v1.0/configure-replication-zones.html) command no longer takes its input directly on the command line. Instead, it accepts a `--file` flag to read from a file, or `--file=-` to read from standard input. [#7953](https://github.com/cockroachdb/cockroach/pull/7953)

<h3 id="beta-20160829-new-features">New Features</h3>

- `AS OF SYSTEM TIME` can now be used with `JOIN` queries. [#8198](https://github.com/cockroachdb/cockroach/pull/8198)
- The type `BIT` now works correctly (as a shorthand for `BIT(1)`). The length limit is now enforced. [#8326](https://github.com/cockroachdb/cockroach/pull/8326)
- The `SHOW` commands now only show tables that the current user has permission to access. [#8070](https://github.com/cockroachdb/cockroach/pull/8070)
- [Foreign keys](../v1.0/foreign-key.html) can now use a prefix of an index. [#8059](https://github.com/cockroachdb/cockroach/pull/8059)
- The standard `information_schema` database is now partially supported. New tables will be added to this database in future beta releases. [#7965](https://github.com/cockroachdb/cockroach/pull/7965), [#8119](https://github.com/cockroachdb/cockroach/pull/8119)

<h3 id="beta-20160829-bug-fixes">Bug Fixes</h3>

- Clusters with a large number of ranges no longer experience persistently broken connections on node restarts. [#8828](https://github.com/cockroachdb/cockroach/pull/8828)
- The `RENAME` command now requires the `DROP` privilege on the table or database. It is no longer possible to rename the `system` database. [#7998](https://github.com/cockroachdb/cockroach/pull/7998)
- The `repeat()` and `substr()` [functions](../v1.0/functions-and-operators.html) with very large numeric arguments will no longer crash the server as easily. [#8073](https://github.com/cockroachdb/cockroach/pull/8073), [#8078](https://github.com/cockroachdb/cockroach/pull/8078)
- Certain errors now cause a replica to be marked as corrupt so the corruption will not be replicated to other nodes. [#7684](https://github.com/cockroachdb/cockroach/pull/7684)
- A `CloseComplete` packet is now sent in response to a `Close` command, improving compatibility with come PostgreSQL client drivers (including the Elixir driver). [#8309](https://github.com/cockroachdb/cockroach/pull/8309)
- SQL name parsing has been improved to fix several panics and allow foreign key constraints that span databases. [#8152](https://github.com/cockroachdb/cockroach/pull/8152)
- Fixed some panics. [#8283](https://github.com/cockroachdb/cockroach/pull/8283), [#8282](https://github.com/cockroachdb/cockroach/pull/8282)
- Fixed a deadlock if a range grew too large. [#8387](https://github.com/cockroachdb/cockroach/pull/8387)
- Fixed a race in which multiple conflicting snapshots could be accepted at the same time. [#8365](https://github.com/cockroachdb/cockroach/pull/8365)
- Decimal values are now represented correctly in the binary protocol. [#8319](https://github.com/cockroachdb/cockroach/pull/8319)

<h3 id="beta-20160829-performance-improvements">Performance Improvements</h3>

- Snapshots are now sent synchronously during replica changes. This controls the rate of the replication process and prevents spikes in memory usage that often caused servers to crash. [#8613](https://github.com/cockroachdb/cockroach/pull/8613)
- Raft logs are now truncated less aggressively, reducing the chance that replication will need to send a snapshot instead of the log. [#8343](https://github.com/cockroachdb/cockroach/pull/8343), [#8629](https://github.com/cockroachdb/cockroach/pull/8629), [#8656](https://github.com/cockroachdb/cockroach/pull/8656)
- Snapshots and the raft log are now written more efficiently. [#8644](https://github.com/cockroachdb/cockroach/pull/8644)
- Raft log entries are now cached. [#8494](https://github.com/cockroachdb/cockroach/pull/8494)
- Raft groups are now created lazily at startup. [#8592](https://github.com/cockroachdb/cockroach/pull/8592)
- Raft heartbeats are now sent less often by default. [#8695](https://github.com/cockroachdb/cockroach/pull/8695)
- Improved performance and reliability of clusters with large numbers of ranges. [#8125](https://github.com/cockroachdb/cockroach/pull/8125), [#8162](https://github.com/cockroachdb/cockroach/pull/8162), [#8495](https://github.com/cockroachdb/cockroach/pull/8495)
- The heuristics used by the rebalancing system have been improved. [#8124](https://github.com/cockroachdb/cockroach/pull/8124)
- Some noisy log messages have been removed or reduced. [#8071](https://github.com/cockroachdb/cockroach/pull/8071), [#8021](https://github.com/cockroachdb/cockroach/pull/8021), [#8240](https://github.com/cockroachdb/cockroach/pull/8240), [#8292](https://github.com/cockroachdb/cockroach/pull/8292), [#8529](https://github.com/cockroachdb/cockroach/pull/8529), [#8687](https://github.com/cockroachdb/cockroach/pull/8687), [#8689](https://github.com/cockroachdb/cockroach/pull/8689)
- The gossip network reconnects more reliably after a failure. [#8128](https://github.com/cockroachdb/cockroach/pull/8128)
- RPC connections to failed nodes are now detected sooner. [#8163](https://github.com/cockroachdb/cockroach/pull/8163)
- The cache of the first range descriptor is now properly invalidated. [#8163](https://github.com/cockroachdb/cockroach/pull/8163)
- Removed replicas are now garbage-collected sooner in many cases. [#8172](https://github.com/cockroachdb/cockroach/pull/8172)
- The resolution of the block profiler has been reduced, saving CPU. [#8384](https://github.com/cockroachdb/cockroach/pull/8384)
- Range lease extensions no longer block concurrent reads. [#8352](https://github.com/cockroachdb/cockroach/pull/8352)

<h3 id="beta-20160829-ui-changes">UI Changes</h3>

- The "capacity used" is now computed correctly. [#8048](https://github.com/cockroachdb/cockroach/pull/8048)
- The CPU and garbage-collection graphs now display averages. [#8048](https://github.com/cockroachdb/cockroach/pull/8048)
- The Databases section now includes more details. [#8364](https://github.com/cockroachdb/cockroach/pull/8364)

<h3 id="beta-20160829-doc-updates">Doc Updates</h3>

- The new [SQL Feature Support](../v1.0/sql-feature-support.html) page explains which standard SQL features are supported by CockroachDB. [#550](https://github.com/cockroachdb/docs/pull/550)
- The new Features on Develop Branch page tracks features that are available on the `develop` branch but not yet on `master`. [#552](https://github.com/cockroachdb/docs/pull/552) (Page no longer available.)
- Added docs on [foreign key constraints](../v1.0/foreign-key.html). [#528](https://github.com/cockroachdb/docs/pull/528)
- Added docs on the [`TRUNCATE`](../v1.0/truncate.html) statement. [#542](https://github.com/cockroachdb/docs/pull/542)
- Updated [Recommended Production Settings](../v1.0/recommended-production-settings.html) to include cache size recommendations for machines running multiple applications and `systemd`-specific instructions for increasing the file descriptors limit. [#532](https://github.com/cockroachdb/docs/pull/532), [#554](https://github.com/cockroachdb/docs/pull/554)
- Fixed errors in the commands for [starting CockroachDB in Docker](../v1.0/start-a-local-cluster-in-docker.html). [#567](https://github.com/cockroachdb/docs/pull/567)

<h3 id="beta-20160829-contributors">Contributors</h3>

This release includes 280 merged PRs by 26 authors. We would like to thank the following contributors from the CockroachDB community:

- Christian Koep
- Dolf Schimmel
- songhao
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160908-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160908.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160908.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160908-general-changes">General Changes</h3>

- CockroachDB has reverted to RocksDB 4.8. [#9118](https://github.com/cockroachdb/cockroach/pull/9118)
- The logging format has changed to include a goroutine ID. [#8977](https://github.com/cockroachdb/cockroach/pull/8977)
- CockroachDB now builds correctly when Git worktrees are used; as a consequence Git version 2.5 or newer is now required when [building from source](../v1.0/install-cockroachdb.html). [#9072](https://github.com/cockroachdb/cockroach/pull/9072)

<h3 id="beta-20160908-command-line-interface-changes">Command-Line Interface Changes</h3>

- The `--from` and `--to` arguments of debugging commands now support backslash-escaped keys. [#8903](https://github.com/cockroachdb/cockroach/pull/8903)
- If any [environment variables](../v1.0/cockroach-commands.html#environment-variables) are used to configure the server, the names of those variables are printed to the logs. [#9069](https://github.com/cockroachdb/cockroach/pull/9069)

<h3 id="beta-20160908-bug-fixes">Bug fixes</h3>

- Fixed a bug that would result in the server locking up after a few hours on a machine or VM with only one CPU. [#8908](https://github.com/cockroachdb/cockroach/pull/8908)
- Fixed another cause of persistently broken connections on node restarts. [#8947](https://github.com/cockroachdb/cockroach/pull/8947)
- [`CREATE TABLE`](../v1.0/create-table.html) now reports errors correctly instead of failing silently. [#9011](https://github.com/cockroachdb/cockroach/pull/9011)
- The replica garbage collection process is no longer confused by uninitialized replicas. [#9021](https://github.com/cockroachdb/cockroach/pull/9021)
- Fixed various data races. [#8865](https://github.com/cockroachdb/cockroach/pull/8865), [#8933](https://github.com/cockroachdb/cockroach/pull/8933)
- Fixed a panic in the time-series query system. [#9038](https://github.com/cockroachdb/cockroach/pull/9038)

<h3 id="beta-20160908-performance-improvements">Performance Improvements</h3>

- Internal locking mechanisms have been refactored to improve parallelism. [#8941](https://github.com/cockroachdb/cockroach/pull/8941)
- GRPC request tracing has been disabled due to its memory cost. [#9113](https://github.com/cockroachdb/cockroach/pull/9113)
- Raft leadership is more reliably transferred to coincide with the range lease. [#8932](https://github.com/cockroachdb/cockroach/pull/8932)
- Raft snapshots are now limited to one at a time on both the receiving and sending nodes. [#8974](https://github.com/cockroachdb/cockroach/pull/8974)
- Node startup time has been improved. [#9020](https://github.com/cockroachdb/cockroach/pull/9020)
- Reduced memory usage of the timestamp cache. [#9102](https://github.com/cockroachdb/cockroach/pull/9102)
- Old replicas are now garbage-collected with higher priority. [#9019](https://github.com/cockroachdb/cockroach/pull/9019)
- Transaction records for splits and replica changes are now garbage-collected sooner. [#9036](https://github.com/cockroachdb/cockroach/pull/9036)

<h3 id="beta-20160908-doc-updates">Doc Updates</h3>

- Added docs on [deploying CockroachDB on Google Cloud Platform GCE](../v1.0/deploy-cockroachdb-on-google-cloud-platform.html). [#574](https://github.com/cockroachdb/docs/pull/574)
- Added docs on [orchestrating CockroachDB with Kubernetes](../v1.0/orchestrate-cockroachdb-with-kubernetes.html). [#584](https://github.com/cockroachdb/docs/pull/584)
- Updated [troubleshooting](../v1.0/troubleshoot.html) docs to cover cases when nodes will not join a cluster. [#610](https://github.com/cockroachdb/docs/pull/610)
- Each version's release notes now link to the corresponding Mac and Linux binaries. [#604](https://github.com/cockroachdb/docs/pull/604)
- Updated docs on [secure local](../v1.0/secure-a-cluster.html) and [secure distributed](../v1.0/manual-deployment.html) deployment to show how to stop nodes. [#619](https://github.com/cockroachdb/docs/pull/619)  

<h3 id="beta-20160908-contributors">Contributors</h3>

This release includes 180 merged PRs by 17 authors. We would like to thank first-time contributor [Henry Escobar](https://github.com/HenryEscobar) from the CockroachDB community.
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160915-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160915.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160915.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160915-general-changes">General Changes</h3>

- CockroachDB is now built with Go 1.7.1. [#9288](https://github.com/cockroachdb/cockroach/pull/9288)
- CockroachDB no longer requires Git 2.5; the minimum supported version is now 1.8. [#9325](https://github.com/cockroachdb/cockroach/pull/9325)

<h3 id="beta-20160915-bug-fixes">Bug Fixes</h3>

- Fixed an inconsistency that could occur when two conflicting transactions were assigned the same timestamp. [#9100](https://github.com/cockroachdb/cockroach/pull/9100)
- Nodes with multiple stores now export metrics in a format that works with Prometheus. [#9322](https://github.com/cockroachdb/cockroach/pull/9322)

<h3 id="beta-20160915-performance-improvements">Performance Improvements</h3>

- Improved concurrency of Raft processing so snapshots and replica garbage collection do not block other ranges. [#9176](https://github.com/cockroachdb/cockroach/pull/9176) [#9299](https://github.com/cockroachdb/cockroach/pull/9299)
- The rebalancing system is now more tolerant of small imbalances, making the range distribution more likely to reach a steady state. [#9230](https://github.com/cockroachdb/cockroach/pull/9230)
- Reduced memory used by debugging traces. [#9258](https://github.com/cockroachdb/cockroach/pull/9258)
- Ranges now become responsive sooner after startup. [#9276](https://github.com/cockroachdb/cockroach/pull/9276)
- Removed an internal timeout that caused unnecessary retry loops. [#9234](https://github.com/cockroachdb/cockroach/pull/9234)
- Try harder to ensure that the range lease and raft leadership are co-located. [#8834](https://github.com/cockroachdb/cockroach/pull/8834)
- Reduced memory used by Raft. [#9193](https://github.com/cockroachdb/cockroach/pull/9193)
- The consistency checker now uses less memory when an inconsistency is found. [#9159](https://github.com/cockroachdb/cockroach/pull/9159)
- The internal replica queues can now time out and recover from a replica that gets stuck. [#9312](https://github.com/cockroachdb/cockroach/pull/9312)
- Removed a redundant verification process that periodically scanned over all data. [#9333](https://github.com/cockroachdb/cockroach/pull/9333)

<h3 id="beta-20160915-doc-updates">Doc Updates</h3>

- Added docs for [deploying CockroachDB on AWS](../v1.0/deploy-cockroachdb-on-aws.html). [#640](https://github.com/cockroachdb/docs/pull/640)
- Added a "back to top" feature to improve the usability of longer pages. [#638](https://github.com/cockroachdb/docs/pull/638)
- Updated [Start a Local Cluster](../v1.0/start-a-local-cluster.html) to suggest manually setting each node's cache size to avoid memory errors when testing against a local cluster in a serious way. [#652](https://github.com/cockroachdb/docs/pull/652)
- Updated docs on [transaction retries](../v1.0/transactions.html#transaction-retries) to provide the correct error code. [#647](https://github.com/cockroachdb/docs/pull/647)

<h3 id="beta-20160915-contributors">Contributors</h3>

This release includes 66 merged PRs by 17 authors.
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160929-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160929.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160929.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160929-new-features">New Features</h3>

- The [`--advertise-host`](../v1.0/start-a-node.html#flags) flag can now be used to override the address to advertise to other CockroachDB nodes. [#9503](https://github.com/cockroachdb/cockroach/pull/9503)
- The [`--http-host`](../v1.0/start-a-node.html#flags) flag sets the address to bind to for HTTP requests. Together with `--http-port`, it will replace `--http-addr` in a future release. [#9573](https://github.com/cockroachdb/cockroach/pull/9573)
- More metrics are now exported about the internal garbage collection of deleted values. [#9571](https://github.com/cockroachdb/cockroach/pull/9571)
- More metrics are now exported about file descriptor usage. [#9582](https://github.com/cockroachdb/cockroach/pull/9582)
- The system now uses OpenTracing's new key-value style logging APIs. [#9578](https://github.com/cockroachdb/cockroach/pull/9578)

<h3 id="beta-20160929-bug-fixes">Bug Fixes</h3>

- Fixed an inconsistency that could occur when transactions race with garbage collection. [#9377](https://github.com/cockroachdb/cockroach/pull/9377)
- Retried `BeginTransaction` operations no longer leak internal errors to the client. [#9305](https://github.com/cockroachdb/cockroach/pull/9305)
- Brief service interruptions are now avoided after shard splits. [#9550](https://github.com/cockroachdb/cockroach/pull/9550)

<h3 id="beta-20160929-ui-changes">UI Changes</h3>

- The UI no longer crashes when a tab is reopened after being in the background for a long time. [#9042](https://github.com/cockroachdb/cockroach/pull/9042)

<h3 id="beta-20160929-performance-improvements">Performance Improvements</h3>

- Ranges which are not receiving traffic now stop sending raft heartbeats. [#9383](https://github.com/cockroachdb/cockroach/pull/9383)
- Raft snapshots are now sent as a stream instead of one large message. [#9292](https://github.com/cockroachdb/cockroach/pull/9292)
- The rebalancer is now better about noticing under-full stores. [#9415](https://github.com/cockroachdb/cockroach/pull/9415)
- Raft messages are now sent in batches. [#9485](https://github.com/cockroachdb/cockroach/pull/9485)
- Nodes are now quicker to fail over to other replicas when one is unresponsive. [#9239](https://github.com/cockroachdb/cockroach/pull/9239)
- Dropping a table or index is now faster. [#9419](https://github.com/cockroachdb/cockroach/pull/9419)
- Re-enabled consensus-level optimizations for network i/o. [#9606](https://github.com/cockroachdb/cockroach/pull/9606)

<h3 id="beta-20160929-doc-updates">Doc Updates</h3>

- Improved the SQL docs for granting privileges on databases and tables: [`GRANT`](../v1.0/grant.html). [#687](https://github.com/cockroachdb/docs/pull/687)
- Completed the SQL docs for:
    - Getting user privileges on databases and tables: [`SHOW GRANTS`](../v1.0/show-grants.html). [#687](https://github.com/cockroachdb/docs/pull/687)
    - Setting and getting the default database for a session: [`SET DATABASE`](../v1.0/set-vars.html) and [`SHOW DATABASE`](../v1.0/show-vars.html). [#671](https://github.com/cockroachdb/docs/pull/671), [#683](https://github.com/cockroachdb/docs/pull/683)
    - Setting and getting the default time zone for a session: [`SET TIME ZONE`](../v1.0/set-vars.html) and [`SHOW TIME ZONE`](../v1.0/show-vars.html). [#680](https://github.com/cockroachdb/docs/pull/680)
    - Changing the name of a table column or index: [`RENAME COLUMN`](../v1.0/rename-column.html) and [`RENAME INDEX`](../v1.0/rename-index.html). [#678](https://github.com/cockroachdb/docs/pull/678), [#679](https://github.com/cockroachdb/docs/pull/679)
- Updated high-level overviews of primary [CockroachDB features](../v1.0/strong-consistency.html) and added related links. [#699](https://github.com/cockroachdb/docs/pull/699)

<h3 id="beta-20160929-contributors">Contributors</h3>

This release includes 78 merged PRs by 19 authors. We would like to thank the following contributors from the CockroachDB community, especially first-time contributor Haines Chan:

- Haines Chan
- Jingguo Yao
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

There aren't many user-visible changes in this week's release - an artifact of our recent stability efforts, which funneled user-visible changes to a secondary development branch. Our concerted stability effort is nearing its end, and we are preparing to include these features in next week's release.

<h3 id="beta-20161006-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20161006.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20161006.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20161006-internal-changes">Internal Changes</h3>

- Nodes now periodically compare their configured maximum clock offset and exit fatally if they find another node operating with a different configuration. [#9612](https://github.com/cockroachdb/cockroach/pull/9612)
- Internal low-level instrumentation has been added for debugging performance bottlenecks. [#9638](https://github.com/cockroachdb/cockroach/pull/9638)
- General improvements have been made to the tracing infrastructure. [#9641](https://github.com/cockroachdb/cockroach/pull/9641)

<h3 id="beta-20161006-doc-updates">Doc Updates</h3>

- Updated various aspects of the CockroachDB [design document](https://github.com/cockroachdb/cockroach/blob/master/docs/design.md):
    - [Overview](https://github.com/cockroachdb/cockroach/blob/master/docs/design.md#overview) [#9648](https://github.com/cockroachdb/cockroach/pull/9648), [#9653](https://github.com/cockroachdb/cockroach/pull/9653)
    - [Lock-Free Distributed Transactions](https://github.com/cockroachdb/cockroach/blob/master/docs/design.md#lock-free-distributed-transactions) and [Logical Map Content](https://github.com/cockroachdb/cockroach/blob/master/docs/design.md#logical-map-content) [#9646](https://github.com/cockroachdb/cockroach/pull/9646)
    - [Strict Serializability (Linearizability)](https://github.com/cockroachdb/cockroach/blob/master/docs/design.md#strict-serializability-linearizability) [#9644](https://github.com/cockroachdb/cockroach/pull/9644)
    - [Node and Cluster Metrics](https://github.com/cockroachdb/cockroach/blob/master/docs/design.md#node-and-cluster-metrics) [#9647](https://github.com/cockroachdb/cockroach/pull/9647)
    - [SQL](https://github.com/cockroachdb/cockroach/blob/master/docs/design.md#sql) [#9651](https://github.com/cockroachdb/cockroach/pull/9651)
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

This week's release includes many user-visible changes and features that have been in development since our [stability-focused "code yellow"](https://www.cockroachlabs.com/blog/cant-run-100-node-cockroachdb-cluster/) started back in August. When we entered "code yellow", all work unrelated to stability was done in a secondary development environment. Since then, we've made great progress, and so have moved many of these new features back into our main development environment.

<h3 id="beta-20161013-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20161013.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20161013.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20161013-backwards-incompatible-changes">Backwards-Incompatible Changes</h3>

- [`TIMESTAMP`](../v1.0/timestamp.html) values are now stored with microsecond precision instead of nanoseconds. All nanosecond-related functions have been removed. An existing table `t` with nanosecond timestamps in column `s` can round them to microseconds with `UPDATE t SET s = s + '0s'`. However, note that this could potentially cause uniqueness problems if the timestamp is a primary key. [#8864](https://github.com/cockroachdb/cockroach/pull/8864)
- [`TIMESTAMP`](../v1.0/timestamp.html) values (without `TIME ZONE`) are now parsed in UTC, not in the session time zone. [#9444](https://github.com/cockroachdb/cockroach/pull/9444)
- The deprecated `--http-addr` flag has been removed. When [starting a node](../v1.0/start-a-node.html), use the `--http-host` flag instead to specify the address to listen on for Admin UI HTTP requests. [#9725](https://github.com/cockroachdb/cockroach/pull/9725)

<h3 id="beta-20161013-sql-language-changes">SQL Language Changes</h3>

- Tables can now be [interleaved](../v1.0/interleave-in-parent.html) into other tables. Interleaving tables improves query performance by optimizing the key-value structure of closely related tables, attempting to keep data on the same key-value range if it’s likely to be read and written together. [#7985](https://github.com/cockroachdb/cockroach/pull/7985)
- The [`CREATE TABLE AS`](../v1.0/create-table-as.html) statement can now be used to create a table based on the results of a `SELECT` statement. [#8802](https://github.com/cockroachdb/cockroach/pull/8802), [#9278](https://github.com/cockroachdb/cockroach/pull/9278)
- The [`ALTER TABLE ... SPLIT AT`](../v1.0/alter-table.html) command can now be used to force a range split at a specified key. [#8938](https://github.com/cockroachdb/cockroach/pull/8938)
- Added new `information_schema` metatables as well as initial support for the `pg_catalog` database. This work is part of our ongoing effort to provide standard database introspection required by popular ORMs. [#8433](https://github.com/cockroachdb/cockroach/pull/8433), [#8498](https://github.com/cockroachdb/cockroach/pull/8498), [#9565](https://github.com/cockroachdb/cockroach/pull/9565), [#9114](https://github.com/cockroachdb/cockroach/pull/9114), [#9104](https://github.com/cockroachdb/cockroach/pull/9104)
- [`CHECK`](../v1.0/check.html) constraints can now be added with the [`ALTER TABLE ADD CHECK`](../v1.0/alter-table.html) and `ALTER TABLE VALIDATE` statements. [#9127](https://github.com/cockroachdb/cockroach/pull/9127) [#9152](https://github.com/cockroachdb/cockroach/pull/9152)
- The [`ALTER TABLE DROP CONSTRAINT`](../v1.0/alter-table.html) statement can now drop [`CHECK`](../v1.0/check.html) and [`FOREIGN KEY`](../v1.0/foreign-key.html) constraints. [#8747](https://github.com/cockroachdb/cockroach/pull/8747)
- The [`SHOW CONSTRAINTS`](../v1.0/show-constraints.html) statement now requires the user to have privileges for the requested table. [#8658](https://github.com/cockroachdb/cockroach/pull/8658)
- The [`EXPLAIN`](../v1.0/explain.html) statement now works correctly for `VALUES` statements containing subqueries. [#8970](https://github.com/cockroachdb/cockroach/pull/8970)
- The [`TRUNCATE`](../v1.0/truncate.html) statement now implements the `CASCADE` modifier. [#9240](https://github.com/cockroachdb/cockroach/pull/9240)
- [`TIMESTAMP`](../v1.0/timestamp.html) values that include a time zone can now omit the minutes field of the time zone offset, for compatibility with PostgreSQL. [#8666](https://github.com/cockroachdb/cockroach/pull/8666)
- [`INTERVAL`](../v1.0/interval.html) values can now be input in a colon-delimited format (H:M or H:M_S), for compatibility with PostgreSQL. [#8603](https://github.com/cockroachdb/cockroach/pull/8603)
- The `INT8` type is now supported as an alias for [`INT`](../v1.0/int.html). [#8858](https://github.com/cockroachdb/cockroach/pull/8858)
- [`INTERVAL`](../v1.0/interval.html), [`TIMESTAMP`](../v1.0/timestamp.html), [`TIMESTAMPTZ`](../v1.0/timestamp.html), and [`DATE`](../v1.0/date.html) values can now be casted to/from more types. [#9731](https://github.com/cockroachdb/cockroach/pull/9731)
- The window functions `row_number()`, `rank()`, `dense_rank()`, `percent_rank()`, `cume_dist()`, `ntile()`, `lead()`, `lag()`, `first_value()`, `last_value()`, `nth_value()` are now supported. [#8928](https://github.com/cockroachdb/cockroach/pull/8928), [#9321](https://github.com/cockroachdb/cockroach/pull/9321), [#9335](https://github.com/cockroachdb/cockroach/pull/9335)
- The `exp()` [function](../v1.0/functions-and-operators.html) returns an error if its argument is greater than 1024 instead of performing excessively expensive computation. [#8822](https://github.com/cockroachdb/cockroach/pull/8822)
- The `round()` [function](../v1.0/functions-and-operators.html) now breaks ties by rounding to the nearest even value (also known as bankers' rounding). It is now faster, and returns an error when given an excessively large number of digits. [#8822](https://github.com/cockroachdb/cockroach/pull/8822)
- The `concat_agg` [aggregate function](../v1.0/functions-and-operators.html#aggregate-functions) is now supported. [#9690](https://github.com/cockroachdb/cockroach/pull/9690)
- New [date/time functions](../v1.0/functions-and-operators.html), `extract_duration()`, `experimental_strptime()` and `experimental_strftime()`, are now supported. [#9734](https://github.com/cockroachdb/cockroach/pull/9734), [#9762](https://github.com/cockroachdb/cockroach/pull/9762)

<h3 id="beta-20161013-protocol-changes">Protocol Changes</h3>

- The `COPY` protocol is now supported on the server side with the `COPY FROM` statement. The [`cockroach sql`](../v1.0/use-the-built-in-sql-client.html) command-line tool does not yet recognize this command but it can be used with other client interfaces. [#8756](https://github.com/cockroachdb/cockroach/pull/8756)
- [`DECIMAL`](../v1.0/decimal.html) values are now encoded correctly for drivers that use the binary format. [#8319](https://github.com/cockroachdb/cockroach/pull/8319)
- [`TIMESTAMP`](../v1.0/timestamp.html), [`TIMESTAMPTZ`](../v1.0/timestamp.html) and [`DATE`](../v1.0/date.html) values can now use the binary protocol format for clients that support it. [#8590](https://github.com/cockroachdb/cockroach/pull/8590), [#8762](https://github.com/cockroachdb/cockroach/pull/8762)
- [`NULL` values](../v1.0/null-handling.html) are now sent with the correct type OID, which is required by some PostgreSQL drivers. [#9331](https://github.com/cockroachdb/cockroach/pull/9331)
- The [`CREATE TABLE`](../v1.0/create-table.html) and [`CREATE DATABASE`](../v1.0/create-database.html) statements now return the standard PostgreSQL error code when the table or database already exists. [#9235](https://github.com/cockroachdb/cockroach/pull/9235)

<h3 id="beta-20161013-command-line-interface-changes">Command-line Interface Changes</h3>

- The [`cockroach start`](../v1.0/start-a-node.html#standard-output) command now prints additional fields to `stdout`: `clusterID`, `nodeID`, and `status`, which indicates whether the node started a new cluster, joined an existing cluster for the first time, or rejoined an existing cluster. [#9066](https://github.com/cockroachdb/cockroach/pull/9066)
- The [`cockroach start`](../v1.0/start-a-node.html) command now terminates with a non-zero exit status if it was interrupted with **Ctrl+C** or a signal. [#9051](https://github.com/cockroachdb/cockroach/pull/9051)
- The [`cockroach zone set`](../v1.0/configure-replication-zones.html) command now supports the `--disable-replication` flag, which sets the desired replication factor to 1. [#9253](https://github.com/cockroachdb/cockroach/pull/9253)
- The [`cockroach gen example-data`](../v1.0/generate-cockroachdb-resources.html) command can now be used to generate SQL for example databases. [#9231](https://github.com/cockroachdb/cockroach/pull/9231), [#9475](https://github.com/cockroachdb/cockroach/pull/9475)
- The [`cockroach sql`](../v1.0/use-the-built-in-sql-client.html) shell now presents a new prompt when **Ctrl+C** is pressed after the user starts entering a statement. [#9704](https://github.com/cockroachdb/cockroach/pull/9704)
- When using **Ctrl+R** in the [`cockroach sql`](../v1.0/use-the-built-in-sql-client.html) shell to recall a previous statement from the shell history, the search is now case-insensitive. [#9704](https://github.com/cockroachdb/cockroach/pull/9704)
- The [`cockroach sql`](../v1.0/use-the-built-in-sql-client.html) shell now reports unterminated final statements as errors instead of ignoring them. [#8838](https://github.com/cockroachdb/cockroach/pull/8838)
- The [`cockroach sql`](../v1.0/use-the-built-in-sql-client.html) shell now reports when the connection to the server is lost and a new connection is opened. [#9613](https://github.com/cockroachdb/cockroach/pull/9613)
- The [`cockroach sql`](../v1.0/use-the-built-in-sql-client.html) shell now ignores lines that contain only whitespace (e.g., comments). [#9243](https://github.com/cockroachdb/cockroach/pull/9243)
- The [`cockroach sql`](../v1.0/use-the-built-in-sql-client.html) shell now prints expressions in [`EXPLAIN`](../v1.0/explain.html) and the shell history such as `E::T` or `E:::T` in the same format entered instead of using the longer `CAST` or `TYPE_ANNOTATE` syntax. [#9739](https://github.com/cockroachdb/cockroach/pull/9739)
- The [`cockroach sql`](../v1.0/use-the-built-in-sql-client.html) shell now stops processing statements at the first error encountered when reading from a file (non-interactively). This behavior is customizable with the new [`unset errexit`](../v1.0/use-the-built-in-sql-client.html#sql-shell-commands) shell command. [#9610](https://github.com/cockroachdb/cockroach/pull/9610)
- The [`cockroach sql`](../v1.0/use-the-built-in-sql-client.html) shell now checks if a statement or query is syntactically valid on the client side before it is sent to the server. This ensures that a typo or mistake during user entry does not inconveniently abort an ongoing transaction previously started interactively. This behavior is customizable with the new [`unset check_syntax`](../v1.0/use-the-built-in-sql-client.html#sql-shell-commands) shell command. [#9610](https://github.com/cockroachdb/cockroach/pull/9610)
- The [`cockroach sql`](../v1.0/use-the-built-in-sql-client.html) shell now works better with multi-line statements. In particular, users will find it easier to recall and edit previously entered multi-line statements. This behavior is customizable with a new command [`unset normalize_history`](../v1.0/use-the-built-in-sql-client.html#sql-shell-commands). [#9610](https://github.com/cockroachdb/cockroach/pull/9610)
- The [`cockroach sql`](../v1.0/use-the-built-in-sql-client.html) shell now works correctly under `kubectl` and other environments that hide the size of the terminal. [#9097](https://github.com/cockroachdb/cockroach/pull/9097)

<h3 id="beta-20161013-ui-changes">UI Changes</h3>

- The time scale selector in the UI now works more reliably. [#8573](https://github.com/cockroachdb/cockroach/pull/8573)
- Additional database and table-level details are now available. [#9621](https://github.com/cockroachdb/cockroach/pull/9621)
- Displaying graphs for a longer timescales is now much faster. [#8805](https://github.com/cockroachdb/cockroach/pull/8805)
- The default graph time scale is now chosen based on the age of the cluster. [#9340](https://github.com/cockroachdb/cockroach/pull/9340)
- Node logs are now accessible in the UI. [#8572](https://github.com/cockroachdb/cockroach/pull/8572)
- The UI can now be built with live reload support. [#8679](https://github.com/cockroachdb/cockroach/pull/8679)
- Exposed idiomatic bucketed histograms on prometheus endpoint. [#9810](https://github.com/cockroachdb/cockroach/pull/9810)
- Exposed Mutex timing metrics. [#9769](https://github.com/cockroachdb/cockroach/pull/9769)

<h3 id="beta-20161013-bug-fixes">Bug Fixes</h3>

- Fixed some panics in handling invalid SQL statements. [#9049](https://github.com/cockroachdb/cockroach/pull/9049), [#9050](https://github.com/cockroachdb/cockroach/pull/9050)
- Fixed an issue that sometimes caused transactions to restart twice in a row. [#8596](https://github.com/cockroachdb/cockroach/pull/8596)
- [`STRING`](../v1.0/string.html) literals containing non-UTF-8 data are now rejected. [#9094](https://github.com/cockroachdb/cockroach/pull/9094)
- The [`UPSERT`](../v1.0/upsert.html) statement now works correctly during online schema changes.[#9481](https://github.com/cockroachdb/cockroach/pull/9481)
- Aggregate and window functions in `GROUP BY` ordinal expressions are now rejected without crashing. [#9629](https://github.com/cockroachdb/cockroach/pull/9629)
- The unsupported `ALTER TABLE ... ALTER COLUMN ... SET TYPE ...` statement now reports an error to the client instead of crashing the server. [#8747](https://github.com/cockroachdb/cockroach/pull/8747)
- Slightly improved support for 32-bit systems. Note that 32-bit architectures remain officially unsupported. [#9491](https://github.com/cockroachdb/cockroach/pull/9491)
- The admin UI now propagates timeouts to the server to avoid dangling requests. [#8546](https://github.com/cockroachdb/cockroach/pull/8546)
- Fixed issues with duplicate column qualifications in `CREATE TABLE` statements [#9868](https://github.com/cockroachdb/cockroach/pull/9868)
- Empty statements are now handled correctly in prepared statements. [#9811](https://github.com/cockroachdb/cockroach/pull/9811)
- Fixed a Raft assertion caused by insufficient locking. [#9814](https://github.com/cockroachdb/cockroach/pull/9814)

<h3 id="beta-20161013-performance-improvements">Performance Improvements</h3>

- Tuned RocksDB settings to reduce write stalls. [#9663](https://github.com/cockroachdb/cockroach/issues/9663)
- Minor performance optimization to avoid reading an internal metadata key that will be immediately overwritten. [#9263](https://github.com/cockroachdb/cockroach/pull/9263)
- Improved concurrency to prevent certain slow operations from dramatically impacting overall performance. [#9622](https://github.com/cockroachdb/cockroach/pull/9622)
- [`DROP INDEX`](../v1.0/drop-index.html) and [`DROP TABLE`](../v1.0/drop-table.html) are now performed in chunks instead of one big transaction. [#8870](https://github.com/cockroachdb/cockroach/pull/8870), [#8885](https://github.com/cockroachdb/cockroach/pull/8885)
- The SQL query processor now tracks its memory usage. Soon it will return errors for queries that use too much memory. [#8691](https://github.com/cockroachdb/cockroach/pull/8691)
- [Aggregate functions](../v1.0/functions-and-operators.html#aggregate-functions) like `sum()` are now faster. [#8680](https://github.com/cockroachdb/cockroach/pull/8680)
- For [production deployments](../v1.0/recommended-production-settings.html), at least 10000 file descriptors are now recommended per store, with a minimum of 2000 required. [#9679](https://github.com/cockroachdb/cockroach/pull/9679)
- Improved scheduling of Raft work. [#9831](https://github.com/cockroachdb/cockroach/pull/9831)
- Replaced per-request checks with a per-batch check. [#9848](https://github.com/cockroachdb/cockroach/pull/9848)
- Micro-optimizations for writing time series data. [#9862](https://github.com/cockroachdb/cockroach/pull/9862)
- Narrowed the use of a lock during Raft log truncation. [#9840](https://github.com/cockroachdb/cockroach/pull/9840)
- Refactored a common locking pattern for better performance. [#9771](https://github.com/cockroachdb/cockroach/pull/9771)

<h3 id="beta-20161013-doc-updates">Doc Updates</h3>

- Added docs on [orchestrating CockroachDB with Docker Swarm](../v1.0/orchestrate-cockroachdb-with-docker-swarm.html). [#676](https://github.com/cockroachdb/docs/pull/676)
- Added docs on the [`cockroach gen`](../v1.0/generate-cockroachdb-resources.html) command, which can be used to generate `man` pages, a `bash` autocompletion script, and example SQL data suitable to populate test databases. [#755](https://github.com/cockroachdb/docs/pull/755)
- Updated the `cockroach sql` command docs to include more details about supported [SQL shell shortcuts](../v1.0/use-the-built-in-sql-client.html#sql-shell-shortcuts).

<h3 id="beta-20161013-contributors">Contributors</h3>

This release includes 338 merged PRs by 28 authors. We would like to
thank the following contributors from the CockroachDB community, especially first-time contributors Francis Bergin and Yan Long:

- Francis Bergin
- Daniel Theophanes
- Yan Long
- songhao
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20161027-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20161027.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20161027.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20161027-backwards-incompatible-changes">Backwards-Incompatible Changes</h3>

- Functions that return the current time - including `now()` - now return values of type [`TIMESTAMP WITH TIME ZONE`](../v1.0/timestamp.html) instead of `TIMESTAMP`, unless called from a context that expects the latter type. [#9618](https://github.com/cockroachdb/cockroach/pull/9618)

<h3 id="beta-20161027-sql-language-changes">SQL Language Changes</h3>

- [Views](../v1.0/views.html) are now supported. Views are stored queries, represented as virtual tables, that produce a result set when requested. They can be used to hide query complexity, limit access to underlying data, or simplify the process of supporting legacy code.  
- Tables in the `pg_catalog` database can now be accessed with unqualified names if no table of the same name exists in the current database. [#9927](https://github.com/cockroachdb/cockroach/pull/9927)
- `AS OF SYSTEM TIME` queries now support the decimal format returned by `cluster_logical_timestamp()` for maximum precision. [#9934](https://github.com/cockroachdb/cockroach/pull/9934)
- The `CASCADE` option of [`DROP TABLE`](../v1.0/drop-table.html) and [`ALTER TABLE DROP COLUMN`](../v1.0/alter-table.html) now drops views that depend on the table or column; it is now an error to attempt to drop a table or column with dependent views without either using this option or dropping the views first. [#9724](https://github.com/cockroachdb/cockroach/pull/9724), [#10124](https://github.com/cockroachdb/cockroach/pull/10124)
- `SET DEFAULT_TRANSACTION_ISOLATION` is now supported, improving compatibility with `psycopg2`. [#10087](https://github.com/cockroachdb/cockroach/pull/10087)
- The `pg_catalog.pg_indexes` and `pg_catalog.pg_constraint` tables are now supported. [#9869](https://github.com/cockroachdb/cockroach/pull/9869), [#9991](https://github.com/cockroachdb/cockroach/pull/9991)
- [`EXPLAIN`](../v1.0/explain.html) can now be used with `SHOW`, `HELP`, and `ALTER TABLE ... SPLIT`. [#10013](https://github.com/cockroachdb/cockroach/pull/10013)
- The `current_schemas()` [function](../v1.0/functions-and-operators.html) is now supported, improving compatibility with ActiveRecord. [#9604](https://github.com/cockroachdb/cockroach/pull/9604)
- The [`SHOW ALL`](../v1.0/show-vars.html) statement is now supported. [#10195](https://github.com/cockroachdb/cockroach/pull/10195)
- The [`DROP INDEX`](../v1.0/drop-index.html) and [`ALTER INDEX`](../v1.0/rename-index.html) statements can now use unqualified index names. [#10091](https://github.com/cockroachdb/cockroach/pull/10091)

<h3 id="beta-20161027-command-line-interface-changes">Command-Line Interface Changes</h3>

- The `--host` flag in [client commands](../v1.0/cockroach-commands.html) such as [`cockroach sql`](../v1.0/use-the-built-in-sql-client.html) now defaults to `localhost` in both secure and insecure modes. [#10134](https://github.com/cockroachdb/cockroach/pull/10134)
- Improved error messages when a server is down or certificates are not configured correctly. [#9917](https://github.com/cockroachdb/cockroach/pull/9917)
- The `--key` flag can now be passed via the [environment variable](../v1.0/cockroach-commands.html#environment-variables) `COCKROACH_KEY`, matching other similar flags. [#10092](https://github.com/cockroachdb/cockroach/pull/10092)

<h3 id="beta-20161027-performance-improvements">Performance Improvements</h3>

- RocksDB bloom filters now use 10x less memory, with a negligible reduction in speed. [#10085](https://github.com/cockroachdb/cockroach/pull/10085)
- Old time-series data is now garbage collected. [#9959](https://github.com/cockroachdb/cockroach/pull/9959)
- Reduced overhead of the internal time-series metric system. [#9889](https://github.com/cockroachdb/cockroach/pull/9889)
- Reduced impact of schema changes on regular queries. [#9798](https://github.com/cockroachdb/cockroach/pull/9798)
- In the event of a node failure, schema changes now save their progress and can resume from their last checkpoint instead of restarting from the beginning. [#10036](https://github.com/cockroachdb/cockroach/pull/10036)
- Ranges are now split more eagerly when tables are created or data is growing rapidly. [#10232](https://github.com/cockroachdb/cockroach/pull/10232)

<h3 id="beta-20161027-bug-fixes">Bug Fixes</h3>

- Certain network- and timeout-related errors will now return the error "transaction commit result is ambiguous" when it cannot be determined whether a transaction committed or not. This fixes bugs in which statements outside of transactions could be applied twice, and other transactions may incorrectly report unique constraint violations. [#10207](https://github.com/cockroachdb/cockroach/pull/10207)
- [`SET TIME ZONE 0`](../v1.0/set-vars.html#set-time-zone) now sets the session time zone to UTC (other numbers already worked). [#9992](https://github.com/cockroachdb/cockroach/pull/9992)
- `SHOW` statements for session variables now work correctly when prepared and executed separately. [#10013](https://github.com/cockroachdb/cockroach/pull/10013)
- Columns that are a part of the primary key can now be renamed. [#10018](https://github.com/cockroachdb/cockroach/pull/10018)
- Fixed a panic during transaction rollback. [#9961](https://github.com/cockroachdb/cockroach/pull/9961)
- Float comparisons involving `NaN` are now correct in all cases. [#10112](https://github.com/cockroachdb/cockroach/pull/10112)
- Clock offset monitoring is now more sensitive. [#10185](https://github.com/cockroachdb/cockroach/pull/10185)
- The rebalancer is now better able to avoid placing a replica on a store that has previously had a corrupted replica of the same range. [#10141](https://github.com/cockroachdb/cockroach/pull/10141)
- More complex expressions involving window functions are now supported. [#10186](https://github.com/cockroachdb/cockroach/pull/10186)
- Fixed a deadlock that could occur when using the Prometheus metrics endpoint. [#10228](https://github.com/cockroachdb/cockroach/pull/10228)

<h3 id="beta-20161027-contributors">Contributors</h3>

This release includes 182 merged PRs by 24 authors. We would like to thank the following contributors from the CockroachDB, including first-time contributor Haines Chan.

- Haines Chan
- songhao
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20161103-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20161103.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20161103.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20161103-backwards-incompatible-changes">Backwards-Incompatible Changes</h3>

- Users (other than `root`) must now be created with the `CREATE USER` statement or `cockroach user set` command before they can be used for TLS certificate- or password-based authentication.  [#9794](https://github.com/cockroachdb/cockroach/pull/9794)
- The `ambiguous result` error message introduced in `beta-20161027` is now simply `result is ambiguous` since it may be returned outside of transactions. [#10279](https://github.com/cockroachdb/cockroach/pull/10279)

<h3 id="beta-20161103-sql-language-changes">SQL Language Changes</h3>

- Password-based authentication is now supported. Clients can authenticate with either a TLS certificate or a password. Documentation coming soon.[#9794](https://github.com/cockroachdb/cockroach/pull/9794)
- The `SHOW USERS` statement is now supported. [#10088](https://github.com/cockroachdb/cockroach/pull/10088)
- The `pg_catalog.pg_type`, `pg_catalog.pg_database`, `pg_catalog.pg_views`, `pg_catalog.pg_proc`, and `pg_catalog.pg_am` tables are now supported. [#10209](https://github.com/cockroachdb/cockroach/pull/10209), [#10284](https://github.com/cockroachdb/cockroach/pull/10284), [#10276](https://github.com/cockroachdb/cockroach/pull/10276), [#10217](https://github.com/cockroachdb/cockroach/pull/10217), [#10363](https://github.com/cockroachdb/cockroach/pull/10363)
- The `information_schema.statistics` and `information_schema.views` tables are now supported. [#10220](https://github.com/cockroachdb/cockroach/pull/10220), [#10288](https://github.com/cockroachdb/cockroach/pull/10288)
- [`SHOW TABLES`](../v1.0/show-tables.html) now adds a `(dropped)` suffix to tables that are being dropped. [#10063](https://github.com/cockroachdb/cockroach/pull/10063)
- [`SHOW CREATE VIEW`](../v1.0/show-create-view.html) now only requires permissions on the view, not the underlying tables. [#10270](https://github.com/cockroachdb/cockroach/pull/10270)

<h3 id="beta-20161103-command-line-interface-changes">Command-Line Interface Changes</h3>

- When entering a transaction in the [built-in sql shell](../v1.0/use-the-built-in-sql-client.html), the statements are not sent to the server until there is either a `COMMIT`, `ROLLBACK`, or two blank lines. This minimizes the lifetime of the transaction and therefore the risk of conflicts. [#10187](https://github.com/cockroachdb/cockroach/pull/10187)

<h3 id="beta-20161103-performance-improvements">Performance Improvements</h3>

- Queries that span multiple ranges are now executed across those ranges in parallel. [#9197](https://github.com/cockroachdb/cockroach/pull/9197)
- Time series data (used in the admin UI) is now loaded in parallel. [#10250](https://github.com/cockroachdb/cockroach/pull/10250)
- Rebalancing now reaches an equilibrium faster. [#10330](https://github.com/cockroachdb/cockroach/pull/10330)

<h3 id="beta-20161103-bug-fixes">Bug Fixes</h3>

- Memory usage of SQL queries is now monitored, and queries that use too much will fail rather than exhaust the server's memory. [#9259](https://github.com/cockroachdb/cockroach/pull/9259)
- Fixed a problem with snapshot error handling that could cause the cluster to be unable to make progress after node failure.
- Computing the `log()` of a very large number no longer causes the server to hang. [#10221](https://github.com/cockroachdb/cockroach/pull/10221)
- Decimal numbers are now parsed correctly in `AS OF SYSTEM TIME` queries. [#10242](https://github.com/cockroachdb/cockroach/pull/10242)
- `concat_ws()` with no arguments no longer crashes the server. [#10309](https://github.com/cockroachdb/cockroach/pull/10309)
- Fixed a bug when a command was executed after its client had disconnected. [#10279](https://github.com/cockroachdb/cockroach/pull/10279)

<h3 id="beta-20161103-doc-updates">Doc Updates</h3>

- Clarified and expanded the [`transactions`](../v1.0/transactions.html) overview documentation, and completed docs on transaction-specific statements: [#672](https://github.com/cockroachdb/docs/pull/672)
    - [`BEGIN`](../v1.0/begin-transaction.html)
    - [`COMMIT`](../v1.0/commit-transaction.html)
    - [`SET TRANSACTION`](../v1.0/set-transaction.html)
    - [`SAVEPOINT cockroach_restart`](../v1.0/savepoint.html)
    - [`RELEASE SAVEPOINT cockroach_restart`](../v1.0/release-savepoint.html)
    - [`ROLLBACK`](../v1.0/rollback-transaction.html)
    - [`SHOW`](../v1.0/show-vars.html)
- Added language-specific examples for [`INSERT` statements with `RETURNING`](../v1.0/insert.html#insert-and-return-values). [#813](https://github.com/cockroachdb/docs/pull/813)
- Updated the [SQL Feature Support](../v1.0/sql-feature-support.html) page to reflect support for [views](../v1.0/views.html) (SQL standard) and [interleaved tables](../v1.0/interleave-in-parent.html) (CockroachDB extensions).

<h3 id="beta-20161103-contributors">Contributors</h3>

This release includes 68 merged PRs by 24 authors. We would like to thank the following contributors from the CockroachDB community, including first-time contributors Johan Brandhorst and MaBo.

- Johan Brandhorst
- MaBo
- Yan Long
- songhao
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

{{site.data.alerts.callout_danger}}
Data corruption has been observed when upgrading to this release from prior versions, so it has been withdrawn.
{{site.data.alerts.end}}

<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20161201-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20161201.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20161201.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20161201-upgrade-notes">Upgrade Notes</h3>

Due to changes in the on-disk format of internal range leases, this release cannot be run concurrently with any prior release. All servers running older versions must be stopped before starting any node with this version. [#10420](https://github.com/cockroachdb/cockroach/pull/10420)

We realize that "stop the world" upgrades are overly interruptive and are actively working on infrastructure improvements to drastically reduce the need for such upgrades in the future.

<h3 id="beta-20161201-build-changes">Build Changes</h3>

- CockroachDB now *vendors* its dependencies, so building from source no longer interferes with other project in the `$GOPATH`. [#9900](https://github.com/cockroachdb/cockroach/pull/9900)

<h3 id="beta-20161201-sql-language-changes">SQL Language Changes</h3>

- Adding a [`FOREIGN KEY`](../v1.0/foreign-key.html) constraint now automatically creates necessary indexes. [#9572](https://github.com/cockroachdb/cockroach/pull/9572)
- The `pg_catalog.pg_roles`, `pg_catalog.pg_description`, `pg_catalog.pg_settings`, and `pg_catalog.pg_index` tables are now supported. [#10377](https://github.com/cockroachdb/cockroach/pull/10377) [#10381](https://github.com/cockroachdb/cockroach/pull/10381) [#10293](https://github.com/cockroachdb/cockroach/pull/10293) [#10548](https://github.com/cockroachdb/cockroach/pull/10548) [#10592](https://github.com/cockroachdb/cockroach/pull/10592)
- The `pg_catalog.pg_depend` table is now partially supported (just enough to support `pgjdbc`). [#10696](https://github.com/cockroachdb/cockroach/pull/10696)
- `pg_catalog` tables now report databases as belonging to PostgreSQL-compatible namespaces. This is for compatibility only; CockroachDB does not have a notion of namespaces. [#11603](https://github.com/cockroachdb/cockroach/pull/11603)
- The `pg_catalog.pg_get_expr` and `pg_catalog.pg_generate_series` functions are now supported. [#10952](https://github.com/cockroachdb/cockroach/pull/10952) [#11214](https://github.com/cockroachdb/cockroach/pull/11214)
- The `conkey` and `confkey` columns of the `pg_catalog.pg_constraint` table now return real integer arrays. [#10584](https://github.com/cockroachdb/cockroach/pull/10584)
- New [functions](../v1.0/functions-and-operators.html) `from_ip()` and `to_ip()` convert between binary and textual IP address formats. [#10349](https://github.com/cockroachdb/cockroach/pull/10349)
- Tuple types can now be returned by queries. [#10380](https://github.com/cockroachdb/cockroach/pull/10380)
- The SQL standard interval format `Y-M-D` is now supported. [#10499](https://github.com/cockroachdb/cockroach/pull/10499)
- The `array_length`, `array_upper`, and `array_lower` [functions](../v1.0/functions-and-operators.html) are now available. [#10565](https://github.com/cockroachdb/cockroach/pull/10565)
- The `to_uuid` and `from_uuid` [functions](../v1.0/functions-and-operators.html) are now available. [#10541](https://github.com/cockroachdb/cockroach/pull/10541)
- The `pow()` and `div()` [functions](../v1.0/functions-and-operators.html) now work when both arguments are integers. [#10538](https://github.com/cockroachdb/cockroach/pull/10538)
- The `ARRAY[]` constructor syntax is now supported. [#10585](https://github.com/cockroachdb/cockroach/pull/10585)
- The `COLLATE` operator is now supported. Collation support is still incomplete and will be improved in upcoming releases. [#10605](https://github.com/cockroachdb/cockroach/pull/10605)
- The `current_schema` [function](../v1.0/functions-and-operators.html) is now supported. [#10707](https://github.com/cockroachdb/cockroach/pull/10707)
- The `SET APPLICATION_NAME` statement is now supported. This is a write-only variable which is used by some frameworks but has no effect. [#10725](https://github.com/cockroachdb/cockroach/pull/10725)
- The [`CREATE DATABASE`](../v1.0/create-database.html) statement now accepts the options `TEMPLATE`, `LC_COLLATE`, and `LC_CTYPE` for compatibility with PostgreSQL, although the values available for these options are limited. [#10775](https://github.com/cockroachdb/cockroach/pull/10775)
- The [`SELECT`](../v1.0/select.html) statement now supports the `WITH ORDINALITY` modifier to generate row numbers. [#10558](https://github.com/cockroachdb/cockroach/pull/10558)

<h3 id="beta-20161201-command-line-interface-changes">Command-Line Interface Changes</h3>

- Temporary directories are no longer created automatically for logging. Commands other than `cockroach start` log to `stderr` if no `--log-dir` flag is given, and `cockroach start` writes to the directory of the first store. Various combinations of `--log-dir`, `--logtostderr`, and `--alsologtostderr` now work in more sensible ways. [#10675](https://github.com/cockroachdb/cockroach/pull/10675) [#10926](https://github.com/cockroachdb/cockroach/pull/10926) [#10962](https://github.com/cockroachdb/cockroach/pull/10962)
- The [`cockroach sql`](../v1.0/use-the-built-in-sql-client.html) prompt now indicates the status of the current transaction (if any). [#10866](https://github.com/cockroachdb/cockroach/pull/10866)
- The `--password` flag for the [`cockroach user set`](../v1.0/create-and-manage-users.html) command no longer accepts the new password as a command-line argument; instead this flag is a boolean to determine whether a password should be created for the user. The password is always read from `stdin`. [#10680](https://github.com/cockroachdb/cockroach/pull/10680)
- The [`cockroach user set`](../v1.0/create-and-manage-users.html) command no longer prompts for passwords in insecure mode unless `--password` is given. [#10547](https://github.com/cockroachdb/cockroach/pull/10547)
- The `cockroach debug compact` command now always rewrites all data, allowing it to pick up configuration changes. [#10532](https://github.com/cockroachdb/cockroach/pull/10532)

<h3 id="beta-20161201-admin-ui-changes">Admin UI Changes</h3>

- The design of the navigation elements has been updated. [#10611](https://github.com/cockroachdb/cockroach/pull/10611)
- The design of the Database tab has been updated. [#10552](https://github.com/cockroachdb/cockroach/pull/10552)
- Syntax highlighting is now used when displaying `CREATE TABLE` statements. [#10579](https://github.com/cockroachdb/cockroach/pull/10579)
- The UI no longer attempts to display information about the virtual databases `information_schema` and `pg_catalog`. [#10920](https://github.com/cockroachdb/cockroach/pull/10920)
- Metrics for the fraction of available and fully-replicated ranges are now computed more accurately. [#11213](https://github.com/cockroachdb/cockroach/pull/11213)

<h3 id="beta-20161201-performance-improvements">Performance Improvements</h3>

- Increased the speed of some mathematical operations (Log, Pow) on [`DECIMAL`](../v1.0/decimal.html) values. [#11669](https://github.com/cockroachdb/cockroach/pull/11669)
- Reduced rebalancer thrashing by dynamically adjusting how often store capacities are gossiped. <a href="https://github.com/cockroachdb/cockroach/pull/11662" data-proofer-ignore>#11662</a>
- Adding new replicas is now prioritized over removing dead ones. [#10492](https://github.com/cockroachdb/cockroach/pull/10492) [#10683](https://github.com/cockroachdb/cockroach/pull/10683)
- Replicating ranges to a new node is now more reliably performed back-to-back. [#10440](https://github.com/cockroachdb/cockroach/pull/10440) [#10749](https://github.com/cockroachdb/cockroach/pull/10749)
- The rebalancing system is now less prone to thrashing. [#10761](https://github.com/cockroachdb/cockroach/pull/10761)
- Raft log truncation is now aware of pending snapshots. [#10482](https://github.com/cockroachdb/cockroach/pull/10482)
- Raft snapshots are now applied more efficiently. [#10931](https://github.com/cockroachdb/cockroach/pull/10931)
- Raft now sends log entries in smaller batches. [#10929](https://github.com/cockroachdb/cockroach/pull/10929)
- Replica garbage collection is now triggered more reliably by replication changes. [#10500](https://github.com/cockroachdb/cockroach/pull/10500)
- Old replicas that are blocking other operations are now prioritized for garbage collection. [#10426](https://github.com/cockroachdb/cockroach/pull/10426)
- Small clusters now run their replica scanners more frequently by default. [#10433](https://github.com/cockroachdb/cockroach/pull/10433)
- Reduced contention in the command queue for multi-range operations. [#10470](https://github.com/cockroachdb/cockroach/pull/10470)
- Operations that have already expired are no longer added to the command queue. [#10487](https://github.com/cockroachdb/cockroach/pull/10487)
- Reduced allocations for SQL row data. [#10534](https://github.com/cockroachdb/cockroach/pull/10534)
- Reduced memory allocations when encoding dates and times. [#10531](https://github.com/cockroachdb/cockroach/pull/10531)
- Parsing hexadecimal literals using the `x''` syntax is now more efficient. [#10660](https://github.com/cockroachdb/cockroach/pull/10660)
- Time series pruning is now more efficient. [#10682](https://github.com/cockroachdb/cockroach/pull/10682)
- Commands that have been canceled by clients no longer accumulate in the internal command queue. [#10772](https://github.com/cockroachdb/cockroach/pull/10772)
- When a command that has been retried on multiple replicas succeeds on any of them, any in-flight attempts on the other replicas is canceled. [#10970](https://github.com/cockroachdb/cockroach/pull/10970)
- The fast-path for local "RPCs" now uses goroutines to avoid blocking the caller. [#11196](https://github.com/cockroachdb/cockroach/pull/11196)

<h3 id="beta-20161201-bug-fixes">Bug Fixes</h3>

- Fixed a bug that caused over-aggressive Raft log truncation, which in turn led to an excessive number of Raft initiated snapshots. [#11720](https://github.com/cockroachdb/cockroach/pull/11720)
- Fixed a bug that caused data corruption when upgrading from `beta-20161103` to `beta-20161110`. [#10681](https://github.com/cockroachdb/cockroach/pull/10681) [#10724](https://github.com/cockroachdb/cockroach/pull/10724)
- A node that is stopped and restarted quickly can no longer produce inconsistent results. [#10420](https://github.com/cockroachdb/cockroach/pull/10420)
- Fixed bugs that prevented communication with a node that was previously down. [#10642](https://github.com/cockroachdb/cockroach/pull/10642) [#10652](https://github.com/cockroachdb/cockroach/pull/10652)
- It is now possible for a new node to start up using the same network address as a node that had previously existed. [#10544](https://github.com/cockroachdb/cockroach/pull/10544) [#10699](https://github.com/cockroachdb/cockroach/pull/10699)
- Replication snapshots now release their resources earlier, preventing deadlocks. [#10491](https://github.com/cockroachdb/cockroach/pull/10491)
- Fixed a bug with time series garbage collection when the time series data spans multiple ranges. [#10400](https://github.com/cockroachdb/cockroach/pull/10400)
- Fixed several bugs with very large [`DECIMAL`](../v1.0/decimal.html) values or very small fractions. [#10446](https://github.com/cockroachdb/cockroach/pull/10446) [#10559](https://github.com/cockroachdb/cockroach/pull/10559) [#10570](https://github.com/cockroachdb/cockroach/pull/10570) [#10934](https://github.com/cockroachdb/cockroach/pull/10934)
- The `pow()` [function](../v1.0/functions-and-operators.html) now returns an error when its arguments are too large. [#10525](https://github.com/cockroachdb/cockroach/pull/10525)
- Fixed a crash when the number of placeholders in a query doesn't match the number of arguments. [#10474](https://github.com/cockroachdb/cockroach/pull/10474)
- Improved error handling when a SQL [transaction](../v1.0/transactions.html) exceeds an internal deadline. [#9906](https://github.com/cockroachdb/cockroach/pull/9906)
- Fixed a panic in raft leadership transfers. [#10530](https://github.com/cockroachdb/cockroach/pull/10530)
- Fixed a leak in [`CREATE TABLE AS`](../v1.0/create-table-as.html) and [`CREATE VIEW`](../v1.0/create-view.html). [#10527](https://github.com/cockroachdb/cockroach/pull/10527)
- Fixed a panic "range lookup of meta key found only non-matching ranges". [#10583](https://github.com/cockroachdb/cockroach/pull/10583)
- The consistency checker now runs to completion instead of canceling itself before finishing. [#10625](https://github.com/cockroachdb/cockroach/pull/10625)
- Internal retries no longer cause transaction replay errors. [#10639](https://github.com/cockroachdb/cockroach/pull/10639)
- The [`cockroach sql`](../v1.0/use-the-built-in-sql-client.html) command no longer crashes when given a URL without a username. [#10862](https://github.com/cockroachdb/cockroach/pull/10862)
- Fixed a deadlock in `RemoveReplica`. [#10875](https://github.com/cockroachdb/cockroach/pull/10875)
- `result is ambiguous` errors are now returned in more situations. [#10703](https://github.com/cockroachdb/cockroach/pull/10703) [#11211](https://github.com/cockroachdb/cockroach/pull/11211)
- The `ALTER TABLE SPLIT AT` command will now retry internally instead of returning errors about conflicting updates. [#10728](https://github.com/cockroachdb/cockroach/pull/10728)
- Fixed a panic that could occur when a node is restarted after an unclean shutdown. [#10690](https://github.com/cockroachdb/cockroach/pull/10690)
- Fixed a panic when replicas are removed and re-added rapidly. [#11699](https://github.com/cockroachdb/cockroach/pull/11699)
- The `sign()` [function](../v1.0/functions-and-operators.html) with a [`DECIMAL`](../v1.0/decimal.html) argument now returns a decimal rather than a float. [#10954](https://github.com/cockroachdb/cockroach/pull/10954)
- Fixed a panic in the raft tick loop. [#11622](https://github.com/cockroachdb/cockroach/pull/11622)
- The `LIMIT` operator now works correctly in [`INSERT ... SELECT`](../v1.0/insert.html). [#11632](https://github.com/cockroachdb/cockroach/pull/11632)

<h3 id="beta-20161201-doc-updates">Doc Updates</h3>

- Expanded the [cloud deployment](../v1.0/cloud-deployment.html) documentation to cover Microsoft Azure and secure deployment on all featured platforms:
    - [AWS](../v1.0/deploy-cockroachdb-on-aws.html)
    - [Azure](../v1.0/deploy-cockroachdb-on-microsoft-azure.html)
    - [Digital Ocean](../v1.0/deploy-cockroachdb-on-digital-ocean.html)
    - [GCE](../v1.0/deploy-cockroachdb-on-google-cloud-platform.html)
- Added interactive asciicasts to getting started tutorials.
- Added tutorials that demonstrate core features of CockroachDB: [#834](https://github.com/cockroachdb/docs/pull/834) [#878](https://github.com/cockroachdb/docs/pull/878) [#899](https://github.com/cockroachdb/docs/pull/899)
    - [Data Replication](../v1.0/demo-data-replication.html)
    - [Fault Tolerance & Recovery](../v1.0/demo-fault-tolerance-and-recovery.html)
    - [Automatic Rebalancing](../v1.0/demo-automatic-rebalancing.html)
- Added documentation on user management and password-based authentication: [#838](https://github.com/cockroachdb/docs/pull/838)
    - [`CREATE USER`](../v1.0/create-user.html) statement
    - [`cockroach user`](../v1.0/create-and-manage-users.html) command
- Added documentation on the [`information_schema`](../v1.0/information-schema.html) built-in database, which provides introspection into database tables, columns, indexes, and views, and which is required for ORM compatibility. [#859](https://github.com/cockroachdb/docs/pull/859)
- Updated [`SELECT`](../v1.0/select.html) statement documentation to cover using "index hints". [#894](https://github.com/cockroachdb/docs/pull/894)
- Updated [`FOREIGN KEY`](../v1.0/foreign-key.html) constraint documentation to clarify that creating a table with a foreign key now automatically creates an index for you. [#895](https://github.com/cockroachdb/docs/pull/895)
- Updated `RENAME` statement documentation to clarify that you cannot rename a [database](../v1.0/rename-database.html), [table](../v1.0/rename-table.html), [column](../v1.0/rename-column.html), or [index](../v1.0/rename-index.html) reference by a [view](../v1.0/views.html). [#873](https://github.com/cockroachdb/docs/pull/873)
- Updated the [`cockroach start`](../v1.0/start-a-node.html) command documentation to cover the `--max-sql-memory` flag. [#868](https://github.com/cockroachdb/docs/pull/868)
- Updated the [`cockroach zone`](../v1.0/configure-replication-zones.html) command documentation to reflect the correct YAML structure. [#902](https://github.com/cockroachdb/docs/pull/902)
- Fixed the Rust code samples on [Build an App](../v1.0/build-a-rust-app-with-cockroachdb.html). [#863](https://github.com/cockroachdb/docs/pull/863)

<h3 id="beta-20161201-contributors">Contributors</h3>

This release includes 292 merged PRs by 30 authors. We would like to thank the following contributors from the CockroachDB community, including first-time contributors Christian Gati, Dustin Hiatt, kiran, and Nathan Johnson.

- Christian Gati
- Dustin Hiatt
- Haines Chan
- kiran
- Nathan Johnson
- songhao
- yznming
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20161208-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20161208.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20161208.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20161208-sql-language-changes">SQL Language Changes</h3>

- The `pg_catalog` and [`information_schema`](../v1.0/information-schema.html) databases now include information about the current database only, unless the user is `root`. [#11694](https://github.com/cockroachdb/cockroach/pull/11694)
- The `pg_catalog.pg_range` table is now supported. [#11725](https://github.com/cockroachdb/cockroach/pull/11725)
- The `pg_get_userbyid` function is now supported. [#12162](https://github.com/cockroachdb/cockroach/pull/12162)
- The [`SHOW TABLES`](../v1.0/show-tables.html), [`SHOW DATABASES`](../v1.0/show-databases.html), [`SHOW GRANTS`](../v1.0/show-grants.html) and [`SHOW COLUMNS`](../v1.0/show-columns.html) statements are now aliases for queries on the [`information_schema`](../v1.0/information-schema.html) database. [#10196](https://github.com/cockroachdb/cockroach/pull/10196)
- Empty passwords are no longer allowed in the [`CREATE USER WITH PASSWORD`](../v1.0/create-user.html) statement. [#11781](https://github.com/cockroachdb/cockroach/pull/11781)

<h3 id="beta-20161208-command-line-interface-changes">Command-Line Interface Changes</h3>

- Log file names have changed. The new format is `cockroach.kenabook.kena.2016-11-28T20_00_35Z.009524.ERROR.log`. [#11666](https://github.com/cockroachdb/cockroach/pull/11666)

<h3 id="beta-20161208-admin-ui-changes">Admin UI Changes</h3>

- On the **Cluster Overview** page, added a **Summary** section showing total nodes and capacity used, and updated the overall navigation and style. [#11696](https://github.com/cockroachdb/cockroach/pull/11696) [#11754](https://github.com/cockroachdb/cockroach/pull/11754)
- Several "allocator" metrics have been replaced with a new "underreplicated range" metric. [#11733](https://github.com/cockroachdb/cockroach/pull/11733) [#11983](https://github.com/cockroachdb/cockroach/pull/11983)
- The "ranges available" metric has been replaced with a "ranges unavailable" metric, which is computed differently. [#11760](https://github.com/cockroachdb/cockroach/pull/11760)
- New metrics have been added for the replication queue and replica GC queue. [#11753](https://github.com/cockroachdb/cockroach/pull/11753) [#11785](https://github.com/cockroachdb/cockroach/pull/11785)
- New metrics have been added for RPCs. [#11711](https://github.com/cockroachdb/cockroach/pull/11711)
- New metrics have been added to track commands that have been stuck for a long time. [#12106](https://github.com/cockroachdb/cockroach/pull/12106)

<h3 id="beta-20161208-performance-improvements">Performance Improvements</h3>

- Range leases are now balanced across the nodes in a cluster. [#11757](https://github.com/cockroachdb/cockroach/pull/11757)
- Raft heartbeats are once again coalesced into one message per pair of nodes instead of per range. [#11757](https://github.com/cockroachdb/cockroach/pull/11757)
- Persisting the applied index is now faster. [#9993](https://github.com/cockroachdb/cockroach/pull/9993)
- The replication queue no longer tries to reprocess the same range repeatedly. [#11982](https://github.com/cockroachdb/cockroach/pull/11982)
- Limited frequent reprocessing of ranges for time series maintenance and consistency checks. [#10665](https://github.com/cockroachdb/cockroach/pull/10665)
- The time series maintenance queue no longer sends commands when it has nothing to do. [#11762](https://github.com/cockroachdb/cockroach/pull/11762)
- The `pow()` [function](../v1.0/functions-and-operators.html) is now faster when small numbers are raised to very large powers. [#11738](https://github.com/cockroachdb/cockroach/pull/11738)
- `JOIN` queries now only scan the columns they need. [#11736](https://github.com/cockroachdb/cockroach/pull/11736)
- Micro-optimized logging and removed some noisy log events. [#11778](https://github.com/cockroachdb/cockroach/pull/11778)

<h3 id="beta-20161208-bug-fixes">Bug Fixes</h3>

- Fixed a panic when sending a raft message fails. [#11985](https://github.com/cockroachdb/cockroach/pull/11985)
- Fixed a memory spike that could occur during asymmetric partitions. [#12100](https://github.com/cockroachdb/cockroach/pull/12100)
- [`DROP DATABASE`](../v1.0/drop-database.html) now works when foreign key constraints are present. [#12036](https://github.com/cockroachdb/cockroach/pull/12036)
- [`DROP DATABASE`](../v1.0/drop-database.html) no longer hangs when subqueries have been used. [#11730](https://github.com/cockroachdb/cockroach/pull/11730)
- Requests no longer get stuck forever after a timeout. [#12000](https://github.com/cockroachdb/cockroach/pull/12000)
- Comparisons of SQL tuples now work for all types. [#10475](https://github.com/cockroachdb/cockroach/pull/10475)

<h3 id="beta-20161208-contributors">Contributors</h3>

This release includes 101 merged PRs by 19 authors. We would like to thank the following contributors from the CockroachDB community.

- songhao
- yznming
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20161215-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20161215.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20161215.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20161215-general-changes">General Changes</h3>

- CockroachDB now uses RocksDB version 4.11.2. [#9616](https://github.com/cockroachdb/cockroach/pull/9616)

<h3 id="beta-20161215-sql-language-changes">SQL Language Changes</h3>

- Additional support for standard database introspection required by popular ORMs. These features apply to built-in tables only; eventually, they will be made available for user-generated tables as well.
  - The `array_agg` [aggregate function](../v1.0/functions-and-operators.html#aggregate-functions) is now supported for ints and strings. [#12186](https://github.com/cockroachdb/cockroach/pull/12186)
  - The `ANY`, `SOME` and `ALL` array operators are now supported. [#12102](https://github.com/cockroachdb/cockroach/pull/12102)
  - `GROUP BY` can now be used with columns of type `ARRAY`. [#12198](https://github.com/cockroachdb/cockroach/pull/12198)
- The `SET` command now recognizes the `search_path`, `client_encoding`, `standard_conforming_strings`, and `client_min_messages` variables for compatibility with PostgreSQL. Setting these variables currently has no effect. [#12149](https://github.com/cockroachdb/cockroach/pull/12149)
- The `SHOW server_version` command now returns the version of PostgreSQL that CockroachDB most closely resembles. [#12149](https://github.com/cockroachdb/cockroach/pull/12149)

<h3 id="beta-20161215-admin-ui-changes">Admin UI Changes</h3>

- Aggregated rates are now computed correctly. [#12200](https://github.com/cockroachdb/cockroach/pull/12200)
- Various stylistic improvements. [#12118](https://github.com/cockroachdb/cockroach/pull/12118) [#12152](https://github.com/cockroachdb/cockroach/pull/12152)
- Metrics have been added for lease-related operations. [#12205](https://github.com/cockroachdb/cockroach/pull/12205)

<h3 id="beta-20161215-performance-improvements">Performance Improvements</h3>

- Raft snapshots are now applied one at a time. [#12192](https://github.com/cockroachdb/cockroach/pull/12192)

<h3 id="beta-20161215-bug-fixes">Bug Fixes</h3>

- The repair system now detects unresponsive nodes more accurately in the event of asymmetric partitions. [#12178](https://github.com/cockroachdb/cockroach/pull/12178)
- String arrays are now quoted correctly on the wire. [#12268](https://github.com/cockroachdb/cockroach/pull/12268)

<h3 id="beta-20161215-doc-updates">Doc Updates</h3>

- Each SQL [constraint](../v1.0/constraints.html) now has a dedicated page of documentation. [#901](https://github.com/cockroachdb/docs/pull/901)
- The [`cockroach zone`](../v1.0/configure-replication-zones.html) documentation now offers minimum and maximum recommendations for the `ttlseconds` setting, which defines the number of seconds overwritten values are retained before garbage collection. [#912](https://github.com/cockroachdb/docs/pull/912)

<h3 id="beta-20161215-contributors">Contributors</h3>

This release includes 62 merged PRs by 18 authors.
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20170105-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20170105.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20170105.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20170105-general-changes">General Changes</h3>

- CockroachDB now uses a more recent version of GRPC. [#9697](https://github.com/cockroachdb/cockroach/pull/9697)

<h3 id="beta-20170105-sql-language-changes">SQL Language Changes</h3>

- `FILTER` clauses for [aggregate functions](../v1.0/functions-and-operators.html#aggregate-functions) are now supported. See the [`SELECT`](../v1.0/select.html#filter-columns-fed-into-aggregate-functions) documentation for examples. [#10146](https://github.com/cockroachdb/cockroach/pull/10146)
- Columns can now be created with collated string types, although these columns cannot yet be indexed or part of the primary key. [#12294](https://github.com/cockroachdb/cockroach/pull/12294)
- `INTERVAL` values can now be [added](../v1.0/functions-and-operators.html#operators) to `DATE` values. [#12428](https://github.com/cockroachdb/cockroach/pull/12428)
- `TIMESTAMP` values can now be [compared](../v1.0/functions-and-operators.html#operators) to `DATE` values. [#12431](https://github.com/cockroachdb/cockroach/pull/12431)
- `DATE` literals in [views](../v1.0/views.html) now work correctly. [#12450](https://github.com/cockroachdb/cockroach/pull/12450)
- Parsing of [`INTERVAL`](../v1.0/interval.html) values is now more consistent with PostgreSQL. [#12559](https://github.com/cockroachdb/cockroach/pull/12559) [#12566](https://github.com/cockroachdb/cockroach/pull/12566)
- `ORDER BY` now works correctly when sorting by the result of an [aggregate function](../v1.0/functions-and-operators.html#aggregate-functions). [#12185](https://github.com/cockroachdb/cockroach/pull/12185)
- `ORDER BY` now returns an error in more cases when its arguments are ambiguous. [#12255](https://github.com/cockroachdb/cockroach/pull/12255)
- The `experimental_unique_bytes()` function has been removed. [#12228](https://github.com/cockroachdb/cockroach/pull/12228)
- The `extract()` [function](../v1.0/functions-and-operators.html) now supports `DATE` values. As a consequence, `extract()` no longer supports `STRING` values, which must now be explicitly cast to `TIMESTAMP` or `DATE`. [#12479](https://github.com/cockroachdb/cockroach/pull/12479)
- The `pg_indexes.pg_indexes` now includes the `oid` column. [#12359](https://github.com/cockroachdb/cockroach/pull/12359)
- The `pg_catalog.pg_get_indexdef` [function](../v1.0/functions-and-operators.html) is now supported. [#12359](https://github.com/cockroachdb/cockroach/pull/12359)
- The `array_agg()` [function](../v1.0/functions-and-operators.html) now handles `NULL` values correctly. [#12534](https://github.com/cockroachdb/cockroach/pull/12534)

<h3 id="beta-20170105-admin-ui-changes">Admin UI Changes</h3>

- Metrics for the number of live nodes and the number of Raft commands are now reported. [#12296](https://github.com/cockroachdb/cockroach/pull/12296)
- Improved the time selector. [#12360](https://github.com/cockroachdb/cockroach/pull/12360)
- Added new summary statistics. [#12486](https://github.com/cockroachdb/cockroach/pull/12486)
- Graph axes have been improved. [#12427](https://github.com/cockroachdb/cockroach/pull/12427)
- The event list has been updated. [#12638](https://github.com/cockroachdb/cockroach/pull/12638)

<h3 id="beta-20170105-performance-improvements">Performance Improvements</h3>

- When a node stops responding to heartbeats, non-heartbeat
Raft traffic to that node is suspended until it becomes responsive again. [#12631](https://github.com/cockroachdb/cockroach/pull/12631)
- Improved logic for transferring Raft leadership to coincide with the lease holder. [#12323](https://github.com/cockroachdb/cockroach/pull/12323)
- Fixed a thundering herd problem after a node goes down. [#12352](https://github.com/cockroachdb/cockroach/pull/12352)
- Prevented unnecessary retries of Raft commands. [#12487](https://github.com/cockroachdb/cockroach/pull/12487)
- Improved lease rebalancing in deployments with multiple stores per node. [#12565](https://github.com/cockroachdb/cockroach/pull/12565)
- Reduced the number of `cgo` calls made to RocksDB. [#12343](https://github.com/cockroachdb/cockroach/pull/12343)

<h3 id="beta-20170105-bug-fixes">Bug Fixes</h3>

- Commands are now canceled correctly if the replica tracking them is removed while they are pending. [#12313](https://github.com/cockroachdb/cockroach/pull/12313)
- Raft groups are always initialized when handling messages. [#12465](https://github.com/cockroachdb/cockroach/pull/12465)
- Improved error handling for invalid UTF-8 strings. [#12194](https://github.com/cockroachdb/cockroach/pull/12194)
- Fixed several bugs in `FULL` and `RIGHT OUTER JOIN`. [#12364](https://github.com/cockroachdb/cockroach/pull/12364)
- Fixed a regression in `OUTER JOIN` operations with predicates. [#12350](https://github.com/cockroachdb/cockroach/pull/12350)
- Fixed type checking in `window` definitions. [#12483](https://github.com/cockroachdb/cockroach/pull/12483)
- Fixed a bug when adding columns with families to tables created by certain older beta versions of CockroachDB. [#12475](https://github.com/cockroachdb/cockroach/pull/12475)
- It is now possible to disable logging output to files with `--log-dir=""`. [#12662](https://github.com/cockroachdb/cockroach/pull/12662)
- When logging to both `stderr` and files, all desired logging output is now properly emitted to files, not only to `stderr`. [#12662](https://github.com/cockroachdb/cockroach/pull/12662)

<h3 id="beta-20170105-internal-changes">Internal Changes</h3>

- A framework has been introduced for migrating existing clusters to new definitions for internal tables. [#11658](https://github.com/cockroachdb/cockroach/pull/11658)

<h3 id="beta-20170105-doc-updates">Doc Updates</h3>

- Added a tutorial and sample configs for [Monitoring CockroachDB with Prometheus, Grafana, and Alertmanager](../v1.0/monitor-cockroachdb-with-prometheus.html) [#928](https://github.com/cockroachdb/docs/pull/928), [#12288](https://github.com/cockroachdb/cockroach/pull/12288)
- Updated the [Orchestrate CockroachDB with Kubernetes](../v1.0/orchestrate-cockroachdb-with-kubernetes.html) tutorial and sample configs for Kubernetes 1.5 [#940](https://github.com/cockroachdb/docs/pull/940) [#12536](https://github.com/cockroachdb/cockroach/pull/12536)
- Descriptions have been added to all [built-in functions](../v1.0/functions-and-operators.html). [#12533](https://github.com/cockroachdb/cockroach/pull/12533)
- Added an interactive asciicast to the [Build a Python App with CockroachDB](../v1.0/build-a-python-app-with-cockroachdb.html) tutorial. [#937](https://github.com/cockroachdb/docs/pull/937)
- Added documentation on each [`ALTER TABLE`](../v1.0/alter-table.html) sub-statement: [#950](https://github.com/cockroachdb/docs/pull/950)
    - [`ADD COLUMN`](../v1.0/add-column.html)
    - [`ADD CONSTRAINT`](../v1.0/add-constraint.html)
    - [`ALTER COLUMN`](../v1.0/alter-column.html)
    - [`DROP COLUMN`](../v1.0/drop-column.html)
    - [`DROP CONSTRAINT`](../v1.0/drop-constraint.html)
    - [`RENAME COLUMN`](../v1.0/rename-column.html)
    - [`RENAME TABLE`](../v1.0/rename-table.html)
- Added documentation on the [`SHOW USERS`](../v1.0/show-users.html) statement. [#939](https://github.com/cockroachdb/docs/pull/939)
- Clarified that [password-based authentication](../v1.0/create-and-manage-users.html#user-authentication) cannot be used for the `root` user. [#938](https://github.com/cockroachdb/docs/pull/938)

<h3 id="beta-20170105-contributors">Contributors</h3>

This release includes 122 merged PRs by 25 authors. We would like to thank the following contributors from the CockroachDB community:

- Haines Chan
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20170112-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20170112.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20170112.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20170112-upgrade-notes">Upgrade Notes</h3>

- This release cannot be run concurrently with older beta releases. Please stop all nodes running older releases before restarting any node with this version.

<h3 id="beta-20170112-sql-language-changes">SQL Language Changes</h3>

- The `ALTER TABLE VALIDATE CONSTRAINT` statement can now be used to validate foreign keys in the `UNVALIDATED` state. [#12682](https://github.com/cockroachdb/cockroach/pull/12682)
- [`ALTER TABLE DROP COLUMN`](../v1.0/drop-column.html) can now drop columns that are involved in indexes. If the index includes columns other than the one being dropped, the `CASCADE` modifier is required. [#12782](https://github.com/cockroachdb/cockroach/pull/12782)
- Leading zeros in numeric literals are now ignored instead of causing the number to be parsed as octal. [#12803](https://github.com/cockroachdb/cockroach/pull/12803)
- Collated strings can now be cast to the non-collated string type. [#12820](https://github.com/cockroachdb/cockroach/pull/12820)
- Arithmetic with [aggregated functions](../v1.0/functions-and-operators.html#aggregate-functions) no longer crashes when the input table is empty. [#12733](https://github.com/cockroachdb/cockroach/pull/12733)
- The [`SHOW COLUMNS`](../v1.0/show-columns.html) statement now works for non-root users with the appropriate permissions. [#12776](https://github.com/cockroachdb/cockroach/pull/12776)
- The `information_schema.statistics.NON_UNIQUE` field is now set correctly. [#12793](https://github.com/cockroachdb/cockroach/pull/12793)
- It is now possible to use `EXPLAIN` statements as an input to other queries using a new square bracket syntax: `SELECT MAX(level) FROM [EXPLAIN SELECT * FROM kv ORDER BY v]`. [#12637](https://github.com/cockroachdb/cockroach/pull/12637)
- The format of SQL error messages has been standardized. [#12401](https://github.com/cockroachdb/cockroach/pull/12401)

<h3 id="beta-20170112-command-line-interface-changes">Command-Line Interface Changes</h3>

- The prototype `cockroach backup` and `cockroach restore` commands have been removed (backup and restore functionality will be provided through SQL statements instead). [#12788](https://github.com/cockroachdb/cockroach/pull/12788)

<h3 id="beta-20170112-admin-ui-changes">Admin UI Changes</h3>

- The set of graphs displayed in the UI has been changed. [#12797](https://github.com/cockroachdb/cockroach/pull/12797)
- The node list and cluster pages has been updated. [#12643](https://github.com/cockroachdb/cockroach/pull/12643) [#12719](https://github.com/cockroachdb/cockroach/pull/12719)
- A new metric `raftlog.behind` is now reported to track how far behind raft processing is on a node. [#12800](https://github.com/cockroachdb/cockroach/pull/12800)

<h3 id="beta-20170112-bug-fixes">Bug Fixes</h3>

- Ranges can no longer be rebalanced away from their current lease holder. [#12598](https://github.com/cockroachdb/cockroach/pull/12598)
- Eliminated a source of incorrect "not lease holder" errors. [#12542](https://github.com/cockroachdb/cockroach/pull/12542)
- Reduced spammy "purgatory" log messages. [#12528](https://github.com/cockroachdb/cockroach/pull/12528)

<h3 id="beta-20170112-performance-improvements">Performance Improvements</h3>

- The maximum allowable clock offset has been increased from 250ms to 500ms. [#12821](https://github.com/cockroachdb/cockroach/pull/12821)
- Replica destruction is now much faster. [#12745](https://github.com/cockroachdb/cockroach/pull/12745)
- Raft snapshots and replica destruction no longer run concurrently. [#12737](https://github.com/cockroachdb/cockroach/pull/12737)
- Raft snapshots are now managed by a new internal queue. [#12686](https://github.com/cockroachdb/cockroach/pull/12686)
- Raft logs are now garbage collected more aggressively. [#12686](https://github.com/cockroachdb/cockroach/pull/12686)
- Replicas that are behind are no longer considered targets for lease rebalancing. [#12736](https://github.com/cockroachdb/cockroach/pull/12736)
- Tuned some RocksDB parameters. [#12677](https://github.com/cockroachdb/cockroach/pull/12677)

<h3 id="beta-20170112-doc-updates">Doc Updates</h3>

- Added a Java code sample for transaction retry logic to the [Build a Java App with CockroachDB](../v1.0/build-a-java-app-with-cockroachdb.html) tutorial. [#987](https://github.com/cockroachdb/docs/pull/987)
- Added documentation on [SQL type conversions](../v1.0/data-types.html#data-type-conversions-casts). [#977](https://github.com/cockroachdb/docs/pull/977)

<h3 id="beta-20170112-contributors">Contributors</h3>

This release includes 60 merged PRs by 22 authors. We would like to thank the following contributors from the CockroachDB community:

- songhao
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20170126-license-change">License Change</h3>

- CockroachDB is now covered by the [CockroachDB Community License](https://github.com/cockroachdb/cockroach/blob/master/LICENSE). A pure open-source (APL2) version can be obtained by building from source with the `make buildoss` build target. See our [blog post](https://www.cockroachlabs.com/blog/how-were-building-a-business-to-last/) for more details.

<h3 id="beta-20170126-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20170126.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20170126.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20170126-backwards-incompatible-changes">Backwards-Incompatible Changes</h3>

- TLS 1.2 is now required to communicate with a CockroachDB server in secure mode. [#12898](https://github.com/cockroachdb/cockroach/pull/12898)
- The hex string syntax `X'0d0a'` now produces [byte values](../v1.0/sql-constants.html#hexadecimal-encoded-byte-array-literals) instead of string values, so it can accept non-UTF-8 input. [#13094](https://github.com/cockroachdb/cockroach/pull/13094)

<h3 id="beta-20170126-build-changes">Build Changes</h3>

- Cockroachdb now uses Go 1.7.4. [#12881](https://github.com/cockroachdb/cockroach/pull/12881)

<h3 id="beta-20170126-new-features">New Features</h3>

- The location of replicas, both when first added and when rebalanced to maintain cluster equilibrium, is now influenced by [`--locality`](../v1.0/start-a-node.html) settings at the node-level and more [expressive zone configuration constraints](../v1.0/configure-replication-zones.html#replication-constraints). [#13119](https://github.com/cockroachdb/cockroach/pull/13119)
- Old log files are now garbage collected automatically. [#13083](https://github.com/cockroachdb/cockroach/pull/13083)

<h3 id="beta-20170126-sql-language-changes">SQL Language Changes</h3>

- The `information_schema.statistics` table and the output of [`SHOW INDEXES`](../v1.0/show-index.html) now include columns that are added to the index implicitly (the primary key is an implicit part of secondary indexes). These columns are marked by a new `Implicit` column. [#12801](https://github.com/cockroachdb/cockroach/pull/12801)
- The `COPY` statement is now more compatible with PostgreSQL. [#12723](https://github.com/cockroachdb/cockroach/pull/12723)
- CockroachDB now advertises the `integer_datetimes` parameter, improving compatibility with JDBC. [#12842](https://github.com/cockroachdb/cockroach/pull/12842)
- The `sum()` [function](../v1.0/functions-and-operators.html) now works with [`INTEGER`](../v1.0/int.html) values. [#12938](https://github.com/cockroachdb/cockroach/pull/12938)
- The `format_type()` nd `col_description()` [functions](../v1.0/functions-and-operators.html) are now supported. [#12967](https://github.com/cockroachdb/cockroach/pull/12967) [#12978](https://github.com/cockroachdb/cockroach/pull/12978)
- The `pg_catalog.pg_enum` table now exists (although it is always empty because we do not yet support enum types). [#12972](https://github.com/cockroachdb/cockroach/pull/12972)
- The `pg_catalog.pg_collation` table is now supported, along with the `pg_attribute.attcollation` and `pg_type.typcollation` columns. [#12983](https://github.com/cockroachdb/cockroach/pull/12983)
- The `OID` and `NAME` types are now supported (and used in `pg_catalog`) for compatibility with PostgreSQL. [#12641](https://github.com/cockroachdb/cockroach/pull/12641)
- [`SHOW COLUMNS`](../v1.0/show-columns.html) now includes a summary of indices that the column is a part of. [#12907](https://github.com/cockroachdb/cockroach/pull/12907)

<h3 id="beta-20170126-command-line-interface-changes">Command-Line Interface Changes</h3>

- The [`cockroach dump`](../v1.0/sql-dump.html) command can now dump multiple tables at the same time. [#12759](https://github.com/cockroachdb/cockroach/pull/12759)
- The [`cockroach dump`](../v1.0/sql-dump.html) has a new flag, `--dump-mode`, which can be used to dump the schema or the data for a table separately. [#12759](https://github.com/cockroachdb/cockroach/pull/12759)
- Timestamps are now displayed in a format which is accepted by the SQL parser. [#12886](https://github.com/cockroachdb/cockroach/pull/12886)
- The `--pretty` flag has been removed from commands that never used it. [#12900](https://github.com/cockroachdb/cockroach/pull/12900)
- An error is raised when too many positional command-line arguments are provided. [#12901](https://github.com/cockroachdb/cockroach/pull/12901)

<h3 id="beta-20170126-admin-ui-changes">Admin UI Changes</h3>

- When the cursor is over a graph, a vertical line is shown to mark the same time on all graphs. [#12645](https://github.com/cockroachdb/cockroach/pull/12645)

<h3 id="beta-20170126-performance-improvements">Performance Improvements</h3>

- Table leases are now released when a node shuts down cleanly. [#12501](https://github.com/cockroachdb/cockroach/pull/12501)
- Miscellaneous query optimizations. [#12617](https://github.com/cockroachdb/cockroach/pull/12617)
- The gossip network reaches equilibrium faster in larger clusters. [#12880](https://github.com/cockroachdb/cockroach/pull/12880) [#12920](https://github.com/cockroachdb/cockroach/pull/12920) [#12974](https://github.com/cockroachdb/cockroach/pull/12974)
- When a node is shutting down, SQL connections are closed when they become idle. [#12952](https://github.com/cockroachdb/cockroach/pull/12952)
- Nodes now refuse to accept new ranges if they are falling behind on the ranges they already have. [#13043](https://github.com/cockroachdb/cockroach/pull/13043)

<h3 id="beta-20170126-bug-fixes">Bug Fixes</h3>

- [`UPDATE`](../v1.0/update.html) statements using a secondary index no longer cause server crashes during schema changes. [#12794](https://github.com/cockroachdb/cockroach/pull/12794)
- Improved accuracy and performance of node liveness heartbeats. [#12864](https://github.com/cockroachdb/cockroach/pull/12864)
- Reduced the occurrence of "ambiguous result" errors. [#12557](https://github.com/cockroachdb/cockroach/pull/12557)
- The server no longer ignores signals during initialization. [#12743](https://github.com/cockroachdb/cockroach/pull/12743)
- It is now possible to drop a table with a self-referential foreign key without the `CASCADE` modifier. [#12958](https://github.com/cockroachdb/cockroach/pull/12958)
- Additional data consistency checks have been temporarily enabled. [#12994](https://github.com/cockroachdb/cockroach/pull/12994)
- Fixed a crash when retryable errors are returned inside subqueries. [#13028](https://github.com/cockroachdb/cockroach/pull/13028)
- Node ID allocation is now retried if it fails when a node first starts. [#13107](https://github.com/cockroachdb/cockroach/pull/13107)

<h3 id="beta-20170126-doc-updates">Doc Updates</h3>

- Added documentation on [SQL Value Expressions](../v1.0/sql-expressions.html), [Table Expressions](../v1.0/table-expressions.html), and [Constants](../v1.0/sql-constants.html). [#1008](https://github.com/cockroachdb/docs/pull/1008)
- Added documentation on [String Collation](../v1.0/collate.html). [#974](https://github.com/cockroachdb/docs/pull/974)
- Update the [`cockroach dump`](../v1.0/sql-dump.html) documentation to cover dumping multiple tables as well as choosing whether to dump a table's schema, data, or both. [#1010](https://github.com/cockroachdb/docs/pull/1010)
- Updated the [`cockroach zone`](../v1.0/configure-replication-zones.html) documentation to explain how node-level locality settings and zone configuration constraints influence the location of replicas, and added [scenario-based examples](../v1.0/configure-replication-zones.html#scenario-based-examples). [#1027](https://github.com/cockroachdb/docs/pull/1027)
- Updated cluster topology guidance in [Recommended Production Settings](../v1.0/recommended-production-settings.html#cluster-topology). [#1027](https://github.com/cockroachdb/docs/pull/1027)

<h3 id="beta-20170126-contributors">Contributors</h3>

This release includes 115 merged PRs by 25 authors. We would like to thank the following contributors from the CockroachDB community:

- DiSiqueira
- Jason E. Aten
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20170209-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20170209.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20170209.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20170209-build-changes">Build Changes</h3>

- Official binaries for Linux now support older Linux distributions, including RHEL 6. [#13102](https://github.com/cockroachdb/cockroach/pull/13102)
- CockroachDB now uses RocksDB 5.0.2. [#12913](https://github.com/cockroachdb/cockroach/pull/12913)

<h3 id="beta-20170209-sql-language-changes">SQL Language Changes</h3>

- The `unnest()` [function](../v1.0/functions-and-operators.html) is now supported. [#13154](https://github.com/cockroachdb/cockroach/pull/13154)
- It is now possible to join a set-returning [function](../v1.0/functions-and-operators.html) like `generate_series()` with itself. [#13140](https://github.com/cockroachdb/cockroach/pull/13140)
- The timestamp parser now accepts an additional format. [#13159](https://github.com/cockroachdb/cockroach/pull/13159)
- The output of [`EXPLAIN`](../v1.0/explain.html) has been improved. [#13216](https://github.com/cockroachdb/cockroach/pull/13216) [#13221](https://github.com/cockroachdb/cockroach/pull/13221)
- Hex string literals (`X''`) can now contain byte sequences that are not valid UTF-8. [#13287](https://github.com/cockroachdb/cockroach/pull/13287)
- `COPY` now works outside transactions. [#13400](https://github.com/cockroachdb/cockroach/pull/13400)
- Fixed some edge cases with the `IN` [operator](../v1.0/functions-and-operators.html#operators). [#13444](https://github.com/cockroachdb/cockroach/pull/13444)
- The `pg_type` table now contains entries with the same names as PostgreSQL, such as `int2`, `int4`, and `int8` instead of just `integer`. [#13355](https://github.com/cockroachdb/cockroach/pull/13355)
- The `pg_backend_pid`, `obj_description`, and `shobj_description` [functions](../v1.0/functions-and-operators.html) and the `pg_inherits`, `pg_foreign_table`, and `pg_foreign_server` tables now have placeholder implementations for compatibility with some clients. [#13097](https://github.com/cockroachdb/cockroach/pull/13097) [#13181](https://github.com/cockroachdb/cockroach/pull/13181)

<h3 id="beta-20170209-command-line-interface-changes">Command-Line Interface Changes</h3>

- The `--pretty` flag of [`cockroach sql`](../v1.0/use-the-built-in-sql-client.html) has been removed, and replaced with a `--format` flag that supports multiple output formats. The command `set display_format` can be used to change the format during a session. [#13171](https://github.com/cockroachdb/cockroach/pull/13171)
- The current database name is now shown in the prompt. [#12747](https://github.com/cockroachdb/cockroach/pull/12747) [#13379](https://github.com/cockroachdb/cockroach/pull/13379)
- Non-interactive usage of [`cockroach sql`](../v1.0/use-the-built-in-sql-client.html) is much faster when the input file contains very long lines. [#13174](https://github.com/cockroachdb/cockroach/pull/13174)

<h3 id="beta-20170209-admin-ui-changes">Admin UI Changes</h3>

- Introduced a new overview dashboard. [#13348](https://github.com/cockroachdb/cockroach/pull/13348)
- Improved accuracy of histogram data. [#13106](https://github.com/cockroachdb/cockroach/pull/13106)

<h3 id="beta-20170209-performance-improvements">Performance Improvements</h3>

- All columns in newly-created tables are placed in the same [column family](../v1.0/column-families.html) by default. [#13198](https://github.com/cockroachdb/cockroach/pull/13198)
- Scans with a `LIMIT` no longer interfere with writes to rows that match the `WHERE` clause but were not returned due to the `LIMIT`. [#13349](https://github.com/cockroachdb/cockroach/pull/13349)
- Performance is more stable during splits. [#13208](https://github.com/cockroachdb/cockroach/pull/13208)
- Reduced unnecessary disk access in read-only transactions. [#13367](https://github.com/cockroachdb/cockroach/pull/13367)
- Reduced log spam. [#13388](https://github.com/cockroachdb/cockroach/pull/13388)

<h3 id="beta-20170209-bug-fixes">Bug Fixes</h3>

- Nodes now retry at startup if they are unable to allocate a node ID. [#13148](https://github.com/cockroachdb/cockroach/pull/13148)
- Improved gossiping of system configuration data. [#13167](https://github.com/cockroachdb/cockroach/pull/13167)

<h3 id="beta-20170209-doc-updates">Doc Updates</h3>

- Added language-specific tutorials on [building an app with CockroachDB](../v1.0/build-an-app-with-cockroachdb.html).
    - The [Go tutorial](../v1.0/build-a-go-app-with-cockroachdb.html) now covers using the Go pq driver or the GORM ORM. [#1069](https://github.com/cockroachdb/docs/pull/1069)
    - The [Python tutorial](../v1.0/build-a-python-app-with-cockroachdb.html) now covers using the psycopg2 driver or the SQLAlchemy ORM. [#1079](https://github.com/cockroachdb/docs/pull/1079)
    - The [Ruby tutorial](../v1.0/build-a-ruby-app-with-cockroachdb.html) now provides a code sample demonstrating transaction retry logic. [#1068](https://github.com/cockroachdb/docs/pull/1068)
- New documentation on the current methods of [importing data into CockroachDB](../v1.0/import-data.html). [#1076](https://github.com/cockroachdb/docs/pull/1076)
- New documentation on how [name resolution](../v1.0/sql-name-resolution.html) works in CockroachDB. [#1050](https://github.com/cockroachdb/docs/pull/1050)
- New documentation on using the [`EXPLAIN`](../v1.0/explain.html) statement to analyze the query plan of `DELETE`, `INSERT`, `SELECT`, or `UPDATE` statements. [#1073](https://github.com/cockroachdb/docs/pull/1073)
- New FAQ on [how CockroachDB is both highly available and strongly consistent without violating the CAP theorem](../v1.0/frequently-asked-questions.html#how-is-cockroachdb-both-highly-available-and-strongly-consistent). [#1061](https://github.com/cockroachdb/docs/pull/1061)
- Expanded documentation on [simple `CASE` expressions](../v1.0/sql-expressions.html#simple-case-expressions) and [searched `CASE` expressions](../v1.0/sql-expressions.html#searched-case-expressions). [#1036](https://github.com/cockroachdb/docs/pull/1036)

<h3 id="beta-20170209-contributors">Contributors</h3>

This release includes 132 merged PRs by 24 authors. We would like to thank the following contributor from the CockroachDB community:

- Panos Mamatsis
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20170216-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20170216.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20170216.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20170216-sql-language-changes">SQL Language Changes</h3>

- The [search path](../v1.0/sql-name-resolution.html#search-path) for table names can now be set with `SET SEARCH_PATH`. [#13313](https://github.com/cockroachdb/cockroach/pull/13313)
- All built-in [functions](../v1.0/functions-and-operators.html) are now in the global namespace (instead of `pg_catalog`). [#13404](https://github.com/cockroachdb/cockroach/pull/13404)
- The `pg_extension` table and the `current_database` [function](../v1.0/functions-and-operators.html) are now supported. The `pg_type` and `pg_namespace` tables have had some changes to improve compatibility with ActiveRecord. [#13429](https://github.com/cockroachdb/cockroach/pull/13429)
- The columns used in foreign keys are now tracked more accurately. [#13439](https://github.com/cockroachdb/cockroach/pull/13439)

<h3 id="beta-20170216-admin-ui-changes">Admin UI Changes</h3>

- The correct fonts are now used. [#13539](https://github.com/cockroachdb/cockroach/pull/13539)

<h3 id="beta-20170216-bug-fixes">Bug Fixes</h3>

- Replicas that fall too far behind no longer get stuck in a state in which they can no longer catch up. [#13515](https://github.com/cockroachdb/cockroach/pull/13515)
- The `cockroach.LEVEL` symlinks created in the log directory now work. [#13585](https://github.com/cockroachdb/cockroach/pull/13585)

<h3 id="beta-20170216-performance-improvements">Performance Improvements</h3>

- Reduced memory allocations in various places. [#13466](https://github.com/cockroachdb/cockroach/pull/13466) [#13487](https://github.com/cockroachdb/cockroach/pull/13487) [#13455](https://github.com/cockroachdb/cockroach/pull/13455) [#13579](https://github.com/cockroachdb/cockroach/pull/13579)
- The [minimum number of file descriptors](../v1.0/recommended-production-settings.html) has been reduced to 1956 (1700 per store + 256 for networking) so that CockroachDB can be run more easily on platforms with a default limit of 2048 file descriptors. [#13462](https://github.com/cockroachdb/cockroach/pull/13462)
- [`UPSERT`](../v1.0/upsert.html) is now faster in many cases. [#13488](https://github.com/cockroachdb/cockroach/pull/13488) [#13500](https://github.com/cockroachdb/cockroach/pull/13500)

<h3 id="beta-20170216-doc-updates">Doc Updates</h3>

- The [sample Kubernetes config](../v1.0/orchestrate-cockroachdb-with-kubernetes.html) is now able to recover from a situation in which all nodes are down at once. [#13580](https://github.com/cockroachdb/cockroach/pull/13580)
- The [Build a Java App with CockroachDB](../v1.0/build-a-java-app-with-cockroachdb.html) tutorial now covers using the Hibernate ORM in addition to the jdbc driver. [#1100](https://github.com/cockroachdb/docs/pull/1100)
- The [Start a Cluster in Docker](../v1.0/start-a-local-cluster-in-docker.html) tutorial now offers OS-specific instructions, with specific improvements for running on Windows. [#1095](https://github.com/cockroachdb/docs/pull/1095)

<h3 id="beta-20170216-contributors">Contributors</h3>

This release includes 60 merged PRs by 18 authors. We would like to thank first-time contributor Jason Chu from the CockroachDB community.
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20170223-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20170223.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20170223.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20170223-sql-language-changes">SQL Language Changes</h3>

- Fixed parsing of interval constants with precision modifiers such as `INTERVAL '5' YEARS`. [#13702](https://github.com/cockroachdb/cockroach/pull/13702)
- String literals containing `true`, `false`, or their synonyms (but not placeholders or other expressions of type string) can now be used where a `BOOL` is required. [#13685](https://github.com/cockroachdb/cockroach/pull/13685)
- The underlying implementation of the `DECIMAL` type has been replaced. This may change the results of some calculations. The default rounding behavior for `DECIMAL` values is now "half away from zero", which is consistent with PostgreSQL. [#13551](https://github.com/cockroachdb/cockroach/pull/13551)
- The column headers in the results of `SHOW` commands are now lower-case to match PostgreSQL. [#13484](https://github.com/cockroachdb/cockroach/pull/13484)
- The `pg_index.indkey` column is now an `int2vector`, improving compatibility with Sequelize. [#13484](https://github.com/cockroachdb/cockroach/pull/13484)
- Improved support for arrays (still limited to the `pg_catalog` tables). [#13636](https://github.com/cockroachdb/cockroach/pull/13636) [#13535](https://github.com/cockroachdb/cockroach/pull/13535)
- The output of `SHOW USERS` is now sorted. [#13661](https://github.com/cockroachdb/cockroach/pull/13661)

<h3 id="beta-20170223-admin-ui-changes">Admin UI Changes</h3>

- A new graph displays the execution latency for SQL statements. [#12790](https://github.com/cockroachdb/cockroach/pull/12790)
- A new "All Events" page displays cluster history. [#13093](https://github.com/cockroachdb/cockroach/pull/13093)
- New metrics for round-trip time between nodes are now recorded. [#13533](https://github.com/cockroachdb/cockroach/pull/13533)
- Fixed-width fonts now correctly use Inconsolata. [#13631](https://github.com/cockroachdb/cockroach/pull/13631)

<h3 id="beta-20170223-bug-fixes">Bug Fixes</h3>

- Fixed a bug in error handling that could causes ranges to get stuck if an error occurred during a rebalance. [#13605](https://github.com/cockroachdb/cockroach/pull/13605)
- Retry table lease errors during schema changes, preventing them from getting stuck. [#13606](https://github.com/cockroachdb/cockroach/pull/13606)
- Inter-node connections are now closed on heartbeat timeouts, improving the handling of network partitions. [#13654](https://github.com/cockroachdb/cockroach/pull/13654)

<h3 id="beta-20170223-performance-improvements">Performance Improvements</h3>

- Metadata for queries using unqualified table names is now cached, speeding up these queries by 130%. [#13635](https://github.com/cockroachdb/cockroach/pull/13635)
- Eliminated an unnecessary sort phase in table scans, making `cockroach dump` usable on larger tables. [#13703](https://github.com/cockroachdb/cockroach/pull/13703)
- Leases and replicas will no longer be transferred to nodes that are draining. [#11724](https://github.com/cockroachdb/cockroach/pull/11724) [#13601](https://github.com/cockroachdb/cockroach/pull/13601)
- Reduced unnecessary copying and allocations. [#13660](https://github.com/cockroachdb/cockroach/pull/13660) [#13649](https://github.com/cockroachdb/cockroach/pull/13649)

<h3 id="beta-20170223-contributors">Contributors</h3>

This release includes 57 merged PRs by 19 authors.
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20170309-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20170309.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20170309.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20170309-general-changes">General Changes</h3>

- CockroachDB now uses Go 1.8. [#13673](https://github.com/cockroachdb/cockroach/pull/13673)
- CockroachDB now uses RocksDB 5.1.4. [#13831](https://github.com/cockroachdb/cockroach/pull/13831)

<h3 id="beta-20170309-sql-language-changes">SQL Language Changes</h3>

- Table names are now released as soon as the [`DROP TABLE`](../v1.0/drop-table.html) statement executes, instead of being held until the asynchronous cleanup finishes. [#13908](https://github.com/cockroachdb/cockroach/pull/13908)
- Most write statements now accept a `RETURNING NOTHING` clause to indicate that the query should not return a result (not even the number of rows affected). This will be used in the future to enable optimizations. [#13802](https://github.com/cockroachdb/cockroach/pull/13802)
- PostgreSQL-style duration formats are now parsed case-insensitively. [#13748](https://github.com/cockroachdb/cockroach/pull/13748)
- Tables with no columns are now handled correctly in the network protocol. [#13765](https://github.com/cockroachdb/cockroach/pull/13765)
- `COPY` no longer requires the input data to end in a newline. [#13858](https://github.com/cockroachdb/cockroach/pull/13858)
- [`SHOW CONSTRAINTS`](../v1.0/show-constraints.html) no longer includes constraints involving hidden columns. [#13870](https://github.com/cockroachdb/cockroach/pull/13870)
- It is no longer possible to drop system tables. [#13911](https://github.com/cockroachdb/cockroach/pull/13911)
- The `DESC` modifier can now be applied to columns in a [`PRIMARY KEY`](../v1.0/primary-key.html) or [`UNIQUE`](../v1.0/unique.html) clause during table creation. [#13924](https://github.com/cockroachdb/cockroach/pull/13924)

<h3 id="beta-20170309-command-line-interface-changes">Command-Line Interface Changes</h3>

- The [`cockroach dump`](../v1.0/sql-dump.html) command now takes an `--as-of` flag, which can be used to make a backup as of a particular time.
- When [starting a node](../v1.0/start-a-node.html), the details printed to `stdout` are now written to the node's `INFO` log as well. Also, these details now include node attributes and locality. [#1143](https://github.com/cockroachdb/docs/issues/1143), [#1144](https://github.com/cockroachdb/docs/issues/1144)

<h3 id="beta-20170309-bug-fixes">Bug Fixes</h3>

- Fixed (again) a bug in error handling that could causes ranges to get stuck if an error occurred during a rebalance. [#13763](https://github.com/cockroachdb/cockroach/pull/13763)
- Work around a bug that could cause GRPC connections to get stuck in a broken state. [#13822](https://github.com/cockroachdb/cockroach/pull/13822)
- Panic stack traces are now written to the `INFO` log file by default instead of to `stderr`. [#13890](https://github.com/cockroachdb/cockroach/pull/13890)

<h3 id="beta-20170309-performance-improvements">Performance Improvements</h3>

- Improved performance in high-contention scenarios by introducing a queue to wait for conflicting transactions to finish. This also reduces the likelihood of transaction restarts due to write/write conflicts. [#13501](https://github.com/cockroachdb/cockroach/pull/13501)
- A new lease implementation is now used for most ranges, reducing the number of writes that must be done just to maintain a lease. [#13826](https://github.com/cockroachdb/cockroach/pull/13826)
- Reduced the occurrence of `AmbiguousResultError` by waiting for pending RPCs to complete before returning. [#13800](https://github.com/cockroachdb/cockroach/pull/13800)
- Changed some mutexes to `RWMutexes`. Removed some instrumentation of mutex timing. [#13697](https://github.com/cockroachdb/cockroach/pull/13697)
- `cockroach dump` now works in larger batches. [#13812](https://github.com/cockroachdb/cockroach/pull/13812)
- Failed snapshots no longer disrupt regular raft messages. [#13816](https://github.com/cockroachdb/cockroach/pull/13816)
- Increased flow control parameters for GRPC connections, improving performance on high-latency links. [#13840](https://github.com/cockroachdb/cockroach/pull/13840)
- Increased limits on in-flight raft messages. [#13862](https://github.com/cockroachdb/cockroach/pull/13862)
- Range leases are now proactively transferred away from draining nodes. [#13792](https://github.com/cockroachdb/cockroach/pull/13792)
- Avoid sending redundant PushTxn calls in intent resolution. [#13955](https://github.com/cockroachdb/cockroach/pull/13955)

<h3 id="beta-20170309-doc-updates">Doc Updates</h3>

- Added an FAQ on [auto-generating unique IDs in CockroachDB](../v1.0/sql-faqs.html#how-do-i-auto-generate-unique-row-ids-in-cockroachdb). [#1126](https://github.com/cockroachdb/docs/pull/1126)
- Expanded guidance on [using a SQL table as an alternative to direct key-value access](../v1.0/frequently-asked-questions.html#can-i-use-cockroachdb-as-a-key-value-store). [#1122](https://github.com/cockroachdb/docs/pull/1122)
- Added details about [using the `BIT` type to constrain integers](../v1.0/int.html#size) based on their corresponding binary values. [#1116](https://github.com/cockroachdb/docs/pull/1116)
- Added details about [building a binary](../v1.0/install-cockroachdb.html) that excludes enterprise functionality covered by the CockroachDB Community License (CCL). [#1130](https://github.com/cockroachdb/docs/pull/1130)

<h3 id="beta-20170309-contributors">Contributors</h3>

This release includes 124 merged PRs by 21 authors. We would like to thank first-time contributor Dmitry Vorobev from the CockroachDB community.
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20170323-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20170323.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20170323.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20170323-backwards-incompatible-changes">Backwards-Incompatible Changes</h3>

- The `ALTER TABLE SPLIT AT` syntax has changed to support multiple splits with one command. Existing uses of `ALTER TABLE t SPLIT AT (x, y)` should be changed to `ALTER TABLE t SPLIT AT VALUES (x, y)`. [#14281](https://github.com/cockroachdb/cockroach/pull/14281)

<h3 id="beta-20170323-installation-changes">Installation Changes</h3>

- The Homebrew formula has moved; to install CockroachDB with `brew`, use `brew install cockroachdb/cockroach/cockroach`.

<h3 id="beta-20170323-general-changes">General Changes</h3>

- CockroachDB now uses `jemalloc` version 4.5.0. [#14287](https://github.com/cockroachdb/cockroach/pull/14287)

<h3 id="beta-20170323-sql-language-changes">SQL Language Changes</h3>

- [Collated strings](../v1.0/collate.html) are now fully supported and may be stored in columns. [#13609](https://github.com/cockroachdb/cockroach/pull/13609)
- The new `isnan()` [function](../v1.0/functions-and-operators.html) and special syntax `IS NAN` and `IS NOT NAN` can be used to detect floats that are `Not-a-Number`. [#14248](https://github.com/cockroachdb/cockroach/pull/14248)
- Variance and standard deviation calculations for integers and decimals now use additional precision internally. [#14013](https://github.com/cockroachdb/cockroach/pull/14013)
- Decimals with precisions greater than 16 now work correctly. [#14304](https://github.com/cockroachdb/cockroach/pull/14304)
- [`CREATE TABLE AS`](../v1.0/create-table-as.html) now works properly with NULL values. [#14247](https://github.com/cockroachdb/cockroach/pull/14247)
- The `SHOW application_name` statement is now supported. [#14085](https://github.com/cockroachdb/cockroach/pull/14085)
- CockroachDB now reports its version in two new places so that clients can distinguish CockroachDB from PostgreSQL: in the `crdb_version` variable in the network handshake, and in a new table `crdb_internal.build_info`. [#14145](https://github.com/cockroachdb/cockroach/pull/14145)
- `ALTER TABLE SPLIT AT` no longer reports an error if the table is already split at the designated point. [#14273](https://github.com/cockroachdb/cockroach/pull/14273)
- Casts involving OID and `regclass` types now behave more consistently with PostgreSQL. The `oid()` function is now available. [#13965](https://github.com/cockroachdb/cockroach/pull/13965) [#14022](https://github.com/cockroachdb/cockroach/pull/14022) [#14115](https://github.com/cockroachdb/cockroach/pull/14115) [#14260](https://github.com/cockroachdb/cockroach/pull/14260)
- Placeholder syntax may now be used for OID values. [#14255](https://github.com/cockroachdb/cockroach/pull/14255)
- Types with modifiers can now be cast to `::regtype`. [#14030](https://github.com/cockroachdb/cockroach/pull/14030)

<h3 id="beta-20170323-command-line-interface-changes">Command-Line Interface Changes</h3>

- A new command `cockroach gen haproxy` is now available to generate an `haproxy` configuration file that can be used to access the cluster. [#14205](https://github.com/cockroachdb/cockroach/pull/14205)
- The [`cockroach start`](../v1.0/start-a-node.html) command now supports a `--pid-file` flag, which names a file to which the process ID will be written when the server is ready to handle requests. [#13996](https://github.com/cockroachdb/cockroach/pull/13996)
- If any environment variables used by `cockroach` are set but cannot be parsed, this is now treated as a fatal error. [#14124](https://github.com/cockroachdb/cockroach/pull/14124)

<h3 id="beta-20170323-admin-ui-changes">Admin UI Changes</h3>

- The log view now shows logs for the requested node. [#13947](https://github.com/cockroachdb/cockroach/pull/13947)
- The custom time range selector now uses UTC to match the graphs. [#14007](https://github.com/cockroachdb/cockroach/pull/14007)
- The admin UI now uses relative paths for all links and respects cookies, allowing it to be run behind authenticating proxies. [#14039](https://github.com/cockroachdb/cockroach/pull/14039)
- The guideline displayed when hovering over a graph is now positioned correctly. [#14008](https://github.com/cockroachdb/cockroach/pull/14008)

<h3 id="beta-20170323-bug-fixes">Bug Fixes</h3>

- [`UPSERT`](../v1.0/upsert.html) statements no longer incorrectly produce the error "cannot affect row a second time". [#10478](https://github.com/cockroachdb/cockroach/pull/10478)
- The replica allocator now explicitly recognizes when a node's health is unknown, and avoids situations in which a range could become critically under-replicated. [#14206](https://github.com/cockroachdb/cockroach/pull/14206)
- Fixed a problem with transaction conflicts immediately after a split that could cause 100% CPU usage. [#14305](https://github.com/cockroachdb/cockroach/pull/14305)
- The rebalancing system is better able to move replicas to match requested constraints. [#13973](https://github.com/cockroachdb/cockroach/pull/13973)
- Fixed a race that could lead to a panic when replicas are being moved frequently. [#14306](https://github.com/cockroachdb/cockroach/pull/14306)
- [`SHOW TABLES`](../v1.0/show-tables.html) no longer fails while a table is being dropped. [#14278](https://github.com/cockroachdb/cockroach/pull/14278)
- Fixed a crash in some [`EXPLAIN`](../v1.0/explain.html) statements. [#14244](https://github.com/cockroachdb/cockroach/pull/14244)
- [Name resolution](../v1.0/sql-name-resolution.html) no longer fails if non-existent databases are present in the search path. [#14006](https://github.com/cockroachdb/cockroach/pull/14006)
- Logging of "node joined the cluster" events for the UI is more reliable. [#14179](https://github.com/cockroachdb/cockroach/pull/14179)
- Memory accounting on macOS now correctly reports memory allocated by C code. [#14287](https://github.com/cockroachdb/cockroach/pull/14287)

<h3 id="beta-20170323-performance-improvements">Performance Improvements</h3>

- Range leases are now transferred to the replica closest to the source of load, when possible. This improves performance in geographically-distributed clusters. [#14268](https://github.com/cockroachdb/cockroach/pull/14268)
- The replica allocator will now actively attempt to move replicas away from no-longer-valid placements when the [zone configuration](../v1.0/configure-replication-zones.html) changes. [#14106](https://github.com/cockroachdb/cockroach/pull/14106)
- Improved the performance of write-heavy workloads. [#14138](https://github.com/cockroachdb/cockroach/pull/14138)
- Improved caching of range descriptors. [#14217](https://github.com/cockroachdb/cockroach/pull/14217)
- Reduced overhead in the command queue. [#13982](https://github.com/cockroachdb/cockroach/pull/13982)
- CockroachDB now enables TCP keepalives on its sockets, improving responsiveness to clients that have disappeared (or load balancers with short timeouts). [#14063](https://github.com/cockroachdb/cockroach/pull/14063)
- Index backfill now only reads the columns necessary to perform the backfill. [#14271](https://github.com/cockroachdb/cockroach/pull/14271)

<h3 id="beta-20170323-doc-updates">Doc Updates</h3>

- Expanded the tutorial on [orchestrating CockroachDB with Docker Swarm](../v1.0/orchestrate-cockroachdb-with-docker-swarm.html) to cover both secure and insecure clusters. [#1184](https://github.com/cockroachdb/docs/pull/1184)
- Added guidance on [importing data from PostgreSQL](../v1.0/import-data.html#import-from-postgresql-dump). [#1200](https://github.com/cockroachdb/docs/pull/1200)
- Added OS-specific instructions for [starting a local CockroachDB cluster in Docker](../v1.0/start-a-local-cluster-in-docker.html). [#1167](https://github.com/cockroachdb/docs/pull/1167)
- Improved the [install from binary instructions](../v1.0/install-cockroachdb.html) to include moving the binary into the `PATH`. [#1196](https://github.com/cockroachdb/docs/pull/1196)

<h3 id="beta-20170323-contributors">Contributors</h3>

This release includes 156 merged PRs by 23 authors. We would like to thank first-time contributor Jonas from the CockroachDB community.
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20170330-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20170330.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20170330.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20170330.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="beta-20170330-sql-language-changes">SQL Language Changes</h3>

- `DEFAULT NULL` column modifiers no longer produce type errors. [#14371](https://github.com/cockroachdb/cockroach/pull/14371)
- Consecutive write statements using the `RETURNING NOTHING` clause are now executed in parallel. [#14188](https://github.com/cockroachdb/cockroach/pull/14188)
- [`DECIMAL`](../v1.0/decimal.html) support for NaN, Inifinity, and negative zero. [#14302](https://github.com/cockroachdb/cockroach/pull/14302)

<h3 id="beta-20170330-command-line-interface-changes">Command-Line Interface Changes</h3>

- The separate `INFO`, `WARNING`, and `ERROR` log files have been
  replaced with a single file. [#14347](https://github.com/cockroachdb/cockroach/pull/14347)

<h3 id="beta-20170330-admin-ui-changes">Admin UI Changes</h3>

- The node list page now includes information about whether nodes are alive or dead. [#14258](https://github.com/cockroachdb/cockroach/pull/14258)
- Changed the names of some metrics related to lease transfers. [#14319](https://github.com/cockroachdb/cockroach/pull/14319)

<h3 id="beta-20170330-bug-fixes">Bug Fixes</h3>

- Fixed an inconsistency that could occur with one-phase transactions using the `SNAPSHOT` [isolation level](../v1.0/transactions.html#isolation-levels). [#14401](https://github.com/cockroachdb/cockroach/pull/14401)
- Prevented unexpected write intents on node liveness records, which could cause the cluster to become unavailable. [#14346](https://github.com/cockroachdb/cockroach/pull/14346)
- Fixed two "span use after Finish()" errors. [#14227](https://github.com/cockroachdb/cockroach/pull/14227)
- Fixed a rare panic in `raft.step()`. [#14344](https://github.com/cockroachdb/cockroach/pull/14344)

<h3 id="beta-20170330-performance-improvements">Performance Improvements</h3>

- Reads with timestamps in the past no longer block writes. [#14342](https://github.com/cockroachdb/cockroach/pull/14342)
- Improved node draining to prevent hanging `DROP` statements after a node restart. [#14341](https://github.com/cockroachdb/cockroach/pull/14341)
- Added support for compressing inter-node traffic with snappy. This will be enabled in a future release. [#14239](https://github.com/cockroachdb/cockroach/pull/14239)

<h3 id="beta-20170330-doc-updates">Doc Updates</h3>

- Expanded the [Build a Node.js App with CockroachDB](../v1.0/build-a-nodejs-app-with-cockroachdb-sequelize.html) tutorial to feature the Sequelize ORM. [#1225](https://github.com/cockroachdb/docs/pull/1225)
- Expanded [Manual Deployment](../v1.0/manual-deployment.html) tutorials to cover HAProxy load balancing. [#1213](https://github.com/cockroachdb/docs/pull/1213)
- Expanded [Digital Ocean](../v1.0/deploy-cockroachdb-on-digital-ocean.html) and [GCE](../v1.0/deploy-cockroachdb-on-google-cloud-platform.html) deployment tutorials to cover cloud platform-managed load balancing. Load balancing guidance for AWS and Azure coming soon. [#1213](https://github.com/cockroachdb/docs/pull/1213)
- Improved guidance on using the `cockroach gen` command to generate CockroachDB resources, including [example SQL data](../v1.0/generate-cockroachdb-resources.html#generate-example-data) and an [HAProxy configuration file](../v1.0/generate-cockroachdb-resources.html#generate-an-haproxy-configuration-file) for a running cluster. [#1213](https://github.com/cockroachdb/docs/pull/1213)

<h3 id="beta-20170330-contributors">Contributors</h3>

This release includes 56 merged PRs by 18 authors.
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

{{site.data.alerts.callout_danger}}Some significant bugs have been observed when upgrading to this release from prior versions, so it has been withdrawn.{{site.data.alerts.end}}
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20170413-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20170413.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20170413.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20170413.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="beta-20170413-backwards-incompatible-changes">Backwards-Incompatible Changes</h3>

- The implementation of indexing for [collated string columns](../v1.0/collate.html) has changed. Any secondary indexes containing collated strings must be [dropped](../v1.0/drop-index.html) before upgrading to this version and then [re-created](../v1.0/create-index.html) after upgrading. Note that this applies only to secondary indexes, not to primary indexes. [#14528](https://github.com/cockroachdb/cockroach/pull/14528)

- Any row with a `-0` [`FLOAT`](../v1.0/float.html) or [`DECIMAL`](../v1.0/decimal.html) value in a primary key or index must be [deleted](../v1.0/delete.html) before upgrading to this version and then [re-inserted](../v1.0/insert.html) after upgrading. Otherwise, the row containing `-0` will show up during table scans, but it will not be possible to delete it or select it as part of an index scan.

  If you suspect `-0` values are present but do not know where, an alternative approach is to use [`cockroach dump`](../v1.0/sql-dump.html) to back up tables with `FLOAT` or `DECIMAL` columns, drop the tables before upgrading, and then use the backup files to recreate the tables and indexes after upgrading. [#14528](https://github.com/cockroachdb/cockroach/pull/14528)

- The `experimental_strptime` and `experimental_strftime` [functions](../v1.0/functions-and-operators.html) are deprecated and will be removed in a future release. If you are currently using these functions, please let us know [here](https://forum.cockroachlabs.com/t/are-you-using-experimental-strptime-or-experimental-strftime/545).

- Several undocumented environment variables have been removed. [#14786](https://github.com/cockroachdb/cockroach/pull/14786) [#14797](https://github.com/cockroachdb/cockroach/pull/14797)
- Clusters which have used the `COCKROACH_PROPOSER_EVALUATED_KV` environment variable require special care when upgrading to this release; contact us for more information. [#14773](https://github.com/cockroachdb/cockroach/pull/14773)

<h3 id="beta-20170413-build-changes">Build Changes</h3>

- Building CockroachDB from source no longer uses `$GOPATH/bin` for anything except the final binary produced by `make install`. [#14629](https://github.com/cockroachdb/cockroach/pull/14629)
- Developers should use `make generate` instead of `go generate` to ensure the correct tool versions are used. [#14672](https://github.com/cockroachdb/cockroach/pull/14672)

<h3 id="beta-20170413-sql-language-changes">SQL Language Changes</h3>

- SQL variables can now be reset to their default values with the `RESET` statement or `SET x TO DEFAULT`. [#14105](https://github.com/cockroachdb/cockroach/pull/14105)
- Schema changes within [transactions](../v1.0/transactions.html) are now restricted. Certain combinations of schema changes with other statements (which would previously hang) will now return an error. It is recommended that DDL statements be issued outside of transactions, or as the only statement within a transaction. [#14368](https://github.com/cockroachdb/cockroach/pull/14368)
- Subqueries are now supported as the source of `UPDATE` statements. [#14611](https://github.com/cockroachdb/cockroach/pull/14611)
- Timestamp parsing now understands the format used by JDBC's `setTimestamp`. [#14712](https://github.com/cockroachdb/cockroach/pull/14712)
- [`INTERVAL`](../v1.0/interval.html) values larger than a month now use the suffix `mon` instead of `m` (which is also used for minutes). Intervals can now be parsed from strings containing decimals and negative numbers. [#14534](https://github.com/cockroachdb/cockroach/pull/14534)
- [`INTERVAL`](../v1.0/interval.html) values now support multiplication and division by [`FLOAT`](../v1.0/float.html) values. [#14614](https://github.com/cockroachdb/cockroach/pull/14614)
- Arithmetic operations on integers now check for overflow. [#14682](https://github.com/cockroachdb/cockroach/pull/14682)
- Comparisons involving tuples with non-identical types are now allowed whenever the comparison of the individual elements would be allowed. [#14674](https://github.com/cockroachdb/cockroach/pull/14674)
- The implementation of the `experimental_strptime` [function](../v1.0/functions-and-operators.html) is now consistent across platforms. [#14801](https://github.com/cockroachdb/cockroach/pull/14801)
- `BETWEEN` now supports any combination of types that would be supported by individual comparison operators. [#14754](https://github.com/cockroachdb/cockroach/pull/14754)
- Handling of untyped literals during overload resolution is now more consistent. [#14593](https://github.com/cockroachdb/cockroach/pull/14593)
- [`ROLLBACK TO SAVEPOINT`](../v1.0/rollback-transaction.html) is now allowed at any time, not only after receiving a "retry transaction" error. [#14538](https://github.com/cockroachdb/cockroach/pull/14538)
- [`CREATE TABLE AS SELECT`](../v1.0/create-table-as.html) now returns the number of rows affected to the SQL client driver. [#13187](https://github.com/cockroachdb/cockroach/pull/13187)
- [`ALTER TABLE .. ADD CONSTRAINT`](../v1.0/add-constraint.html) can now be used to add a self-referential foreign key. [#14711](https://github.com/cockroachdb/cockroach/pull/14711)
- The `RETURNING NOTHING` clause can now be used outside of a transaction, although it does not provide any performance benefit in this case. [#14551](https://github.com/cockroachdb/cockroach/pull/14551)
- [SQL user names](../v1.0/create-user.html) are now required to start with a letter, contain only letters, numbers, and underscores, and be no longer than 63 characters. [#14525](https://github.com/cockroachdb/cockroach/pull/14525)
- The [`BYTES`](../v1.0/bytes.html) type name is now reported as `bytea` in `pg_catalog.pg_type` for compatibility with PostgreSQL. [#14495](https://github.com/cockroachdb/cockroach/pull/14495)
- The PostgreSQL type IO functions (like `int8in`, `int8out`, `int8send`, and `int8recv`) have placeholder implementations for compatibility with some ORMs. [#14529](https://github.com/cockroachdb/cockroach/pull/14529)

<h3 id="beta-20170413-command-line-interface-changes">Command-Line Interface Changes</h3>

- The [`cockroach zone set`](../v1.0/configure-replication-zones.html) command now recognizes the special zone names `.meta`, `.timeseries`, and `.system` to set configurations for system metadata. [#14740](https://github.com/cockroachdb/cockroach/pull/14740)
- The [`cockroach start`](../v1.0/start-a-node.html) command no longer uses the `COCKROACH_PORT` environment variable; the port must be set on the server's command line (similar to `--host` and other flags). [#14612](https://github.com/cockroachdb/cockroach/pull/14612)
- The [`cockroach quit`](../v1.0/stop-a-node.html) command is now more robust. [#14775](https://github.com/cockroachdb/cockroach/pull/14775)
- Command history no longer corrupts previous commands when normalizing them. [#14496](https://github.com/cockroachdb/cockroach/pull/14496)
- Commands entered as a single line are now saved together in the history. [#14846](https://github.com/cockroachdb/cockroach/pull/14846)
- The config file generated by [`cockroach gen haproxy`](../v1.0/generate-cockroachdb-resources.html) now enables health checks for the server. [#14624](https://github.com/cockroachdb/cockroach/pull/14624)
- The `--store` and `--log-dir` flags now reject arguments starting with `~` that were not expanded by the shell. [#14746](https://github.com/cockroachdb/cockroach/pull/14746)

<h3 id="beta-20170413-admin-ui-changes">Admin UI Changes</h3>

- The **Node List** page has been improved. [#14395](https://github.com/cockroachdb/cockroach/pull/14395)
- A new `node-id` metric with labels for the node's address is now exported for use in external monitoring systems. [#14544](https://github.com/cockroachdb/cockroach/pull/14544)
- The `/debug/` pages are now accessible only from `localhost` by default. Set the environment variable `COCKROACH_REMOTE_DEBUG=any` when running the server to allow remote access. [#14647](https://github.com/cockroachdb/cockroach/pull/14647) [#14675](https://github.com/cockroachdb/cockroach/pull/14675)

<h3 id="beta-20170413-performance-improvements">Performance Improvements</h3>

- A new, more efficient format is now used for indexes with the [`STORING`](../v1.0/create-index.html#store-columns) clause. Existing indexes will still work, but will need to be dropped and recreated to get the benefits of the new format. [#14758](https://github.com/cockroachdb/cockroach/pull/14758)
- A single `TimestampCache` is now shared by all replicas on a store, providing better control over memory usage and better support for large transactions. [#14489](https://github.com/cockroachdb/cockroach/pull/14489)
- Reduced memory used by the `TimestampCache`. [#14516](https://github.com/cockroachdb/cockroach/pull/14516) [#14514](https://github.com/cockroachdb/cockroach/pull/14514)
- Replica garbage collection is now much more efficient. [#14391](https://github.com/cockroachdb/cockroach/pull/14391)
- [Adding](../v1.0/add-column.html) and [dropping](../v1.0/drop-column.html) columns now uses the distributed SQL engine. [#14331](https://github.com/cockroachdb/cockroach/pull/14331)
- The health of inter-node connections is now monitored using HTTP/2 ping frames instead of regular RPCs. This ensures that HTTP flow control cannot cause a connection to be considered unhealthy. [#14424](https://github.com/cockroachdb/cockroach/pull/14424)
- The limit on the number of concurrent inter-node RPCs has been increased. [#14785](https://github.com/cockroachdb/cockroach/pull/14785)
- The bandwidth used by range snapshots is now limited to 2MB/sec by default to reduce impact on live traffic. [#14718](https://github.com/cockroachdb/cockroach/pull/14718)
- If a single row grows larger than the configured maximum range size, the split queue will no longer spin trying to split the range repeatedly. [#14654](https://github.com/cockroachdb/cockroach/pull/14654)
- Several kinds of tracing and logging have been disabled by default. [#14677](https://github.com/cockroachdb/cockroach/pull/14677)

<h3 id="beta-20170413-bug-fixes">Bug Fixes</h3>

- Fixed an issue with [`UPDATE`](../v1.0/update.html) and [`DELETE`](../v1.0/delete.html) on tables with [`STORING`](../v1.0/create-index.html#store-columns) indexes. Indexes affected by this bug will need to be dropped and recreated. [#14643](https://github.com/cockroachdb/cockroach/pull/14643)
- `BETWEEN` now handles `NULL` in the same way as other comparison operators. [#14686](https://github.com/cockroachdb/cockroach/pull/14686)
- Fixed a bug with comparisons involving division with a constant negative divisor. [#14702](https://github.com/cockroachdb/cockroach/pull/14702)
- [`INSERT ON CONFLICT DO UPDATE`](../v1.0/insert.html#update-values-on-conflict) no longer uses an error-prone optimization. The [`UPSERT`](../v1.0/upsert.html) statement is now faster than the equivalent `INSERT ON CONFLICT DO UPDATE` statement. [#14485](https://github.com/cockroachdb/cockroach/pull/14485)
- Schema changes now abort more reliably when encountering errors. [#14025](https://github.com/cockroachdb/cockroach/pull/14025)
- Joining nodes of two different clusters is now detected more reliably. [#14475](https://github.com/cockroachdb/cockroach/pull/14475)
- Fixed a panic during prepared [`UPDATE`](../v1.0/update.html) statements. [#14481](https://github.com/cockroachdb/cockroach/pull/14481)
- [`FLOAT`](../v1.0/float.html) and [`DECIMAL`](../v1.0/decimal.html) values in primary keys and indexes now consider `0` and `-0` equal (although the sign will correctly be retained). [#14528](https://github.com/cockroachdb/cockroach/pull/14528)
- [`DECIMAL`](../v1.0/decimal.html) values in primary keys and indexes no longer have zeros truncated. If a secondary index contains a `DECIMAL` value with trailing zeros, you can [drop](../v1.0/drop-index.html) and [re-create](../v1.0/create-index.html) the index to have the value returned correctly when the index is used. [#14528](https://github.com/cockroachdb/cockroach/pull/14528)
- Fixed a crash when assigning with the `DEFAULT` keyword in [`UPDATE`](../v1.0/update.html) statements. [#14640](https://github.com/cockroachdb/cockroach/pull/14640)

<h3 id="beta-20170413-doc-updates">Doc Updates</h3>

- Updated the [Start a Local Cluster](../v1.0/start-a-local-cluster.html) tutorial to better highlight core CockroachDB capabilities such as automated replications and fault tolerance. [#1257](https://github.com/cockroachdb/docs/pull/1257)
- Expanded the [Build a Ruby App with CockroachDB](../v1.0/build-a-ruby-app-with-cockroachdb-activerecord.html) tutorial to feature the ActiveRecord ORM. [#1234](https://github.com/cockroachdb/docs/pull/1234)
- Clarified the `--store` flag in the [`cockroach start`](../v1.0/start-a-node.html) documentation. [#1243](https://github.com/cockroachdb/docs/pull/1243)
- Updated the [build from source](../v1.0/install-cockroachdb.html) instructions to use a source tarball instead of the `cockroach` GitHub repository. The source tarball downloads faster and doesn't need to be extracted in the `GOPATH`. Developers who want to contribute to CockroachDB should use the instructions in [CONTRIBUTING.md](https://github.com/cockroachdb/cockroach/blob/master/CONTRIBUTING.md) instead. [#1209](https://github.com/cockroachdb/docs/issues/1209)
- Added Google Cloud Spanner to the [CockroachDB in Comparison](../v1.0/cockroachdb-in-comparison.html) chart. [#1264](https://github.com/cockroachdb/docs/pull/1264)

<h3 id="beta-20170413-contributors">Contributors</h3>

This release includes 215 merged PRs by 27 authors. We would like to thank the following contributors from the CockroachDB community, especially first-time contributors Amos Bird and Daniel Upton.

- Amos Bird
- Christian Meunier
- Daniel Upton
- songhao
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20170420-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20170420.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20170420.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20170420.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="beta-20170420-backwards-incompatible-changes">Backwards-Incompatible Changes</h3>

- Security-related command-line arguments have been changed. Instead of using multiple flags, certificates and keys are now loaded from a single [`--certs-dir`](../v1.0/create-security-certificates.html#certificate-directory) flag, which defaults to `~/.cockroach-certs` but can be set to a custom location. The individual flags still work in this release but will be removed in the next one. Also note that the `--insecure` flag is now **required** for insecure mode. [#14703](https://github.com/cockroachdb/cockroach/pull/14703)
- The `--alsologtostderr` argument has been renamed to `--logtostderr`, and now takes an optional argument to specify a threshold. [#14841](https://github.com/cockroachdb/cockroach/pull/14841)
- The `^` operator now means `pow()` instead of bitwise xor (bitwise xor uses the `#` operator; this is consistent with PostgreSQL). Any tables with this operator in a [`DEFAULT`](../v1.0/default-value.html) or [`CHECK`](../v1.0/check.html) expression will need to be updated. [#14882](https://github.com/cockroachdb/cockroach/pull/14882)

<h3 id="beta-20170420-upgrade-notes">Upgrade Notes</h3>

- This release cannot run at the same time as releases prior to [`beta-20170413`](beta-20170413.html). If you are running an older version, you must either upgrade to that version first or take down all servers in the cluster before starting any server with this version. This release includes new functionality to make future upgrades smoother. [#14959](https://github.com/cockroachdb/cockroach/pull/14959)

<h3 id="beta-20170420-build-changes">Build Changes</h3>

- CockroachDB's build system has been rewritten to improve portability. It can no longer be installed with `go get` alone; use of the `Makefile` is now required. GNU Make, CMake, and XZ Utils must also be installed to build from source. As a result, CockroachDB can now be built on a larger variety of systems. [#14840](https://github.com/cockroachdb/cockroach/pull/14840)

<h3 id="beta-20170420-sql-language-changes">SQL Language Changes</h3>

- Type errors in [`CHECK`](../v1.0/check.html) constraints are now detected earlier. [#14984](https://github.com/cockroachdb/cockroach/pull/14984)
- Aggregation functions now work correctly above the windowing level. [#14729](https://github.com/cockroachdb/cockroach/pull/14729)
- The default precision for inexact decimal operations is now 20 digits (up from 16). [#15001](https://github.com/cockroachdb/cockroach/pull/15001)
- Bounds are now checked when converting [`FLOAT`](../v1.0/float.html) or [`DECIMAL`](../v1.0/decimal.html) values to [`INTEGER`](../v1.0/int.html). [#14967](https://github.com/cockroachdb/cockroach/pull/14967)
- The `pg_catalog` data for `int2vector` is now consistent with PostgreSQL. [#14989](https://github.com/cockroachdb/cockroach/pull/14989)

<h3 id="beta-20170420-command-line-interface-changes">Command-Line Interface Changes</h3>

- The [`cockroach cert`](../v1.0/create-security-certificates.html) commands have been updated to reflect the new `--certs-dir` convention. [#14703](https://github.com/cockroachdb/cockroach/pull/14703)
- New flags `--log-file-max-size` (default 10 MiB) and `--log-dir-max-size` (default 100 MiB) can be used to control log rotation and deletion. The `--log-file-verbosity` flag (default `INFO`) can be used to control the verbosity of the log file. [#14841](https://github.com/cockroachdb/cockroach/pull/14841)
- Critical errors are now written to `stderr` regardless of the logging configuration. [#14926](https://github.com/cockroachdb/cockroach/pull/14926) [#15025](https://github.com/cockroachdb/cockroach/pull/15025) [#15040](https://github.com/cockroachdb/cockroach/pull/15040)
- The server will now reload its certificates and keys on a `SIGHUP`. [#14925](https://github.com/cockroachdb/cockroach/pull/14925)
- Some commands which previously required a `node` certificate now work with the `root` client certificate. [#14972](https://github.com/cockroachdb/cockroach/pull/14972)
- The undocumented `cockroach debug kv` commands have been removed. [#14857](https://github.com/cockroachdb/cockroach/pull/14857)
- The [`cockroach quit`](../v1.0/stop-a-node.html) command now has a hard timeout of 1 minute if the cluster has lost quorum. [#14708](https://github.com/cockroachdb/cockroach/pull/14708)

<h3 id="beta-20170420-admin-ui-changes">Admin UI Changes</h3>

- Improved alert banners. [#14915](https://github.com/cockroachdb/cockroach/pull/14915) [#15010](https://github.com/cockroachdb/cockroach/pull/15010)

<h3 id="beta-20170420-bug-fixes">Bug Fixes</h3>

- Transactions no longer get stuck forever when a split occurs while they are waiting for a conflicting transaction. [#14974](https://github.com/cockroachdb/cockroach/pull/14974)
- The Admin UI can now display tables with non-lowercase names. [#14818](https://github.com/cockroachdb/cockroach/pull/14818)
- Fixed a panic with "span and descriptor's range do not overlap". [#14952](https://github.com/cockroachdb/cockroach/pull/14952)
- Fixed a data race in the Prometheus exporter. [#14943](https://github.com/cockroachdb/cockroach/pull/14943)

<h3 id="beta-20170420-performance-improvements">Performance Improvements</h3>

- The timestamp cache is now much more efficient, leading to a 42% speedup on single-node write-only benchmarks. [#14867](https://github.com/cockroachdb/cockroach/pull/14867)
- Transaction deadlocks are now detected faster. [#14789](https://github.com/cockroachdb/cockroach/pull/14789)
- Fixed a memory "leak" in Raft. [#15041](https://github.com/cockroachdb/cockroach/pull/15041)
- Improved performance of concurrent RPCs on a single GRPC connection. [#14939](https://github.com/cockroachdb/cockroach/pull/14939)
- Raft processing now uses more threads. [#14897](https://github.com/cockroachdb/cockroach/pull/14897)
- Improved performance of schema changes that add indexes. [#14937](https://github.com/cockroachdb/cockroach/pull/14937)
- Reduced the number of cgo calls for RocksDB iterators. [#14920](https://github.com/cockroachdb/cockroach/pull/14920)

<h3 id="beta-20170420-doc-updates">Doc Updates</h3>

- Expanded the [`TRUNCATE`](../v1.0/truncate.html) documentation to cover using `CASCADE` to truncate dependent tables. [#1297](https://github.com/cockroachdb/docs/pull/1297)
- Minor improvements to the [`ROLLBACK`](../v1.0/rollback-transaction.html) documentation. [#1296](https://github.com/cockroachdb/docs/pull/1296)

<h3 id="beta-20170420-contributors">Contributors</h3>

This release includes 101 merged PRs by 21 authors. We would like to thank first-time contributor xphoniex from the CockroachDB community.
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.0-rc.1-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0-rc.1.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0-rc.1.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0-rc.1.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.0-rc.1-backwards-incompatible-changes">Backwards-Incompatible Changes</h3>

- It is not possible to upgrade directly to this version of CockroachDB from a version older than [`beta-20170413`](beta-20170413.html). Upgrade any older clusters to that version first. [#15228](https://github.com/cockroachdb/cockroach/pull/15228)
- The [`cockroach start`](../v1.0/start-a-node.html) command no longer recognizes the `COCKROACH_INSECURE` and `COCKROACH_CERTS_DIR` environment variables which are intended to be client-only. Use the `--insecure` and `--certs-dir` command-line flags instead. [#15196](https://github.com/cockroachdb/cockroach/pull/15196) [#15288](https://github.com/cockroachdb/cockroach/pull/15288)
- Older certificate-related command-line flags have been removed; use `--certs-dir` instead. [#15241](https://github.com/cockroachdb/cockroach/pull/15241)
- Various environment variables have been removed in favor of the new `CLUSTER SETTING` commands described below.
- The undocumented `SET SYNTAX` statement and the "modern" syntax variant have been removed. [#15064](https://github.com/cockroachdb/cockroach/pull/15064)

<h3 id="v1.0-rc.1-general-changes">General Changes</h3>

- [Anonymous diagnostics statistics](../v1.0/diagnostics-reporting.html) are now reported by default. To opt out, set `COCKROACH_SKIP_ENABLING_DIAGNOSTIC_REPORTING=true` in the environment when starting the cluster, or use `SET CLUSTER SETTING diagnostics.reporting.enabled = false` in the SQL shell on clusters already running. [#14901](https://github.com/cockroachdb/cockroach/pull/14901)

<h3 id="v1.0-rc.1-build-changes">Build Changes</h3>

- CockroachDB now builds on Windows. Windows support is currently experimental and is recommended only for development, not production.
- Building from source on macOS 10.11 works again. [#15168](https://github.com/cockroachdb/cockroach/pull/15168)
- Building from source on older CPUs (without SSE4.2) works again. [#15247](https://github.com/cockroachdb/cockroach/pull/15247)

<h3 id="v1.0-rc.1-enterprise-features">Enterprise Features</h3>

- Distributed backup and restore capabilities are now available to [enterprise-license customers](https://www.cockroachlabs.com/cockroachdb-community-license/). Using the new [`BACKUP`](../v1.0/backup.html) SQL statement, a cluster's schema and data can be backed up in full or incrementally as of a given timestamp, and can be stored on the platforms you're already using, including AWS S3, Google Cloud Storage, NFS, or HTTP storage. In the unlikely event of irreparable cluster failure, the new [`RESTORE`](../v1.0/restore.html) SQL statement can be used to restore a cluster from enterprise backups. Importantly, backup and restore operations are distributed across the nodes of a cluster, minimizing the impact on cluster performance.

  For details about pricing, [contact Cockroach Labs](https://www.cockroachlabs.com/get-cockroachdb/).

<h3 id="v1.0-rc.1-sql-language-changes">SQL Language Changes</h3>

- Table names and other identifiers are now case-insensitive in all cases, even when used in double quotes. These identifiers will be shown in lowercase in many introspection interfaces. This is consistent with PostgreSQL and improves compatibility with the PostgreSQL JDBC driver. [#15434](https://github.com/cockroachdb/cockroach/pull/15434)
- New `SHOW ALL CLUSTER SETTINGS` and `SET CLUSTER SETTING` statements can be used to view and change certain [cluster-wide settings](../v1.0/cluster-settings.html). The following cluster settings are available in this release:
  - `diagnostics.reporting.enabled`
  - `diagnostics.reporting.report_metrics`
  - `diagnostics.reporting.send_crash_reports`
  - `kv.allocator.lease_rebalancing_aggressiveness`
  - `kv.allocator.load_based_lease_rebalancing.enabled`
  - `kv.raft.command.max_size`
  - `kv.raft_log.synchronize`
  - `kv.snapshot_rebalance.max_rate`
  - `kv.snapshot_recovery.max_rate`
  - `kv.transaction.max_intents`
  - `server.remote_debugging.mode`
  - `sql.defaults.distsql`
  - `sql.metrics.statement_details.dump_to_logs`
  - `sql.metrics.statement_details.enabled`
  - `sql.metrics.statement_details.threshold`
  - `sql.trace.log_statement_execute`
  - `sql.trace.session_eventlog.enabled`
  - `sql.trace.txn.enable_threshold`
- The `PREPARE` and `EXECUTE` statements can now be used to use prepared statements in a SQL shell. [#15256](https://github.com/cockroachdb/cockroach/pull/15256)
- The `regexp_replace()` [function](../v1.0/functions-and-operators.html) now handles newlines correctly, both with and without the `n` flag. [#15309](https://github.com/cockroachdb/cockroach/pull/15309)
- Precedence for the binary `~` [operator](../v1.0/functions-and-operators.html#operators) (regex match) has been changed. This could cause [`DEFAULT`](../v1.0/default-value.html) or [`CHECK`](../v1.0/check.html) expressions to have different behavior if `~` was used in combination with other operators. These will need to be fixed manually. [#15264](https://github.com/cockroachdb/cockroach/pull/15264)
- Ambiguous results now return the PostgreSQL "statement completion unknown" error code. [#15054](https://github.com/cockroachdb/cockroach/pull/15054)
- Time zones can now be specified in more formats in [`DATE`](../v1.0/date.html) types, including `+0700`, `+07`, `+7`, and `+07:00`. [#15177](https://github.com/cockroachdb/cockroach/pull/15177)
- Set-returning [functions](../v1.0/functions-and-operators.html) (like `generate_series()`) are now supported in more contexts. [#14369](https://github.com/cockroachdb/cockroach/pull/14369)

<h3 id="v1.0-rc.1-admin-ui-changes">Admin UI Changes</h3>

- Tooltips are now shown on graphs. [#15282](https://github.com/cockroachdb/cockroach/pull/15282)
- Fixed elements that overlapped incorrectly. [#15387](https://github.com/cockroachdb/cockroach/pull/15387)
- Improved handling of long strings in table cells. [#15387](https://github.com/cockroachdb/cockroach/pull/15387)
- The SQL statement latency graphs now include some overhead that was not previously accounted for. [#15176](https://github.com/cockroachdb/cockroach/pull/15176)

<h3 id="v1.0-rc.1-command-line-interface-changes">Command-Line Interface Changes</h3>

- The default lifetime of certificates generated by [`cockroach cert`](../v1.0/create-security-certificates.html) has been increased to 10 years. [#15306](https://github.com/cockroachdb/cockroach/pull/15306)
- The output format of [`cockroach cert list`](../v1.0/create-security-certificates.html) has been improved. [#15198](https://github.com/cockroachdb/cockroach/pull/15198)

<h3 id="v1.0-rc.1-bug-fixes">Bug Fixes</h3>

- Table scans over [interleaved tables](../v1.0/interleave-in-parent.html) now work correctly. [#15043](https://github.com/cockroachdb/cockroach/pull/15043)
- Fixed backslash escaping when used with the Python `psycopg2` driver. [#15281](https://github.com/cockroachdb/cockroach/pull/15281)
- Improved certificate validation, fixing compatibility with client certs as used by `psql`. [#15286](https://github.com/cockroachdb/cockroach/pull/15286)
- Fixed a race between lease transfers and repair/rebalance operations. [#15355](https://github.com/cockroachdb/cockroach/pull/15355)
- Creating a table with a bad `DEFAULT` expression no longer panics. [#15170](https://github.com/cockroachdb/cockroach/pull/15170)
- Improved tracking of memory used by aggregate functions. [#14904](https://github.com/cockroachdb/cockroach/pull/14904)
- Rebalancing now only considers ranges for which all replicas are healthy. [#15312](https://github.com/cockroachdb/cockroach/pull/15312)
- Writes to the raft log are now fully synced to disk. [#15366](https://github.com/cockroachdb/cockroach/pull/15366)
- Fixed a hang during node shutdown. [#15465](https://github.com/cockroachdb/cockroach/pull/15465)
- Fixed "requested entry at index" log spam from `raft_log_queue.go`. [#15466](https://github.com/cockroachdb/cockroach/pull/15466)

<h3 id="v1.0-rc.1-performance-improvements">Performance Improvements</h3>

- A new distributed SQL execution engine is now used for a large subset of [`SELECT`](../v1.0/select.html) statements. Instead of returning all table data involved in the query to the gateway node for final computations, computation is distributed between the gateway node and the nodes where the data resides, with just the relevant results returned to the gateway node. This deeper distribution of work significantly improves performance of queries, especially those using [aggregation functions](../v1.0/functions-and-operators.html#aggregate-functions) or [joins](../v1.0/table-expressions.html#join-expressions).
- Smoothed out request stats used by lease rebalancing and reduced thrashing. [#15156](https://github.com/cockroachdb/cockroach/pull/15156) [#15321](https://github.com/cockroachdb/cockroach/pull/15321)
- Improved retry logic after lease failures. [#15199](https://github.com/cockroachdb/cockroach/pull/15199)
- Snapshots that are necessary for recovery are now given higher recovery than those used for rebalancing. [#15279](https://github.com/cockroachdb/cockroach/pull/15279)
- Very large transactions and commands that might cause the server to run out of memory are now rejected earlier. [#15350](https://github.com/cockroachdb/cockroach/pull/15350)
- Node liveness heartbeats are now retried when they fail due to heavy load. [#15362](https://github.com/cockroachdb/cockroach/pull/15362)
- Improved priority adjustments when transactions are pushed. [#7380](https://github.com/cockroachdb/cockroach/pull/7380)

<h3 id="v1.0-rc.1-doc-updates">Doc Updates</h3>

- Expanded documentation on [backing up](../v1.0/back-up-data.html) and [restoring data](../v1.0/restore-data.html) to cover both distributed capabilities covered by our enterprise license as well as non-distributed dump and import functionality. [#1239](https://github.com/cockroachdb/docs/pull/1239)
- Added [SQL-specific FAQs](../v1.0/sql-faqs.html). [#1315](https://github.com/cockroachdb/docs/pull/1315)
- Documented the [order in which operators are evaluated](../v1.0/functions-and-operators.html#operators) within statements. [#1322](https://github.com/cockroachdb/docs/pull/1322)
- Documented the known list of [differences between PostgreSQL and CockroachDB](../v1.0/porting-postgres.html) for identical SQL input, with porting instructions. [#1328](https://github.com/cockroachdb/docs/pull/1328)
- Expanded best practices when [using the `--locality` setting](../v1.0/recommended-production-settings.html) to replicate evenly across datacenters. [#1334](https://github.com/cockroachdb/docs/pull/1334)

<h3 id="v1.0-rc.1-contributors">Contributors</h3>

This release includes 185 merged PRs by 27 authors. We would like to thank the following contributors from the CockroachDB community, including first-time contributors Evgeniy Vasilev and Mahmoud Al-Qudsi.

- Evgeniy Vasilev
- Kenji Kaneda
- Mahmoud Al-Qudsi
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.0-rc.2-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0-rc.2.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0-rc.2.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0-rc.2.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.0-rc.2-general-changes">General Changes</h3>

- [Diagnostics reporting](../v1.0/diagnostics-reporting.html) now includes anonymized query statistics. [#15491](https://github.com/cockroachdb/cockroach/pull/15491)

<h3 id="v1.0-rc.2-sql-language-changes">SQL Language Changes</h3>

- Restrictions on schema changes in transactions with other statements have been relaxed. It is now possible to insert into a table in the same transaction that created it, provided there are no [`FOREIGN KEY`](../v1.0/foreign-key.html) or [`INTERLEAVE`](../v1.0/interleave-in-parent.html) clauses. [#15511](https://github.com/cockroachdb/cockroach/pull/15511)
- The distributed SQL engine supports queries that internally generate rows with no columns. [#15420](https://github.com/cockroachdb/cockroach/pull/15420)
- New variables added to the [cluster-wide settings](../v1.0/cluster-settings.html): `server.declined_reservation_timeout`, `server.failed_reservation_timeout`, and `server.time_until_store_dead`. [#15581](https://github.com/cockroachdb/cockroach/pull/15581)

<h3 id="v1.0-rc.2-command-line-interface-changes">Command-Line Interface Changes</h3>

- If the new flag `--listening-url-file` is passed to [`cockroach start`](../v1.0/start-a-node.html), the server will write its SQL connection URL to the specified file on successful startup, in addition to printing it to `stdout`. This is particularly helpful in identifying the node's port when an unused port is assigned automatically (`--port=0`).[#15468](https://github.com/cockroachdb/cockroach/pull/15468)
- The [`cockroach sql`](../v1.0/use-the-built-in-sql-client.html) shell no longer buffers all results in memory before printing them. [#15277](https://github.com/cockroachdb/cockroach/pull/15277)
- The log file is now flushed more reliably when a node exits. [#15531](https://github.com/cockroachdb/cockroach/pull/15531)
- The new flag `--max-offset` on the [`cockroach start`](../v1.0/start-a-node.html) command defines the maximum allowed clock offset for the cluster and replaces the environment variable `COCKROACH_MAX_OFFSET`. Note that the `--max-offset` value must be the same on all nodes in the cluster. In order to change it, every node in the cluster must be stopped and restarted with the new value. [#15568](https://github.com/cockroachdb/cockroach/pull/15568)
- The `--raft-tick-interval` flag has been removed from the [`cockroach start`](../v1.0/start-a-node.html) command. [#15547](https://github.com/cockroachdb/cockroach/pull/15547)
- Certificate and key loading errors during node startup are now reported to the user via `stdout` as well as being written to the log file. [#15655](https://github.com/cockroachdb/cockroach/pull/15655)

<h3 id="v1.0-rc.2-admin-ui-changes">Admin UI Changes</h3>

- The number of transactions that would be affected by a change in isolation level is now tracked. [#15234](https://github.com/cockroachdb/cockroach/pull/15234)
- Improved style of the single node and log pages. [#15486](https://github.com/cockroachdb/cockroach/pull/15486)
- The event log now refreshes automatically. [#15502](https://github.com/cockroachdb/cockroach/pull/15502)
- Graphs on the overview page now have tooltips. [#15624](https://github.com/cockroachdb/cockroach/pull/15624)

<h3 id="v1.0-rc.2-bug-fixes">Bug Fixes</h3>

- Fixed a panic when a query returning a constant `NULL` uses the new distributed execution engine. [#15530](https://github.com/cockroachdb/cockroach/pull/15530)
- Fixed two issues that could cause requests to get stuck indefinitely. [#15557](https://github.com/cockroachdb/cockroach/pull/15557) [#15573](https://github.com/cockroachdb/cockroach/pull/15573)
- Fixed a rare crash when extending table leases. [#15560](https://github.com/cockroachdb/cockroach/pull/15560)
- Fixed a crash when a transaction that uses [`SAVEPOINT cockroach_restart`](../v1.0/savepoint.html) does something other than `ROLLBACK TO SAVEPOINT` after an error. [#15563](https://github.com/cockroachdb/cockroach/pull/15563)
- Fixed [`RESTORE`](../v1.0/restore.html) for interleaved tables. [#15564](https://github.com/cockroachdb/cockroach/pull/15564)
- Return parse error instead of panic when constant typechecking fails. [#15636](https://github.com/cockroachdb/cockroach/pull/15636)
- Prevent persistent distsql and schema change errors after a node dies. [#15368](https://github.com/cockroachdb/cockroach/pull/15368)
- Previously, [`ALTER TABLE ADD COLUMN`](../v1.0/add-column.html) with a `DEFAULT unique_rowid()` specification could create many duplicate values. This has been corrected. [#15628](https://github.com/cockroachdb/cockroach/pull/15628)
- Fixed a consistency error in [`BACKUP`](../v1.0/backup.html). [#15642](https://github.com/cockroachdb/cockroach/pull/15642)
- Fixed incorrect NULL results when using an aggregation with an empty table. [#15688](https://github.com/cockroachdb/cockroach/pull/15688)

<h3 id="v1.0-rc.2-performance-improvements">Performance Improvements</h3>

- Reduced thrashing in gossip after a rolling restart. [#15533](https://github.com/cockroachdb/cockroach/pull/15533)
- [`RESTORE`](../v1.0/restore.html) performs its pre-splitting less aggressively. [#15548](https://github.com/cockroachdb/cockroach/pull/15548)
- Improved memory accounting in distributed SQL. [#15595](https://github.com/cockroachdb/cockroach/pull/15595), [#15610](https://github.com/cockroachdb/cockroach/pull/15610), [#15623](https://github.com/cockroachdb/cockroach/pull/15623), [#15627](https://github.com/cockroachdb/cockroach/pull/15627)
- Queries using session-dependent variables (e.g., time conversions using the session's timezone) are now executed through the distributed SQL engine. [#15628](https://github.com/cockroachdb/cockroach/pull/15628)

<h3 id="v1.0-rc.2-doc-updates">Doc Updates</h3>

- Added an FAQ on different [ways to log SQL queries](../v1.0/sql-faqs.html). [#1359](https://github.com/cockroachdb/docs/pull/1359)
- Updated [local deployment tutorials](../v1.0/start-a-local-cluster.html) to have nodes listen only on `localhost`. This ensures these tutorials work even on machines whose hostnames aren’t resolvable. [#1358](https://github.com/cockroachdb/docs/pull/1358)

<h3 id="v1.0-rc.2-contributors">Contributors</h3>

This release includes 85 merged PRs by 24 authors. We would like to thank the following contributors from the CockroachDB community:

- Dmitry Vorobev
- Richard Artoul
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.0.1-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0.1.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0.1.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0.1.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.0.1-bug-fixes">Bug Fixes</h3>

- The command-line interface no longer prompts for a password twice when [password authentication](../v1.0/create-and-manage-users.html#secure-clusters-with-passwords) is used. [#15919](https://github.com/cockroachdb/cockroach/pull/15919)
- [`CREATE USER WITH PASSWORD`](../v1.0/create-user.html) now works correctly in the [`cockroach sql`](../v1.0/use-the-built-in-sql-client.html) shell. [#15911](https://github.com/cockroachdb/cockroach/pull/15911)
- Fixed bugs in the `MIN()` and `MAX()` [aggregate functions](../v1.0/functions-and-operators.html#aggregate-functions) in the presence of `NULL` values. [#15912](https://github.com/cockroachdb/cockroach/pull/15912)
- Administrator privileges are no longer required on Windows. [#15916](https://github.com/cockroachdb/cockroach/pull/15916)
- Favicons now display correctly in the web UI. [#15918](https://github.com/cockroachdb/cockroach/pull/15918)
- A clear error message is now printed when running on Windows versions older than 8 (the oldest version we support). [#15920](https://github.com/cockroachdb/cockroach/pull/15920)
- The `--cache` and `--max-sql-memory` flags of [`cockroach start`](../v1.0/start-a-node.html) now use their default values on OpenBSD. [#15914](https://github.com/cockroachdb/cockroach/pull/15914)
- Attempting to [create a view](../v1.0/create-view.html) involving an array now returns an error instead of crashing the server. [#15913](https://github.com/cockroachdb/cockroach/pull/15913)
- [`cockroach start --insecure`](../v1.0/start-a-node.html) now prints a warning about the consequences of insecure mode. [#15924](https://github.com/cockroachdb/cockroach/pull/15924)
- The `round()` function for floats now works on `arm64` platforms. In some instances this changes the low bits of the result on other platforms. [#15915](https://github.com/cockroachdb/cockroach/pull/15915)
- [Collation](../v1.0/collate.html) locales containing capital letters are now parsed correctly. [#15917](https://github.com/cockroachdb/cockroach/pull/15917)
- Fixed a panic in node ID allocation. [#15937](https://github.com/cockroachdb/cockroach/pull/15937)
- Other errors in node/store ID allocation are now retried automatically. [#15973](https://github.com/cockroachdb/cockroach/pull/15973)
- [Dropping a database](../v1.0/drop-database.html) containing views now works correctly. [#15983](https://github.com/cockroachdb/cockroach/pull/15983)
- Fully-qualified column names referring to [views](../v1.0/views.html) now work correctly. [#15984](https://github.com/cockroachdb/cockroach/pull/15984)
- Fixed a panic when preparing a query with window functions. [#16019](https://github.com/cockroachdb/cockroach/pull/16019)
- Fixed a panic when null arguments are given to the `generate_series()` or `unnest()` function. [#16017](https://github.com/cockroachdb/cockroach/pull/16017)

<h3 id="v1.0.1-admin-ui-changes">Admin UI Changes</h3>

- Fixed the display of timestamps in logs. [#16002](https://github.com/cockroachdb/cockroach/pull/16002)

<h3 id="v1.0.1-performance-improvements">Performance Improvements</h3>

- Disabled RocksDB assertions in release builds. [#15943](https://github.com/cockroachdb/cockroach/pull/15943) [#15960](https://github.com/cockroachdb/cockroach/pull/15960)
- Index joins for queries with limits no longer fetch unnecessary rows. [#15969](https://github.com/cockroachdb/cockroach/pull/15969)
- Fixed an issue causing high CPU usage after data is deleted or overwritten. [#16006](https://github.com/cockroachdb/cockroach/pull/16006)

<h3 id="v1.0.1-doc-updates">Doc Updates</h3>

- Contributing to the docs is now easier. The new **Contribute** options at the top of every page of the docs let you immediately start a PR with page edits or open a GitHub issue to report issues on the page or to request a new topic. [#1440](https://github.com/cockroachdb/docs/pull/1440)
- Added troubleshooting guidance on [common errors](../v1.0/common-errors.html), [cluster and node setup](../v1.0/cluster-setup-troubleshooting.html), [SQL query behavior](../v1.0/query-behavior-troubleshooting.html), [using debug and error logs](../v1.0/debug-and-error-logs.html), [finding support resources](../v1.0/support-resources.html), and [filing issues](../v1.0/file-an-issue.html). [#1370](https://github.com/cockroachdb/docs/pull/1370)
- Added [FAQs](../v1.0/operational-faqs.html) on why memory and disk usage increases steadily in new clusters. [#1450](https://github.com/cockroachdb/docs/pull/1450)
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.0.2-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0.2.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0.2.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0.2.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.0.2-general-changes">General Changes</h3>

- CockroachDB now uses Go 1.8.3 (fixing a security issue when elliptic curve certificates are used, as well as a panic). [#16330](https://github.com/cockroachdb/cockroach/pull/16330)

<h3 id="v1.0.2-sql-language-changes">SQL Language Changes</h3>

- The `BEGIN` statement now accepts the `READ WRITE` modifier for compatibility with the Go `lib/pq` driver. [#16348](https://github.com/cockroachdb/cockroach/pull/16348)

<h3 id="v1.0.2-command-line-interface-changes">Command-Line Interface Changes</h3>

- More node configuration details get logged on node initialization. [#16209](https://github.com/cockroachdb/cockroach/pull/16209)

<h3 id="v1.0.2-bug-fixes">Bug Fixes</h3>

- Fixed several bugs with the [`OFFSET`](../v1.0/select.html#paginate-through-limited-results) clause, including incorrect results and a panic when it is used without a `LIMIT`. [#16315](https://github.com/cockroachdb/cockroach/pull/16315)
- Fixed the behavior of `LIMIT` in index joins. [#16340](https://github.com/cockroachdb/cockroach/pull/16340)
- Fixed the behavior of [`DISTINCT`](../v1.0/select.html#select-distinct-rows) with omitted columns. [#16318](https://github.com/cockroachdb/cockroach/pull/16318)
- Fixed decoding of very large [`DECIMAL`](../v1.0/decimal.html) values. [#16284](https://github.com/cockroachdb/cockroach/pull/16284)
- [`ALTER TABLE...ADD FOREIGN KEY`](../v1.0/add-constraint.html#add-the-foreign-key-constraint) no longer attempts to create an index on the source table. [#16333](https://github.com/cockroachdb/cockroach/pull/16333)
- `INT2VECTOR` is now zero-indexed. [#16326](https://github.com/cockroachdb/cockroach/pull/16326)
- Timestamp parsing is now consistent between prepared and non-prepared statements. [#16327](https://github.com/cockroachdb/cockroach/pull/16327)
- If a prepared statement is invalidated by a schema change, it now returns an error instead of an incorrect result. [#16335](https://github.com/cockroachdb/cockroach/pull/16335)
- The replica allocator will no longer remove replicas from a down node if there are no live nodes to receive them. [#16218](https://github.com/cockroachdb/cockroach/pull/16218)
- `ConditionalPut` failures during initial migrations are now handled gracefully. [#16244](https://github.com/cockroachdb/cockroach/pull/16244)
- `EXPLAIN (TRACE)` and the `sql.trace.txn.enable_threshold` cluster setting now work even when the `trace.debug.enable` [cluster setting](../v1.0/cluster-settings.html) is false (the default). [#16217](https://github.com/cockroachdb/cockroach/pull/16217)
- Improved the ability of a cluster to restart with some nodes missing. [#16353](https://github.com/cockroachdb/cockroach/pull/16353)
- [Backup URLs](../v1.0/backup.html#backup-file-urls) are now sanitized before being written to the system jobs table. [#16386](https://github.com/cockroachdb/cockroach/pull/16386)
- [`cockroach zone set`](../v1.0/configure-replication-zones.html) with an incomplete config for the special system ranges now merges the given config with the default instead of using zeros. [#16212](https://github.com/cockroachdb/cockroach/pull/16212)

<h3 id="v1.0.2-performance-improvements">Performance Improvements</h3>

- Improved performance of MVCC garbage collection. [#16219](https://github.com/cockroachdb/cockroach/pull/16219) [#16231](https://github.com/cockroachdb/cockroach/pull/16231)
- Adjusted timeouts for snapshot throttling. [#16328](https://github.com/cockroachdb/cockroach/pull/16328)

<h3 id="v1.0.2-doc-updates">Doc Updates</h3>

- Added [basic hardware recommendations](../v1.0/recommended-production-settings.html#hardware) for a CockroachDB cluster. [#1527](https://github.com/cockroachdb/docs/pull/1527)
- Completed the [`ADD COLUMN`](../v1.0/add-column.html) documentation. [#1483](https://github.com/cockroachdb/docs/pull/1483)
- Improved the [`RENAME TABLE`](../v1.0/rename-table.html) documentation. [#1532](https://github.com/cockroachdb/docs/pull/1532)
- Improved the [`DROP DATABASE`](../v1.0/drop-database.html) documentation. [#1540](https://github.com/cockroachdb/docs/pull/1540)
- Added examples for [creating a replication zone for system ranges](../v1.0/configure-replication-zones.html#create-a-replication-zone-for-system-ranges) and [tweaking the replication of system ranges](../v1.0/configure-replication-zones.html#tweaking-the-replication-of-system-ranges). [#1441](https://github.com/cockroachdb/docs/pull/1441)
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.0.3-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0.3.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0.3.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0.3.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.0.3-sql-language-changes">SQL Language Changes</h3>

- `SET client_encoding='unicode'` is now recognized as equivalent to `UTF-8`. [#16513](https://github.com/cockroachdb/cockroach/pull/16513)
- The `IN` operator now works with tuples of `OIDs`. [#16645](https://github.com/cockroachdb/cockroach/pull/16645)

<h3 id="v1.0.3-bug-fixes">Bug Fixes</h3>

- Fixed a consistency problem that could result when a transaction commit races with a lease transfer. [#16775](https://github.com/cockroachdb/cockroach/pull/16775)
- Fixed a panic with message `indexed var linked to different container`. [#16444](https://github.com/cockroachdb/cockroach/pull/16444)
- Casting a string to `regtype` now uses the full type parser. [#16480](https://github.com/cockroachdb/cockroach/pull/16480) [#16792](https://github.com/cockroachdb/cockroach/pull/16792)
- Fixed formatting of some error messages containing `%` characters. [#16617](https://github.com/cockroachdb/cockroach/pull/16617)
- Fixed a panic in the timestamp cache. [#16711](https://github.com/cockroachdb/cockroach/pull/16711)
- Fixed a memory leak when [`EXPLAIN`](../v1.0/explain.html) is used on a query containing [`UNION`](../v1.0/select.html#union-combine-two-queries). [#16775](https://github.com/cockroachdb/cockroach/pull/16775)

<h3 id="v1.0.3-performance-improvements">Performance Improvements</h3>

- The intent resolver now works in smaller batches, reducing memory spikes after large transactions. [#16741](https://github.com/cockroachdb/cockroach/pull/16741)
- MVCC garbage collection now works in smaller batches, avoiding problems with refreshing leases. [#16735](https://github.com/cockroachdb/cockroach/pull/16735)

<h3 id="v1.0.3-doc-updates">Doc Updates</h3>

- Introduced docs for specific versions of CockroachDB. [#1605](https://github.com/cockroachdb/docs/pull/1605)
    - Documentation for the latest [production release](index.html#production-releases) is at https://www.cockroachlabs.com/docs/{{site.versions["stable"]}}/.
    - Documentation for the latest [testing release](index.html#testing-releases) is at https://www.cockroachlabs.com/docs/{{site.versions["dev"]}}/.
    - On any page, you can switch between versions using the version selector in the lower-left.
- Updated the [Deploy CockroachDB on Google Cloud Platform](../v1.0/deploy-cockroachdb-on-google-cloud-platform.html) tutorial to provide guidance on using Google's managed TCP Proxy Load Balancing service. [#1665](https://github.com/cockroachdb/docs/pull/1665)
- Added an [Automatic Cloud Migration](../v1.0/demo-automatic-cloud-migration.html) tutorial that shows you how to use a local cluster to simulate deploying across clouds and migrating from one cloud to another with no downtime. [#1610](https://github.com/cockroachdb/docs/pull/1610)
- Expanded details on [how CockroachDB handles unsynchronized clocks](../v1.0/recommended-production-settings.html#clock-synchronization). [#1636](https://github.com/cockroachdb/docs/pull/1636)
- Updated the [Node.js transaction code sample](../v1.0/build-a-nodejs-app-with-cockroachdb.html) to perform a `SELECT` as part of the transaction and return the results through the transaction wrapper. [#1615](https://github.com/cockroachdb/docs/pull/1615)
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.0.4-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0.4.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0.4.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0.4.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.0.4-sql-language-changes">SQL Language Changes</h3>

- [`ROLLBACK TO SAVEPOINT`](../v1.0/rollback-transaction.html) is now accepted at any time. [#16932](https://github.com/cockroachdb/cockroach/pull/16932)

<h3 id="v1.0.4-bug-fixes">Bug Fixes</h3>

- Fixed a race condition that could lead to serializability violations when requests race with a lease transfer. [#17141](https://github.com/cockroachdb/cockroach/pull/17141)
- [`CREATE TABLE AS SELECT`](../v1.0/create-table-as.html) now handles values of type `BOOL`. [#17092](https://github.com/cockroachdb/cockroach/pull/17092)
- Fixed handling of columns names containing special characters in [`SHOW CREATE TABLE`](../v1.0/show-create-table.html), [`CREATE VIEW`](../v1.0/create-view.html), and [`CREATE TABLE AS SELECT`](../v1.0/create-table-as.html). [#16783](https://github.com/cockroachdb/cockroach/pull/16783)
- Fixed issues with [diagnostic reporting](../v1.1/diagnostics-reporting.html). [#17085](https://github.com/cockroachdb/cockroach/pull/17085)
- Fixed a panic with `--vmodule=plan=3` or `--verbosity=3`. [#17093](https://github.com/cockroachdb/cockroach/pull/17093)

<h3 id="v1.0.4-doc-updates">Doc Updates</h3>

- Improved code samples for [building a Rust app with CockroachDB](../v1.0/build-a-rust-app-with-cockroachdb.html). [#1746](https://github.com/cockroachdb/docs/pull/1746)
- Improved documentation for secure [Docker Swarm deployments](../v1.0/orchestrate-cockroachdb-with-docker-swarm.html).  [#1735](https://github.com/cockroachdb/docs/pull/1735)
- Fixed links to Google Cloud Platform documentation in [deployment docs](../v1.0/deploy-cockroachdb-on-google-cloud-platform.html). [#1744](https://github.com/cockroachdb/docs/pull/1744)
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.0.5-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0.5.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0.5.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0.5.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.0.5-command-line-interface-changes">Command-Line Interface Changes</h3>

- Fatal error messages are now printed to both `stderr` and the [logs](../v1.0/debug-and-error-logs.html). [#17675](https://github.com/cockroachdb/cockroach/pull/17675)

<h3 id="v1.0.5-bug-fixes">Bug Fixes</h3>

- [Foreign keys](../v1.0/foreign-key.html) that point to a prefix of an existing index now work correctly. Previously, rows could be deleted from the referenced table without recognizing the constraint violation if rows in the referring table pointed to them. These foreign keys are also now shown correctly in [`SHOW CREATE TABLE`](../v1.0/show-create-table.html). [#17653](https://github.com/cockroachdb/cockroach/pull/17653)
- The crash reporter will now time out instead of waiting indefinitely trying to reach the server. [#17689](https://github.com/cockroachdb/cockroach/pull/17689)
- `AS OF SYSTEM TIME 0` is now a normal error instead of a panic. [#17681](https://github.com/cockroachdb/cockroach/pull/17681)
- Fixed a panic caused by unclosed `planNodes`. [#17281](https://github.com/cockroachdb/cockroach/pull/17281)
- 3DES has been removed from the list of supported TLS cipher suites (it would never be selected because we require TLS 1.2, but it could be reported as a false positive by security scanners). [#17237](https://github.com/cockroachdb/cockroach/pull/17237)

<h3 id="v1.0.5-performance-improvements">Performance Improvements</h3>

- Reduced unhelpful retries of slow commands. [#17385](https://github.com/cockroachdb/cockroach/pull/17385)

<h3 id="v1.0.5-doc-updates">Doc Updates</h3>

- Added an [FAQ](../v1.0/frequently-asked-questions.html#why-does-cockroachdb-use-the-postgresql-wire-protocol-instead-of-the-mysql-protocol) on why CockroachDB uses the PostgreSQL wire protocol instead of the MySQL protocol. [#1845](https://github.com/cockroachdb/docs/pull/1845)
- Added a [known limitation](../v1.0/known-limitations.html#dropping-an-index-interleaved-into-another-index-on-the-same-table) around dropping an index interleaved into another index on the same table. [#1859](https://github.com/cockroachdb/docs/pull/1859)
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.0.6-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0.6.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0.6.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0.6.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.0.6-bug-fixes">Bug Fixes</h3>

- Fixed a bug in `ReverseScan` that could cause data to be missing from query results. [#17891](https://github.com/cockroachdb/cockroach/pull/17891) [#18385](https://github.com/cockroachdb/cockroach/pull/18385)
- Fixed a potential data corruption bug in RocksDB. [#18397](https://github.com/cockroachdb/cockroach/pull/18397)
- Fixed a panic in some `UNION` queries. [#17933](https://github.com/cockroachdb/cockroach/pull/17933)
- It is no longer possible to set the `kv.raft.command.max_size` cluster setting to a very low value (which could make the cluster inoperable). [#18016](https://github.com/cockroachdb/cockroach/pull/18016)
- Fixed a range lease bug that could make ranges unavailable. [#18218](https://github.com/cockroachdb/cockroach/pull/18218)
- Parallel statement execution is now disabled by default due to issues in handling retryable errors. [#18002](https://github.com/cockroachdb/cockroach/pull/18002) [#18332](https://github.com/cockroachdb/cockroach/pull/18332)
- Fixed a resource leak in diagnostics reporting [#18315](https://github.com/cockroachdb/cockroach/pull/18315)
- Host names are no longer included in diagnostics reports. [#18335](https://github.com/cockroachdb/cockroach/pull/18335)
- Increased logging to help diagnose certain issues. [#18229](https://github.com/cockroachdb/cockroach/pull/18229) [#18272](https://github.com/cockroachdb/cockroach/pull/18272) [#18282](https://github.com/cockroachdb/cockroach/pull/18282) [#18333](https://github.com/cockroachdb/cockroach/pull/18333)

<h3 id="v1.0.6-doc-updates">Doc Updates</h3>

- Updated the [Contribute to CockroachDB](https://wiki.crdb.io/wiki/spaces/CRDB/pages/73204033/Contributing+to+CockroachDB) page to provide guidelines on finding a project, determining its complexity, and learning what to expect in your collaboration with the Cockroach Labs team. [#1881](https://github.com/cockroachdb/docs/pull/1881)
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.0.7-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0.7.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0.7.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.0.7.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.0.7-bug-fixes">Bug Fixes</h3>

- Fixed a leak of table leases that could grow to a point that a cluster becomes unusable. [#22563](https://github.com/cockroachdb/cockroach/pull/22563)
- When the log disk fills up, the process now crashes instead of hanging. [#22563](https://github.com/cockroachdb/cockroach/pull/22563)
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.1-alpha.20170601-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170601.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170601.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170601.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.1-alpha.20170601-general-changes">General Changes</h3>

- CockroachDB now uses RocksDB 5.3.4 ([#15696](https://github.com/cockroachdb/cockroach/pull/15696)), protobuf 3.3.0 ([#15522](https://github.com/cockroachdb/cockroach/pull/15522)), and a newer version of gRPC ([#15991](https://github.com/cockroachdb/cockroach/pull/15991))
- Non-release binaries no longer send crash reports. [#15823](https://github.com/cockroachdb/cockroach/pull/15823)
- Some `make` targets have changed to follow convention. `make` by default now builds the binary without running tests. `make install` defaults to `/usr/local/bin/` instead of `$GOPATH/bin` (use `make install prefix=/path/` to change). `make check` is now an alias for `make test`; the former `make check` is now called `make lint`. [#15909](https://github.com/cockroachdb/cockroach/pull/15909) [#16030](https://github.com/cockroachdb/cockroach/pull/16030)
- The Kubernetes templates now use the latest production release instead of tracking testing releases. [#15878](https://github.com/cockroachdb/cockroach/pull/15878)

<h3 id="v1.1-alpha.20170601-sql-language-changes">SQL Language Changes</h3>

- The `information_schema.user_privileges` table is now supported. [#15745](https://github.com/cockroachdb/cockroach/pull/15745)
- The `ON UPDATE RESTRICT` and `ON DELETE RESTRICT` modifiers can now be used when creating foreign keys (this behavior is the default, but now it can be specified explicitly). [#15815](https://github.com/cockroachdb/cockroach/pull/15815)
- The hash functions `sha512()`, `fnv32()`, `fnv32a()`, `fnv64()`, `fnv64a()`, `crc32ieee()`, and `crc32c()` are now supported. All hash functions now accept multiple arguments and arguments of type `BYTES`. [#15828](https://github.com/cockroachdb/cockroach/pull/15828) [#15859](https://github.com/cockroachdb/cockroach/pull/15859)
- Casts to type `DECIMAL` now respect specified precision and scale. [#15834](https://github.com/cockroachdb/cockroach/pull/15834)
- A new aggregate function `xor_agg()` is now available. [#15831](https://github.com/cockroachdb/cockroach/pull/15831)
- Schema change commands now wait until the schema change is complete instead of starting it in the background. [#15598](https://github.com/cockroachdb/cockroach/pull/15598)
- It is now possible to `SELECT` from the result of a `SHOW` statement with the syntax `SELECT ... FROM [ SHOW ... ] WHERE ...` [#15590](https://github.com/cockroachdb/cockroach/pull/15590)
- It is now possible to `CREATE` a table and `ALTER` (or `DROP`) it in the same transaction. [#15929](https://github.com/cockroachdb/cockroach/pull/15929)
- The standard SQL syntax `FETCH FIRST N ROWS ONLY` is now supported as an alias for `LIMIT`. [#16083](https://github.com/cockroachdb/cockroach/pull/16083)

<h3 id="v1.1-alpha.20170601-command-line-interface-changes">Command-Line Interface Changes</h3>

- A `raw` mode has been added to the SQL shell's `display_format` options. [#15590](https://github.com/cockroachdb/cockroach/pull/15590)
- `cockroach zone set` with an incomplete config for the special system ranges now merges the given config with the default instead of using zeros. [#16048](https://github.com/cockroachdb/cockroach/pull/16048)
- Commands that create certificates will fail if asked to create a certificate that would expire after the corresponding CA. [#16055](https://github.com/cockroachdb/cockroach/pull/16055)
- The default duration of client and node certificates is now 5 years. [#16055](https://github.com/cockroachdb/cockroach/pull/16055)

<h3 id="v1.1-alpha.20170601-admin-ui-changes">Admin UI Changes</h3>

- The log viewer now shows more than just the first line of multi-line log entries. [#15949](https://github.com/cockroachdb/cockroach/pull/15949)
- A new query plan inspector is available at `/queryplan`. [#15908](https://github.com/cockroachdb/cockroach/pull/15908)
- Metrics are now reported about certificate expiration. [#16045](https://github.com/cockroachdb/cockroach/pull/16045)

<h3 id="v1.1-alpha.20170601-bug-fixes">Bug Fixes</h3>

- `MAX(bool)` and `MIN(bool)` no longer panic. [#15803](https://github.com/cockroachdb/cockroach/pull/15803)
- `SHOW GRANTS *` on an empty database now works correctly. [#15881](https://github.com/cockroachdb/cockroach/pull/15881)
- Fixed a data race involving transaction records. [#15882](https://github.com/cockroachdb/cockroach/pull/15882)
- `DECIMAL` types now report the correct precision and scale for compatibility with JDBC. [#15927](https://github.com/cockroachdb/cockroach/pull/15927)
- Fixed a panic when a removed replica attempts to get the range lease. [#15754](https://github.com/cockroachdb/cockroach/pull/15754)

<h3 id="v1.1-alpha.20170601-performance-improvements">Performance Improvements</h3>

- Raft logs are now cleaned up more aggressively when large commands (such as `RESTORE`) are used. [#15799](https://github.com/cockroachdb/cockroach/pull/15799)
- Reduced allocations when working with `DECIMAL` values. [#15829](https://github.com/cockroachdb/cockroach/pull/15829)
- Reduced lock contention during command evaluation. [#15935](https://github.com/cockroachdb/cockroach/pull/15935)
- Reduced lease durations to improve responsiveness to node failures. [#15331](https://github.com/cockroachdb/cockroach/pull/15331)
- Improved performance of queries that combine aggregate functions and `WHERE` clauses, such as `SELECT MAX(age) FROM customers WHERE name >= 'Albert' AND name <= 'Bernie'`. [#13194](https://github.com/cockroachdb/cockroach/pull/13194)
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.1-alpha.20170608-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170608.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170608.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170608.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.1-alpha.20170608-general-changes">General Changes</h3>

- CockroachDB now uses Go 1.8.3 (fixing a security issue when elliptic curve certificates are used, as well as a panic). [#16133](https://github.com/cockroachdb/cockroach/pull/16133)

<h3 id="v1.1-alpha.20170608-sql-language-changes">SQL Language Changes</h3>

- The `UUID` type is now supported. [#15930](https://github.com/cockroachdb/cockroach/pull/15930)
- New `SHOW BACKUP` statement displays metadata about a backup. [#16186](https://github.com/cockroachdb/cockroach/pull/16186)
- The `USE` statement is now recognized as an alias for `SET DATABASE =`. [#16293](https://github.com/cockroachdb/cockroach/pull/16293)
- The `SET NAMES 'utf8'` statement is now recognized as an alias for `SET client_encoding 'utf8'`. Encodings other than UTF-8 are still not supported. [#16305](https://github.com/cockroachdb/cockroach/pull/16305)
- [`ALTER TABLE...ADD FOREIGN KEY`](../v1.1/add-constraint.html) no longer attempts to create an index on the source table. [#16175](https://github.com/cockroachdb/cockroach/pull/16175)
- Fixed decoding of very large [`DECIMAL`](../v1.1/decimal.html) values. [#16152](https://github.com/cockroachdb/cockroach/pull/16152)
- If a prepared statement is invalidated by a schema change, it now returns an error instead of an incorrect result. [#16089](https://github.com/cockroachdb/cockroach/pull/16089)
- `INT2VECTOR` is now zero-indexed. [#16289](https://github.com/cockroachdb/cockroach/pull/16289)
- Timestamp parsing is now consistent between prepared and non-prepared statements. [#16049](https://github.com/cockroachdb/cockroach/pull/16049)
- The ANSI SQL syntax `FETCH FIRST N ROWS ONLY` is now supported as an alias for `LIMIT`. [#16114](https://github.com/cockroachdb/cockroach/pull/16114)
- Foreign key constraint errors now return the same error code as PostgreSQL. [#16319](https://github.com/cockroachdb/cockroach/pull/16319)

<h3 id="v1.1-alpha.20170608-admin-interface-changes">Admin Interface Changes</h3>

- The [`cockroach cert list`](../v1.1/create-security-certificates.html) command now lists the number of certificates in the CA cert file. [#16101](https://github.com/cockroachdb/cockroach/pull/16101)
- All pages under the `/debug/` namespace are now guarded by the `server.remote_debugging.mode` setting. [#16238](https://github.com/cockroachdb/cockroach/pull/16238)
- The new `trace.debug.enable` cluster setting controls the collection of tracing data for the `/debug/requests` pages. The setting `trace.lightstep.token` can be used to send tracing data to LightStep. [#16265](https://github.com/cockroachdb/cockroach/pull/16265)
- The sample monitoring configs now include alerts about certificate expiration. [#16329](https://github.com/cockroachdb/cockroach/pull/16329)

<h3 id="v1.1-alpha.20170608-bug-fixes">Bug Fixes</h3>

- Fixed several bugs with the `OFFSET` clause, including incorrect results and a panic when it is used without a `LIMIT`. [#16109](https://github.com/cockroachdb/cockroach/pull/16109)
- Fixed the behavior of `LIMIT` in index joins. [#16339](https://github.com/cockroachdb/cockroach/pull/16339)
- Fixed the behavior of `DISTINCT` with omitted columns. [#16307](https://github.com/cockroachdb/cockroach/pull/16307)
- [Dropping a table](../v1.1/drop-table.html) with a self-referential foreign key no longer results in `broken fk backward reference` errors. [#16316](https://github.com/cockroachdb/cockroach/pull/16316)
- The replica allocator will no longer remove replicas from a down node if there are no live nodes to receive them. [#16139](https://github.com/cockroachdb/cockroach/pull/16139)
- Improved tracking of memory allocated by SQL functions. [#15402](https://github.com/cockroachdb/cockroach/pull/15402)
- Improved thread safety of tracing. [#16114](https://github.com/cockroachdb/cockroach/pull/16114)
- Reverted a change to lease durations from `v1.1-alpha.20170601`. [#16148](https://github.com/cockroachdb/cockroach/pull/16148)
- Fixed an RPC retry that could result in statements being applied twice. [#16181](https://github.com/cockroachdb/cockroach/pull/16181)
- `ConditionalPut` failures during initial migrations are now handled gracefully. [#16224](https://github.com/cockroachdb/cockroach/pull/16224)
- Fixed a `span used after call to Finish` panic during shutdown. [#16277](https://github.com/cockroachdb/cockroach/pull/16277)

<h3 id="v1.1-alpha.20170608-performance-improvements">Performance Improvements</h3>

- Introduced flow control for raft proposals. Slow replicas now apply backpressure instead of allowing the raft log to grow too large. [#15802](https://github.com/cockroachdb/cockroach/pull/15802)
- Improved performance of MVCC garbage collection. [#16129](https://github.com/cockroachdb/cockroach/pull/16129)  [#16166](https://github.com/cockroachdb/cockroach/pull/16166) [#16210](https://github.com/cockroachdb/cockroach/pull/16210)
- Reduced unhelpful retries of slow commands. [#16205](https://github.com/cockroachdb/cockroach/pull/16205)
- Improved performance of `RESTORE`. [#16077](https://github.com/cockroachdb/cockroach/pull/16077) [#15946](https://github.com/cockroachdb/cockroach/pull/15946) [#16140](https://github.com/cockroachdb/cockroach/pull/16140)
- Improved efficiency of SQL planning. [#16040](https://github.com/cockroachdb/cockroach/pull/16040)

<h3 id="v1.1-alpha.20170608-doc-updates">Doc Updates</h3>

- Added a [guide](https://github.com/cockroachdb/cockroach/blob/master/docs/first-pr.md) for new contributors submitting their first PR. [#16078](https://github.com/cockroachdb/cockroach/pull/16078)
- Added a [codelab](https://github.com/cockroachdb/cockroach/blob/master/docs/codelabs/00-sql-function.md) guiding a new contributor through the process of adding a SQL function. [#16259](https://github.com/cockroachdb/cockroach/pull/16259)
- Added an [FAQ](../v1.1/operational-faqs.html#why-does-cockroachdb-collect-anonymized-cluster-usage-details-by-default) about CockroachDB's default diagnostics reporting. [#1514](https://github.com/cockroachdb/docs/pull/1514)
- Clarified that when [`ORDER BY`](../v1.1/select.html#sorting-retrieved-values) is not included in a `SELECT` query, rows are not sorted by any consistent criteria. [#1526](https://github.com/cockroachdb/docs/pull/1526)
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.1-alpha.20170622-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170622.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170622.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170622.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.1-alpha.20170622-general-changes">General Changes</h3>

- Building from the source repo now works when `$GOPATH` is unset. [#16364](https://github.com/cockroachdb/cockroach/pull/16364)
- CockroachDB now uses `dep` instead of `glide` to manage Go dependencies. <a href="https://github.com/cockroachdb/cockroach/pull/16275" data-proofer-ignore>#16275</a>
- gRPC has been updated to version 1.4.0. [#16496](https://github.com/cockroachdb/cockroach/pull/16496)
- The APD library has been updated, improving performance of [`DECIMAL`](../v1.1/decimal.html) operations. [#16520](https://github.com/cockroachdb/cockroach/pull/16520)

<h3 id="v1.1-alpha.20170622-sql-language-changes">SQL Language Changes</h3>

- New `SHOW SESSIONS` and `SHOW QUERIES` statements display active sessions and queries on a node or cluster. [#16072](https://github.com/cockroachdb/cockroach/pull/16072)
- The `DROP USER` statement is now supported. [#16442](https://github.com/cockroachdb/cockroach/pull/16442)
- The `BEGIN` statement now accepts the `READ WRITE` modifier for compatibility with the Go `lib/pq` driver. [#16387](https://github.com/cockroachdb/cockroach/pull/16387)
- The `pg_catalog.pg_table_is_visible()` function is now implemented, improving compatibility with several ORMs. [#16410](https://github.com/cockroachdb/cockroach/pull/16410)
- A new session-based tracing interface is available with `SET TRACE=(ON|OFF)` and `SELECT * from crdb_internal.session_trace`. [#16253](https://github.com/cockroachdb/cockroach/pull/16253)
- The beginning and end of schema changes are now recorded in the `crdb_internal.jobs` table. [#15936](https://github.com/cockroachdb/cockroach/pull/15936)
- `SET "time zone"` is now recognized as equivalent to `SET TIME ZONE`. [#16459](https://github.com/cockroachdb/cockroach/pull/16459)
- `SET client_encoding='unicode'` is now recognized as equivalent to `UTF-8`. [#16511](https://github.com/cockroachdb/cockroach/pull/16511)

<h3 id="v1.1-alpha.20170622-admin-ui-changes">Admin UI Changes</h3>

- All pages under `/debug/` are now controlled by the `server.remote_debugging.mode` setting. [#16341](https://github.com/cockroachdb/cockroach/pull/16341)
- Several debug pages now work even when the system config is unavailable. [#16423](https://github.com/cockroachdb/cockroach/pull/16423)
- Crash reports no longer include hostnames. [#16332](https://github.com/cockroachdb/cockroach/pull/16332)

<h3 id="v1.1-alpha.20170622-bug-fixes">Bug Fixes</h3>

- [Backup URLs](../v1.1/backup.html#backup-file-urls) are now sanitized before being written to the system jobs table. [#16370](https://github.com/cockroachdb/cockroach/pull/16370)
- Improved the ability of the system to recover when all nodes are stopped at once, then all but one are restarted. [#16347](https://github.com/cockroachdb/cockroach/pull/16347)
- Outer joins no longer incorrectly return extra rows when there are multiple rows with the same value in the joined columns. [#16372](https://github.com/cockroachdb/cockroach/pull/16372)
- [`RESTORE`](../v1.1/restore.html) no longer attempts to split at invalid keys. [#16375](https://github.com/cockroachdb/cockroach/pull/16375)
- Fixed a panic with message `indexed var linked to different container`. [#16434](https://github.com/cockroachdb/cockroach/pull/16434)
- Fixed `quota pool no longer in use` errors when leadership and the range lease are not co-located. [#16413](https://github.com/cockroachdb/cockroach/pull/16413)
- Improved error handling in the `COPY FROM` command. [#16393](https://github.com/cockroachdb/cockroach/pull/16393)
- Casting a string to `regtype` now uses the full type parser. [#16476](https://github.com/cockroachdb/cockroach/pull/16476)
- Some fatal errors now end the process immediately instead of unwinding the stack and allowing new errors to occur and mask the original failure. [#16482](https://github.com/cockroachdb/cockroach/pull/16482)
- The system will try to avoid replicating to unstable two-replica configurations unless a third candidate is also available. [#16411](https://github.com/cockroachdb/cockroach/pull/16411)
- Fixed a panic in the timestamp cache. [#16503](https://github.com/cockroachdb/cockroach/pull/16503)

<h3 id="v1.1-alpha.20170622-performance-improvements">Performance Improvements</h3>

- Adjusted timeouts used in internal retry loops. [#16357](https://github.com/cockroachdb/cockroach/pull/16357)
- Reduced some redundant logging. [#16358](https://github.com/cockroachdb/cockroach/pull/16358)
- Improved performance under high-contention workloads. [#16256](https://github.com/cockroachdb/cockroach/pull/16256)
- Reduced command queue overhead in read-heavy workloads. [#16360](https://github.com/cockroachdb/cockroach/pull/16360)
- Prepared statements are now included in memory accounting. [#16433](https://github.com/cockroachdb/cockroach/pull/16433) [#16470](https://github.com/cockroachdb/cockroach/pull/16470)
- Snappy compression is now enabled by default for inter-node communication. [#16432](https://github.com/cockroachdb/cockroach/pull/16432) [#16451](https://github.com/cockroachdb/cockroach/pull/16451)
- The GC queue now works in smaller chunks. [#16299](https://github.com/cockroachdb/cockroach/pull/16299)
- Smoothed statistics used in rebalancing. [#16464](https://github.com/cockroachdb/cockroach/pull/16464)
- Improved performance of the distSQL row fetcher. [#16446](https://github.com/cockroachdb/cockroach/pull/16446) [#16467](https://github.com/cockroachdb/cockroach/pull/16467)
- OpenTracing spans are now identified by name instead of `file:lineno`. [#16397](https://github.com/cockroachdb/cockroach/pull/16397)
- Read-only batches now reuse iterators when possible. [#16406](https://github.com/cockroachdb/cockroach/pull/16406)
- The hash joiner now looks ahead on both streams to see if one of them is very small. [#16402](https://github.com/cockroachdb/cockroach/pull/16402)

<h3 id="v1.1-alpha.20170622-doc-updates">Doc Updates</h3>

- Improved [basic hardware recommendations](../v1.1/recommended-production-settings.html#hardware) for a CockroachDB cluster. [#1596](https://github.com/cockroachdb/docs/pull/1596)
- Improved the [`REVOKE`](../v1.1/revoke.html) documentation. [#1595](https://github.com/cockroachdb/docs/pull/1595)
- Updated the [Node.js transaction wrapper](../v1.1/build-a-nodejs-app-with-cockroachdb.html#transaction-with-retry-logic) to allow values to be returned to the client. [#1603](https://github.com/cockroachdb/docs/pull/1603)
- Updated the instructions for [orchestrating a local CockroachDB cluster with Kubernetes Minikube](../v1.1/orchestrate-cockroachdb-with-kubernetes.html). [#1616](https://github.com/cockroachdb/docs/pull/1616)
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.1-alpha.20170629-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170629.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170629.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170629.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.1-alpha.20170629-backwards-incompatible-changes">Backwards-Incompatible Changes</h3>

- If the server's own hostname cannot be resolved, CockroachDB reports an error at startup instead of starting a node that will be unable to participate in a cluster. Local test clusters may need to pass `--host=localhost` to avoid this error. [#16177](https://github.com/cockroachdb/cockroach/pull/16177)
- The `EXPLAIN (TRACE)` statement has been removed because the query being traced would unintentionally get executed. It has been replaced by `SHOW TRACE FOR ...`, so that the [`EXPLAIN`](../v1.1/explain.html) commands can remain read-only. [#16524](https://github.com/cockroachdb/cockroach/pull/16524)

<h3 id="v1.1-alpha.20170629-known-limitations">Known Limitations</h3>

- This release has a regression in replica balancing. [#16742](https://github.com/cockroachdb/cockroach/issues/16742)

<h3 id="v1.1-alpha.20170629-sql-language-changes">SQL Language Changes</h3>

- The new `SHOW SESSION TRACE` statement can be used to view trace data collected with the `SET TRACE=on|off` statement introduced in a previous alpha. [#16524](https://github.com/cockroachdb/cockroach/pull/16524)
- The new `SHOW KV TRACE FOR ...` or `SET trace=on,kv; ...; SHOW SESSION KV TRACE` statements can be used to trace KV operations. [#16622](https://github.com/cockroachdb/cockroach/pull/16622)
- Schema changes now report their progress in the jobs table. [#16636](https://github.com/cockroachdb/cockroach/pull/16636)
- The `PREPARE` statement and `SELECT ... FROM [...]` syntax now accept any statement that can be `EXPLAIN`ed. [#16524](https://github.com/cockroachdb/cockroach/pull/16524)
- The statement `SET datestyle='ISO'` is now supported for compatibility with PostgreSQL clients. Values other than `ISO` are not supported. [#16557](https://github.com/cockroachdb/cockroach/pull/16557)

<h3 id="v1.1-alpha.20170629-command-line-interface-changes">Command-Line Interface Changes</h3>

- The [`cockroach sql`](../v1.1/use-the-built-in-sql-client.html) command now tracks the current database and will restore it when a connection must be recreated. [#16589](https://github.com/cockroachdb/cockroach/pull/16589)

<h3 id="v1.1-alpha.20170629-admin-interface-changes">Admin Interface Changes</h3>

- The `/health` endpoint can now be accessed over HTTP even when the server is configured for secure mode. This works around limitations of some load balancers. [#16609](https://github.com/cockroachdb/cockroach/pull/16609)

<h3 id="v1.1-alpha.20170629-bug-fixes">Bug Fixes</h3>

- The admin UI no longer intermittently gets stuck until the server is restarted. [#16612](https://github.com/cockroachdb/cockroach/pull/16612)
- The GC threshold is now copied when ranges split. [#16485](https://github.com/cockroachdb/cockroach/pull/16485)
- The `IN` operator now works with tuples of `OIDs`. [#16644](https://github.com/cockroachdb/cockroach/pull/16644)
- The `SHOW {QUERIES,SESSIONS}` statement no longer produces invalid UTF-8 when truncating strings. [#16602](https://github.com/cockroachdb/cockroach/pull/16602)

<h3 id="v1.1-alpha.20170629-performance-improvements">Performance Improvements</h3>

- The intent resolver now works in smaller batches, reducing memory spikes after large transactions. [#16632](https://github.com/cockroachdb/cockroach/pull/16632)
- MVCC garbage collection now works in smaller batches, avoiding problems with refreshing leases. [#16637](https://github.com/cockroachdb/cockroach/pull/16637)
- Added a special case for `COUNT(*)` in the distributed SQL engine. [#16533](https://github.com/cockroachdb/cockroach/pull/16533)
- Reduced overhead of session tracking. [#16543](https://github.com/cockroachdb/cockroach/pull/16543)
- Limited the number of intents printed in logs and traces. [#16560](https://github.com/cockroachdb/cockroach/pull/16560)
- Reduced allocations when tracing is not enabled. [#16545](https://github.com/cockroachdb/cockroach/pull/16545)
- Load balancing is now based on data size instead of range count. [#16575](https://github.com/cockroachdb/cockroach/pull/16575)

<h3 id="v1.1-alpha.20170629-new-rfcs">New RFCs</h3>

- Array value encoding. [#16172](https://github.com/cockroachdb/cockroach/pull/16172)
- Query cancellation. [#16417](https://github.com/cockroachdb/cockroach/pull/16417)
- Algebraic data types. [#16240](https://github.com/cockroachdb/cockroach/pull/16240)

<h3 id="v1.1-alpha.20170629-doc-updates">Doc Updates</h3>

- The new [Automatic Cloud Migration](../v1.1/demo-automatic-cloud-migration.html) tutorial shows you how to use a local cluster to simulate deploying across clouds and then migrating from one cloud to another with no downtime. [#1610](https://github.com/cockroachdb/docs/pull/1610)
- Expanded details on [how CockroachDB handles unsynchronized clocks](../v1.1/recommended-production-settings.html#clock-synchronization). [#1636](https://github.com/cockroachdb/docs/pull/1636)
- Added a "copy to clipboard" option to code samples. [#1624](https://github.com/cockroachdb/docs/pull/1624) [#1632](https://github.com/cockroachdb/docs/pull/1632)
- Updated the [Node.js transaction code sample](../v1.1/build-a-nodejs-app-with-cockroachdb.html) to perform a `SELECT` as part of the transaction and return the results through the transaction wrapper. [#1615](https://github.com/cockroachdb/docs/pull/1615)
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.1-alpha.20170713-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170713.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170713.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170713.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.1-alpha.20170713-backwards-incompatible-changes">Backwards-Incompatible Changes</h3>

- The `EXPLAIN (DEBUG)` command has been removed. It is replaced by `SHOW TRACE FOR`. [#16694](https://github.com/cockroachdb/cockroach/pull/16694)

<h3 id="v1.1-alpha.20170713-general-changes">General Changes</h3>

- CockroachDB now uses RocksDB 5.5.1, `jemalloc` 5.0.1, Snappy 1.1.5, and protobuf 3.3.2. [#16852](https://github.com/cockroachdb/cockroach/pull/16852) [#16872](https://github.com/cockroachdb/cockroach/pull/16872) [#16879](https://github.com/cockroachdb/cockroach/pull/16879) [#16909](https://github.com/cockroachdb/cockroach/pull/16909)
- C++ dependencies are now managed via submodules. <a href="https://github.com/cockroachdb/cockroach/pull/16859" data-proofer-ignore>#16859</a>

<h3 id="v1.1-alpha.20170713-sql-language-changes">SQL Language Changes</h3>

- Additional numeric types `INT2`, `INT8`, `FLOAT4`, and `FLOAT8` are now supported. [#16720](https://github.com/cockroachdb/cockroach/pull/16720)
- The new `SHOW JOBS` statement can show the state of backups, restores, and schema changes. [#16733](https://github.com/cockroachdb/cockroach/pull/16733)
- The new `DISCARD ALL` statement can be used to reset all session state. [#16746](https://github.com/cockroachdb/cockroach/pull/16746)
- The new `node_id` session variable contains the ID of the gateway node. [#16703](https://github.com/cockroachdb/cockroach/pull/16703)
- The new `trace.zipkin.collector` [cluster setting](../v1.1/cluster-settings.html) can now be used to report trace data to Zipkin. [#16903](https://github.com/cockroachdb/cockroach/pull/16903)
- The [`SHOW CREATE TABLE`](../v1.1/show-create-table.html) statement and similar introspection mechanisms now remember more precise type information, such as whether the column was created as `INT8` or `INT64`. [#16548](https://github.com/cockroachdb/cockroach/pull/16548)
- It is now possible to query `information_schema` or `pg_catalog` for other databases. [#16760](https://github.com/cockroachdb/cockroach/pull/16760)
- `ROLLBACK TO SAVEPOINT` is now accepted at any time. [#16846](https://github.com/cockroachdb/cockroach/pull/16846)
- Improved type inference for `ON CONFLICT DO UPDATE` clauses. [#16910](https://github.com/cockroachdb/cockroach/pull/16910)

<h3 id="v1.1-alpha.20170713-command-line-interface-changes">Command-Line Interface Changes</h3>

- Colored log output is now used on more terminal types. [#16710](https://github.com/cockroachdb/cockroach/pull/16710)
- The [SQL shell](../v1.1/use-the-built-in-sql-client.html) prints the client and server version number at startup. [#16703](https://github.com/cockroachdb/cockroach/pull/16703)
- Improved handling of multi-line transactions. [#16848](https://github.com/cockroachdb/cockroach/pull/16848)

<h3 id="v1.1-alpha.20170713-bug-fixes">Bug Fixes</h3>

- Fixed a consistency problem that could result when a transaction commit races with a lease transfer. [#16759](https://github.com/cockroachdb/cockroach/pull/16759)
- Fixed a name escaping bug in [`SHOW CREATE TABLE`](../v1.1/show-create-table.html) and [view definitions](../v1.1/create-view.html). [#16782](https://github.com/cockroachdb/cockroach/pull/16782) [#16815](https://github.com/cockroachdb/cockroach/pull/16815)
- Casting a string to `regtype` now uses the full type parser. [#16774](https://github.com/cockroachdb/cockroach/pull/16774)
- Unary operators (`+`, `-`, and `~`) are formatted without a space. [#16658](https://github.com/cockroachdb/cockroach/pull/16658)
- Improved garbage collection of removed replicas. [#16752](https://github.com/cockroachdb/cockroach/pull/16752)
- Fixed an ignored error return. [#13607](https://github.com/cockroachdb/cockroach/pull/13607)
- Fixed incorrect rewrites of long statements in the SQL history. [#16714](https://github.com/cockroachdb/cockroach/pull/16714)
- Improved error handling in node liveness updates. [#16698](https://github.com/cockroachdb/cockroach/pull/16698)
- Added support for `NULL` columns in `UNION`. [#16757](https://github.com/cockroachdb/cockroach/pull/16757)
- Improved error message for `TransactionStatusError`. [#16725](https://github.com/cockroachdb/cockroach/pull/16725)
- Improved truncation of unicode SQL strings. [#16805](https://github.com/cockroachdb/cockroach/pull/16805)
- Fixed a panic when an invalid `SAVEPOINT` name is used. [#16834](https://github.com/cockroachdb/cockroach/pull/16834)
- A failed [`BEGIN`](../v1.1/begin-transaction.html) statement no longer leaves the connection in a broken state. [#16863](https://github.com/cockroachdb/cockroach/pull/16863)
- The [`SHOW CREATE TABLE`](../v1.1/show-create-table.html) statement no longer omits indexes that are used in foreign keys. [#16861](https://github.com/cockroachdb/cockroach/pull/16861)

<h3 id="v1.1-alpha.20170713-performance-improvements">Performance Improvements</h3>

- Increased the GRPC message size limit. [#16685](https://github.com/cockroachdb/cockroach/pull/16685)
- Improved efficiency of non-incremental backups. [#16690](https://github.com/cockroachdb/cockroach/pull/16690)
- Improved performance of incremental backups [#16743](https://github.com/cockroachdb/cockroach/pull/16743)
- Reverted a replica balancing change that led to thrashing. [#16772](https://github.com/cockroachdb/cockroach/pull/16772)
- Replica balancing avoids removing a replica that is a necessary part of the latest quorum. [#16539](https://github.com/cockroachdb/cockroach/pull/16539)
- Improved performance of queries run under `SHOW`. [#16782](https://github.com/cockroachdb/cockroach/pull/16782)
- Table IDs are now generated non-transactionally, reducing the likelihood of transaction retry errors during table creation. [#16704](https://github.com/cockroachdb/cockroach/pull/16704)
- Improve performance of the timestamp cache. [#16801](https://github.com/cockroachdb/cockroach/pull/16801)
- Reduced mutex contention. [#16798](https://github.com/cockroachdb/cockroach/pull/16798) [#16807](https://github.com/cockroachdb/cockroach/pull/16807) [#16822](https://github.com/cockroachdb/cockroach/pull/16822) [#16877](https://github.com/cockroachdb/cockroach/pull/16877) [#16896](https://github.com/cockroachdb/cockroach/pull/16896)
- The first statement of a transaction is now retried automatically instead of returning `transaction retry` errors. [#16719](https://github.com/cockroachdb/cockroach/pull/16719)
- Reduced log spam. [#16900](https://github.com/cockroachdb/cockroach/pull/16900) [#16917](https://github.com/cockroachdb/cockroach/pull/16917)
- Reduced write amplification, improving write performance by 5%. [#16905](https://github.com/cockroachdb/cockroach/pull/16905)
- Increased write buffer size. [#16929](https://github.com/cockroachdb/cockroach/pull/16929)

<h3 id="v1.1-alpha.20170713-doc-updates">Doc Updates</h3>

- Added a sample [secure Kubernetes configuration](https://github.com/cockroachdb/cockroach/tree/master/cloud/kubernetes). [#16486](https://github.com/cockroachdb/cockroach/pull/16486)
- Updated the [`CONTRIBUTING.md`](https://github.com/cockroachdb/docs/blob/master/CONTRIBUTING.md) file to better explain page front-matter options and the docs sidebar. [#1669](https://github.com/cockroachdb/docs/pull/1669)
- Improved the certificate generation workflow in the [Manual Deployment](../v1.1/manual-deployment.html) and [Cloud Deployment](../v1.1/manual-deployment.html) tutorials. [#1691](https://github.com/cockroachdb/docs/pull/1691)
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.1-alpha.20170720-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170720.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170720.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170720.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.1-alpha.20170720-build-changes">Build changes</h3>

- CockroachDB binary releases are now compatible with older CPUs (previous builds required SSE4.2; new ones only require SSE3). [#16949](https://github.com/cockroachdb/cockroach/pull/16949)
- CockroachDB has reverted from `jemalloc` 5.0.1 to 4.5 due to observed memory leaks. [#17055](https://github.com/cockroachdb/cockroach/pull/17055)

<h3 id="v1.1-alpha.20170720-sql-language-changes">SQL Language Changes</h3>

- New syntax `ORDER BY PRIMARY KEY tbl` or `ORDER BY INDEX tbl@idx` can be used as shorthand to sort results by the columns in an index. [#17023](https://github.com/cockroachdb/cockroach/pull/17023)
- Parentheses are now optional when calling the `current_schema` function, improving compatibility with PostgreSQL. [#16921](https://github.com/cockroachdb/cockroach/pull/16921)
- The text format of [`DECIMAL`](../v1.1/decimal.html) values now uses scientific notation when appropriate. [#17029](https://github.com/cockroachdb/cockroach/pull/17029)

<h3 id="v1.1-alpha.20170720-command-line-interface-changes">Command-Line Interface Changes</h3>

- The [`cockroach sql`](../v1.1/use-the-built-in-sql-client.html) shell now correctly handles errors that occur once some results have been received. [#17042](https://github.com/cockroachdb/cockroach/pull/17042)

<h3 id="v1.1-alpha.20170720-admin-ui-changes">Admin UI Changes</h3>

- New graphs for "live bytes per store" and "keys written per second per store". [#16982](https://github.com/cockroachdb/cockroach/pull/16982)

<h3 id="v1.1-alpha.20170720-bug-fixes">Bug Fixes</h3>

- Fixed spurious errors when updating primary key columns while a schema change is in progress. [#16866](https://github.com/cockroachdb/cockroach/pull/16866)
- Fixed issues with [diagnostic reporting](../v1.1/diagnostics-reporting.html). [#16955](https://github.com/cockroachdb/cockroach/pull/16955)
- Fixed a race in distsql draining. [#17012](https://github.com/cockroachdb/cockroach/pull/17012)

<h3 id="v1.1-alpha.20170720-performance-improvements">Performance Improvements</h3>

- The [`DROP TABLE`](../v1.1/drop-table.html) statement now returns as soon as the table name is no longer in use, instead of waiting for all data to be deleted. [#17016](https://github.com/cockroachdb/cockroach/pull/17016)
- Improved batching of disk syncs, improving write throughput and latency. [#16942](https://github.com/cockroachdb/cockroach/pull/16942) [#16976](https://github.com/cockroachdb/cockroach/pull/16976)
- Queries containing `VALUES` clauses can now use the distributed SQL engine. [#16849](https://github.com/cockroachdb/cockroach/pull/16849)
- Reduced lock contention in node liveness updates. [#16918](https://github.com/cockroachdb/cockroach/pull/16918)
- Improved performance of the raft storage layer. [#16945](https://github.com/cockroachdb/cockroach/pull/16945)
- Improved performance of large batches spanning multiple ranges. [#16946](https://github.com/cockroachdb/cockroach/pull/16946)
- Removed all non-test uses of `reflect.DeepEqual`. [#16960](https://github.com/cockroachdb/cockroach/pull/16960)
- Fixed "context cancellation after 0.0s" log spam. [#17014](https://github.com/cockroachdb/cockroach/pull/17014)
- Improved implementation of `ALTER TABLE SCATTER`. [#16249](https://github.com/cockroachdb/cockroach/pull/16249)

<h3 id="v1.1-alpha.20170720-enterprise-edition-changes">Enterprise Edition Changes</h3>

- New command `cockroach load csv` can convert CSV files into a format compatible with `RESTORE`. [#16611](https://github.com/cockroachdb/cockroach/pull/16611)
- Reduced write amplification in `RESTORE`. [#16990](https://github.com/cockroachdb/cockroach/pull/16990) [#16924](https://github.com/cockroachdb/cockroach/pull/16924)
- Improved performance of SSTable ingestion. [#17018](https://github.com/cockroachdb/cockroach/pull/17018)

<h3 id="v1.1-alpha.20170720-doc-updates">Doc Updates</h3>

- New RFCs: monitor jobs from SQL ([#16688](https://github.com/cockroachdb/cockroach/pull/16688)), resume interrupted backup/restore jobs ([#16633](https://github.com/cockroachdb/cockroach/pull/16633))
- Updated the sample [secure Kubernetes configuration](https://github.com/cockroachdb/cockroach/tree/master/cloud/kubernetes). [#16740](https://github.com/cockroachdb/cockroach/pull/16740)
- Added docs on the [cluster and version details](../v1.1/use-the-built-in-sql-client.html#sql-shell-welcome-changed-in-v1-1) that are printed upon connecting the built-in SQL shell to a node. [#1714](https://github.com/cockroachdb/docs/pull/1714)
- Improved the UX of the [Install CockroachDB](../v1.1/install-cockroachdb.html) page. [#1711](https://github.com/cockroachdb/docs/pull/1711)
- Completed documentation on the [`UPDATE`](../v1.1/update.html) statement. [#1707](https://github.com/cockroachdb/docs/pull/1707)
- Published a [video demo of cross-cloud deployment and migration](../v1.1/demo-automatic-cloud-migration.html#watch-a-live-demo). [#1702](https://github.com/cockroachdb/docs/pull/1702)
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.1-alpha.20170803-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170803.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170803.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170803.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.1-alpha.20170803-backwards-incompatible-changes">Backwards-Incompatible Changes</h3>

- Table and column names in double quotes are now case-sensitive (same as in PostgreSQL). [#16884](https://github.com/cockroachdb/cockroach/pull/16884)
- The `SHOW SESSION TRACE` statement is now [`SHOW TRACE FOR SESSION`](../v1.1/show-vars.html). The `SET/SHOW TRACE` statements are now `SET/SHOW TRACING`. [#17033](https://github.com/cockroachdb/cockroach/pull/17033)
- It is no longer possible to drop columns in tables depended on by views. This is an overly-broad change to avoid schema changes that might break views; it will be narrowed in the future. [#17280](https://github.com/cockroachdb/cockroach/pull/17280)

<h3 id="v1.1-alpha.20170803-build-changes">Build Changes</h3>

- It is now possible to build CockroachDB Enterprise Edition for Windows. [#17035](https://github.com/cockroachdb/cockroach/pull/17035)
- `make help` in a source checkout now prints documentation for the available build targets. [#17056](https://github.com/cockroachdb/cockroach/pull/17056)
- CockroachDB now uses gRPC version 1.5.0. [#17166](https://github.com/cockroachdb/cockroach/pull/17166)

<h3 id="v1.1-alpha.20170803-sql-language-changes">SQL Language Changes</h3>

- New statement [`CANCEL QUERY`](../v1.1/cancel-query.html) can be used to cancel a query in progress. [#17003](https://github.com/cockroachdb/cockroach/pull/17003)
- A limited form of one-dimensional `ARRAY` columns are now supported. [#16764](https://github.com/cockroachdb/cockroach/pull/16764) [#17231](https://github.com/cockroachdb/cockroach/pull/17231)
- `OUTER JOIN` statements now use the distributed SQL execution engine. [#17017](https://github.com/cockroachdb/cockroach/pull/17017)
- Some new syntactic forms for table references with aliases are now supported. [#17031](https://github.com/cockroachdb/cockroach/pull/17031)
- Strings within arrays are now formatted consistently with PostgreSQL. [#17069](https://github.com/cockroachdb/cockroach/pull/17069)
- [Transactions](../v1.1/transactions.html) can now see their own changes to table schemas. [#16988](https://github.com/cockroachdb/cockroach/pull/16988)
- `RETURNING` clauses now accept fully-qualified table names. [#17293](https://github.com/cockroachdb/cockroach/pull/17293)
- Improved handling of null as a function argument. [#17264](https://github.com/cockroachdb/cockroach/pull/17264)

<h3 id="v1.1-alpha.20170803-command-line-interface-changes">Command-Line Interface Changes</h3>

- A new `cockroach init` command can be used in place of starting one node without the `--join` flag. [#16371](https://github.com/cockroachdb/cockroach/pull/16371)

<h3 id="v1.1-alpha.20170803-bug-fixes">Bug Fixes</h3>

- We removed a behavior causing statements in the first batch of a transaction to essentially defer their retryable errors until COMMIT; now, instead, we automatically retry statements in the first batch. As a result, fewer retryable errors should be encountered by COMMIT. [#16874](https://github.com/cockroachdb/cockroach/pull/16874)
- Fixed a race condition that could lead to serializability violations when requests race with a lease transfer. [#17109](https://github.com/cockroachdb/cockroach/pull/17109)
- Fixed a potential raft election issue during range splits. [#17051](https://github.com/cockroachdb/cockroach/pull/17051)
- Fixed a use-after-close for parallelized statements. [#17126](https://github.com/cockroachdb/cockroach/pull/17126)
- Fixed some panics in `ORDER BY INDEX`. [#17314](https://github.com/cockroachdb/cockroach/pull/17314)

<h3 id="v1.1-alpha.20170803-performance-improvements">Performance Improvements</h3>

- The [`TRUNCATE`](../v1.1/truncate.html) statement now works by renaming the table and asynchronously garbage collecting the data, so it is much faster but no longer transactional (similar to PostgreSQL). [#17045](https://github.com/cockroachdb/cockroach/pull/17045)
- Fixed a memory leak in the HTTP layer. [#17080](https://github.com/cockroachdb/cockroach/pull/17080)
- Raft log truncations are now more efficient. [#16993](https://github.com/cockroachdb/cockroach/pull/16993)
- Fixed a regression that caused a node to talk to itself over the network. [#17196](https://github.com/cockroachdb/cockroach/pull/17196)
- Improved networking efficiency when tracing is disabled. [#17185](https://github.com/cockroachdb/cockroach/pull/17185)
- Reduced redundant trace messages. [#17182](https://github.com/cockroachdb/cockroach/pull/17182)
- Added a fast path for committing read-only transactions. [#17128](https://github.com/cockroachdb/cockroach/pull/17128)
- Memory footprints of various internal structures have been reduced. [#17089](https://github.com/cockroachdb/cockroach/pull/17089) [#17106](https://github.com/cockroachdb/cockroach/pull/17106) [#17138](https://github.com/cockroachdb/cockroach/pull/17138) [#17137](https://github.com/cockroachdb/cockroach/pull/17137) [#17152](https://github.com/cockroachdb/cockroach/pull/17152)
- Table descriptors are now passed by reference instead of value. [#17100](https://github.com/cockroachdb/cockroach/pull/17100)

<h3 id="v1.1-alpha.20170803-doc-updates">Doc Updates</h3>

- New RFCs: web session authentication ([#16829](https://github.com/cockroachdb/cockroach/pull/16829)), buffering hash router ([#17105](https://github.com/cockroachdb/cockroach/pull/17105)
- Corrected information about how [`TIMESTAMP WITH TIME ZONE`](../v1.1/timestamp.html) works. Previous versions incorrectly said that they stored timestamps; they do not. Instead they simply display timestamps in the client's session time zone.
- [CockroachDB in Comparison](../v1.1/cockroachdb-in-comparison.html) was redesigned.

<h3 id="v1.1-alpha.20170803-enterprise-edition-changes">Enterprise Edition Changes</h3>

- Replayed commands during a [`RESTORE`](../v1.1/restore.html) are now more efficient. [#17079](https://github.com/cockroachdb/cockroach/pull/17079)
- Backup jobs now checkpoint their progress every minutes. [#17070](https://github.com/cockroachdb/cockroach/pull/17070)
- Streamlined concurrency of [`RESTORE`](../v1.1/restore.html) operations, removing most tunable constants. [#17163](https://github.com/cockroachdb/cockroach/pull/17163)
- [`RESTORE`](../v1.1/restore.html) now rate-limits its disk I/O, reducing its impact on other traffic and improving performance on cloud platforms that throttle disk access. [#17239](https://github.com/cockroachdb/cockroach/pull/17239)
- The `enterprise.enabled` setting has been removed. [#17224](https://github.com/cockroachdb/cockroach/pull/17224)
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.1-alpha.20170810-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170810.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170810.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170810.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.1-alpha.20170810-sql-language-changes">SQL Language Changes</h3>

- The `RETURNING` clause can now be used with [`UPSERT`](../v1.1/upsert.html) and [`INSERT .. ON CONFLICT DO UPDATE`](../v1.1/insert.html) statements. [#17149](https://github.com/cockroachdb/cockroach/pull/17149)

<h3 id="v1.1-alpha.20170810-command-line-interface-changes">Command-Line Interface Changes</h3>

- The [`cockroach sql`](../v1.1/use-the-built-in-sql-client.html) shell now prints the running time of each statement (only in interactive shells using the `pretty` output format). [#17358](https://github.com/cockroachdb/cockroach/pull/17358)

<h3 id="v1.1-alpha.20170810-bug-fixes">Bug Fixes</h3>

- Fix a panic when parsing an interval consisting only of `+` or `-` characters. [#17344](https://github.com/cockroachdb/cockroach/pull/17344)
- Improved responsiveness of query cancellation. [#17219](https://github.com/cockroachdb/cockroach/pull/17219)
- Prepared statements with more than 65535 arguments now return an error instead of crashing the server. [#17380](https://github.com/cockroachdb/cockroach/pull/17380)
- Improved tracing for batches that get split across multiple ranges. [#17414](https://github.com/cockroachdb/cockroach/pull/17414)

<h3 id="v1.1-alpha.20170810-performance-improvements">Performance Improvements</h3>

- Rebalancing now considers data size and write load, not just number of replicas. [#16878](https://github.com/cockroachdb/cockroach/pull/16878)
- The default MVCC garbage collection TTL has been changed from 24 to 25 hours, allowing statements (especially `dump` or `BACKUP`) started at the 24h mark to be completed. [#17366](https://github.com/cockroachdb/cockroach/pull/17366)
- Reduced number of goroutines used in the command queue. [#9448](https://github.com/cockroachdb/cockroach/pull/9448)

<h3 id="v1.1-alpha.20170810-doc-updates">Doc Updates</h3>

- Improved the UX of the documentation version selector on mobile devices. [#1670](https://github.com/cockroachdb/docs/pull/1760)
- Expanded the instructions for [upgrading a cluster's version](../v1.1/upgrade-cockroach-version.html). [#1769](https://github.com/cockroachdb/docs/pull/1769)
- Added an [example](../v1.1/insert.html#update-values-on-conflict) for using a `WHERE` clause to apply an `INSERT .. ON CONFLICT .. DO UPDATE SET` expression conditionally. [#1803](https://github.com/cockroachdb/docs/pull/1803)

<h3 id="v1.1-alpha.20170810-enterprise-edition-changes">Enterprise Edition Changes</h3>

- The `SHOW BACKUPS` statement now includes information about table size. [#17261](https://github.com/cockroachdb/cockroach/pull/17261)
- Backup and restore jobs now restart if their coordinating node dies. [#17301](https://github.com/cockroachdb/cockroach/pull/17301)
- Restoring multiple tables now allocates table IDs in the correct order. [#17412](https://github.com/cockroachdb/cockroach/pull/17412)
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.1-alpha.20170817-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170817.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170817.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-alpha.20170817.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.1-alpha.20170817-sql-language-changes">SQL Language Changes</h3>

- New statements `PAUSE JOB`, `RESUME JOB`, and `CANCEL JOB` can be used to control enterprise backup/restore jobs. [#17434](https://github.com/cockroachdb/cockroach/pull/17434)
- `ARRAY` values now support the append (`||`) and equality (`=`) operators. [#17318](https://github.com/cockroachdb/cockroach/pull/17318)
- New functions `array_append()`, `array_cat()`, `array_prepend()`, `array_remove()`, `array_replace()`, `array_position()`, and `array_positions()` are now supported. [#17331](https://github.com/cockroachdb/cockroach/pull/17331)
- [Collated strings](../v1.1/collate.html) are now supported in arrays. [#17489](https://github.com/cockroachdb/cockroach/pull/17489)
- Arrays can now be created with the syntax `<type> ARRAY` in addition to `<type>[]`. [#17455](https://github.com/cockroachdb/cockroach/pull/17455)
- [`INSERT ... ON CONFLICT DO UPDATE`](../v1.1/insert.html#update-values-on-conflict) statements now support `WHERE` clauses. [#17435](https://github.com/cockroachdb/cockroach/pull/17435)

<h3 id="v1.1-alpha.20170817-command-line-interface-changes">Command-Line Interface Changes</h3>

- New commands `cockroach node decommission` and `cockroach quit --decommission` can be used to permanently and safely remove nodes from a cluster. [#17272](https://github.com/cockroachdb/cockroach/pull/17272)
- The [`cockroach node status`](../v1.1/view-node-details.html) command now supports several new flags to return subsets of a node's information. [#17555](https://github.com/cockroachdb/cockroach/pull/17555)

<h3 id="v1.1-alpha.20170817-admin-ui-changes">Admin UI Changes</h3>

- Running jobs (schema changes and enterprise backup/restore) now show their estimated time remaining, instead of estimated total running time. [#17559](https://github.com/cockroachdb/cockroach/pull/17559)
- Decommissioned nodes are now reflected in the UI. [#17553](https://github.com/cockroachdb/cockroach/pull/17553)

<h3 id="v1.1-alpha.20170817-bug-fixes">Bug Fixes</h3>

- [View](../v1.1/views.html) dependency analysis (which prevents `DROP` of tables that are used by views) is more accurate for newly-created views. [#17310](https://github.com/cockroachdb/cockroach/pull/17310)
- Range splits are no longer allowed in the `meta2` range; this limits the scalability of a cluster but prevents certain panics in large clusters. [#17565](https://github.com/cockroachdb/cockroach/pull/17565)
- 3DES has been removed from the list of supported TLS cipher suites (it would never be selected because we require TLS 1.2, but it could be reported as a false positive by security scanners). [#17237](https://github.com/cockroachdb/cockroach/pull/17237)
- Fixed a panic in destroyed replicas. [#17303](https://github.com/cockroachdb/cockroach/pull/17303)
- `ALTER TABLE ... SCATTER` once again returns information about the affected ranges. [#17409](https://github.com/cockroachdb/cockroach/pull/17409)
- Fixed a data race in table leases. [#17510](https://github.com/cockroachdb/cockroach/pull/17510)
- [Time-travel queries](../v1.1/select.html#select-historical-data-time-travel) can no longer read tables before they were created. [#17378](https://github.com/cockroachdb/cockroach/pull/17378)

<h3 id="v1.1-alpha.20170817-performance-improvements">Performance Improvements</h3>

- The `rocksdb.min_wal_sync_interval` [cluster setting](../v1.1/cluster-settings.html) now defaults to zero, improving write performance in most cases. [#17601](https://github.com/cockroachdb/cockroach/pull/17601)
- Results are now streamed back to the client as they are produced instead of being buffered. [#17019](https://github.com/cockroachdb/cockroach/pull/17019)
- Query processing can now take advantage of on-disk storage, rather than erroring out when the working set of the query is too large to fit in memory. This is turned off by default in this release, but can be enabled by setting the `sql.defaults.distsql.tempstorage` [cluster setting](../v1.1/cluster-settings.html) to true.
- Improved diversity-based rebalancing of replicas. [#17570](https://github.com/cockroachdb/cockroach/pull/17570)
- Stats-based rebalancing handles empty stores and ranges better. [#17593](https://github.com/cockroachdb/cockroach/pull/17593)

<h3 id="v1.1-alpha.20170817-doc-updates">Doc Updates</h3>

- Updated the [Go-specific transaction code sample](../v1.1/build-a-go-app-with-cockroachdb.html#transaction-with-retry-logic). [#1816](https://github.com/cockroachdb/docs/pull/1816)
- Updated the flag and response field definitions for the [`cockroach version`](../v1.1/view-version-details.html) command.
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.1-beta.20170907-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-beta.20170907.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-beta.20170907.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-beta.20170907.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.1-beta.20170907-backwards-incompatible-changes">Backwards-Incompatible Changes</h3>

- [`DROP DATABASE`](../v1.1/drop-database.html) no longer drops non-empty databases unless the `CASCADE` modifier is added. [#17926](https://github.com/cockroachdb/cockroach/pull/17926)
- The `--cache` and `--max-sql-memory` flags for the [`cockroach start`](../v1.1/start-a-node.html) command now default to 128MiB instead of 25% of physical memory to avoid using too much memory by default. Production deployments are encouraged to set `--cache` explicitly to 25-50% of the memory allocated to CockroachDB for best performance. [#18040](https://github.com/cockroachdb/cockroach/pull/18040)

<h3 id="v1.1-beta.20170907-sql-language-changes">SQL Language Changes</h3>

- The new [`IMPORT`](../v1.1/import.html) statement provides a fast way to import an entire table's data into CockroachDB by loading CSV files. Although this feature uses [CCL-licensed code](https://www.cockroachlabs.com/cockroachdb-community-license/), and is therefore available only in builds that include CCL-licensed code, using it is free and does not require an enterprise license. [#17539](https://github.com/cockroachdb/cockroach/pull/17539)
- The [`DELETE`](../v1.1/delete.html) and [`UPDATE`](../v1.1/update.html) statements now support `ORDER BY` and `LIMIT` clauses. [#18023](https://github.com/cockroachdb/cockroach/pull/18023)
- The `sql_safe_updates` [session variable](../v1.1/set-vars.html) can be set to disable certain "dangerous" SQL statements, such as `DELETE` or `UPDATE` without a `WHERE` clause. This is set by default in the `cockroach sql` shell. [#17604](https://github.com/cockroachdb/cockroach/pull/17604) [#17889](https://github.com/cockroachdb/cockroach/pull/17889)
- Parsing of the [`DATE`](../v1.1/date.html) type is no longer affected by the session time zone. [#18164](https://github.com/cockroachdb/cockroach/pull/18164)
- Type hints are now permitted even when they are imprecise, improving compatibility with some drivers and frameworks. [#16672](https://github.com/cockroachdb/cockroach/pull/16672)
- Untyped string literals can now be implicitly cast to numbers, improving compatibility with Javascript clients. [#15903](https://github.com/cockroachdb/cockroach/pull/15903)
- [Query cancellation](../v1.1/cancel-query.html) is now supported for queries using the distributed SQL engine. [#17527](https://github.com/cockroachdb/cockroach/pull/17527)
- The output of [`SHOW SESSIONS`](../v1.1/show-sessions.html) now includes a `last_active_query` column. [#17579](https://github.com/cockroachdb/cockroach/pull/17579)
- The [`SET TRANSACTION`](../v1.1/set-transaction.html) statement no longer requires commas when multiple directives are given. [#17723](https://github.com/cockroachdb/cockroach/pull/17723)
- The PostgreSQL-compatible `e'\x0d0a...'` syntax for hex-encoded byte literals is now supported. [#17693](https://github.com/cockroachdb/cockroach/pull/17693)
- Star expansion is now supported in more cases. [#17833](https://github.com/cockroachdb/cockroach/pull/17833)
- The [`information_schema.sequences`](../v1.1/information-schema.html) table is now supported; it is always empty as sequences are not yet supported. [#17804](https://github.com/cockroachdb/cockroach/pull/17804)
- Improved support for `GROUP BY` and `ORDER BY` with tuples. [#17888](https://github.com/cockroachdb/cockroach/pull/17888)
- Statements that spawn jobs ([`BACKUP`](../v1.1/backup.html), [`RESTORE`](../v1.1/restore.html), schema changes) no longer appear in [`SHOW QUERIES`](../v1.1/show-queries.html). [#17786](https://github.com/cockroachdb/cockroach/pull/17786)
- The `CANCEL`, `RESUME`, `PAUSE`, `BACKUP`, `RESTORE`, and `IMPORT` statements are now valid in prepared statements. The `SET` statement now supports placeholders for values in prepared statements. [#17805](https://github.com/cockroachdb/cockroach/pull/17805) [#17591](https://github.com/cockroachdb/cockroach/pull/17591)

<h3 id="v1.1-beta.20170907-command-line-interface-changes">Command-Line Interface Changes</h3>

- Fatal error messages are now printed to both `stderr` and the logs. [#17588](https://github.com/cockroachdb/cockroach/pull/17588)
- The [`cockroach dump`](../v1.1/sql-dump.html) command now understands [views](../v1.1/views.html) and orders tables to satisfy [foreign key constraints](../v1.1/foreign-key.html) (as long as there are no cycles). [#17581](https://github.com/cockroachdb/cockroach/pull/17581)
- The [`cockroach dump`](../v1.1/sql-dump.html) command correctly represents values such as `NaN` and `Inf`. [#18031](https://github.com/cockroachdb/cockroach/pull/18031)
- The [`cockroach sql`](../v1.1/use-the-built-in-sql-client.html) shell now supports a `h` command for "help". Context-sensitive syntax help is available by typing a question mark followed by the tab key while typing a command. [#13540](https://github.com/cockroachdb/cockroach/pull/13540)
- The [`cockroach sql`](../v1.1/use-the-built-in-sql-client.html) shell now sets a default `application_name` of `cockroach`. [#17602](https://github.com/cockroachdb/cockroach/pull/17602)
- The [`cockroach sql`](../v1.1/use-the-built-in-sql-client.html) shell now prints hints and warnings when available from the server. [#17604](https://github.com/cockroachdb/cockroach/pull/17604)
- The [`cockroach sql`](../v1.1/use-the-built-in-sql-client.html) shell has new debugging options `set echo` (and an equivalent command-line flag `--echo-sql`) and `unset smart_prompt`. [#18127](https://github.com/cockroachdb/cockroach/pull/18127)

<h3 id="v1.1-beta.20170907-admin-ui-changes">Admin UI Changes</h3>

- Various debugging pages are now available at `/#/debug`. [#17635](https://github.com/cockroachdb/cockroach/pull/17635)
- Changes to [cluster settings](../v1.1/cluster-settings.html) are now recorded in the event log. [#17619](https://github.com/cockroachdb/cockroach/pull/17619) [#17866](https://github.com/cockroachdb/cockroach/pull/17866)
- The **Live Bytes per Store** graph has been replaced with **Logical Bytes per Store**, which includes the size of old MVCC values waiting to be garbage collected. [#17782](https://github.com/cockroachdb/cockroach/pull/17782)
- The `/debug/vmodule/` endpoint has been removed; use the SQL function `crdb_internal.set_vmodule()` instead. [#17792](https://github.com/cockroachdb/cockroach/pull/17792) [#17914](https://github.com/cockroachdb/cockroach/pull/17914)
- When [diagnostic reporting](../v1.1/diagnostics-reporting.html) is enabled, anonymous web analytics are also collected in the admin UI. [#17937](https://github.com/cockroachdb/cockroach/pull/17937) [#18046](https://github.com/cockroachdb/cockroach/pull/18046) [#18125](https://github.com/cockroachdb/cockroach/pull/18125)
- Local tracing is now always enabled when nodes start up (even though it will be disabled by default when the node is fully initialized). This helps diagnose problems that keep a node from joining its cluster. [#17944](https://github.com/cockroachdb/cockroach/pull/17944)
- Various adjustments to fonts and margins. [#16773](https://github.com/cockroachdb/cockroach/pull/16773) [#17673](https://github.com/cockroachdb/cockroach/pull/17673)

<h3 id="v1.1-beta.20170907-bug-fixes">Bug Fixes</h3>

- Fixed a regression in the command queue (introduced in `alpha-20170810`) that could result in data inconsistencies. [#17939](https://github.com/cockroachdb/cockroach/pull/17939)
- Fixed a bug in range quiescence that could result in some ranges getting stuck indefinitely. [#18184](https://github.com/cockroachdb/cockroach/pull/18184)
- [Foreign keys](../v1.1/foreign-key.html) that point to a prefix of an existing index now work correctly. Previously, rows could be deleted from the referenced table without recognizing the constraint violation if rows in the referring table pointed to them. These foreign keys are also now shown correctly in [`SHOW CREATE TABLE`](../v1.1/show-create-table.html). [#17638](https://github.com/cockroachdb/cockroach/pull/17638)
- Fixed a bug in `ReverseScan` that could cause data to be missing from query results. [#17868](https://github.com/cockroachdb/cockroach/pull/17868)
- Fixed a build error on FreeBSD. [#17650](https://github.com/cockroachdb/cockroach/pull/17650)
- Windows builds no longer fail with `SyncWAL` errors. [#17735](https://github.com/cockroachdb/cockroach/pull/17735)
- Improved error handling to reduce panics when unsupported SQL features are attempted. [#17521](https://github.com/cockroachdb/cockroach/pull/17521)
- Corrected computation of lease type metrics. [#17615](https://github.com/cockroachdb/cockroach/pull/17615)
- More errors now return the correct PostgreSQL error code, and use the protocol's "hint" and "detail" fields. [#17630](https://github.com/cockroachdb/cockroach/pull/17630) [#17708](https://github.com/cockroachdb/cockroach/pull/17708) [#18028](https://github.com/cockroachdb/cockroach/pull/18028) [#13540](https://github.com/cockroachdb/cockroach/pull/13540)
- Improved error message for parse errors containing funny characters like carriage returns. [#18095](https://github.com/cockroachdb/cockroach/pull/18095)
- Queries are not removed from [`SHOW QUERIES`](../v1.1/show-queries.html) or [`SHOW SESSIONS`](../v1.1/show-sessions.html) until all their results have been sent to the client. [#17579](https://github.com/cockroachdb/cockroach/pull/17579)
- The crash reporter will now time out instead of waiting indefinitely to reach the server. [#17683](https://github.com/cockroachdb/cockroach/pull/17683)
- gRPC no longer closes inter-node connections unnecessarily. [#17706](https://github.com/cockroachdb/cockroach/pull/17706)
- Fixed `duplicate key value` errors when performing large number of splits. [#17763](https://github.com/cockroachdb/cockroach/pull/17763)
- Fixed a deadlock in `quotaPool`. [#17796](https://github.com/cockroachdb/cockroach/pull/17796)
- Fixed a deadlock in `RangeLookup` during `SCATTER`. [#17760](https://github.com/cockroachdb/cockroach/pull/17760)
- The distributed SQL engine avoids scheduling work on nodes running an incompatible version. [#17747](https://github.com/cockroachdb/cockroach/pull/17747)
- `AS OF SYSTEM TIME 0` is now a normal error instead of a panic. [#17680](https://github.com/cockroachdb/cockroach/pull/17680)
- Fixed a panic in `distSQLPlanner`. [#17852](https://github.com/cockroachdb/cockroach/pull/17852)
- Fixed a flow control leak that could lead to deadlock. [#17856](https://github.com/cockroachdb/cockroach/pull/17856)
- Parallelized queries now handle retryable errors correctly. [#17627](https://github.com/cockroachdb/cockroach/pull/17627)
- Nodes now panic if they fail a consistency check. The `server.consistency_check.interval` [cluster setting](../v1.1/cluster-settings.html) replaces the `COCKROACH_CONSISTENCY_CHECK_INTERVAL` environment variable for configuring the consistency checker. [#17853](https://github.com/cockroachdb/cockroach/pull/17853)
- [Dropping an interleaved index](../v1.1/drop-index.html) no longer leaves the table in a broken state. [#17860](https://github.com/cockroachdb/cockroach/pull/17860)
- Changed "flow already registered" from a panic to a regular error. [#17876](https://github.com/cockroachdb/cockroach/pull/17876)
- Certain code paths that used to panic on invalid UTF-8 inputs now return an error instead. [#17935](https://github.com/cockroachdb/cockroach/pull/17935)
- Fixed a memory accounting panic in top-K sorting. [#17984](https://github.com/cockroachdb/cockroach/pull/17984)
- It is no longer possible to set the `kv.raft.command.max_size` cluster setting to a very low value (which could make the cluster inoperable). [#17991](https://github.com/cockroachdb/cockroach/pull/17991)

<h3 id="v1.1-beta.20170907-performance-improvements">Performance Improvements</h3>

- Stats-based rebalancing is now disabled by default. [#17968](https://github.com/cockroachdb/cockroach/pull/17968)
- Reduced unnecessary rebalancing. [#17613](https://github.com/cockroachdb/cockroach/pull/17613)
- The rebalancer now avoids removing the most recently-added replica. [#17930](https://github.com/cockroachdb/cockroach/pull/17930)
- Increased the size of the leaseholder cache. [#17623](https://github.com/cockroachdb/cockroach/pull/17623)
- The new `kv.range_descriptor_cache.size` [cluster setting](../v1.1/cluster-settings.html) can be used to control the size of the range descriptor and leaseholder caches. [#17940](https://github.com/cockroachdb/cockroach/pull/17940)
- Reduced the size of the timestamp cache by 50%. [#17983](https://github.com/cockroachdb/cockroach/pull/17983)
- Replaced several `sync.Maps` with a faster specialized `IntMap`. [#17625](https://github.com/cockroachdb/cockroach/pull/17625)
- Improved job recovery after node restarts. [#17590](https://github.com/cockroachdb/cockroach/pull/17590)
- Reduced synchronization overhead for quiesced replicas. [#17617](https://github.com/cockroachdb/cockroach/pull/17617)
- Increased the number of allowed gossip connections to reduce thrashing. [#17633](https://github.com/cockroachdb/cockroach/pull/17633)
- The `ALTER TABLE ... SCATTER` statement is more efficient. [#17644](https://github.com/cockroachdb/cockroach/pull/17644)
- Attempting to [add a column](../v1.1/add-column.html) with the `NOT NULL` constraint but no default value now fails earlier. [#17634](https://github.com/cockroachdb/cockroach/pull/17634)
- The `sql.defaults.distsql.tempstorage` [cluster setting](../v1.1/cluster-settings.html) now defaults to true. [#17665](https://github.com/cockroachdb/cockroach/pull/17665)
- Improved rebalancing on clusters with little data. [#17733](https://github.com/cockroachdb/cockroach/pull/17733)
- Improved performance of raft log truncation. [#17818](https://github.com/cockroachdb/cockroach/pull/17818)
- The "node liveness" span is now split by default to minimize interactions with the timeseries span. [#17810](https://github.com/cockroachdb/cockroach/pull/17810)
- "Slow timer" log messages are no longer repeated. [#17828](https://github.com/cockroachdb/cockroach/pull/17828)
- Set-returning functions used without a `FROM` clause no longer generate a cross-join. [#17835](https://github.com/cockroachdb/cockroach/pull/17835)
- Memory needed for the RocksDB memtable now counts towards the cache memory budget. [#17865](https://github.com/cockroachdb/cockroach/pull/17865)
- Reduced log spam for distSQL memory usage. [#17807](https://github.com/cockroachdb/cockroach/pull/17807)
- Tracing no longer records the transaction ID multiple times. [#17954](https://github.com/cockroachdb/cockroach/pull/17954)
- MVCC garbage collection is now faster when there are many records to collect. [#17986](https://github.com/cockroachdb/cockroach/pull/17986)
- Reduced occurrence of `AmbiguousResultError` due to RPC failures. [#18000](https://github.com/cockroachdb/cockroach/pull/18000)
- Outer joins with filters are now more efficient. [#18017](https://github.com/cockroachdb/cockroach/pull/18017)
- Added a timeout to heartbeat requests. [#18005](https://github.com/cockroachdb/cockroach/pull/18005)
- Sideloaded data is now correctly accounted for in raft log truncation decisions, reducing disk usage after a `RESTORE` completes. [#18090](https://github.com/cockroachdb/cockroach/pull/18090)
- Sideloaded raft log storage avoids creating too many subdirectories in one parent directory. [#17787](https://github.com/cockroachdb/cockroach/pull/17787)
- Fixed integer overflow in `generate_series()`. [#18066](https://github.com/cockroachdb/cockroach/pull/18066)
- `INSERT` statements using `RETURNING NOTHING` that target different rows in the same table can now be parallelized. [#17757](https://github.com/cockroachdb/cockroach/pull/17757)
- The timeout used for intent resolution has been increased to reduce the probability of failed resolutions that need to be retried. [#18155](https://github.com/cockroachdb/cockroach/pull/18155)

<h3 id="v1.1-beta.20170907-doc-updates">Doc Updates</h3>

- Documented why and how to use `RETURNING NOTHING` to [execute statements within a transaction in parallel](../v1.1/parallel-statement-execution.html). [#1790](https://github.com/cockroachdb/docs/pull/1790)
- Documented SQL statements for managing queries and sessions: [`SHOW QUERIES`](../v1.1/show-queries.html), [`CANCEL QUERY`](../v1.1/cancel-query.html), [`SHOW SESSIONS`](../v1.1/show-sessions.html). [#1828](https://github.com/cockroachdb/docs/pull/1828)
- Added a quick reference on [Managing Long-Running Queries](../v1.1/manage-long-running-queries.html). [#1828](https://github.com/cockroachdb/docs/pull/1828)
- Documented the [`SHOW BACKUP`](../v1.1/show-backup.html) statement. [#1869](https://github.com/cockroachdb/docs/pull/1869)
- Added overview pages for the [`ALTER DATABASE`](../v1.1/alter-database.html) and [`ALTER INDEX`](../v1.1/alter-index.html) statements that point to pages for relevant subcommands, e.g., `RENAME DATABASE` and `RENAME INDEX`. [#1869](https://github.com/cockroachdb/docs/pull/1869)
- Documented the [`ARRAY`](../v1.1/array.html) and [`UUID`](../v1.1/uuid.html) data types. [#1837](https://github.com/cockroachdb/docs/pull/1837) [#1834](https://github.com/cockroachdb/docs/pull/1834)
- The RFC process has been updated. [#17568](https://github.com/cockroachdb/cockroach/pull/17568)
- Updated the [Contribute to CockroachDB](https://wiki.crdb.io/wiki/spaces/CRDB/pages/73204033/Contributing+to+CockroachDB) page to provide guidelines on finding a project, determining its complexity, and learning what to expect in your collaboration with the Cockroach Labs team. [#1881](https://github.com/cockroachdb/docs/pull/1881)

<h3 id="v1.1-beta.20170907-enterprise-edition-changes">Enterprise Edition Changes</h3>

- The initial split/scatter phase of large [`RESTORE`](../v1.1/restore.html) jobs is now much faster. [#18043](https://github.com/cockroachdb/cockroach/pull/18043)
- End times are now recorded correctly in backup descriptors. [#17908](https://github.com/cockroachdb/cockroach/pull/17908)
- Avoided slowdowns when multiple backup/restore goroutines attempt to update their progress simultaneously. [#17934](https://github.com/cockroachdb/cockroach/pull/17934)
- [`RESTORE`](../v1.1/restore.html) now uses larger SSTables to avoid running out of file descriptors. [#17991](https://github.com/cockroachdb/cockroach/pull/17991) [#18037](https://github.com/cockroachdb/cockroach/pull/18037)
- Fixed a deadlock in `RESTORE`. [#18101](https://github.com/cockroachdb/cockroach/pull/18101)
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.1-beta.20170921-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-beta.20170921.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-beta.20170921.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-beta.20170921.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.1-beta.20170921-admin-ui-changes">Admin UI Changes</h3>

- New debug endpoint `/debug/logspy` can be used to access verbose logging remotely (when remote debugging is enabled). [#18221](https://github.com/cockroachdb/cockroach/pull/18221) [#18415](https://github.com/cockroachdb/cockroach/pull/18415)
- Improvements to debug pages. [#18411](https://github.com/cockroachdb/cockroach/pull/18411) [#18498](https://github.com/cockroachdb/cockroach/pull/18498)

<h3 id="v1.1-beta.20170921-bug-fixes">Bug Fixes</h3>

- Improve diagnostic messages for nodes incorrectly restarted without the `--join` flag. [#18203](https://github.com/cockroachdb/cockroach/pull/18203)
- Ranges can no longer become quiescent while a leadership transfer is in progress. [#18217](https://github.com/cockroachdb/cockroach/pull/18217)
- Fixed an issue with cached raft terms that could result in unavailable ranges. [#18338](https://github.com/cockroachdb/cockroach/pull/18338)
- Fixed serialization of negative integers in the distributed SQL engine. [#18323](https://github.com/cockroachdb/cockroach/pull/18323)
- Fixed bugs in reverse scans. [#18383](https://github.com/cockroachdb/cockroach/pull/18383)
- Fixed bugs in sideloaded raft storage (used by [`RESTORE`](../v1.1/restore.html) and [`IMPORT`](../v1.1/import.html)). [#18409](https://github.com/cockroachdb/cockroach/pull/18409) [#18466](https://github.com/cockroachdb/cockroach/pull/18466) [#18481](https://github.com/cockroachdb/cockroach/pull/18481)
- Improved implementation of the `COPY` protocol. [#18259](https://github.com/cockroachdb/cockroach/pull/18259)
- Failure to find a table name no longer aborts the current transaction. [#18373](https://github.com/cockroachdb/cockroach/pull/18373)
- `pg_table_is_visible` now qualifies table names correctly. [#18373](https://github.com/cockroachdb/cockroach/pull/18373)
- Fixed an interaction between RocksDB DeleteRange operations and snapshots. [#18380](https://github.com/cockroachdb/cockroach/pull/18380) [#18446](https://github.com/cockroachdb/cockroach/pull/18446)

<h3 id="v1.1-beta.20170921-performance-improvements">Performance Improvements</h3>

- Prevented rapid retries of non-queueable "push transaction" operations. [#18196](https://github.com/cockroachdb/cockroach/pull/18196)
- Fixed busy loop in the replication queue. [#18465](https://github.com/cockroachdb/cockroach/pull/18465)
- Rebalancing is no longer disabled temporarily after a lease transfer. [#18230](https://github.com/cockroachdb/cockroach/pull/18230)

<h3 id="v1.1-beta.20170921-doc-updates">Doc Updates</h3>

- Documented how to [perform a rolling upgrade from v1.0.x to v1.1](../v1.1/upgrade-cockroach-version.html). [#1899](https://github.com/cockroachdb/docs/pull/1899)
- Documented how to [decommission and permanently remove nodes](../v1.1/remove-nodes.html) from a cluster. [#1876](https://github.com/cockroachdb/docs/pull/1876)
- Added an explanation of [what happens when a node is temporarily stopped](../v1.1/stop-a-node.html#how-it-works), and improved the [examples for stopping nodes](../v1.1/stop-a-node.html#examples). [#1899](https://github.com/cockroachdb/docs/pull/1899)
- Updated the [default `--cache` and `--max-sql-memory` size](../v1.1/start-a-node.html#flags-changed-in-v1-1) for nodes, and added guidance on [increasing the cache and SQL memory size](../v1.1/recommended-production-settings.html#cache-and-sql-memory-size-changed-in-v1-1) for production deployments. [#1906](https://github.com/cockroachdb/docs/pull/1906)
- Documented the new `--unsafe-updates` flag and new SQL shell options for the [`cockroach sql`](../v1.1/use-the-built-in-sql-client.html) command. [#1905](https://github.com/cockroachdb/docs/pull/1905)
- Documented the new `--echo-sql` flag for the [`cockroach sql`](../v1.1/use-the-built-in-sql-client.html), [`cockroach dump`](../v1.1/sql-dump.html), [`cockroach user`](../v1.1/create-and-manage-users.html), and [`cockroach zone`](../v1.1/configure-replication-zones.html) commands. [#1905](https://github.com/cockroachdb/docs/pull/1905)
- Added the `CASCADE` and `RESTRICT` options to the [`DROP DATABASE`](../v1.1/drop-database.html) documentation. [#1903](https://github.com/cockroachdb/docs/pull/1903)
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.1-beta.20170928-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-beta.20170928.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-beta.20170928.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1-beta.20170928.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.1-beta.20170928-build-changes">Build Changes</h3>

- The release docker images now use Debian 8.9 (instead of 8.7) [#18755](https://github.com/cockroachdb/cockroach/pull/18755)

<h3 id="v1.1-beta.20170928-sql-language-changes">SQL Language Changes</h3>

- The [`IMPORT`](../v1.1/import.html) command is now considered an experimental feature and must be enabled before use with the cluster setting `experimental.importcsv.enabled`. [#18753](https://github.com/cockroachdb/cockroach/pull/18753)
- The [cluster settings](../v1.1/cluster-settings.html) beginning with `sql.defaults.distsql.tempstorage` have been renamed to begin with `sql.distsql.temp_storage`. [#18487](https://github.com/cockroachdb/cockroach/pull/18487)
- The new `sql.distsql.temp_storage.workmem` [cluster setting](../v1.1/cluster-settings.html) sets the memory threshold at which a DistSQL processor falls back to on-disk storage. Defaults to 64MiB. [#18487](https://github.com/cockroachdb/cockroach/pull/18487)
- The [`SHOW JOBS`](../v1.1/show-jobs.html) statement no longer shows numeric descriptor IDs. [#18797](https://github.com/cockroachdb/cockroach/pull/18797)

<h3 id="v1.1-beta.20170928-command-line-interface-changes">Command-Line Interface Changes</h3>

- The new `--max-disk-temp-storage` flag for the [`cockroach start`](../v1.1/start-a-node.html) command controls how much disk space can be used for temporary storage. [#18761](https://github.com/cockroachdb/cockroach/pull/18761)
- The `cockroach load csv` command now increases its soft limit on the number of open file descriptors when possible. [#18678](https://github.com/cockroachdb/cockroach/pull/18678)
- The `cockroach init` command now provides a better error message when run on an already-initialized cluster. [#18548](https://github.com/cockroachdb/cockroach/pull/18548)

<h3 id="v1.1-beta.20170928-admin-ui-changes">Admin UI Changes</h3>

- Reduced false positives when marking nodes as "suspect". [#18563](https://github.com/cockroachdb/cockroach/pull/18563)
- The **Jobs** page can now be limited to import jobs. [#18615](https://github.com/cockroachdb/cockroach/pull/18615)
- The **Keys Written per Second per Store** graph on the **Replication** dashboard is now accurate. [#18800](https://github.com/cockroachdb/cockroach/pull/18800)
- Fixed the display of the number of indexes per table. [#18769](https://github.com/cockroachdb/cockroach/pull/18769)

<h3 id="v1.1-beta.20170928-bug-fixes">Bug Fixes</h3>

- Fixed a bug in which queries using [`DISTINCT`](../v1.1/select.html#select-distinct-rows) or [`GROUP BY`](../v1.1/select.html#create-aggregate-groups) could return incorrect results. [#18727](https://github.com/cockroachdb/cockroach/pull/18727)
- After some results have been streamed to the client, queries are no longer auto-retried. [#18515](https://github.com/cockroachdb/cockroach/pull/18515) [#18569](https://github.com/cockroachdb/cockroach/pull/18569)
- Tables with no columns now work correctly. [#18532](https://github.com/cockroachdb/cockroach/pull/18532)
- The [`cockroach dump`](../v1.1/sql-dump.html) command now supports values of type `UUID`. [#18543](https://github.com/cockroachdb/cockroach/pull/18543)
- The distributed SQL engine now avoids scheduling work on nodes running version 1.0.x in a mixed-version cluster. [#18546](https://github.com/cockroachdb/cockroach/pull/18546)
- The distributed SQL engine no longer attempts to schedule work on [decommissioned nodes](../v1.1/remove-nodes.html). [#18698](https://github.com/cockroachdb/cockroach/pull/18698)
- The [`TRUNCATE`](../v1.1/truncate.html) statement now works correctly on tables in the middle of a schema change (the schema change finishes immediately on the now-empty table). [#18549](https://github.com/cockroachdb/cockroach/pull/18549)
- Fixed a panic in `tableState.findForTimestamp` [#18557](https://github.com/cockroachdb/cockroach/pull/18557)
- Fixed a bug in which importing a CSV would fail to report unique constraint violations. [#18563](https://github.com/cockroachdb/cockroach/pull/18563)
- Fixed a bug when importing a CSV into a table with multiple column families. [#18563](https://github.com/cockroachdb/cockroach/pull/18563)
- [`SHOW TRACE`](../v1.1/show-trace.html) now works correctly when ipv6 is used. [#18567](https://github.com/cockroachdb/cockroach/pull/18567)
- Foreign key checks are now included in [`SHOW KV TRACE`](../v1.1/show-trace.html). [#18568](https://github.com/cockroachdb/cockroach/pull/18568)
- Fixed the display of version numbers. [#18562](https://github.com/cockroachdb/cockroach/pull/18562)
- Improved tracing of range lookups [#18613](https://github.com/cockroachdb/cockroach/pull/18613)
- Fixed an overflow check in key decoding. [#18639](https://github.com/cockroachdb/cockroach/pull/18639)
- Fixed a trace use-after-finish panic. [#18645](https://github.com/cockroachdb/cockroach/pull/18645)
- Fixed a panic in `disk_row_container`. [#18685](https://github.com/cockroachdb/cockroach/pull/18685)
- Improved some error reporting. [#18708](https://github.com/cockroachdb/cockroach/pull/18708)
- Fixed [zone config](../v1.1/configure-replication-zones.html) problems after dropping or truncating a table. [#18781](https://github.com/cockroachdb/cockroach/pull/18781)
- [`SHOW CLUSTER QUERIES`](../v1.1/show-queries.html) and [`SHOW CLUSTER SESSIONS`](../v1.1/show-sessions.html) no longer panic when a node is down. [#18802](https://github.com/cockroachdb/cockroach/pull/18802)
- Fixed a bug with queries using `COUNT(*)` and tables containing multiple column families. [#18805](https://github.com/cockroachdb/cockroach/pull/18805)

<h3 id="v1.1-beta.20170928-performance-improvements">Performance Improvements</h3>

- Improved performance of [foreign key](../v1.1/foreign-key.html) checks. [#18597](https://github.com/cockroachdb/cockroach/pull/18597)
- Table leases are now refreshed asynchronously when near expiration. [#18824](https://github.com/cockroachdb/cockroach/pull/18824)
- Improved performance of `COUNT(*)` queries. [#18524](https://github.com/cockroachdb/cockroach/pull/18524)
- Reduced some noisy log messages. [#18589](https://github.com/cockroachdb/cockroach/pull/18589)
- Distributed CSV import is now aware of the target range size. [#18634](https://github.com/cockroachdb/cockroach/pull/18634)
- The GC queue now gives up earlier after a timeout. [#18672](https://github.com/cockroachdb/cockroach/pull/18672)
- The distributed SQL engine now supports array values. [#18792](https://github.com/cockroachdb/cockroach/pull/18792)
- Improved load-based lease rebalancing for distributed SQL queries. [#18794](https://github.com/cockroachdb/cockroach/pull/18794)

<h3 id="v1.1-beta.20170928-doc-updates">Doc Updates</h3>

- In the [`cockroach dump`](../v1.1/sql-dump.html) documentation, clarified that table and view schemas are dumped in the order in which they can successfully be recreated. Also added this as a [known limitation in CockroachDB v1.0](../v1.0/known-limitations.html#order-of-dumped-schemas-and-incorrect-schemas-of-dumped-views). [#1923](https://github.com/cockroachdb/docs/pull/1923)
- Added a message when searches of the documentation return no results. [#1927](https://github.com/cockroachdb/docs/pull/1927)
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.1.0-rc.1-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.0-rc.1.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.0-rc.1.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.0-rc.1.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.1.0-rc.1-build-changes">Build Changes</h3>

- Docker images now contain root CA certificates, permitting the use of `BACKUP` and `RESTORE` on cloud storage. [#18959](https://github.com/cockroachdb/cockroach/pull/18959)
- Docker images are now built without caching to ensure they contain the latest packages at the time of release. [#18999](https://github.com/cockroachdb/cockroach/pull/18999)

<h3 id="v1.1.0-rc.1-command-line-interface-changes">Command-Line Interface Changes</h3>

- Timestamps in logs now use UTC regardless of the system time zone. [#18764](https://github.com/cockroachdb/cockroach/pull/18764)
- Added an explanatory message when `--background` is used and the node is waiting to join an existing cluster or for `cockroach init` to be run. [#18840](https://github.com/cockroachdb/cockroach/pull/18840)

<h3 id="v1.1.0-rc.1-bug-fixes">Bug Fixes</h3>

- [`SERIALIZABLE`](../v1.1/transactions.html#serializable-isolation) transactions should no longer return "transaction deadline exceeded". [#18852](https://github.com/cockroachdb/cockroach/pull/18852)
- Transaction deadlines are now updated properly when a transaction restarts. [#18943](https://github.com/cockroachdb/cockroach/pull/18943)
- Fixed a panic when an error was generated in [`COMMIT`](../v1.1/commit-transaction.html) or [`ROLLBACK`](../v1.1/rollback-transaction.html). [#18937](https://github.com/cockroachdb/cockroach/pull/18937)
- Fixed a panic in queries with `JOIN` using the distributed SQL engine. [#18975](https://github.com/cockroachdb/cockroach/pull/18975)
- Reverted a change in [beta-20170928](v1.1-beta.20170928.html) to asynchronously refresh table leases when near expiration. [#18862](https://github.com/cockroachdb/cockroach/pull/18862)
- Casting `TIMESTAMP WITH TIME ZONE` to `TIMESTAMP` respects the [session time zone](../v1.1/set-vars.html#set-time-zone). [#18764](https://github.com/cockroachdb/cockroach/pull/18764)
- Range debug pages now work when a replica is awaiting garbage collection. [#18941](https://github.com/cockroachdb/cockroach/pull/18941)
- Temporary directory cleanup now works correctly on `overlayfs`. [#19000](https://github.com/cockroachdb/cockroach/pull/19000)

<h3 id="v1.1.0-rc.1-doc-updates">Doc Updates</h3>

- Documented the [`cockroach init`](../v1.1/initialize-a-cluster.html) command and updated the [manual](../v1.1/manual-deployment.html) and [cloud](../v1.1/manual-deployment.html) deployment tutorials to use the new cluster initialization workflow. [#1942](https://github.com/cockroachdb/docs/pull/1942)
- Updated various diagrams in our [SQL statement documentation](../v1.1/sql-statements.html). [#1946](https://github.com/cockroachdb/docs/pull/1946)
- Documented the [`DROP USER`](../v1.1/drop-user.html) statement, and updated related docs to clarify that removing a user does not automatically remove the user's privileges; that must be done manually. [#1954](https://github.com/cockroachdb/docs/pull/1954)
- Updated the [Rust transaction code sample](../v1.1/build-a-rust-app-with-cockroachdb.html#transaction-with-retry-logic) to work against PostgreSQL v0.15.1. [#1941](https://github.com/cockroachdb/docs/pull/1941)
- Updated the [ActiveRecord tutorial](../v1.1/build-a-ruby-app-with-cockroachdb-activerecord.html#step-1-install-the-activerecord-orm) to clarify the dependency between the ActiveRecord version and the CockroachDB Ruby adapter. [#1949](https://github.com/cockroachdb/docs/pull/1949)
- Clarified that [window functions](../v1.1/window-functions.html) are supported by CockroachDB (more docs coming soon). [#1948](https://github.com/cockroachdb/docs/pull/1948)
- Updated the [`SHOW CREATE TABLE` example](../v1.1/show-create-table.html#example) to show improved output for foreign key dependencies. [#1953](https://github.com/cockroachdb/docs/pull/1953)
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

With the release of CockroachDB v1.1.0, we’ve included support for faster migrations from other databases for developers, simplified cluster management for operators, and improved performance in real-world environments.

- Read more about these changes in the [v1.1 blog post](https://www.cockroachlabs.com/blog/cockroachdb-1dot1/).
- Check out a [summary of backwards-incompatible changes and new features](#summary).
- Then [upgrade to CockroachDB v1.1.0](../v1.1/upgrade-cockroach-version.html). The process of upgrading from v1.0.x to v1.1.0 is different than upgrading within the v1.0.x series, so please follow the upgrade instructions carefully.

<h3 id="v1.1.0-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.0.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.0.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.0.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.1.0-summary">Summary</h3>

This section summarizes the most significant user-facing changes in v1.1.0. For a complete list of changes, including bug fixes and performance improvements, see the [release notes](index.html#testing-releases) for previous testing releases.

- [Backwards-Incompatible Changes](#backwards-incompatible-changes)
- [SQL Statements](#sql-statements)
- [SQL Types](#sql-types)
- [Cockroach Commands](#cockroach-commands)
- [Admin UI](#admin-ui)
- [Documentation](#documentation)
- [Known Limitations](#known-limitations)

<style>
    table td:first-child {
        min-width: 225px;
    }
</style>

<h3 id="v1.1.0-backwards-incompatible-changes">Backwards-Incompatible Changes</h3>

Change | Description
-------|------------
[`DROP DATABASE`](../v1.1/drop-database.html) | This statement no longer drops non-empty databases unless the `CASCADE` modifier is added.
[`cockroach start`](../v1.1/start-a-node.html) | The `--max-sql-memory` and `--cache` flags now default to 128MiB instead of 25% of physical memory. These new defaults are reasonable for local development clusters. However, for production deployments, they should be increased to 25% or higher. See [Recommended Production Settings](../v1.1/recommended-production-settings.html#cache-and-sql-memory-size-changed-in-v1-1) for more details.<br><br>Also, if the server's own hostname cannot be resolved, CockroachDB reports an error at startup instead of starting a node that will be unable to participate in a cluster. Local test clusters may need to pass `--host=localhost` to avoid this error.
[Various names](../v1.1/keywords-and-identifiers.html#rules-for-identifiers) | Database, table, view, and column names in double quotes are now case-sensitive (as in PostgreSQL).
[`DROP COLUMN`](../v1.1/drop-column.html) | It is no longer possible to drop columns in tables depended on by [views](../v1.1/views.html). This is an overly-broad change to avoid schema changes that might break views; it will be narrowed in the future.
`EXPLAIN (DEBUG)`<br>`EXPLAIN(TRACE)` | These [`EXPLAIN`](../v1.1/explain.html) options have been removed. They have been replaced by the new [`SHOW TRACE`](../v1.1/show-trace.html) statement.

<h3 id="v1.1.0-sql-statements">SQL Statements</h3>

Statement | Description
----------|------------
[`IMPORT`](../v1.1/import.html) | Use this new statement to import an entire table's data into a running cluster by loading CSV files.
[`SHOW QUERIES`](../v1.1/show-queries.html)<br>[`CANCEL QUERY`](../v1.1/cancel-query.html) | Use these new statements to monitor the progress of active queries, and, if necessary, cancel long-running queries causing unwanted resource consumption.
[`SHOW SESSIONS`](../v1.1/show-sessions.html) | Use this new statement to monitor the overall state of client connections and identify those that may need investigation or adjustment.
[`SHOW JOBS`](../v1.1/show-jobs.html) | Use this new statement to monitor the progress of schema changes and enterprise backups and restores.
[`CANCEL JOB`](../v1.1/cancel-job.html)<br>[`PAUSE JOB`](../v1.1/pause-job.html)<br>[`RESUME JOB`](../v1.1/resume-job.html) | Use these new statements to cancel, pause, or resume enterprise backups and restores.
[`SHOW BACKUP`](../v1.1/show-backup.html) | Use this new statement to list the contents of an enterprise backup.
[`SHOW TRACE`](../v1.1/show-trace.html) | Use this new statement to execute a target statement and then return a trace of its actions through all of CockroachDB's software layers.
[`DROP USER`](../v1.1/drop-user.html) | Use this new statement to remove one or more SQL users. This features is equivalent to the existing [`cockroach user rm`](../v1.1/create-and-manage-users.html) command.
[`RESET`](../v1.1/reset-vars.html)<br> | Use this new statement to reset a session variable to its default value. You can also use the new [`SET .. TO DEFAULT`](../v1.1/set-vars.html#reset-a-variable-to-its-default-value) option.
[`RESET CLUSTER SETTING`](../v1.1/reset-cluster-setting.html) | Use this new statement to reset a cluster setting to its default value. You can also use the new [`SET CLUSTER SETTING .. TO DEFAULT`](../v1.1/set-cluster-setting.html#reset-a-setting-to-its-default-value) option.
[`DROP DATABASE`](../v1.1/drop-database.html) | Use the new `CASCADE` option to drop all tables and views in a database as well as all objects that depend on those tables, such as [constraints](../v1.1/constraints.html) and [views](../v1.1/views.html). This option does not list objects it drops, so should be used cautiously.
[`INSERT`](../v1.1/insert.html#update-values-on-conflict) | Use a `WHERE` clause with `ON CONFLICT` to conditionally apply updates that conflict with a Unique constraint on one or more columns.

<h3 id="v1.1.0-sql-types">SQL Types</h3>

Type | Description
-----|------------
[`ARRAY`](../v1.1/array.html) | Use this new data type to store 1-dimensional, 1-indexed, homogeneous arrays of any non-array data type.
[`UUID`](../v1.1/uuid.html) | Use this new data type to store 128-bit values that are globally unique. This type is recommended for [auto-generating unique row IDs](../v1.1/uuid.html#create-a-table-with-auto-generated-unique-row-ids).

<h3 id="v1.1.0-cockroach-commands">Cockroach Commands</h3>

Command | Description
--------|------------
[`init`](../v1.1/initialize-a-cluster.html) | Use this new command to perform a one-time initialization of a new multi-node cluster. For a full walk-through of the cluster startup and initialization process, see [Manual Deployment](../v1.1/manual-deployment.html) or one of the [Cloud Deployment](../v1.1/manual-deployment.html) tutorials.
[`node decommission`](../v1.1/view-node-details.html)<br>[`node recommission`](../v1.1/view-node-details.html) | Use these new subcommands of `cockroach node` to decommission nodes for permanent removal or recommission nodes that were accidentally decommissioned. See [Remove Nodes](../v1.1/remove-nodes.html) for more details.
[`start`](../v1.1/start-a-node.html) | When starting a node, the new `--max-disk-temp-storage` flag lets you set the maximum on-disk storage capacity available to store temporary data for SQL queries that exceed the memory budget. This ensures that JOINs, sorts, and other memory-intensive SQL operations are able to spill intermediate results to disk.
[`sql`](../v1.1/use-the-built-in-sql-client.html) | When starting the built-in SQL client, the new `--echo-sql` flag reveals the SQL statements sent implicitly by the command-line utility, and the new `--unsafe-updates` flag allows potentially unsafe statements, such as `DELETE` without a `WHERE` clause.<br><br>Within the interactive SQL shell, you can now get [interactive help about statements and functions](../v1.1/use-the-built-in-sql-client.html#sql-shell-help-new-in-v1-1) and you can set [new SQL shell options](../v1.1/use-the-built-in-sql-client.html#sql-shell-options-changed-in-v1-1) to control how table rows get printed, to reveal the statements sent implicitly by the SQL shell, to reveal the time a query takes to complete, and to return the current status of a transaction.<br><br>Also, when the built-in SQL client connects or reconnects to a node, the [welcome text](../v1.1/use-the-built-in-sql-client.html#sql-shell-welcome-changed-in-v1-1) it prints now includes version and cluster ID details.
[`dump`](../v1.1/sql-dump.html) | Table and view schemas are now dumped in the order in which they can successfully be recreated.<br><br>Also, the new `--echo-sql` flag reveals the SQL statements sent implicitly by the command-line utility.
[`zone`](../v1.1/configure-replication-zones.html) | The new `--echo-sql` flag reveals the SQL statements sent implicitly by the command-line utility.

<h3 id="v1.1.0-admin-ui">Admin UI</h3>

Area | Description
-----|------------
[Jobs Page](../v1.1/admin-ui-jobs-page.html) | This new page in the Admin UI shows the user, description, creation time, and status of each backup and restore job, as well as schema changes performed across all nodes in the cluster.
[Nodes List](../v1.1/admin-ui-access-and-navigate.html#decommissioned-nodes) | Nodes that have been decommissioned for permanent removal are now listed in a separate table.

<h3 id="v1.1.0-documentation">Documentation</h3>

Topic | Description
------|------------
[CockroachDB Architecture](../v1.1/architecture/overview.html) | This new section of the documentation provides an introduction to CockroachDB internals, with detailed explanations of each layer of the software.
[Admin UI](../v1.1/admin-ui-overview.html) | This new section of the documentation explains how to understand and use the Admin UI to monitor and optimize cluster performance.
[Parallel Statement Execution](../v1.1/parallel-statement-execution.html) | CockroachDB supports parallel execution of independent `INSERT`, `UPDATE`, `UPSERT`, and `DELETE` statements within a single transaction. This new topic explains why, how, and when to use this feature.
[Cross-Cloud Migration](../v1.1/demo-automatic-cloud-migration.html) | This new topic walks you through a local simulation of migrating data from one cloud to another without any service interruption. An accompanying [blog post](https://www.cockroachlabs.com/blog/cross-cloud-migration/) features a live demonstration of the process.
[Recommended Production Settings](../v1.1/recommended-production-settings.html) | This topic now provides improved hardware recommendations for a CockroachDB cluster and expanded details on how CockroachDB handles unsynchronized clocks.
[Rotate Security Certificates](../v1.1/rotate-certificates.html) | This new topic shows you how to rotate security certificates without restarting nodes.
[Stop a Node](../v1.1/stop-a-node.html#how-it-works) | This topic now explains what happens when a node is temporarily stopped.
[Contribute to CockroachDB](https://wiki.crdb.io/wiki/spaces/CRDB/pages/73204033/Contributing+to+CockroachDB) | This topic now gives external contributors guidelines on finding a project, determining its complexity, and learning what to expect in collaborations with the Cockroach Labs team.

<h3 id="v1.1.0-known-limitations">Known Limitations</h3>

For information about limitations we've identified in CockroachDB v1.1, with suggested workarounds where applicable, see [Known Limitations](../v1.1/known-limitations.html).
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.1.1-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.1.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.1.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.1.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.1.1-sql-language-changes">SQL Language Changes</h3>

- [`ARRAY`](../v1.1/array.html) values are now more compatible with certain client drivers. [#19273](https://github.com/cockroachdb/cockroach/pull/19273) [#19285](https://github.com/cockroachdb/cockroach/pull/19285)

<h3 id="v1.1.1-bug-fixes">Bug Fixes</h3>

- `SET CLUSTER SETTING version = '1.1'` now works correctly. You issue this command when [finalizing a cluster upgrade from 1.0.x to 1.1.1](../v1.1/upgrade-cockroach-version.html). [#19225](https://github.com/cockroachdb/cockroach/pull/19225)
- Created, dropped, or truncated tables no longer result in non-restorable backups. [#19067](https://github.com/cockroachdb/cockroach/pull/19067)
- Some issues that could cause non-restorable backups are now detected during the backup process. [#19286](https://github.com/cockroachdb/cockroach/pull/19286)
- Fixed a deadlock in the crash reporting code, making more information available about certain fatal errors. [#19287](https://github.com/cockroachdb/cockroach/pull/19287)
- Very large arguments to the SQL `repeat()` function now return an error instead of panicking. [#19066](https://github.com/cockroachdb/cockroach/pull/19066)
- It is now possible to drop a [foreign key constraint](../v1.1/foreign-key.html) on a column that is part of the primary key. [#19092](https://github.com/cockroachdb/cockroach/pull/19092)
- Attempting to use [`SHOW TRACE FOR`](../v1.1/show-trace.html) while session tracing is enabled no longer turns off session tracing. [#19099](https://github.com/cockroachdb/cockroach/pull/19099)
- [`SHOW TRACE FOR`](../v1.1/show-trace.html) no longer includes detailed KV-level information (these messages are included in the separate `SHOW KV TRACE FOR` command). [#19143](https://github.com/cockroachdb/cockroach/pull/19143)
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.1.2-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.2.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.2.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.2.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.1.2-sql-language-changes">SQL Language Changes</h3>

- The new `gen_random_uuid()` [function](../v1.1/functions-and-operators.html) generates and returns a random [`UUID`](../v1.1/uuid.html) value. [#19585](https://github.com/cockroachdb/cockroach/pull/19585)

<h3 id="v1.1.2-bug-fixes">Bug Fixes</h3>

- Reverted the default behavior of [`DROP DATABASE`](../v1.1/drop-database.html) to `CASCADE` for compatibility with PostgreSQL, some schema migration tools, and CockroachDB v1.0. [#19209](https://github.com/cockroachdb/cockroach/pull/19209)

- Fixed a bug preventing crash reports from being submitted with [anonymous diagnostics details](../v1.1/diagnostics-reporting.html). [#19563](https://github.com/cockroachdb/cockroach/pull/19563)

- Important errors such as "writes: no space left on device" are now included in crash reports. [#19314](https://github.com/cockroachdb/cockroach/pull/19314)

- The [`cockroach dump`](../v1.1/sql-dump.html) command now properly supports [`ARRAY`](../v1.1/array.html) values and [primary keys](../v1.1/primary-key.html) named other than "primary". [#19526](https://github.com/cockroachdb/cockroach/pull/19526) [#19400](https://github.com/cockroachdb/cockroach/pull/19400)

- It is now possible to use AWS S3 buckets in any region for [`IMPORT`](../v1.1/import.html) and enterprise [`BACKUP`](../v1.1/backup.html) and [`RESTORE`](../v1.1/restore.html). [#19473](https://github.com/cockroachdb/cockroach/pull/19473)

- Reduced unnecessary log messages when a cluster becomes temporarily unbalanced, for example, when a new node joins. [#19494](https://github.com/cockroachdb/cockroach/pull/19494)

- Fixed a bug causing redundant log messages when running [`SHOW TRACE FOR`](../v1.1/show-trace.html). [#19469](https://github.com/cockroachdb/cockroach/pull/19469)

- [`ARRAY`](../v1.1/array.html) values containing strings with multiple consecutive escapes are now parsed properly. [#19452](https://github.com/cockroachdb/cockroach/pull/19452)

- Fixed a bug causing certain queries with [`ORDER BY`](../v1.1/select.html#sorting-retrieved-values) to return incorrectly ordered results when the ordering columns contain NULL values. [#19419](https://github.com/cockroachdb/cockroach/pull/19419)

- Fixed `NATURAL JOIN` operations (where the join clause is implicit based on the common columns in the tables being joined) when one side of the join is a subquery. [#19544](https://github.com/cockroachdb/cockroach/pull/19544)

- Improved the handling of errors during [range splits](../v1.1/architecture/distribution-layer.html#range-splits). [#19448](https://github.com/cockroachdb/cockroach/pull/19448)

- Fixed a bug causing correctness problems when nodes run out of disk. [#19447](https://github.com/cockroachdb/cockroach/pull/19447)

- Fixed a bug causing the [decommissioning](../v1.1/remove-nodes.html) process to hang when the target node is already decommissioned. [#19279](https://github.com/cockroachdb/cockroach/pull/19279)

- Fixed a bug preventing aborted [transactions](../v1.1/transactions.html) from seeing their own writes. [#19093](https://github.com/cockroachdb/cockroach/pull/19093)

- Improved performance for some transaction conflicts. [#19093](https://github.com/cockroachdb/cockroach/pull/19093)

<h3 id="v1.1.2-doc-updates">Doc Updates</h3>

- Added a [known limitation](../v1.1/known-limitations.html#downgrading-to-v1-1-0-from-a-later-v1-1-x-patch-release) about downgrading to v1.1.0 from a later v1.1.x patch release. [#2095](https://github.com/cockroachdb/docs/pull/2095)
- Corrected the aliases and allowed widths of various [`INT`](../v1.1/int.html) types. [#2116](https://github.com/cockroachdb/docs/pull/2116)
- Corrected the description of the `--host` flag in our insecure [cloud deployment tutorials](../v1.1/manual-deployment.html). [#2117](https://github.com/cockroachdb/docs/pull/2117)
- Minor improvements to the [CockroachDB Architecture Overview](../v1.1/architecture/overview.html) page. [#2103](https://github.com/cockroachdb/docs/pull/2103) [#2104](https://github.com/cockroachdb/docs/pull/2104) [#2105](https://github.com/cockroachdb/docs/pull/2105)
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.1.3-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.3.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.3.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.3.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.1.3-sql-language-changes">SQL Language changes</h3>

- [`SHOW TRACE FOR SELECT`](../v1.1/show-trace.html) now supports [`AS OF SYSTEM TIME`](https://www.cockroachlabs.com/blog/time-travel-queries-select-witty_subtitle-the_future/). [#20187](https://github.com/cockroachdb/cockroach/pull/20187)

<h3 id="v1.1.3-bug-fixes">Bug Fixes</h3>

- [Decommissioned nodes](../v1.1/remove-nodes.html) are now excluded from the staggered version warning. [#19626](https://github.com/cockroachdb/cockroach/pull/19626)

- When an enterprise [`RESTORE`](../v1.1/restore.html) fails or is canceled, partially restored data is now properly cleaned up. [#19653](https://github.com/cockroachdb/cockroach/pull/19653)

- Correctly resume [`RESTORE`](../v1.1/restore.html) jobs that skip [foreign keys](../v1.1/foreign-key.html). [#20168](https://github.com/cockroachdb/cockroach/pull/20168)

- Improved memory usage for certain queries that use [`LIMIT`](../v1.1/select.html#control-quantity-of-returned-rows) at multiple levels. [#19688](https://github.com/cockroachdb/cockroach/pull/19688)

- Fixed a rare panic in [`SET`](../v1.1/set-vars.html). [#19750](https://github.com/cockroachdb/cockroach/pull/19750)

- Fixed a panic in distributed SQL. [#19828](https://github.com/cockroachdb/cockroach/pull/19828)

- Fixed a panic in some [`DELETE`](../v1.1/delete.html) statements. [#19830](https://github.com/cockroachdb/cockroach/pull/19830)

- Fixed grouping of [`ANY/SOME/ALL`](../v1.1/sql-grammar.html#sub_type). [#19831](https://github.com/cockroachdb/cockroach/pull/19831)

- Fixed a panic in [`SHOW KV TRACE`](../v1.1/show-trace.html) with `COUNT(*)`. [#19868](https://github.com/cockroachdb/cockroach/pull/19868)

- Fixed a panic involving the use of the `IN` operator and improperly typed subqueries. [#19878](https://github.com/cockroachdb/cockroach/pull/19878)

- Fixed a bug leading to incorrect results for some queries with [`IN`](../v1.1/functions-and-operators.html#operators) constraints. [#20040](https://github.com/cockroachdb/cockroach/pull/20040)

- Fixed the encoding of indexes that use [`STORING`](../v1.1/create-index.html#store-columns) columns. [#20074](https://github.com/cockroachdb/cockroach/pull/20074)

- Fixed a panic when updating [`COLLATE`](../v1.1/collate.html) and [`DECIMAL`](../v1.1/decimal.html) columns. [#20074](https://github.com/cockroachdb/cockroach/pull/20074)

- Avoid overloading the system during cleanup of large [transactions](../v1.1/transactions.html). [#20083](https://github.com/cockroachdb/cockroach/pull/20083)

- Fixed [`PARTITION BY`](../v1.1/sql-grammar.html#opt_partition_clause) multiple columns with [`WINDOW`](../v1.1/window-functions.html) functions. [#20156](https://github.com/cockroachdb/cockroach/pull/20156)

- Fixed a possible crash due to statements finishing execution after the client connection has been closed. [#20183](https://github.com/cockroachdb/cockroach/pull/20183)

- Write [prometheus vars](../v1.1/monitor-cockroachdb-with-prometheus.html) outside the metrics lock. [#20209](https://github.com/cockroachdb/cockroach/pull/20209)

<h3 id="v1.1.3-doc-updates">Doc Updates</h3>

- Improved Kubernetes guidance:
    - Added a tutorial on [orchestrating a secure CockroachDB cluster with Kubernetes](../v1.1/orchestrate-cockroachdb-with-kubernetes.html), improved the tutorial for [insecure orchstrations](../v1.1/orchestrate-cockroachdb-with-kubernetes-insecure.html), and added a [local cluster tutorial using `minikube`](../v1.1/orchestrate-a-local-cluster-with-kubernetes-insecure.html). [#2147](https://github.com/cockroachdb/docs/pull/2147)
    - Updated the StatefulSet configurations to support rolling upgrades, and added [initial documentation](https://github.com/cockroachdb/cockroach/tree/master/cloud/kubernetes#doing-a-rolling-upgrade-to-a-different-cockroachdb-version). [#19995](https://github.com/cockroachdb/cockroach/pull/19995)
- Added a tutorial on CockroachDB's [follow-the-workload](../v1.1/demo-follow-the-workload.html) capability. [#2194](https://github.com/cockroachdb/docs/pull/2194)
- Documented how to [increase the system-wide file descriptors limit on Linux](../v1.1/recommended-production-settings.html#file-descriptors-limit). [#2139](https://github.com/cockroachdb/docs/pull/2139)
- Clarified that multiple transaction options in a single [`SET TRANSACTION`](../v1.1/set-transaction.html#set-isolation-priority) statement can be space-separated as well as comma-separated. [#2139](https://github.com/cockroachdb/docs/pull/2139)
- Added `e'\x` to the list of supported [hexadecimal-encoded byte array literals](../v1.1/sql-constants.html#hexadecimal-encoded-byte-array-literals) formats. [#2134](https://github.com/cockroachdb/docs/pull/2134)
- Clarified the FAQ on [auto-generating unique row IDs](../v1.1/sql-faqs.html#how-do-i-auto-generate-unique-row-ids-in-cockroachdb). [#2128](https://github.com/cockroachdb/docs/pull/2128)
- Corrected the aliases and allowed widths of various [`INT`](../v1.1/int.html) types. [#2116](https://github.com/cockroachdb/docs/pull/2116)
- Corrected the description of the `--host` flag in our insecure [cloud deployment tutorials](../v1.1/manual-deployment.html). [#2117](https://github.com/cockroachdb/docs/pull/2117)
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.1.4-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.4.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.4.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.4.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.1.4-sql-language-changes">SQL Language Changes</h3>

- For compatibility with PostgreSQL, the `transaction isolation level`, `transaction priority`, and `transaction status` [session variables](../v1.1/set-vars.html) have been renamed `transaction_isolation`, `transaction_priority`, and `transaction_status`. [#20301](https://github.com/cockroachdb/cockroach/pull/20301)
- The [`IMPORT`](../v1.1/import.html) statement now supports `201` and `204` return codes from HTTP storage. [#20516](https://github.com/cockroachdb/cockroach/pull/20516)

<h3 id="v1.1.4-command-line-changes">Command-Line Changes</h3>

- Client [`cockroach` commands](../v1.1/cockroach-commands.html) that use SQL (`cockroach sql`, `cockroach node ls`, etc.) now print a warning if the server is running an older version of CockroachDB than the client. Also, this and other warning messages are now clearly indicated with the "warning:" prefix. [#20945](https://github.com/cockroachdb/cockroach/pull/20945)
- The [`cockroach sql`](../v1.1/use-the-built-in-sql-client.html) command no longer fails when the server is running a version of CockroachDB that does not support the `sql_safe_updates` [session variable](../v1.1/set-vars.html#supported-variables). [#20945](https://github.com/cockroachdb/cockroach/pull/20945)
- The [`cockroach sql`](../v1.1/use-the-built-in-sql-client.html) command now performs client-side syntax checking automatically only if the client and server are running the same version of CockroachDB. This restriction will be lifted in CockroachDB v2.0. [#21135](https://github.com/cockroachdb/cockroach/pull/21135)
- Reduced temporary disk space usage for the `debug compact` command. [#20502](https://github.com/cockroachdb/cockroach/pull/20502)

<h3 id="v1.1.4-bug-fixes">Bug Fixes</h3>

- Improved rebalancing to make thrashing back and forth between nodes much less likely, including when [localities](../v1.1/start-a-node.html#locality) have very different numbers of nodes. [#20934](https://github.com/cockroachdb/cockroach/pull/20934)
- Fixed a scenario where a range that is too big to snapshot can lose availability even with a majority of nodes alive. [#20906](https://github.com/cockroachdb/cockroach/pull/20906)
- Fixed a replica corruption that could occur if a process crashed in the middle of a range split. [#20939](https://github.com/cockroachdb/cockroach/pull/20939)
- Fixed an issue where seemingly irrelevant error messages were being returned for certain [`INSERT`](../v1.1/insert.html) statements.[#20855](https://github.com/cockroachdb/cockroach/pull/20855)
- Crash details are now properly copied to the log file even when a node was started with `--logtostderr` as well as in other circumstances when crash details could be lost previously. [#20842](https://github.com/cockroachdb/cockroach/pull/20842)
- Fixed an issue where wildcards (`_`, `%`) and `` escaped characters in `LIKE` patterns were not handled properly. [#20654](https://github.com/cockroachdb/cockroach/pull/20654)
- Fixed the return type signature of the `array_positions()` [built-in function](../v1.1/functions-and-operators.html). This caused a crash if the function was used in query execution by the distributed execution engine. [#20652](https://github.com/cockroachdb/cockroach/pull/20652)
- Fixed a crash caused by null [collated strings](../v1.1/collate.html). [#20648](https://github.com/cockroachdb/cockroach/pull/20648)
- Fixed a crash caused by `NATURAL JOINS` and `USING` in conjunction with a filter. [#20582](https://github.com/cockroachdb/cockroach/pull/20582)
- Fixed build when new versions of `libgtest` are installed. [#20598](https://github.com/cockroachdb/cockroach/pull/20598)
- Fixed a crash caused by an edge-case when queries are run against a table undergoing a schema change. [#20541](https://github.com/cockroachdb/cockroach/pull/20541)
- Fixed a race condition that would result in some queries hanging after [cancellation](../v1.1/cancel-query.html). [#20534](https://github.com/cockroachdb/cockroach/pull/20534)
- Fixed a crash caused by some corner-case queries containing `ORDER BY`. [#20512](https://github.com/cockroachdb/cockroach/pull/20512)
- Prevented generating empty sstables at the [storage layer](../v1.1/architecture/storage-layer.html), which could cause corruption. [#20284](https://github.com/cockroachdb/cockroach/pull/20284)
- Fixed a crash caused by [`cockroach dump`](../v1.1/sql-dump.html) in the presence of reference cycles. [#20283](https://github.com/cockroachdb/cockroach/pull/20283)
- It is no longer possible to use conflicting `AS OF SYSTEM TIME` clauses in different parts of a query. [#20286](https://github.com/cockroachdb/cockroach/pull/20286)
- Improved S3 resiliency during [`BACKUP`](../v1.1/backup.html)/[`RESTORE`](../v1.1/restore.html)/[`IMPORT`](../v1.1/import.html). [#21003](https://github.com/cockroachdb/cockroach/pull/21003)

<h3 id="v1.1.4-performance-improvements">Performance Improvements</h3>

- Improved garbage collection of very large [transactions](../v1.1/transactions.html) and large volumes of abandoned write intents. [#20446](https://github.com/cockroachdb/cockroach/pull/20446)

<h3 id="v1.1.4-enterprise-edition-changes">Enterprise Edition Changes</h3>

- [`BACKUP`](../v1.1/backup.html)/[`RESTORE`](../v1.1/restore.html) jobs now support `201` and `204` return codes from HTTP storage. [#20516](https://github.com/cockroachdb/cockroach/pull/20516)

<h3 id="v1.1.4-doc-updates">Doc Updates</h3>

- Improved the [initial steps for troubleshooting a problem](../v1.1/troubleshooting-overview.html), and added a list of [common errors with recommended solutions](../v1.1/common-errors.html). [#2311](https://github.com/cockroachdb/docs/pull/2311)
- Updated docs styling to increase information density. [#2304](https://github.com/cockroachdb/docs/pull/2304)
- Documented how to [request and set trial and enterprise license keys for CockroachDB](../v1.1/enterprise-licensing.html). [#2278](https://github.com/cockroachdb/docs/pull/2278)
- Fixed the placement of `AS OF SYSTEM TIME` in enterprise [`BACKUP` examples](../v1.1/backup.html#examples). [#2324](https://github.com/cockroachdb/docs/pull/2324)
- Updated the [secure Kubernetes](../v1.1/orchestrate-cockroachdb-with-kubernetes.html) tutorial with RBAC support. [#2281](https://github.com/cockroachdb/docs/pull/2281)
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.1.5-downloads">Downloads</h3>

    <div id="os-tabs" class="clearfix">
        <a href="https://binaries.cockroachdb.com/cockroach-v1.1.5.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
        <a href="https://binaries.cockroachdb.com/cockroach-v1.1.5.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
        <a href="https://binaries.cockroachdb.com/cockroach-v1.1.5.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
    </div>

<h3 id="v1.1.5-general-changes">General Changes</h3>

- Removed error messages from SQL execution statistics included in [diagnostic reporting](../v1.1/diagnostics-reporting.html). [#21827][#21827]

<h3 id="v1.1.5-enterprise-edition-changes">Enterprise Edition Changes</h3>

- When external storage is not accessible, [`RESTORE`](../v1.1/restore.html) jobs no longer loop indefinitely during failure or cancellation. [#21573][#21573]

<h3 id="v1.1.5-bug-fixes">Bug Fixes</h3>

- Errors from DDL statements sent by a client as part of a transaction, but in a different query string than the final commit, are no longer silently swallowed. [#21865][#21865]
- [`DROP INDEX`](../v1.1/drop-index.html) with an unqualified index name (without a specific table name) no longer fails if there are [views](../v1.1/views.html) in the database. [#21857][#21857]
- Fixed tuple equality to evaluate correctly in the presence of `NULL` elements. [#21237][#21237]
- Fixed an issue with the wire-formatting of [`BYTES`](../v1.1/bytes.html) arrays. [#21796][#21796]
- Fixed a stack overflow in the code for shutting down a server when out of disk space. [#21804][#21804]
- Fixed incorrect logic in lease rebalancing that prevented leases from being transferred. [#21442][#21442]

<h3 id="v1.1.5-doc-updates">Doc Updates</h3>

- Added [best practices for optimizing SQL performance](../v1.1/performance-best-practices-overview.html) in CockroachDB. [#2243](https://github.com/cockroachdb/docs/pull/2243)
- Added more detailed [clock synchronization guidance per cloud provider](../v1.1/recommended-production-settings.html#clock-synchronization). [#2295](https://github.com/cockroachdb/docs/pull/2295)
- Added a tutorial on using our Kubernetes-orchestrated AWS CloudFormation template for easy deployment and testing of CockroachDB. [#2356](https://github.com/cockroachdb/docs/pull/2356)
- Improved the styling of code samples and page tocs. [#2323](https://github.com/cockroachdb/docs/pull/2323) [#2371](https://github.com/cockroachdb/docs/pull/2371)

<h3 id="v1.1.5-contributors">Contributors</h3>

This release includes 8 merged PRs by 8 authors.

[#21237]: https://github.com/cockroachdb/cockroach/pull/21237
[#21442]: https://github.com/cockroachdb/cockroach/pull/21442
[#21573]: https://github.com/cockroachdb/cockroach/pull/21573
[#21796]: https://github.com/cockroachdb/cockroach/pull/21796
[#21804]: https://github.com/cockroachdb/cockroach/pull/21804
[#21827]: https://github.com/cockroachdb/cockroach/pull/21827
[#21865]: https://github.com/cockroachdb/cockroach/pull/21865
[#21857]: https://github.com/cockroachdb/cockroach/pull/21857
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

This release includes several bug fixes and stability improvements.

<h3 id="v1.1.6-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.6.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.6.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.6.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.1.6-general-changes">General Changes</h3>

- Disabling [diagnostics reporting](../v1.1/diagnostics-reporting.html) also disables new version notification checks. [#23008][#23008]

<h3 id="v1.1.6-bug-fixes">Bug Fixes</h3>

- Prevented disruptions in performance when gracefully shutting down a node. [#23302][#23302]
- Fixed a zero QPS scenario when gracefully shutting down a node. [#23306][#23306]
- Fixed a panic caused by empty `COCKROACH_UPDATE_CHECK_URL` or `COCKROACH_USAGE_REPORT_URL` environment variables. [#23008][#23008]
- The conversion from [`INTERVAL`](../v1.1/interval.html) to [`FLOAT`](../v1.1/float.html) now properly returns the number of seconds in the interval. [#22893][#22893]
- Fixed a bug that caused queries of virtual tables with an explicit database name prefix (e.g., `select * from mydb.crdb_internal.tables`) to not get scrubbed properly in [diagnostics reporting](../v1.1/diagnostics-reporting.html). [#22815][#22815]
- A `COMMIT` reporting an error generated by a previous parallel statement (i.e., `RETURNING NOTHING`) no longer leaves the connection in an aborted transaction state. Instead, the transaction is considered completed and a `ROLLBACK` is not necessary. [#22814][#22814]
- Fixed an issue with stale buffer data when using the binary format for [`ARRAY`](../v1.1/array.html) values. [#22262][#22262]
- Fixed a bug that caused SQL connection errors during node startup. [#22663][#22663]
- Fixed a bug that included [decommissioned nodes](../v1.1/remove-nodes.html) in cluster stats aggregates. [#22864][#22864]

<h3 id="v1.1.6-contributors">Contributors</h3>

This release includes 12 merged PRs by 11 authors. We would like to thank the following contributors from the CockroachDB community:

- Xudong Zheng

[#22262]: https://github.com/cockroachdb/cockroach/pull/22262
[#22663]: https://github.com/cockroachdb/cockroach/pull/22663
[#22814]: https://github.com/cockroachdb/cockroach/pull/22814
[#22815]: https://github.com/cockroachdb/cockroach/pull/22815
[#22826]: https://github.com/cockroachdb/cockroach/pull/22826
[#22864]: https://github.com/cockroachdb/cockroach/pull/22864
[#22893]: https://github.com/cockroachdb/cockroach/pull/22893
[#23008]: https://github.com/cockroachdb/cockroach/pull/23008
[#23302]: https://github.com/cockroachdb/cockroach/pull/23302
[#23306]: https://github.com/cockroachdb/cockroach/pull/23306
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

This release includes several bug fixes and stability improvements.

<h3 id="v1.1.7-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.7.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.7.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.7.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.1.7-build-changes">Build Changes</h3>

- CockroachDB now builds with go 1.9.4 and higher. [#23639][#23639]

<h3 id="v1.1.7-bug-fixes">Bug Fixes</h3>

- Fixed a deadlock when tables are rapidly [created](../v1.1/create-table.html) or [dropped](../v2.0/drop-table.html). [#23957][#23957]
- Fixed a rare deadlock for transactions performing schema changes and encountering [retryable errors](../v1.1/transactions.html#error-handling). [#23981][#23981]

<h3 id="v1.1.7-contributors">Contributors</h3>

This release includes 3 merged PRs by 2 authors.

[#23639]: https://github.com/cockroachdb/cockroach/pull/23639
[#23957]: https://github.com/cockroachdb/cockroach/pull/23957
[#23981]: https://github.com/cockroachdb/cockroach/pull/23981
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.1.8-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.8.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.8.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.8.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.1.8-bug-fixes">Bug Fixes</h3>

- Fixed potential cluster unavailability after Raft logs grow too large. [#24889][#24889]
- `ALTER INDEX ... RENAME` can now be used on the primary index. [#24779][#24779]
- Fixed "dangling rows" left over by transactions including both a schema change and `ROLLBACK TO SAVEPOINT`. [#24888][#24888]

<h3 id="v1.1.8-contributors">Contributors</h3>

This release includes 6 merged PRs by 4 authors.

[#24324]: https://github.com/cockroachdb/cockroach/pull/24324
[#24779]: https://github.com/cockroachdb/cockroach/pull/24779
[#24888]: https://github.com/cockroachdb/cockroach/pull/24888
[#24889]: https://github.com/cockroachdb/cockroach/pull/24889
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v1.1.9-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.9.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.9.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v1.1.9.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v1.1.9-security-bug-fix">Security bug fix</h3>

- Fixed a vulnerability in which TLS certificates were not validated correctly for internal RPC interfaces. This vulnerability could allow an unauthenticated user with network access to read and write to the cluster. [#30821](https://github.com/cockroachdb/cockroach/issues/30821)

<h3 id="v1.1.9-contributors">Contributors</h3>

This release includes 1 merged PR by 1 author.
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v2.0-alpha.20171218-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0-alpha.20171218.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0-alpha.20171218.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0-alpha.20171218.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.0-alpha.20171218-sql-language-changes">SQL Language Changes</h3>

- Added support for read-only [transactions](../v2.0/transactions.html) via PostgreSQL-compatible syntax. [#20547](https://github.com/cockroachdb/cockroach/pull/20547)
    - `SET SESSION CHARACTERISTICS AS TRANSACTION READ ONLY/READ WRITE`
    - `SET TRANSACTION READ ONLY/READ WRITE`
    - `SET default_transaction_read_only`
    - `SET transaction_read_only`
- For compatibility with PostgreSQL, the return type of the `date_trunc(STRING,TIME)` [function](../v2.0/functions-and-operators.html) was changed from `TIME` to `INTERVAL`, and the return type of the `date_trunc(STRING,DATE)` function was changed from `DATE` to `TIMESTAMPTZ`. [#20467](https://github.com/cockroachdb/cockroach/pull/20467)

<h3 id="v2.0-alpha.20171218-bug-fixes">Bug Fixes</h3>

- Fixed a bug preventing CockroachDB from starting when the filesystem generates a `lost+found` directory in the Cockroach data directory. [#20565](https://github.com/cockroachdb/cockroach/pull/20565)
- Fixed the over-counting of memory usage by aggregations. [#20585](https://github.com/cockroachdb/cockroach/pull/20585)
- Fix a panic when using the `date_trunc(STRING,TIMESTAMP)` or `date_trunc(STRING,DATE)` function during queries that run with the distributed execution engine. [#20467](https://github.com/cockroachdb/cockroach/pull/20467)
- Fixed a bug where the `date_trunc(STRING,TIMESTAMP)` function would return a `TIMESTAMPTZ` value. [#20467](https://github.com/cockroachdb/cockroach/pull/20467)
- Fixed a race condition that would result in some queries hanging after cancellation. [#20088](https://github.com/cockroachdb/cockroach/pull/20088)
- Fixed a bug allowing [privileges](../v2.0/privileges.html) to be granted to non-existent users. [#20438](https://github.com/cockroachdb/cockroach/pull/20438)

<h3 id="v2.0-alpha.20171218-performance-improvements">Performance Improvements</h3>

- Queries that use inequalities using tuples (e.g., `(a,b,c) < (x,y,z)`) are now slightly better optimized. [#20484](https://github.com/cockroachdb/cockroach/pull/20484)
- `IS DISTINCT FROM` and `IS NOT DISTINCT FROM` clauses are now smarter about using available indexes. [#20346](https://github.com/cockroachdb/cockroach/pull/20346)
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

{{site.data.alerts.callout_danger}}A bug that could trigger an assertion failure was discovered in this
release. Bringing up a node too soon after the assertion fired could introduce consistency problems, so this release has been withdrawn.{{site.data.alerts.end}}

<!--
<h3 id="v2.0-alpha.20180116-backwards-incompatible-changes">Backwards-Incompatible Changes</h3>

- Removed the obsolete `kv.gc.batch_size` [cluster setting](../v2.0/cluster-settings.html). [#21070](https://github.com/cockroachdb/cockroach/pull/21070)
- Removed the `COCKROACH_METRICS_SAMPLE_INTERVAL` environment variable. Users that relied on it should reduce the value for the `timeseries.resolution_10s.storage_duration` [cluster setting](../v2.0/cluster-settings.html) instead. [#20810](https://github.com/cockroachdb/cockroach/pull/20810)

<h3 id="v2.0-alpha.20180116-general-changes">General Changes</h3>

- CockroachDB now proactively rebalances data when the diversity of the localities that a given range is located on can be improved. [#19489](https://github.com/cockroachdb/cockroach/pull/19489)
- Clusters are now initialized with default `.meta` and `.liveness` replication zones with lower GC TTL configurations. [#17628](https://github.com/cockroachdb/cockroach/pull/17628)

<h3 id="v2.0-alpha.20180116-sql-language-changes">SQL Language Changes</h3>

- The new `SHOW CREATE SEQUENCE` statement shows the [`CREATE SEQUENCE`](../v2.0/create-sequence.html) statement that would create a carbon copy of the specified sequence. [#21208](https://github.com/cockroachdb/cockroach/pull/21208)
- The [`DROP COLUMN`](../v2.0/drop-column.html) statement now drops [`CHECK`](../v2.0/check.html) constraints. [#21203](https://github.com/cockroachdb/cockroach/pull/21203)
- The `pg_sequence_parameters()` built-in function is now supported. [#21069](https://github.com/cockroachdb/cockroach/pull/21069)
- `ON DELETE CASCADE` foreign key constraints are now fully supported and memory bounded. [#20064](https://github.com/cockroachdb/cockroach/pull/20064) [#20706](https://github.com/cockroachdb/cockroach/pull/20706)
- For improved troubleshooting, more complete and useful details are now reported to clients when SQL errors are encountered. [#19793](https://github.com/cockroachdb/cockroach/pull/19793)
- The new `SHOW SYNTAX` statement allows clients to analyze arbitrary SQL syntax server-side and retrieve either the (pretty-printed) syntax decomposition of the string or the details of the syntax error, if any. This statement is intended for use in the CockroachDB interactive SQL shell. [#19793](https://github.com/cockroachdb/cockroach/pull/19793)
- Enhanced type checking of subqueries in order to generalize subquery support. As a side-effect, fixed a crash with subquery edge cases such as `SELECT (SELECT (1, 2)) IN (SELECT (1, 2))`. [#21076](https://github.com/cockroachdb/cockroach/pull/21076)
- Single-use common table expressions are now supported. [#20359](https://github.com/cockroachdb/cockroach/pull/20359)
- Statement sources with no output columns are now disallowed. [#20998](https://github.com/cockroachdb/cockroach/pull/20998)
- `WHERE` predicates that simplify to NULL no longer performs table scans. [#21067](https://github.com/cockroachdb/cockroach/pull/21067)
- The experimental `CREATE ROLE`, `DROP ROLE`, and `SHOW ROLES` statements are now supported. [#21020](https://github.com/cockroachdb/cockroach/pull/21020)  [#20980](https://github.com/cockroachdb/cockroach/pull/20980)
- Improved the output of `EXPLAIN` to show the plan tree structure. [#20697](https://github.com/cockroachdb/cockroach/pull/20697)
- `OUTER` interleaved joins are now supported. [#20963](https://github.com/cockroachdb/cockroach/pull/20963)
- Added the `rolreplication` and `rolbypassrls` columns to the `pg_catalog.pg_roles` table. [#20397](https://github.com/cockroachdb/cockroach/pull/20397)
- [`ARRAY`](../v2.0/array.html) values can now be cast to their own type. [#19816](https://github.com/cockroachdb/cockroach/pull/19816)
- The `||` operator is now supported for `JSONB`. [#20689](https://github.com/cockroachdb/cockroach/pull/20689)
- The `CASCADE` option is now required to drop an index that is used by Unique constraint. [#20837](https://github.com/cockroachdb/cockroach/pull/20837)
- The `BOOL` type now matches PostgreSQL's list of accepted formats. [#20833](https://github.com/cockroachdb/cockroach/pull/20833)
- The `sql_safe_updates` session variable now defaults to `false` unless the shell is truly interactive (using `cockroach sql`, `-e` not specified, standard input not redirected) and `--unsafe-updates` is not specified. Previously, `sql_safe_updates` would always default to `true` unless `--unsafe-updates` was specified. [#20805](https://github.com/cockroachdb/cockroach/pull/20805)
- The `errexit` client-side option now defaults to `false` only if the shell is truly interactive, not only when the input is not redirected as previously. [#20805](https://github.com/cockroachdb/cockroach/pull/20805)
- The `display_format` client-side option now defaults to `pretty` in every case where the output goes to a terminal, not only when the input is not redirected as previously. [#20805](https://github.com/cockroachdb/cockroach/pull/20805)
- The `check_syntax` and `smart_prompt` client-side options, together with the interactive line editor, are only enabled if the session is interactive and output goes to a terminal. [#20805](https://github.com/cockroachdb/cockroach/pull/20805)
- Table aliases are now permitted in `RETURNING` clauses. [#20808](https://github.com/cockroachdb/cockroach/pull/20808)
- Added the `SERIAL2`, `SERIAL4`, and `SERIAL8` aliases for the [`SERIAL`](../v2.0/serial.html) type. [#20776](https://github.com/cockroachdb/cockroach/pull/20776)
- NULL values are now supported in `COLLATE` expressions. [#20795](https://github.com/cockroachdb/cockroach/pull/20795)
- The new `crdb_internal.node_executable_version()` built-in function simplifies rolling upgrades. [#20292](https://github.com/cockroachdb/cockroach/pull/20292)
- The `json_pretty()`, `json_extract_path()`, `jsonb_extract_path()`, `json_object()`, and `asJSON()` built-in function are now supported. [#20702](https://github.com/cockroachdb/cockroach/pull/20702) [#20520](https://github.com/cockroachdb/cockroach/pull/20520) [#21015](https://github.com/cockroachdb/cockroach/pull/21015) [#20234](https://github.com/cockroachdb/cockroach/pull/20234)
- The `DISTINCT ON` clause is now supported for `SELECT` statements. [#20463](https://github.com/cockroachdb/cockroach/pull/20463)
- For compatibility with PostgreSQL and related tools:
    - Parsing of the `COMMENT ON` syntax is now allowed. [#21063](https://github.com/cockroachdb/cockroach/pull/21063)
    - The following built-in functions are now supported: `pg_catalog.pg_trigger()`, `pg_catalog.pg_rewrite()`, `pg_catalog.pg_operator()`, `pg_catalog.pg_user_mapping()`, `pg_catalog.foreign_data_wrapper()`, `pg_get_constraintdef()`, `inet_client_addr()`, `inet_client_port()`, `inet_server_addr()`, `inet_server_port()`. [#21065](https://github.com/cockroachdb/cockroach/pull/21065) [#20788](https://github.com/cockroachdb/cockroach/pull/20788)
    - Missing columns have been added to `information_schema.columns`, and the `pg_catalog.pg_user()` virtual table has been added. [#20788](https://github.com/cockroachdb/cockroach/pull/20788)
    - A string cast to `regclass` is interpreted as a possibly qualified name like `db.name`. [#20788](https://github.com/cockroachdb/cockroach/pull/20788)
    - Rendered columns for built-in functions are now titled by the name of the built-in function. [#20820](https://github.com/cockroachdb/cockroach/pull/20820)

<h3 id="v2.0-alpha.20180116-command-line-changes">Command-Line Changes</h3>

- Client `cockroach` commands that use SQL (`cockroach sql`, `cockroach node ls`, etc.) now print a warning if the server is running an older version of CockroachDB than the client. Also, this and other warning messages are now clearly indicated with the "warning:" prefix. [#20935](https://github.com/cockroachdb/cockroach/pull/20935)
- Client-side syntax checking performed by [`cockroach sql`](../v2.0/use-the-built-in-sql-client.html) when the `check_syntax` option is enabled has been enhanced for forward-compatibility with later CockroachDB versions. [#21119](https://github.com/cockroachdb/cockroach/pull/21119)
- The `?` [client-side command](../v2.0/use-the-built-in-sql-client.html#sql-shell-commands) of `cockroach sql` now prints out a description of each option. [#21119](https://github.com/cockroachdb/cockroach/pull/21119)
- The `--unsafe-updates` of `cockroach sql` was renamed to `--safe-updates`. The default behavior is unchanged: The previous flag defaulted to `false`; the new flag defaults to `true`. [#20935](https://github.com/cockroachdb/cockroach/pull/20935)
- The `cockroach sql` command no longer fails when the server is running a version of CockroachDB that does not support the sql_safe_updates session variable. [#20935](https://github.com/cockroachdb/cockroach/pull/20935)

<h3 id="v2.0-alpha.20180116-admin-ui-changes">Admin UI Changes</h3>

- Added graphs of node liveness heartbeat latency, an important internal signal of health, to the **Distributed** dashboard. [#21002](https://github.com/cockroachdb/cockroach/pull/21002)
- **Capacity Used** is now shown as "-" instead of 100% when the UI cannot load the real data from the server. [#20824](https://github.com/cockroachdb/cockroach/pull/20824)
- Removed a redundant rendering of the GC pause time from the **CPU Time** graph. [#20802](https://github.com/cockroachdb/cockroach/pull/20802)
- The **Databases** page now reports table sizes that are better approximations to actual disk space usage. [#20627](https://github.com/cockroachdb/cockroach/pull/20627)
- Added a system table to allow operators to designate geographic coordinates for any locality. This is for use with upcoming cluster visualization functionality in the Admin UI. [#19652](https://github.com/cockroachdb/cockroach/pull/19652)

<h3 id="v2.0-alpha.20180116-bug-fixes">Bug Fixes</h3>

- Fixed the `debug compact` command to compact all sstables. [#21293](https://github.com/cockroachdb/cockroach/pull/21293)
- Fixed tuple equality to evaluate correctly in the presence of NULL elements. [#21230](https://github.com/cockroachdb/cockroach/pull/21230)
- Fixed a bug where the temporary directory was being wiped on failed CockroachDB restart, causing importing and DistSQL queries to fail. [#20854](https://github.com/cockroachdb/cockroach/pull/20854)
- The "JSON" column in the output of `EXPLAIN(DISTSQL)` is now properly hidden by default. It can be shown using `SELECT *, JSON FROM [EXPLAIN(DISTSQL) ...]`. [#21154](https://github.com/cockroachdb/cockroach/pull/21154)
- `EXPLAIN` queries with placeholders no longer panic. [#21168](https://github.com/cockroachdb/cockroach/pull/21168)
- The `--safe-updates` flag of `cockroach sql` can now be used effectively in non-interactive sessions. [#20935](https://github.com/cockroachdb/cockroach/pull/20935)
- Fixed a bug where non-matching interleaved rows were being inner-joined with their parent rows. [#20938](https://github.com/cockroachdb/cockroach/pull/20938)
- Fixed an issue where seemingly irrelevant error messages were being returned for certain `INSERT` statements. [#20841](https://github.com/cockroachdb/cockroach/pull/20841)
- Crash details are now properly copied to the log file even when a node was started with `--logtostderr` as well as in other circumstances when crash details could be lost previously. [#20839](https://github.com/cockroachdb/cockroach/pull/20839)
- It is no longer possible to log in as a non-existent user in insecure mode. [#20800](https://github.com/cockroachdb/cockroach/pull/20800)
- The `BIGINT` type alias is now correctly shown when using `SHOW CREATE TABLE`. [#20798](https://github.com/cockroachdb/cockroach/pull/20798)
- Fixed a scenario where a range that is too big to snapshot can lose availability even with a majority of nodes alive. [#20589](https://github.com/cockroachdb/cockroach/pull/20589)
- Fixed `BETWEEN SYMMETRIC`, which was incorrectly considered an alias for `BETWEEN`. Per the SQL99 specification, `BETWEEN SYMMETRIC` is like `BETWEEN`, except that its arguments are automatically swapped if they would specify an empty range. [#20747](https://github.com/cockroachdb/cockroach/pull/20747)
- Fixed a replica corruption that could occur if a process crashed in the middle of a range split. [#20704](https://github.com/cockroachdb/cockroach/pull/20704)
- Fixed an issue with the formatting of unicode values in string arrays. [#20657](https://github.com/cockroachdb/cockroach/pull/20657)
- Fixed detection and proper handling of certain variations of network partitions using server-side RPC keepalive in addition to client-side RPC keepalive. [#20707](https://github.com/cockroachdb/cockroach/pull/20707)
- Prevented RPC connections between nodes with incompatible versions. [#20587](https://github.com/cockroachdb/cockroach/pull/20587)
- Dangling intents are now eagerly cleaned up when `AmbiguousResultErrors` are seen. [#20628](https://github.com/cockroachdb/cockroach/pull/20628)
- Fixed the return type signature of the JSON `#>>` operator and `array_positions()` built-in function. [#20524](https://github.com/cockroachdb/cockroach/pull/20524)
- Fixed an issue where escaped characters like `A` and `\` in `LIKE`/`ILIKE` patterns were not handled properly. [#20600](https://github.com/cockroachdb/cockroach/pull/20600)
- Fixed an issue with `(NOT) (I)LIKE` pattern matching on `_...%` and `%..._` returning incorrect results. [#20600](https://github.com/cockroachdb/cockroach/pull/20600)
- Fixed a small spelling bug that made it such that a `DOUBLE PRECISION` specified type would erroneously display as a float. [#20727](https://github.com/cockroachdb/cockroach/pull/20727)
- Fixed a crash caused by null collated strings. [#20637](https://github.com/cockroachdb/cockroach/pull/20637)

<h3 id="v2.0-alpha.20180116-performance-improvements">Performance Improvements</h3>

- Improved the efficiency of scans with joins and certain complex `WHERE` clauses containing tuple equality. [#21288](https://github.com/cockroachdb/cockroach/pull/21288)
- Improved the efficiency scans for certain `WHERE` clauses. [#21217](https://github.com/cockroachdb/cockroach/pull/21217)
- Reduced per-row overhead in distsql query execution. [#21251](https://github.com/cockroachdb/cockroach/pull/21251)
- Added support for distributed execution of [`UNION`](../v2.0/set-operations.html#union-combine-two-queries) queries. [#21175](https://github.com/cockroachdb/cockroach/pull/21175)
- Improved performance for aggregation and distinct operations by arena allocating "bucket" storage. [#21160](https://github.com/cockroachdb/cockroach/pull/21160)
- Distributed execution of `UNION ALL` queries is now supported. [#20742](https://github.com/cockroachdb/cockroach/pull/20742)
- Reduced the fixed overhead of commands sent through Raft by 40% by only sending lease sequence numbers instead of sending the entire lease structure. [#20953](https://github.com/cockroachdb/cockroach/pull/20953)
- When tables are dropped, the space is now reclaimed in a more timely fashion. [#20607](https://github.com/cockroachdb/cockroach/pull/20607)
- Increased speed of except and merge joins by avoiding an unnecessary allocation. [#20759](https://github.com/cockroachdb/cockroach/pull/20759)
- Improved rebalancing to make thrashing back and forth between nodes much less likely, including when localities have very different numbers of nodes. [#20709](https://github.com/cockroachdb/cockroach/pull/20709)
- Improved performance of `DISTINCT` queries by avoiding an unnecessary allocation. [#20755](https://github.com/cockroachdb/cockroach/pull/20755) [#20750](https://github.com/cockroachdb/cockroach/pull/20750)
- Significantly improved the efficiency of `DROP TABLE` and `TRUNCATE`. [#20601](https://github.com/cockroachdb/cockroach/pull/20601)
- Improved performance of low-level row manipulation routines. [#20688](https://github.com/cockroachdb/cockroach/pull/20688)
- Raft followers now write to their disks in parallel with the leader. [#19229](https://github.com/cockroachdb/cockroach/pull/19229)
- Significantly reduced the overhead of SQL memory accounting. [#20590](https://github.com/cockroachdb/cockroach/pull/20590)
- Equality joins on the entire interleave prefix between parent and (not necessarily direct) child interleaved tables are now faster. [#19853](https://github.com/cockroachdb/cockroach/pull/19853)

<h3 id="v2.0-alpha.20180116-doc-updates">Doc Updates</h3>

- Added a tutorial on using our Kubernetes-orchestrated AWS CloudFormation template for easy deployment and testing of CockroachDB. [#2356](https://github.com/cockroachdb/docs/pull/2356)
- Added docs on the [`TIME`](../v2.0/time.html) data type. [#2336](https://github.com/cockroachdb/docs/pull/2336)
- Added guidance on [reducing or disabling the storage of timeseries data](../v2.0/operational-faqs.html#can-i-reduce-or-disable-the-storage-of-timeseries-data-new-in-v2-0). [#2361](https://github.com/cockroachdb/docs/pull/2361)
- Added docs on the [`CREATE SEQUENCE`](../v2.0/create-sequence.html), [`ALTER SEQUENCE`](../v2.0/alter-sequence.html), and [`DROP SEQUENCE`](../v2.0/drop-sequence.html) statements. [#2292](https://github.com/cockroachdb/docs/pull/2292)
- Improved the font and coloring of code samples. [#2323](https://github.com/cockroachdb/docs/pull/2323)
-->
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

{{site.data.alerts.callout_danger}}A bug that could trigger range splits in a tight loop was discovered in this release, so this release has been withdrawn.{{site.data.alerts.end}}

<h3 id="v2.0-alpha.20180122-backwards-incompatible-changes">Backwards-Incompatible Changes</h3>

- Removed the obsolete `kv.gc.batch_size` [cluster setting](../v2.0/cluster-settings.html). [#21070](https://github.com/cockroachdb/cockroach/pull/21070)
- Removed the `COCKROACH_METRICS_SAMPLE_INTERVAL` environment variable. Users that relied on it should reduce the value for the `timeseries.resolution_10s.storage_duration` [cluster setting](../v2.0/cluster-settings.html) instead. [#20810](https://github.com/cockroachdb/cockroach/pull/20810)

<h3 id="v2.0-alpha.20180122-general-changes">General Changes</h3>

- CockroachDB now proactively rebalances data when the diversity of the localities that a given range is located on can be improved. [#19489](https://github.com/cockroachdb/cockroach/pull/19489)
- Clusters are now initialized with default `.meta` and `.liveness` replication zones with lower GC TTL configurations. [#17628](https://github.com/cockroachdb/cockroach/pull/17628)
- CockroachDB now uses gRPC version 1.9.1 [#21398]

<h3 id="v2.0-alpha.20180122-build-changes">Build Changes</h3>

- The build system now enforces a minimum version of Go, rather than enforcing a specific version of Go. Since the Go 1.x series has strict backward-compatibility guarantees, the old rule was unnecessarily restrictive. [#21426]

<h3 id="v2.0-alpha.20180122-sql-language-changes">SQL Language Changes</h3>

- The new `SHOW CREATE SEQUENCE` statement shows the [`CREATE SEQUENCE`](../v2.0/create-sequence.html) statement that would create a carbon copy of the specified sequence. [#21208](https://github.com/cockroachdb/cockroach/pull/21208)
- The [`DROP COLUMN`](../v2.0/drop-column.html) statement now drops [`CHECK`](../v2.0/check.html) constraints. [#21203](https://github.com/cockroachdb/cockroach/pull/21203)
- The `pg_sequence_parameters()` built-in function is now supported. [#21069](https://github.com/cockroachdb/cockroach/pull/21069)
- `ON DELETE CASCADE` foreign key constraints are now fully supported and memory bounded. [#20064](https://github.com/cockroachdb/cockroach/pull/20064) [#20706](https://github.com/cockroachdb/cockroach/pull/20706)
- `ON UPDATE CASCADE` foreign key constraints are now fully supported [#21329]
- For improved troubleshooting, more complete and useful details are now reported to clients when SQL errors are encountered. [#19793](https://github.com/cockroachdb/cockroach/pull/19793)
- The new `SHOW SYNTAX` statement allows clients to analyze arbitrary SQL syntax server-side and retrieve either the (pretty-printed) syntax decomposition of the string or the details of the syntax error, if any. This statement is intended for use in the CockroachDB interactive SQL shell. [#19793](https://github.com/cockroachdb/cockroach/pull/19793)
- Enhanced type checking of subqueries in order to generalize subquery support. As a side-effect, fixed a crash with subquery edge cases such as `SELECT (SELECT (1, 2)) IN (SELECT (1, 2))`. [#21076](https://github.com/cockroachdb/cockroach/pull/21076)
- Single-use common table expressions are now supported. [#20359](https://github.com/cockroachdb/cockroach/pull/20359)
- Statement sources with no output columns are now disallowed. [#20998](https://github.com/cockroachdb/cockroach/pull/20998)
- `WHERE` predicates that simplify to `NULL` no longer performs table scans. [#21067](https://github.com/cockroachdb/cockroach/pull/21067)
- The experimental `CREATE ROLE`, `DROP ROLE`, `SHOW ROLES`, `GRANT <role>`, and `REVOKE <role>` statements are now supported as part of [role-based access
control](https://github.com/cockroachdb/cockroach/blob/master/docs/RFCS/20171220_sql_role_based_access_control.md). [#21020](https://github.com/cockroachdb/cockroach/pull/21020)  [#20980](https://github.com/cockroachdb/cockroach/pull/20980) [#21341]
- Improved the output of `EXPLAIN` to show the plan tree structure. [#20697](https://github.com/cockroachdb/cockroach/pull/20697)
- `OUTER` interleaved joins are now supported. [#20963](https://github.com/cockroachdb/cockroach/pull/20963)
- Added the `rolreplication` and `rolbypassrls` columns to the `pg_catalog.pg_roles` table. [#20397](https://github.com/cockroachdb/cockroach/pull/20397)
- [`ARRAY`](../v2.0/array.html) values can now be cast to their own type. [#19816](https://github.com/cockroachdb/cockroach/pull/19816)
- The `||` operator is now supported for `JSONB`. [#20689](https://github.com/cockroachdb/cockroach/pull/20689)
- The `CASCADE` option is now required to drop an index that is used by Unique constraint. [#20837](https://github.com/cockroachdb/cockroach/pull/20837)
- The `BOOL` type now matches PostgreSQL's list of accepted formats. [#20833](https://github.com/cockroachdb/cockroach/pull/20833)
- The `sql_safe_updates` session variable now defaults to `false` unless the shell is truly interactive (using `cockroach sql`, `-e` not specified, standard input not redirected) and `--unsafe-updates` is not specified. Previously, `sql_safe_updates` would always default to `true` unless `--unsafe-updates` was specified. [#20805](https://github.com/cockroachdb/cockroach/pull/20805)
- The `errexit` client-side option now defaults to `false` only if the shell is truly interactive, not only when the input is not redirected as previously. [#20805](https://github.com/cockroachdb/cockroach/pull/20805)
- The `display_format` client-side option now defaults to `pretty` in every case where the output goes to a terminal, not only when the input is not redirected as previously. [#20805](https://github.com/cockroachdb/cockroach/pull/20805)
- The `check_syntax` and `smart_prompt` client-side options, together with the interactive line editor, are only enabled if the session is interactive and output goes to a terminal. [#20805](https://github.com/cockroachdb/cockroach/pull/20805)
- Table aliases are now permitted in `RETURNING` clauses. [#20808](https://github.com/cockroachdb/cockroach/pull/20808)
- Added the `SERIAL2`, `SERIAL4`, and `SERIAL8` aliases for the [`SERIAL`](../v2.0/serial.html) type. [#20776](https://github.com/cockroachdb/cockroach/pull/20776)
- `NULL` values are now supported in `COLLATE` expressions. [#20795](https://github.com/cockroachdb/cockroach/pull/20795)
- The new `crdb_internal.node_executable_version()` built-in function simplifies rolling upgrades. [#20292](https://github.com/cockroachdb/cockroach/pull/20292)
- The `json_pretty()`, `json_extract_path()`, `jsonb_extract_path()`, `json_object()`, `asJSON()`, `jsonb_set()`, `json_build_object()`, `json_strip_nulls()`, and `json_each{_text}()` built-in functions are now supported. [#20702](https://github.com/cockroachdb/cockroach/pull/20702) [#20520](https://github.com/cockroachdb/cockroach/pull/20520) [#21015](https://github.com/cockroachdb/cockroach/pull/21015) [#20234](https://github.com/cockroachdb/cockroach/pull/20234) [#21010] [#21019] [#21335] [#21044]
- The `DISTINCT ON` clause is now supported for `SELECT` statements. [#20463](https://github.com/cockroachdb/cockroach/pull/20463)
- The output of [`EXPLAIN`](../v2.0/explain.html) is now enhanced when applied to statements containing scalar sub-queries. [#21305]
- The `array_agg()` built-in function is now supported in distributed queries. [#21475]
- Removed the limit on transaction keys. There was formerly a limit of 100,000 keys. [#21078]
- Improved the error message when a column reference is ambiguous. [#21361]
- The new `SHOW EXPERIMENTAL_REPLICA TRACE` statement executes a query and returns which nodes served reads and writes. [#21349]
- Multiplication between [`INTERVAL`](../v2.0/interval.html) and [`FLOAT`](../v2.0/float.html) values, and between `INTERVAL` and [`DECIMAL`](../v2.0/decimal.html) values, is now fully supported. [#21292]
- Reduced the size of entries stored in the `system.rangelog` table by not storing empty JSON fields. [#21318]
- The `ALTER TABLE SCATTER` statement now randomizes the locations of the leases for all ranges in the referenced table or index. [#21431]
- When using HTTPS storage for [`IMPORT`](../v2.0/import.html), a custom CA for HTTPS storage providers can now be specified via the `cloudstorage.http.custom_ca` cluster setting. This is also used when accessing custom s3 export storage endpoints. [#21358] [#21404]
- Storage of timeseries data within the cluster can be disabled by setting the new `timeseries.storage.enabled` cluster setting to false. This is recommended only if you exclusively use a third-party tool such as Prometheus for timeseries monitoring. See this [FAQ](../v2.0/operational-faqs.html#can-i-reduce-or-disable-the-storage-of-timeseries-data-new-in-v2-0) for more details. [#21314]
- For compatibility with PostgreSQL and related tools:
    - Parsing of the `COMMENT ON` syntax is now allowed. [#21063](https://github.com/cockroachdb/cockroach/pull/21063)
    - The following built-in functions are now supported: `pg_catalog.pg_trigger()`, `pg_catalog.pg_rewrite()`, `pg_catalog.pg_operator()`, `pg_catalog.pg_user_mapping()`, `pg_catalog.foreign_data_wrapper()`, `pg_get_constraintdef()`, `inet_client_addr()`, `inet_client_port()`, `inet_server_addr()`, `inet_server_port()`. [#21065](https://github.com/cockroachdb/cockroach/pull/21065) [#20788](https://github.com/cockroachdb/cockroach/pull/20788)
    - Missing columns have been added to `information_schema.columns`, and the `pg_catalog.pg_user()` virtual table has been added. [#20788](https://github.com/cockroachdb/cockroach/pull/20788)
    - A string cast to `regclass` is interpreted as a possibly qualified name like `db.name`. [#20788](https://github.com/cockroachdb/cockroach/pull/20788)
    - Rendered columns for built-in functions are now titled by the name of the built-in function. [#20820](https://github.com/cockroachdb/cockroach/pull/20820)

<h3 id="v2.0-alpha.20180122-command-line-changes">Command-Line Changes</h3>

- Client `cockroach` commands that use SQL (`cockroach sql`, `cockroach node ls`, etc.) now print a warning if the server is running an older version of CockroachDB than the client. Also, this and other warning messages are now clearly indicated with the "warning:" prefix. [#20935](https://github.com/cockroachdb/cockroach/pull/20935)
- Client-side syntax checking performed by [`cockroach sql`](../v2.0/use-the-built-in-sql-client.html) when the `check_syntax` option is enabled has been enhanced for forward-compatibility with later CockroachDB versions. [#21119](https://github.com/cockroachdb/cockroach/pull/21119)
- The `?` [client-side command](../v2.0/use-the-built-in-sql-client.html#sql-shell-commands) of `cockroach sql` now prints out a description of each option. [#21119](https://github.com/cockroachdb/cockroach/pull/21119)
- The `--unsafe-updates` of `cockroach sql` was renamed to `--safe-updates`. The default behavior is unchanged: The previous flag defaulted to `false`; the new flag defaults to `true`. [#20935](https://github.com/cockroachdb/cockroach/pull/20935)
- The `cockroach sql` command no longer fails when the server is running a version of CockroachDB that does not support the sql_safe_updates session variable. [#20935](https://github.com/cockroachdb/cockroach/pull/20935)

<h3 id="v2.0-alpha.20180122-admin-ui-changes">Admin UI Changes</h3>

- Added graphs of node liveness heartbeat latency, an important internal signal of health, to the **Distributed** dashboard. [#21002](https://github.com/cockroachdb/cockroach/pull/21002)
- **Capacity Used** is now shown as "-" instead of 100% when the UI cannot load the real data from the server. [#20824](https://github.com/cockroachdb/cockroach/pull/20824)
- Removed a redundant rendering of the GC pause time from the **CPU Time** graph. [#20802](https://github.com/cockroachdb/cockroach/pull/20802)
- The **Databases** page now reports table sizes that are better approximations to actual disk space usage. [#20627](https://github.com/cockroachdb/cockroach/pull/20627)
- Added a system table to allow operators to designate geographic coordinates for any locality. This is for use with upcoming cluster visualization functionality in the Admin UI. [#19652](https://github.com/cockroachdb/cockroach/pull/19652)
- When a new version of CockroachDB is available, the Admin UI now links you to the documentation explaining how to upgrade your cluster. [#19718]
- Job descriptions are now expandable. [#21333]

<h3 id="v2.0-alpha.20180122-bug-fixes">Bug Fixes</h3>

- Fixed the `debug compact` command to compact all sstables. [#21293](https://github.com/cockroachdb/cockroach/pull/21293)
- Fixed tuple equality to evaluate correctly in the presence of `NULL` elements. [#21230](https://github.com/cockroachdb/cockroach/pull/21230)
- Fixed a bug where the temporary directory was being wiped on failed CockroachDB restart, causing importing and DistSQL queries to fail. [#20854](https://github.com/cockroachdb/cockroach/pull/20854)
- The "JSON" column in the output of `EXPLAIN(DISTSQL)` is now properly hidden by default. It can be shown using `SELECT *, JSON FROM [EXPLAIN(DISTSQL) ...]`. [#21154](https://github.com/cockroachdb/cockroach/pull/21154)
- `EXPLAIN` queries with placeholders no longer panic. [#21168](https://github.com/cockroachdb/cockroach/pull/21168)
- The `--safe-updates` flag of `cockroach sql` can now be used effectively in non-interactive sessions. [#20935](https://github.com/cockroachdb/cockroach/pull/20935)
- Fixed a bug where non-matching interleaved rows were being inner-joined with their parent rows. [#20938](https://github.com/cockroachdb/cockroach/pull/20938)
- Fixed an issue where seemingly irrelevant error messages were being returned for certain `INSERT` statements. [#20841](https://github.com/cockroachdb/cockroach/pull/20841)
- Crash details are now properly copied to the log file even when a node was started with `--logtostderr` as well as in other circumstances when crash details could be lost previously. [#20839](https://github.com/cockroachdb/cockroach/pull/20839)
- It is no longer possible to log in as a non-existent user in insecure mode. [#20800](https://github.com/cockroachdb/cockroach/pull/20800)
- The `BIGINT` type alias is now correctly shown when using `SHOW CREATE TABLE`. [#20798](https://github.com/cockroachdb/cockroach/pull/20798)
- Fixed a scenario where a range that is too big to snapshot can lose availability even with a majority of nodes alive. [#20589](https://github.com/cockroachdb/cockroach/pull/20589)
- Fixed `BETWEEN SYMMETRIC`, which was incorrectly considered an alias for `BETWEEN`. Per the SQL99 specification, `BETWEEN SYMMETRIC` is like `BETWEEN`, except that its arguments are automatically swapped if they would specify an empty range. [#20747](https://github.com/cockroachdb/cockroach/pull/20747)
- Fixed a replica corruption that could occur if a process crashed in the middle of a range split. [#20704](https://github.com/cockroachdb/cockroach/pull/20704)
- Fixed an issue with the formatting of unicode values in string arrays. [#20657](https://github.com/cockroachdb/cockroach/pull/20657)
- Fixed detection and proper handling of certain variations of network partitions using server-side RPC keepalive in addition to client-side RPC keepalive. [#20707](https://github.com/cockroachdb/cockroach/pull/20707)
- Prevented RPC connections between nodes with incompatible versions. [#20587](https://github.com/cockroachdb/cockroach/pull/20587)
- Dangling intents are now eagerly cleaned up when `AmbiguousResultErrors` are seen. [#20628](https://github.com/cockroachdb/cockroach/pull/20628)
- Fixed the return type signature of the JSON `#>>` operator and `array_positions()` built-in function. [#20524](https://github.com/cockroachdb/cockroach/pull/20524)
- Fixed an issue where escaped characters like `A` and `\` in `LIKE`/`ILIKE` patterns were not handled properly. [#20600](https://github.com/cockroachdb/cockroach/pull/20600)
- Fixed an issue with `(NOT) (I)LIKE` pattern matching on `_...%` and `%..._` returning incorrect results. [#20600](https://github.com/cockroachdb/cockroach/pull/20600)
- Fixed a small spelling bug that made it such that a `DOUBLE PRECISION` specified type would erroneously display as a float. [#20727](https://github.com/cockroachdb/cockroach/pull/20727)
- Fixed a crash caused by null collated strings. [#20637](https://github.com/cockroachdb/cockroach/pull/20637)
- Fixed a problem that could cause spurious garbage collection activity, in particular after dropping a table. [#21407]
- Fixed incorrect logic in lease rebalancing that prevented leases from being transferred [#21430]
- `INSERT`/`UPDATE`/`DELETE ... RETURNING` statements used with the "statement data source" syntax (e.g., `SELECT * FROM  [INSERT INTO ... RETURNING ...]`) no longer ever commit the transaction, causing errors for the higher-level query. [#20847]
- Fixed a crash caused by a column being backfilled in an index constraint. [#21308]
- Fixed a bug in which ranges could get stuck if the uncommitted raft log grew too large [#21356]
- The `setval()` built-in function no longer lets you set a value outside the `MAXVALUE`/`MINVALUE` of a [`SEQUENCE`](../v2.0/create-sequence.html). [#20973]

<h3 id="v2.0-alpha.20180122-performance-improvements">Performance Improvements</h3>

- Improved the efficiency of scans with joins and certain complex `WHERE` clauses containing tuple equality. [#21288](https://github.com/cockroachdb/cockroach/pull/21288)
- Improved the efficiency scans for certain `WHERE` clauses. [#21217](https://github.com/cockroachdb/cockroach/pull/21217)
- Reduced per-row overhead in distsql query execution. [#21251](https://github.com/cockroachdb/cockroach/pull/21251)
- Added support for distributed execution of [`UNION`](../v2.0/selection-queries.html#union-combine-two-queries) queries. [#21175](https://github.com/cockroachdb/cockroach/pull/21175)
- Improved performance for aggregation and distinct operations by arena allocating "bucket" storage. [#21160](https://github.com/cockroachdb/cockroach/pull/21160)
- Distributed execution of `UNION ALL` queries is now supported. [#20742](https://github.com/cockroachdb/cockroach/pull/20742)
- Reduced the fixed overhead of commands sent through Raft by 40% by only sending lease sequence numbers instead of sending the entire lease structure. [#20953](https://github.com/cockroachdb/cockroach/pull/20953)
- When tables are dropped, the space is now reclaimed in a more timely fashion. [#20607](https://github.com/cockroachdb/cockroach/pull/20607)
- Increased speed of except and merge joins by avoiding an unnecessary allocation. [#20759](https://github.com/cockroachdb/cockroach/pull/20759)
- Improved rebalancing to make thrashing back and forth between nodes much less likely, including when localities have very different numbers of nodes. [#20709](https://github.com/cockroachdb/cockroach/pull/20709)
- Improved performance of `DISTINCT` queries by avoiding an unnecessary allocation. [#20755](https://github.com/cockroachdb/cockroach/pull/20755) [#20750](https://github.com/cockroachdb/cockroach/pull/20750)
- Significantly improved the efficiency of `DROP TABLE` and `TRUNCATE`. [#20601](https://github.com/cockroachdb/cockroach/pull/20601)
- Improved performance of low-level row manipulation routines. [#20688](https://github.com/cockroachdb/cockroach/pull/20688)
- Raft followers now write to their disks in parallel with the leader. [#19229](https://github.com/cockroachdb/cockroach/pull/19229)
- Significantly reduced the overhead of SQL memory accounting. [#20590](https://github.com/cockroachdb/cockroach/pull/20590)
- Equality joins on the entire interleave prefix between parent and (not necessarily direct) child interleaved tables are now faster. [#19853](https://github.com/cockroachdb/cockroach/pull/19853)
- Improved the performance of scans that need to look at non-indexed columns. [#21459]
- Improved the performance of all scans that encounter a large number of versions per key, and the low-level reverse scan throughput by up almost 4x when there are a few versions per key.. [#21438]
- Queries on tables with many columns are now more efficient. [#21450]
- Queries that only need to read part of a table with many columns are now more efficient. [#21450]
- Improved low-level scan performance by 15-20% by disabling redundant checksums. [#21395]
- Re-implemented low-level scan operations in C++, doubling performance for scans of contiguous keys/rows. [#21395]
- Reduced the occurrence of ambiguous errors when a node is down. [#21376]
- Sped up distsql query execution by "fusing" processors executing on the same node together. [#21254]

<h3 id="v2.0-alpha.20180122-enterprise-edition-changes">Enterprise Edition Changes</h3>

- [Incremental backups](../v2.0/backup.html#incremental-backups) of a database after a table or index was added is now supported.[#21170]
- When using HTTPS storage for [`BACKUP`](../v2.0/backup.html) or [`RESTORE`](../v2.0/restore.html), a custom CA for HTTPS storage providers can now be specified via the `cloudstorage.http.custom_ca` cluster setting. This is also used when accessing custom s3 export storage endpoints. [#21358] [#21404]
- Bulk writes are now synced to disk periodically to ensure more predictable performance. [#20449]

<h3 id="v2.0-alpha.20180122-doc-updates">Doc Updates</h3>

- Added [best practices for optimizing SQL performance](../v2.0/performance-best-practices-overview.html) in CockroachDB. [#2243](https://github.com/cockroachdb/docs/pull/2243)
- Added more detailed [clock synchronization guidance per cloud provider](../v2.0/recommended-production-settings.html#clock-synchronization). [#2295](https://github.com/cockroachdb/docs/pull/2295)
- Added a tutorial on using our Kubernetes-orchestrated AWS CloudFormation template for easy deployment and testing of CockroachDB. [#2356](https://github.com/cockroachdb/docs/pull/2356)
- Added docs on the [`TIME`](../v2.0/time.html) data type. [#2336](https://github.com/cockroachdb/docs/pull/2336)
- Added guidance on [reducing or disabling the storage of timeseries data](../v2.0/operational-faqs.html#can-i-reduce-or-disable-the-storage-of-timeseries-data-new-in-v2-0). [#2361](https://github.com/cockroachdb/docs/pull/2361)
- Added docs on the [`CREATE SEQUENCE`](../v2.0/create-sequence.html), [`ALTER SEQUENCE`](../v2.0/alter-sequence.html), and [`DROP SEQUENCE`](../v2.0/drop-sequence.html) statements. [#2292](https://github.com/cockroachdb/docs/pull/2292)
- Various improvements to the docs on the [`IMPORT`](../v2.0/import.html), [`BACKUP`](../v2.0/backup.html), and [`RESTORE`](../v2.0/restore.html) statements. [#2340](https://github.com/cockroachdb/docs/pull/2340)
- Improved the styling of code samples and page tocs. [#2323](https://github.com/cockroachdb/docs/pull/2323) [#2371](https://github.com/cockroachdb/docs/pull/2371)

<h3 id="v2.0-alpha.20180122-contributors">Contributors</h3>

This release includes 111 merged PRs by 33 authors. We would like to thank the following contributors from the CockroachDB community:

- Yang Yuting
- Dmitry Saveliev
- Jincheng Li
- Mohamed Elqdusy
- 何羿宏
- louishust

[#19718]: https://github.com/cockroachdb/cockroach/pull/19718
[#20449]: https://github.com/cockroachdb/cockroach/pull/20449
[#20632]: https://github.com/cockroachdb/cockroach/pull/20632
[#20645]: https://github.com/cockroachdb/cockroach/pull/20645
[#20710]: https://github.com/cockroachdb/cockroach/pull/20710
[#20721]: https://github.com/cockroachdb/cockroach/pull/20721
[#20735]: https://github.com/cockroachdb/cockroach/pull/20735
[#20825]: https://github.com/cockroachdb/cockroach/pull/20825
[#20847]: https://github.com/cockroachdb/cockroach/pull/20847
[#20950]: https://github.com/cockroachdb/cockroach/pull/20950
[#20971]: https://github.com/cockroachdb/cockroach/pull/20971
[#20972]: https://github.com/cockroachdb/cockroach/pull/20972
[#20973]: https://github.com/cockroachdb/cockroach/pull/20973
[#20976]: https://github.com/cockroachdb/cockroach/pull/20976
[#21010]: https://github.com/cockroachdb/cockroach/pull/21010
[#21019]: https://github.com/cockroachdb/cockroach/pull/21019
[#21044]: https://github.com/cockroachdb/cockroach/pull/21044
[#21078]: https://github.com/cockroachdb/cockroach/pull/21078
[#21118]: https://github.com/cockroachdb/cockroach/pull/21118
[#21120]: https://github.com/cockroachdb/cockroach/pull/21120
[#21170]: https://github.com/cockroachdb/cockroach/pull/21170
[#21177]: https://github.com/cockroachdb/cockroach/pull/21177
[#21180]: https://github.com/cockroachdb/cockroach/pull/21180
[#21254]: https://github.com/cockroachdb/cockroach/pull/21254
[#21263]: https://github.com/cockroachdb/cockroach/pull/21263
[#21267]: https://github.com/cockroachdb/cockroach/pull/21267
[#21268]: https://github.com/cockroachdb/cockroach/pull/21268
[#21272]: https://github.com/cockroachdb/cockroach/pull/21272
[#21274]: https://github.com/cockroachdb/cockroach/pull/21274
[#21275]: https://github.com/cockroachdb/cockroach/pull/21275
[#21279]: https://github.com/cockroachdb/cockroach/pull/21279
[#21280]: https://github.com/cockroachdb/cockroach/pull/21280
[#21292]: https://github.com/cockroachdb/cockroach/pull/21292
[#21297]: https://github.com/cockroachdb/cockroach/pull/21297
[#21299]: https://github.com/cockroachdb/cockroach/pull/21299
[#21305]: https://github.com/cockroachdb/cockroach/pull/21305
[#21307]: https://github.com/cockroachdb/cockroach/pull/21307
[#21308]: https://github.com/cockroachdb/cockroach/pull/21308
[#21312]: https://github.com/cockroachdb/cockroach/pull/21312
[#21313]: https://github.com/cockroachdb/cockroach/pull/21313
[#21314]: https://github.com/cockroachdb/cockroach/pull/21314
[#21315]: https://github.com/cockroachdb/cockroach/pull/21315
[#21317]: https://github.com/cockroachdb/cockroach/pull/21317
[#21318]: https://github.com/cockroachdb/cockroach/pull/21318
[#21319]: https://github.com/cockroachdb/cockroach/pull/21319
[#21322]: https://github.com/cockroachdb/cockroach/pull/21322
[#21325]: https://github.com/cockroachdb/cockroach/pull/21325
[#21328]: https://github.com/cockroachdb/cockroach/pull/21328
[#21329]: https://github.com/cockroachdb/cockroach/pull/21329
[#21330]: https://github.com/cockroachdb/cockroach/pull/21330
[#21333]: https://github.com/cockroachdb/cockroach/pull/21333
[#21335]: https://github.com/cockroachdb/cockroach/pull/21335
[#21336]: https://github.com/cockroachdb/cockroach/pull/21336
[#21339]: https://github.com/cockroachdb/cockroach/pull/21339
[#21341]: https://github.com/cockroachdb/cockroach/pull/21341
[#21344]: https://github.com/cockroachdb/cockroach/pull/21344
[#21346]: https://github.com/cockroachdb/cockroach/pull/21346
[#21347]: https://github.com/cockroachdb/cockroach/pull/21347
[#21349]: https://github.com/cockroachdb/cockroach/pull/21349
[#21352]: https://github.com/cockroachdb/cockroach/pull/21352
[#21353]: https://github.com/cockroachdb/cockroach/pull/21353
[#21356]: https://github.com/cockroachdb/cockroach/pull/21356
[#21358]: https://github.com/cockroachdb/cockroach/pull/21358
[#21359]: https://github.com/cockroachdb/cockroach/pull/21359
[#21361]: https://github.com/cockroachdb/cockroach/pull/21361
[#21365]: https://github.com/cockroachdb/cockroach/pull/21365
[#21366]: https://github.com/cockroachdb/cockroach/pull/21366
[#21368]: https://github.com/cockroachdb/cockroach/pull/21368
[#21370]: https://github.com/cockroachdb/cockroach/pull/21370
[#21374]: https://github.com/cockroachdb/cockroach/pull/21374
[#21375]: https://github.com/cockroachdb/cockroach/pull/21375
[#21376]: https://github.com/cockroachdb/cockroach/pull/21376
[#21377]: https://github.com/cockroachdb/cockroach/pull/21377
[#21379]: https://github.com/cockroachdb/cockroach/pull/21379
[#21380]: https://github.com/cockroachdb/cockroach/pull/21380
[#21381]: https://github.com/cockroachdb/cockroach/pull/21381
[#21382]: https://github.com/cockroachdb/cockroach/pull/21382
[#21388]: https://github.com/cockroachdb/cockroach/pull/21388
[#21389]: https://github.com/cockroachdb/cockroach/pull/21389
[#21391]: https://github.com/cockroachdb/cockroach/pull/21391
[#21392]: https://github.com/cockroachdb/cockroach/pull/21392
[#21393]: https://github.com/cockroachdb/cockroach/pull/21393
[#21395]: https://github.com/cockroachdb/cockroach/pull/21395
[#21397]: https://github.com/cockroachdb/cockroach/pull/21397
[#21398]: https://github.com/cockroachdb/cockroach/pull/21398
[#21401]: https://github.com/cockroachdb/cockroach/pull/21401
[#21403]: https://github.com/cockroachdb/cockroach/pull/21403
[#21404]: https://github.com/cockroachdb/cockroach/pull/21404
[#21405]: https://github.com/cockroachdb/cockroach/pull/21405
[#21407]: https://github.com/cockroachdb/cockroach/pull/21407
[#21422]: https://github.com/cockroachdb/cockroach/pull/21422
[#21426]: https://github.com/cockroachdb/cockroach/pull/21426
[#21427]: https://github.com/cockroachdb/cockroach/pull/21427
[#21428]: https://github.com/cockroachdb/cockroach/pull/21428
[#21430]: https://github.com/cockroachdb/cockroach/pull/21430
[#21431]: https://github.com/cockroachdb/cockroach/pull/21431
[#21436]: https://github.com/cockroachdb/cockroach/pull/21436
[#21438]: https://github.com/cockroachdb/cockroach/pull/21438
[#21439]: https://github.com/cockroachdb/cockroach/pull/21439
[#21441]: https://github.com/cockroachdb/cockroach/pull/21441
[#21448]: https://github.com/cockroachdb/cockroach/pull/21448
[#21449]: https://github.com/cockroachdb/cockroach/pull/21449
[#21450]: https://github.com/cockroachdb/cockroach/pull/21450
[#21457]: https://github.com/cockroachdb/cockroach/pull/21457
[#21459]: https://github.com/cockroachdb/cockroach/pull/21459
[#21466]: https://github.com/cockroachdb/cockroach/pull/21466
[#21469]: https://github.com/cockroachdb/cockroach/pull/21469
[#21472]: https://github.com/cockroachdb/cockroach/pull/21472
[#21475]: https://github.com/cockroachdb/cockroach/pull/21475
[#21484]: https://github.com/cockroachdb/cockroach/pull/21484
[#21493]: https://github.com/cockroachdb/cockroach/pull/21493
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v2.0-alpha.20180129-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0-alpha.20180129.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0-alpha.20180129.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0-alpha.20180129.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.0-alpha.20180129-general-changes">General Changes</h3>

- CockroachDB now uses gRPC version 1.9.2 [#21600][#21600]

<h3 id="v2.0-alpha.20180129-enterprise-changes">Enterprise Changes</h3>

- Failed [`RESTORE`](../v2.0/restore.html) cleanup no longer causes the [`RESTORE`](../v2.0/restore.html) job to perpetually loop if external storage fails or is removed. [#21559][#21559]
- Non-transactional [`BACKUP`](../v2.0/backup.html) and [`RESTORE`](../v2.0/restore.html) statements are now disallowed inside transactions. [#21488][#21488]

<h3 id="v2.0-alpha.20180129-sql-language-changes">SQL Language Changes</h3>

- Reduced the size of `system.rangelog` entries to save disk space. [#21410][#21410]
- Prevented adding both a cascading referential constraint action and a check constraint to a column. [#21690][#21690]
- Added `json_array_length` function that returns the number of elements in the outermost `JSON` or `JSONB` array. [#21611][#21611]
- Added `referential_constraints` table to the [`information_schema`](../v2.0/information-schema.html). The `referential_constraints` table contains all foreign key constraints in the current database. [#21615][#21615]
- Replaced `BOOL` columns in the [`information_schema`](../v2.0/information-schema.html) with `STRING` columns to conform to the SQL specification. [#21612][#21612]
- Added support for inverted indexes for `JSON`. [#20941][#20941]
- [`DROP SEQUENCE`](../v2.0/drop-sequence.html) cannot drop a `SEQUENCE` that is currently in use. [#21364][#21364]
- The [`IMPORT`](../v2.0/import.html) function now does not require the `temp` directory and no longer creates a `RESTORE` job. Additionally, the `TRANSFORM_ONLY` option for [`IMPORT`](../v2.0/import.html) has been renamed to `TRANSFORM` and now takes an argument specifying the target directory. [#21490][#21490]

<h3 id="v2.0-alpha.20180129-command-line-changes">Command-Line Changes</h3>

- `cockroach start --background` now returns earlier for nodes awaiting the `cockroach init` command, facilitating use of automated scripts. [#21682][#21682]
- Command-line utilities that print results with the `pretty` format now use consistent horizontal alignment for every row of the result. [#18491][#18491]

<h3 id="v2.0-alpha.20180129-admin-ui-changes">Admin UI Changes</h3>

- The **Command Queue** debug page now displays errors correctly. [#21529][#21529]
- The **Problem Ranges** debug page now displays all problem ranges for the cluster. [#21522][#21522]

<h3 id="v2.0-alpha.20180129-bug-fixes">Bug Fixes</h3>

- Fixed a crash caused by `NULL` placeholder in comparison expressions. [#21705][#21705]
- The [`EXPLAIN (VERBOSE)`](../v2.0/explain.html#verbose-option) output now correctly shows the columns and properties of each query node (instead of incorrectly showing the columns and properties of the `root`). [#21527][#21527]
- Added a mechanism to recompute range stats automatically over time to reflect changes in the underlying logic. [#21345][#21345]

<h3 id="v2.0-alpha.20180129-performance-improvements">Performance Improvements</h3>

- Multiple ranges can now split at the same time, improving our ability to handle hotspot workloads. [#21673][#21673]
- Improved performance for queries that do not read any columns from the key component of the row. [#21571][#21571]
- Improved performance of scans by reducing efforts for non-required columns. [#21572][#21572]
- Improved efficiency of the key decoding operation. [#21498][#21498]
- Sped up the performance of low-level delete operations. [#21507][#21507]
- Prevented the jobs table from growing excessively large during jobs table updates. [#21575][#21575]

<h3 id="v2.0-alpha.20180129-contributors">Contributors</h3>

This release includes 110 merged PRs by 31 authors. We would like to thank the following contributors from the CockroachDB community:

- Constantine Peresypkin
- 何羿宏

Special thanks to first-time contributors Andrew Kimball, Nathaniel Stewart, Constantine Peresypkin and Paul Bardea.

[#18491]: https://github.com/cockroachdb/cockroach/pull/18491
[#19618]: https://github.com/cockroachdb/cockroach/pull/19618
[#20215]: https://github.com/cockroachdb/cockroach/pull/20215
[#20915]: https://github.com/cockroachdb/cockroach/pull/20915
[#20941]: https://github.com/cockroachdb/cockroach/pull/20941
[#21132]: https://github.com/cockroachdb/cockroach/pull/21132
[#21345]: https://github.com/cockroachdb/cockroach/pull/21345
[#21363]: https://github.com/cockroachdb/cockroach/pull/21363
[#21364]: https://github.com/cockroachdb/cockroach/pull/21364
[#21373]: https://github.com/cockroachdb/cockroach/pull/21373
[#21386]: https://github.com/cockroachdb/cockroach/pull/21386
[#21387]: https://github.com/cockroachdb/cockroach/pull/21387
[#21408]: https://github.com/cockroachdb/cockroach/pull/21408
[#21410]: https://github.com/cockroachdb/cockroach/pull/21410
[#21411]: https://github.com/cockroachdb/cockroach/pull/21411
[#21418]: https://github.com/cockroachdb/cockroach/pull/21418
[#21447]: https://github.com/cockroachdb/cockroach/pull/21447
[#21473]: https://github.com/cockroachdb/cockroach/pull/21473
[#21478]: https://github.com/cockroachdb/cockroach/pull/21478
[#21479]: https://github.com/cockroachdb/cockroach/pull/21479
[#21481]: https://github.com/cockroachdb/cockroach/pull/21481
[#21486]: https://github.com/cockroachdb/cockroach/pull/21486
[#21488]: https://github.com/cockroachdb/cockroach/pull/21488
[#21490]: https://github.com/cockroachdb/cockroach/pull/21490
[#21491]: https://github.com/cockroachdb/cockroach/pull/21491
[#21497]: https://github.com/cockroachdb/cockroach/pull/21497
[#21498]: https://github.com/cockroachdb/cockroach/pull/21498
[#21505]: https://github.com/cockroachdb/cockroach/pull/21505
[#21507]: https://github.com/cockroachdb/cockroach/pull/21507
[#21508]: https://github.com/cockroachdb/cockroach/pull/21508
[#21511]: https://github.com/cockroachdb/cockroach/pull/21511
[#21512]: https://github.com/cockroachdb/cockroach/pull/21512
[#21513]: https://github.com/cockroachdb/cockroach/pull/21513
[#21515]: https://github.com/cockroachdb/cockroach/pull/21515
[#21517]: https://github.com/cockroachdb/cockroach/pull/21517
[#21519]: https://github.com/cockroachdb/cockroach/pull/21519
[#21520]: https://github.com/cockroachdb/cockroach/pull/21520
[#21521]: https://github.com/cockroachdb/cockroach/pull/21521
[#21522]: https://github.com/cockroachdb/cockroach/pull/21522
[#21524]: https://github.com/cockroachdb/cockroach/pull/21524
[#21527]: https://github.com/cockroachdb/cockroach/pull/21527
[#21529]: https://github.com/cockroachdb/cockroach/pull/21529
[#21532]: https://github.com/cockroachdb/cockroach/pull/21532
[#21533]: https://github.com/cockroachdb/cockroach/pull/21533
[#21534]: https://github.com/cockroachdb/cockroach/pull/21534
[#21540]: https://github.com/cockroachdb/cockroach/pull/21540
[#21541]: https://github.com/cockroachdb/cockroach/pull/21541
[#21542]: https://github.com/cockroachdb/cockroach/pull/21542
[#21546]: https://github.com/cockroachdb/cockroach/pull/21546
[#21547]: https://github.com/cockroachdb/cockroach/pull/21547
[#21549]: https://github.com/cockroachdb/cockroach/pull/21549
[#21550]: https://github.com/cockroachdb/cockroach/pull/21550
[#21553]: https://github.com/cockroachdb/cockroach/pull/21553
[#21554]: https://github.com/cockroachdb/cockroach/pull/21554
[#21555]: https://github.com/cockroachdb/cockroach/pull/21555
[#21556]: https://github.com/cockroachdb/cockroach/pull/21556
[#21557]: https://github.com/cockroachdb/cockroach/pull/21557
[#21559]: https://github.com/cockroachdb/cockroach/pull/21559
[#21562]: https://github.com/cockroachdb/cockroach/pull/21562
[#21567]: https://github.com/cockroachdb/cockroach/pull/21567
[#21568]: https://github.com/cockroachdb/cockroach/pull/21568
[#21571]: https://github.com/cockroachdb/cockroach/pull/21571
[#21572]: https://github.com/cockroachdb/cockroach/pull/21572
[#21575]: https://github.com/cockroachdb/cockroach/pull/21575
[#21579]: https://github.com/cockroachdb/cockroach/pull/21579
[#21582]: https://github.com/cockroachdb/cockroach/pull/21582
[#21585]: https://github.com/cockroachdb/cockroach/pull/21585
[#21587]: https://github.com/cockroachdb/cockroach/pull/21587
[#21588]: https://github.com/cockroachdb/cockroach/pull/21588
[#21591]: https://github.com/cockroachdb/cockroach/pull/21591
[#21596]: https://github.com/cockroachdb/cockroach/pull/21596
[#21600]: https://github.com/cockroachdb/cockroach/pull/21600
[#21603]: https://github.com/cockroachdb/cockroach/pull/21603
[#21606]: https://github.com/cockroachdb/cockroach/pull/21606
[#21607]: https://github.com/cockroachdb/cockroach/pull/21607
[#21610]: https://github.com/cockroachdb/cockroach/pull/21610
[#21611]: https://github.com/cockroachdb/cockroach/pull/21611
[#21612]: https://github.com/cockroachdb/cockroach/pull/21612
[#21614]: https://github.com/cockroachdb/cockroach/pull/21614
[#21615]: https://github.com/cockroachdb/cockroach/pull/21615
[#21626]: https://github.com/cockroachdb/cockroach/pull/21626
[#21631]: https://github.com/cockroachdb/cockroach/pull/21631
[#21633]: https://github.com/cockroachdb/cockroach/pull/21633
[#21636]: https://github.com/cockroachdb/cockroach/pull/21636
[#21644]: https://github.com/cockroachdb/cockroach/pull/21644
[#21645]: https://github.com/cockroachdb/cockroach/pull/21645
[#21650]: https://github.com/cockroachdb/cockroach/pull/21650
[#21652]: https://github.com/cockroachdb/cockroach/pull/21652
[#21656]: https://github.com/cockroachdb/cockroach/pull/21656
[#21658]: https://github.com/cockroachdb/cockroach/pull/21658
[#21662]: https://github.com/cockroachdb/cockroach/pull/21662
[#21666]: https://github.com/cockroachdb/cockroach/pull/21666
[#21667]: https://github.com/cockroachdb/cockroach/pull/21667
[#21668]: https://github.com/cockroachdb/cockroach/pull/21668
[#21670]: https://github.com/cockroachdb/cockroach/pull/21670
[#21673]: https://github.com/cockroachdb/cockroach/pull/21673
[#21676]: https://github.com/cockroachdb/cockroach/pull/21676
[#21677]: https://github.com/cockroachdb/cockroach/pull/21677
[#21678]: https://github.com/cockroachdb/cockroach/pull/21678
[#21679]: https://github.com/cockroachdb/cockroach/pull/21679
[#21682]: https://github.com/cockroachdb/cockroach/pull/21682
[#21685]: https://github.com/cockroachdb/cockroach/pull/21685
[#21690]: https://github.com/cockroachdb/cockroach/pull/21690
[#21691]: https://github.com/cockroachdb/cockroach/pull/21691
[#21698]: https://github.com/cockroachdb/cockroach/pull/21698
[#21705]: https://github.com/cockroachdb/cockroach/pull/21705
[#21708]: https://github.com/cockroachdb/cockroach/pull/21708
[#21714]: https://github.com/cockroachdb/cockroach/pull/21714
[#21720]: https://github.com/cockroachdb/cockroach/pull/21720
[#21721]: https://github.com/cockroachdb/cockroach/pull/21721
[2f402e234]: https://github.com/cockroachdb/cockroach/commit/2f402e234
[d2e5fd351]: https://github.com/cockroachdb/cockroach/commit/d2e5fd351
[187f8e662]: https://github.com/cockroachdb/cockroach/commit/187f8e662
[559fcffe7]: https://github.com/cockroachdb/cockroach/commit/559fcffe7
[f8cb074e2]: https://github.com/cockroachdb/cockroach/commit/f8cb074e2
[0cde4dcdb]: https://github.com/cockroachdb/cockroach/commit/0cde4dcdb
[2d4883c12]: https://github.com/cockroachdb/cockroach/commit/2d4883c12
[7b6e775b9]: https://github.com/cockroachdb/cockroach/commit/7b6e775b9
[b74ce84bc]: https://github.com/cockroachdb/cockroach/commit/b74ce84bc
[7ee5c635b]: https://github.com/cockroachdb/cockroach/commit/7ee5c635b
[9e25aeb8a]: https://github.com/cockroachdb/cockroach/commit/9e25aeb8a
[900291e48]: https://github.com/cockroachdb/cockroach/commit/900291e48
[33d1f2749]: https://github.com/cockroachdb/cockroach/commit/33d1f2749
[4f33f0239]: https://github.com/cockroachdb/cockroach/commit/4f33f0239
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

{{site.data.alerts.callout_danger}}A bug that could cause transactional anomalies was introduced in this release, so this release has been withdrawn.{{site.data.alerts.end}}

<h3 id="v2.0-alpha.20180212-enterprise-edition-changes">Enterprise Edition Changes</h3>

- [Sequences](../v2.0/create-sequence.html) are now supported in enterprise [`BACKUP`](../v2.0/backup.html)/[`RESTORE`](../v2.0/restore.html) jobs.

    This changes how sequences are stored in the key-value storage layer, so existing sequences must be dropped and recreated. Since a sequence cannot be dropped while it is being used in a column's `DEFAULT` expression, those expressions must be dropped before the sequence is dropped, and recreated after the sequence is recreated. The `setval` function can be used to set the value of a sequence to what it was previously. [#21684][#21684]

<h3 id="v2.0-alpha.20180212-sql-language-changes">SQL Language Changes</h3>

- Casts between [array types](../v2.0/array.html) are now allowed when a cast between the parameter types is allowed. [#22338][#22338]
- Scalar functions can now be used in `FROM` clauses. [#22314][#22314]
- Added privilege checks on [sequences](../v2.0/create-sequence.html). [#22284][#22284]
- The `ON DELETE SET DEFAULT`, `ON UPDATE SET DEFAULT`, `ON DELETE SET NULL`, and `ON UPDATE SET NULL` foreign key constraint actions are now fully supported. [#22220][#22220] [#21767][#21767] [#21716][#21716]
- JSON inverted indexes can now be specified in a [`CREATE TABLE`](../v2.0/create-table.html) statement. [#22217][#22217]
- When a node is gracefully shut down, planning queries are avoided and distributed queries are allowed the amount of time specified by the new `server.drain_max_wait` [cluster setting](../v2.0/cluster-settings.html) before the node is drained and stopped. [#20450][#20450]
- [Collated string](../v2.0/collate.html) are now supported in [IMPORT](../v2.0/import.html) jobs. [#21859][#21859]
- The new `SHOW GRANTS ON ROLE` statement and `pg_catalog.pg_auth_members` table lists role memberships. [#22205][#22205] [#21780][#21780]
- Role memberships are now considered in permission checks. [#21820][#21820]

<h3 id="v2.0-alpha.20180212-command-line-changes">Command-Line Changes</h3>

- [Debug commands](../v2.0/debug-zip.html) now open RocksDB in read-only mode. This makes them faster and able to run in parallel. [#21778][#21778]
- The [`cockroach dump`](../v2.0/sql-dump.html) command now outputs `CREATE SEQUENCE` statements before the `CREATE TABLE` statements that use them. [#21774][#21774]
- For better compatibility with `psql`'s extended format, the table formatter `records` now properly indicates line continuations in multi-line rows. [#22325][#22325]
- The [`cockroach sql`](../v2.0/use-the-built-in-sql-client.html) client-side option `show_times` is now always enabled when output goes to a terminal, not just when `display_format` is set to `pretty`. [#22326][#22326]
- When formatting `cockroach sql` results with `--format=sql`, the row count is now printed in a SQL comment at the end. [#22327][#22327]
- When formatting `cockroach sql` results with `--format=csv` or `--format=tsv`, result rows that contain special characters are now quoted properly. [#19306][#19306]

<h3 id="v2.0-alpha.20180212-admin-ui-changes">Admin UI Changes</h3>

- Added an icon to indicate when descriptions in the **Jobs** table are shortened and expandable. [#22221][#22221]
- Added "compaction queue" graphs to the **Queues** dashboard. [#22218][#22218]
- Added Raft snapshot queue metrics to the **Queue** dashboard. [#22210][#22210]
- When there are dead nodes, they are now show before live nodes on the **Nodes List** page. [#22222][#22222]
- Links to documentation in the Admin UI now point to the docs for v2.0. [#21894][#21894]

<h3 id="v2.0-alpha.20180212-bug-fixes">Bug Fixes</h3>

- Errors from DDL statements sent by a client as part of a transaction, but in a different query string than the final commit, are no longer silently swallowed. [#21829][#21829]
- Fixed a bug in cascading foreign key actions. [#21799][#21799]
- Tabular results where the column labels contain newline characters are now rendered properly. [#19306][#19306]
- Fixed a bug that prevented long descriptions in the Admin UI **Jobs** table from being collapsed after being expanding. [#22221][#22221]
- Fixed a bug that prevented using `SHOW GRANTS` with a grantee but no targets. [#21864][#21864]
- Fixed a panic with certain queries involving the `REGCLASS` type. [#22310][#22310]
- Fixed the behavior and types of the `encode()` and `decode()` functions. [#22230][#22230]
- Fixed a bug that prevented passing the same tuple for `FROM` and `TO` in `ALTER TABLE ... SCATTER`. [#21830][#21830]
- Fixed a regression that caused certain queries using `LIKE` or `SIMILAR TO` with an indexed column to be slow. [#21842][#21842]
- Fixed a stack overflow in the code for shutting down a server when out of disk space [#21768][#21768]
- Fixed Windows release builds. [#21793][#21793]
- Fixed an issue with the wire-formatting of `BYTES` arrays. [#21712][#21712]
- Fixed a bug that could lead to a node crashing and needing to be reinitialized. [#21771][#21771]
- When a database is created, dropped, or renamed, the SQL session is blocked until the effects of the operation are visible to future queries in that session. [#21900][#21900]
- Fixed a bug where healthy nodes could appear as "Suspect" in the Admin UI if the web browser's local clock was skewed. [#22237][#22237]

<h3 id="v2.0-alpha.20180212-performance-improvements">Performance Improvements</h3>

- Significantly reduced the likelihood of serializable restarts seen by clients due to concurrent workloads. [#21140][#21140]
- Reduced disruption from nodes recovering from network partitions. [#22316][#22316]
- Improved the performance of scans by copying less data in memory. [#22309][#22309]
- Slightly improved the performance of low-level scan operations. [#22244][#22244]
- When a range grows too large, writes are now be backpressured until the range is successfully able to split. This prevents unbounded range growth and improves a clusters ability to stay healthy under hotspot workloads. [#21777][#21777]
- The `information_schema` and `pg_catalog` databases are now faster to query. [#21609][#21609]
- Reduced the write amplification of Raft replication. [#20647][#20647]

<h3 id="v2.0-alpha.20180212-doc-updates">Doc Updates</h3>

- Added [cloud-specific hardware recommendations](../v2.0/recommended-production-settings.html#cloud-specific-recommendations). [#2312](https://github.com/cockroachdb/docs/pull/2312)
- Added a [detailed listing of SQL standard features with CockroachDB's level of support](../v2.0/sql-feature-support.html). [#2442](https://github.com/cockroachdb/docs/pull/2442)
- Added docs on the [`INET`](../v2.0/inet.html) data type. [#2439](https://github.com/cockroachdb/docs/pull/2439)
- Added docs on the [`SHOW CREATE SEQUENCE`](../v2.0/show-create-sequence.html) statement. [#2406](https://github.com/cockroachdb/docs/pull/2406)

<h3 id="v2.0-alpha.20180212-contributors">Contributors</h3>

This release includes 133 merged PRs by 28 authors. We would like to thank the contributors from the CockroachDB community, especially first-time contributor pocockn.

[#19306]: https://github.com/cockroachdb/cockroach/pull/19306
[#20290]: https://github.com/cockroachdb/cockroach/pull/20290
[#20450]: https://github.com/cockroachdb/cockroach/pull/20450
[#20647]: https://github.com/cockroachdb/cockroach/pull/20647
[#21140]: https://github.com/cockroachdb/cockroach/pull/21140
[#21609]: https://github.com/cockroachdb/cockroach/pull/21609
[#21684]: https://github.com/cockroachdb/cockroach/pull/21684
[#21712]: https://github.com/cockroachdb/cockroach/pull/21712
[#21716]: https://github.com/cockroachdb/cockroach/pull/21716
[#21754]: https://github.com/cockroachdb/cockroach/pull/21754
[#21767]: https://github.com/cockroachdb/cockroach/pull/21767
[#21768]: https://github.com/cockroachdb/cockroach/pull/21768
[#21771]: https://github.com/cockroachdb/cockroach/pull/21771
[#21774]: https://github.com/cockroachdb/cockroach/pull/21774
[#21777]: https://github.com/cockroachdb/cockroach/pull/21777
[#21778]: https://github.com/cockroachdb/cockroach/pull/21778
[#21780]: https://github.com/cockroachdb/cockroach/pull/21780
[#21793]: https://github.com/cockroachdb/cockroach/pull/21793
[#21799]: https://github.com/cockroachdb/cockroach/pull/21799
[#21816]: https://github.com/cockroachdb/cockroach/pull/21816
[#21820]: https://github.com/cockroachdb/cockroach/pull/21820
[#21829]: https://github.com/cockroachdb/cockroach/pull/21829
[#21830]: https://github.com/cockroachdb/cockroach/pull/21830
[#21842]: https://github.com/cockroachdb/cockroach/pull/21842
[#21847]: https://github.com/cockroachdb/cockroach/pull/21847
[#21859]: https://github.com/cockroachdb/cockroach/pull/21859
[#21864]: https://github.com/cockroachdb/cockroach/pull/21864
[#21894]: https://github.com/cockroachdb/cockroach/pull/21894
[#21900]: https://github.com/cockroachdb/cockroach/pull/21900
[#22205]: https://github.com/cockroachdb/cockroach/pull/22205
[#22210]: https://github.com/cockroachdb/cockroach/pull/22210
[#22217]: https://github.com/cockroachdb/cockroach/pull/22217
[#22218]: https://github.com/cockroachdb/cockroach/pull/22218
[#22220]: https://github.com/cockroachdb/cockroach/pull/22220
[#22221]: https://github.com/cockroachdb/cockroach/pull/22221
[#22222]: https://github.com/cockroachdb/cockroach/pull/22222
[#22230]: https://github.com/cockroachdb/cockroach/pull/22230
[#22237]: https://github.com/cockroachdb/cockroach/pull/22237
[#22244]: https://github.com/cockroachdb/cockroach/pull/22244
[#22245]: https://github.com/cockroachdb/cockroach/pull/22245
[#22278]: https://github.com/cockroachdb/cockroach/pull/22278
[#22284]: https://github.com/cockroachdb/cockroach/pull/22284
[#22309]: https://github.com/cockroachdb/cockroach/pull/22309
[#22310]: https://github.com/cockroachdb/cockroach/pull/22310
[#22314]: https://github.com/cockroachdb/cockroach/pull/22314
[#22316]: https://github.com/cockroachdb/cockroach/pull/22316
[#22319]: https://github.com/cockroachdb/cockroach/pull/22319
[#22325]: https://github.com/cockroachdb/cockroach/pull/22325
[#22326]: https://github.com/cockroachdb/cockroach/pull/22326
[#22327]: https://github.com/cockroachdb/cockroach/pull/22327
[#22338]: https://github.com/cockroachdb/cockroach/pull/22338
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

This week's release includes:

 - Improved support for large delete statements.
 - Reduced disruption during upgrades and restarts.
 - Reduced occurrence of serializable transaction restarts.

{{site.data.alerts.callout_danger}}This release has a bug that may result in incorrect results for certain queries using <code>JOIN</code> and <code>ORDER BY</code>. This bug will be fixed in next week's beta.{{site.data.alerts.end}}

<h3 id="v2.0-beta.20180305-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0-beta.20180305.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0-beta.20180305.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0-beta.20180305.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.0-beta.20180305-backwards-incompatible-changes">Backwards-Incompatible Changes</h3>

- [Sequences](../v2.0/create-sequence.html) are now supported in enterprise [`BACKUP`](../v2.0/backup.html)/[`RESTORE`](../v2.0/restore.html) jobs.

    This changes how sequences are stored in the key-value storage layer, so existing sequences must be dropped and recreated. Since a sequence cannot be dropped while it is being used in a column's [`DEFAULT`](../v2.0/default-value.html) expression, those expressions must be dropped before the sequence is dropped, and recreated after the sequence is recreated. The `setval()` function can be used to set the value of a sequence to what it was previously. [#21684][#21684]

- Positive [constraints in replication zone configs](../v2.0/configure-replication-zones.html#replication-constraints) no longer work. Any existing positive constraints will be ignored. This change should not impact existing deployments since positive constraints have not been documented or supported for some time. [#22906][#22906]

<h3 id="v2.0-beta.20180305-build-changes">Build Changes</h3>

- CockroachDB now builds with go 1.9.4 and higher. [#22608][#22608]

<h3 id="v2.0-beta.20180305-general-changes">General Changes</h3>

- [Diagnostics reports](../v2.0/diagnostics-reporting.html) now include information about changed settings and statistics on types of errors encountered during SQL execution. [#22705][#22705], [#22693][#22693], [#22948][#22948]

<h3 id="v2.0-beta.20180305-enterprise-edition-changes">Enterprise Edition Changes</h3>

- Revision history [`BACKUP`](../v2.0/backup.html)/[`RESTORE`](../v2.0/restore.html) is no longer considered experimental. [#22679][#22679]
- Revision history [`BACKUP`](../v2.0/backup.html)/[`RESTORE`](../v2.0/restore.html) now handles schema changes. [#21717][#21717]
- CockroachDB now checks that a backup actually contains the requested restore time. [#22659][#22659]
- Improved [`BACKUP`](../v2.0/backup.html)'s handling of tables after [`TRUNCATE`](../v2.0/truncate.html). [#21895][#21895]
- Ensured that only the backups created by the same cluster can be used in incremental backups. [#22474][#22474]
- Avoided extra internal copying of files during [`RESTORE`](../v2.0/restore.html). [#22281][#22281]
- Added a geographical map to the homepage of the Admin UI enterprise version, showing the location of nodes and localities in the cluster. The map is annotated with several top-level metrics: storage capacity used, queries per second, and current CPU usage, as well as the liveness status of nodes in the cluster. [#22763][#22763]

<h3 id="v2.0-beta.20180305-sql-language-changes">SQL Language Changes</h3>

- The type determined for constant `NULL` expressions is renamed to `unknown` for better compatibility with PostgreSQL. [#23150][#23150]
- Deleting multiple rows at once now consumes less memory. [#23013][#23013]
- Attempts to modify virtual schemas with DDL statements now fail with a clearer error message. [#23041][#23041]
- The new `SHOW SCHEMAS` statement reveals which are the valid virtual schemas next to the physical schema `public`. [#23041][#23041]
- CockroachDB now recognizes the special syntax `SET SCHEMA <name>` as an alias for `SET search_path = <name>` for better compatibility with PostgreSQL. [#23041][#23041]
- `current_role()` and `current_catalog()` are supported as aliases for the `current_user()` and `current_database()` [built-in functions](../v2.0/functions-and-operators.html) for better compatibility with PostgreSQL. [#23041][#23041]
- CockroachDB now returns the correct error code for division by zero. [#22948][#22948]
- The GC of table data after a [`DROP TABLE`](../v2.0/drop-table.html) statement now respects changes to the GC TTL interval specified in the zone config [#22903][#22903]
- The full names of tables/view/sequences are now properly logged in the system event log. [#22848][#22848]
- CockroachDB now recognizes the syntax `db.public.tbl` in addition to `db.tbl` for better compatibility with PostgreSQL. The handling of the session variable `search_path`, as well as that of the built-in functions `current_schemas()` and `current_schema()`, is now closer to that of PostgreSQL. Thus `SHOW TABLES FROM` can now inspect the tables of a specific schema (for example, `SHOW TABLES FROM db.public` or `SHOW TABLES FROM db.pg_catalog`). `SHOW GRANTS` also shows the schema of the databases and tables. [#22753][#22753]
- Users can now configure auditing per table and per access mode with `ALTER TABLE`. [#22534][#22534]
- SQL execution logs enabled by the [cluster setting](../v2.0/cluster-settings.html) `sql.trace.log_statement_execute` now go to a separate log file. This is an experimental feature meant to aid troubleshooting CockroachDB. [#22534][#22534]
- Added the `string_to_array()` [built-in function](../v2.0/functions-and-operators.html). [#22391][#22391]
- Added the `constraint_column_usage` table and roles-related tables to the [`information_schema`](../v2.0/information-schema.html) database. [#22323][#22323] [#22242][#22242]
- [`IMPORT`](../v2.0/import.html) no longer requires the experimental setting. [#22531][#22531]
- Computed columns and `CHECK` constraints now correctly report column names in the case of a type error. [#22500][#22500]
- The output of [`JSON`](../v2.0/jsonb.html) data now matches that of PostgreSQL. [#22393][#22393]
- Allowed [`IMPORT`](../v2.0/import.html) jobs to be paused. `IMPORT` jobs now correctly resume instead of being abandoned if the coordinator goes down. [#22291][#22291]
- Removed the `into_db` option in [`IMPORT`](../v2.0/import.html). The database is now specified as part of the table name. [#21813][#21813]
- Changed computed column syntax and improved related error messages. [#22429][#22429]
- Implemented additional [`INET`](../v2.0/inet.html) column type operators such as `contains` and `contained by`, binary operations, and addition/subtraction.
- Implemented the following operators for [`INET`](../v2.0/inet.html) column types: `<<`, `<<=`, `>>`, `>>=`, `&&`, `+`, `-`, `^`, `|`, `&`.  These operators are compatible with PostgreSQL 10 and are described in Table: 9.36 of the PostgreSQL documentation. [#21437][#21437]
- CockroachDB now properly rejects incorrectly-cased SQL function names with an error. [#22365][#22365]
- Allowed [`DEFAULT`](../v2.0/default-value.html) expressions in the `CREATE TABLE` of an [`IMPORT`](../v2.0/import.html) CSV. The expressions are not evaluated (data in the CSV is still required to be present). This change only allows them to be part of the table definition. [#22307][#22307]
- Added the `#-` [operator](../v2.0/functions-and-operators.html) for `JSON`. [#22375][#22375]
- The `SET transaction_isolation` statement is now supported for better PostgreSQL compatibility. [#22389][#22389]
- Allowed creation of computed columns. [#21823][#21823]
- Avoided extra internal copying of files during [`IMPORT`](../v2.0/import.html). [#22281][#22281]
- Casts between [array types](../v2.0/array.html) are now allowed when a cast between the parameter types is allowed. [#22338][#22338]
- Scalar functions can now be used in `FROM` clauses. [#22314][#22314]
- Added privilege checks on [sequences](../v2.0/create-sequence.html). [#22284][#22284]
- The `ON DELETE SET DEFAULT`, `ON UPDATE SET DEFAULT`, `ON DELETE SET NULL`, and `ON UPDATE SET NULL` [foreign key constraint actions](../v2.0/foreign-key.html#foreign-key-actions-new-in-v2-0) are now fully supported. [#22220][#22220] [#21767][#21767] [#21716][#21716]
- The `ON DELETE CASCADE` and `ON UPDATE CASCADE` [foreign key constraint actions](../v2.0/foreign-key.html#foreign-key-actions-new-in-v2-0) can now also contain `CHECK` constraints. [#22535][#22535]
- JSON inverted indexes can now be specified in a [`CREATE TABLE`](../v2.0/create-table.html) statement. [#22217][#22217]
- When a node is gracefully shut down, planning queries are avoided and distributed queries are allowed the amount of time specified by the new `server.drain_max_wait` [cluster setting](../v2.0/cluster-settings.html) before the node is drained and stopped. [#20450][#20450]
- [Collated string](../v2.0/collate.html) are now supported in [IMPORT](../v2.0/import.html) jobs. [#21859][#21859]
- The new `SHOW GRANTS ON ROLE` statement and `pg_catalog.pg_auth_members` table lists role memberships. [#22205][#22205] [#21780][#21780]
- Role memberships are now considered in permission checks. [#21820][#21820]

<h3 id="v2.0-beta.20180305-command-line-changes">Command-Line Changes</h3>

- [Replication zone constraints](../v2.0/configure-replication-zones.html#replication-constraints) can now be specified on a per-replica basis, meaning you can configure some replicas in a zone's ranges to follow one set of constraints and other replicas to follow other constraints. [#22906][#22906]
- Per-replica constraints no longer have to add up to the total number of replicas in a range. If you do not specify all the replicas, then the remaining replicas will be allowed on any store. [#23081][#23081]
- [`cockroach sql`](../v2.0/use-the-built-in-sql-client.html) now reminds the user about `SET database = ...` and `CREATE DATABASE` if started with no current database set. [#23089][#23089]
- Error messages displayed while connecting to a server with an incompatible version have been improved. [#22709][#22709]
- The `--cache` and `--max-sql-memory` flags of [`cockroach start`](../v2.0/start-a-node.html) now also support decimal notation to support a fraction of total available RAM size, e.g., `--cache=.25` is equivalent to `--cache=25%`. This simplifies integration with system management tools. [#22460][#22460]
- When printing tabular results as CSV or TSV, no final row count is emitted. This is intended to increase interoperability with external tools. [#20835][#20835]
- The `pretty` formatter does not introduce special unicode characters in multi-line table cells, for better compatibility with certain clients. To disambiguate multi-line cells from multiple single-line cells, a user can use `WITH ORDINALITY` to add a row numbering column. [#22324][#22324]
- Allowed specification of arbitrary RocksDB options. [#22401][#22401]
- [Debug commands](../v2.0/debug-zip.html) now open RocksDB in read-only mode. This makes them faster and able to run in parallel. [#21778][#21778]
- The [`cockroach dump`](../v2.0/sql-dump.html) command now outputs `CREATE SEQUENCE` statements before the `CREATE TABLE` statements that use them. [#21774][#21774]
- For better compatibility with `psql`'s extended format, the table formatter `records` now properly indicates line continuations in multi-line rows. [#22325][#22325]
- The [`cockroach sql`](../v2.0/use-the-built-in-sql-client.html) client-side option `show_times` is now always enabled when output goes to a terminal, not just when `display_format` is set to `pretty`. [#22326][#22326]
- When formatting [`cockroach sql`](../v2.0/use-the-built-in-sql-client.html) results with `--format=sql`, the row count is now printed in a SQL comment at the end. [#22327][#22327]
- When formatting [`cockroach sql`](../v2.0/use-the-built-in-sql-client.html) results with `--format=csv` or `--format=tsv`, result rows that contain special characters are now quoted properly. [#19306][#19306]

<h3 id="v2.0-beta.20180305-admin-ui-changes">Admin UI Changes</h3>

- [Decommissioned nodes](../v2.0/remove-nodes.html) are no longer included in cluster stats aggregates. [#22711][#22711]
- Time series metrics dashboards now show their own title rather than the generic "Cluster Overview". [#22746][#22746]
- The URLs for Admin UI pages have been reorganized to provide more consistent structure to the site. Old links will redirect to the new location of the page. [#22746][#22746]
- Nodes being decommissioned are now included in the total nodes count until they are completely decommissioned. [#22690][#22690]
- Added new graphs for monitoring activity of the time series system. [#22672][#22672]
- Disk usage for time series data is now visible on the **Databases** page. [#22398][#22398]
- Added a ui-clean task. [#22552][#22552]
- Added an icon to indicate when descriptions in the **Jobs** table are shortened and expandable. [#22221][#22221]
- Added "compaction queue" graphs to the **Queues** dashboard. [#22218][#22218]
- Added Raft snapshot queue metrics to the **Queue** dashboard. [#22210][#22210]
- Dead nodes are now displayed before live nodes on the **Nodes List** page. [#22222][#22222]
- Links to documentation in the Admin UI now point to the docs for v2.0. [#21894][#21894]

<h3 id="v2.0-beta.20180305-bug-fixes">Bug Fixes</h3>

- Fixed an issue where Admin UI graph tooltips would continue to display zero values for nodes which had long been decommissioned. [#22626][#22626]
- Fixed an issue where Admin UI graphs would occasionally have a persistent "dip" at the leading edge of data. [#22570][#22570]
- Fixed an issue where viewing Admin UI graphs for very long time spans (e.g., 1 month) could cause excessive memory usage. [#22392][#22392]
- Fixed padding on the **Node Diagnostics** page of the Admin UI. [#23019][#23019]
- Corrected the title of the decommissioned node list, which was mistakenly updated to say "Decommissioning". [#22703][#22703]
- Fixed a bug in [`cockroach dump`](../v2.0/sql-dump.html) output with `SEQUENCES`. [#22619][#22619]
- Fixed a bug that created uneven distribution of data (or failures in some cases) during [`IMPORT`](../v2.0/import.html) of tables without an explicit primary key. [#22542][#22542]
- Fixed a bug that could prevent disk space from being reclaimed. [#23153][#23153]
- [Replication zone configs](../v2.0/configure-replication-zones.html) no longer accept negative numbers as input. [#23081][#23081]
- Fixed the occasional selection of sub-optimal rebalance targets. [#23081][#23081]
- [`cockroach dump`](../v2.0/sql-dump.html) is now able to dump sequences with non-default parameters. [#23062][#23062]
- [Arrays](../v2.0/array.html) now support the `IS [NOT] DISTINCT FROM` operators. [#23090][#23090]
- [`SHOW TABLES`](../v2.0/show-tables.html) is now again able to inspect virtual schemas. [#23041][#23041]
- The special form of [`CREATE TABLE .. AS`](../v2.0/create-table-as.html) now properly supports placeholders in the subquery. [#23046][#23046]
- Fixed a bug where ranges could get stuck in an infinite "removal pending" state and would refuse to accept new writes. [#23024][#23024]
- Fixed incorrect index constraints on primary key columns on unique indexes. [#23003][#23003]
- Fixed a panic when upgrading quickly from v1.0.x to v2.0.x [#22971][#22971]
- Fixed a bug that prevented joins on interleaved tables with certain layouts from working. [#22935][#22935]
- The service latency tracked for SQL statement now includes the wait time of the execute message in the input queue. [#22881][#22881]
- The conversion from [`INTERVAL`](../v2.0/interval.html) to [`FLOAT`](../v2.0/float.html) now properly returns the number of seconds in the interval. [#22894][#22894]
- Fixed incorrect query results when the `WHERE` condition contains `IN` expressions where the right-hand side tuple contains `NULL`s. [#22735][#22735]
- Fixed incorrect handling for `IS (NOT) DISTINCT FROM` when either side is a tuple that contains `NULL`. [#22718][#22718]
- Fixed incorrect evaluation of `IN` expressions where the left-hand side is a tuple, and some of the tuples on either side contain `NULL`. [#22718][#22718]
- Expressions stored in check constraints and computed columns are now stored de-qualified so that they no longer refer to a specific database or table. [#22667][#22667]
- Fixed a bug where reusing addresses of decommissioned nodes could cause issues with Admin UI graphs. [#22614][#22614]
- [`IMPORT`](../v2.0/import.html) jobs can no longer be started if the target table already exists. [#22627][#22627]
- Computed columns can no longer be added to a table after table creation. [#22653][#22653]
- Allowed [`UPSERT`](../v2.0/upsert.html)ing into a table with computed columns. [#22517][#22517]
- Computed columns are now correctly disallowed from being foreign key references. [#22511][#22511]
- Various primitives that expect table names as argument now properly reject invalid table names. [#22577][#22577]
- `AddSSTable` no longer accidentally destroys files in the log on success. [#22551][#22551]
- `IsDistinctFrom` with `NULL` placeholder no longer returns incorrect results. [#22433][#22433]
- Fixed a bug that caused incorrect results for joins where columns that are constrained to be equal have different types. [#22549][#22549]
- Implemented additional safeguards against RPC connections between nodes that belong to different clusters. [#22518][#22518]
- The [`/health` endpoint](../v2.0/monitoring-and-alerting.html) now returns a node as unhealthy when draining or decommissioning. [#22502][#22502]
- Aggregates that take null arguments no return the correct results. [#22507][#22507]
- Fixed empty plan columns of `sequenceSelectNode`. [#22495][#22495]
- Disallowed any inserts into computed columns. [#22470][#22470]
- Tables with computed columns will produce a meaningful dump. [#22402][#22402]
- [`cockroach sql`](../v2.0/use-the-built-in-sql-client.html) no longer produces an error anymore when an empty statement is entered at the interactive prompt. [#22449][#22449]
- The `pg_typeof()` function now returns the correct type for the output of `UNION ALL` even when the left sub-select has a `NULL` column. [#22438][#22438]
- `<TYPE> <value>` literal casts now work correctly for all fixed-length types. [#22397][#22397]
- Errors from DDL statements sent by a client as part of a transaction, but in a different query string than the final commit, are no longer silently swallowed. [#21829][#21829]
- Fixed a bug in cascading foreign key actions. [#21799][#21799]
- Tabular results where the column labels contain newline characters are now rendered properly. [#19306][#19306]
- Fixed a bug that prevented long descriptions in the Admin UI **Jobs** table from being collapsed after being expanding. [#22221][#22221]
- Fixed a bug that prevented using [`SHOW GRANTS`](../v2.0/show-grants.html) with a grantee but no targets. [#21864][#21864]
- Fixed a panic with certain queries involving the `REGCLASS` type. [#22310][#22310]
- Fixed the behavior and types of the `encode()` and `decode()` functions. [#22230][#22230]
- Fixed a bug that prevented passing the same tuple for `FROM` and `TO` in `ALTER TABLE ... SCATTER`. [#21830][#21830]
- Fixed a regression that caused certain queries using `LIKE` or `SIMILAR TO` with an indexed column to be slow. [#21842][#21842]
- Fixed a stack overflow in the code for shutting down a server when out of disk space [#21768][#21768]
- Fixed Windows release builds. [#21793][#21793]
- Fixed an issue with the wire-formatting of [`BYTES`](../v2.0/bytes.html) arrays. [#21712][#21712]
- Fixed a bug that could lead to a node crashing and needing to be reinitialized. [#21771][#21771]
- When a database is created, dropped, or renamed, the SQL session is blocked until the effects of the operation are visible to future queries in that session. [#21900][#21900]
- Fixed a bug where healthy nodes could appear as "Suspect" in the Admin UI if the web browser's local clock was skewed. [#22237][#22237]
- Fixed bugs when running DistSQL queries across mixed-version (1.1.x and 2.0-alpha) clusters. [#22897][#22897]

<h3 id="v2.0-beta.20180305-performance-improvements">Performance Improvements</h3>

- Improved a cluster's ability to continue operating when nearly out of disk space on most nodes. [#21866][#21866]
- Disk space is more aggressively freed up when the disk is almost full. [#22235][#22235]
- Experimentally enabled some joins to perform a lookup join and increase join speed for cases where the right side of the join is much larger than the left. [#22674][#22674]
- Supported distributed execution of `INTERSECT` and `EXCEPT` queries. [#22442][#22442]
- Reduced cancellation time of DistSQL aggregation queries. [#22684][#22684]
- Unnecessary value checksums are no longer computed, speeding up database writes. [#22487][#22487]
- Reduced unnecessary logging in the storage layer. [#22516][#22516]
- Improved the performance of distributed sql queries. [#22471][#22471]
- Distributed execution of `INTERSECT ALL` and `EXCEPT ALL` queries is now supported. [#21896][#21896]
- Allowed `-` in usernames, but not as the first character. [#22728][#22728]
- A `COMMIT` reporting an error generated by a previous parallel statement (i.e., `RETURNING NOTHING`) no longer leaves the connection in an aborted transaction state. Instead, the transaction is considered completed and a `ROLLBACK` is not necessary. [#22683][#22683]
- Significantly reduced the likelihood of serializable restarts seen by clients due to concurrent workloads. [#21140][#21140]
- Reduced disruption from nodes recovering from network partitions. [#22316][#22316]
- Improved the performance of scans by copying less data in memory. [#22309][#22309]
- Slightly improved the performance of low-level scan operations. [#22244][#22244]
- When a range grows too large, writes are now be backpressured until the range is successfully able to split. This prevents unbounded range growth and improves a clusters ability to stay healthy under hotspot workloads. [#21777][#21777]
- The `information_schema` and `pg_catalog` databases are now faster to query. [#21609][#21609]
- Reduced the write amplification of Raft replication. [#20647][#20647]

<h3 id="v2.0-beta.20180305-doc-updates">Doc Updates</h3>

- Added [cloud-specific hardware recommendations](../v2.0/recommended-production-settings.html#cloud-specific-recommendations). [#2312](https://github.com/cockroachdb/docs/pull/2312)
- Added a [detailed listing of SQL standard features with CockroachDB's level of support](../v2.0/sql-feature-support.html). [#2442](https://github.com/cockroachdb/docs/pull/2442)
- Added docs on the [`INET`](../v2.0/inet.html) data type. [#2439](https://github.com/cockroachdb/docs/pull/2439)
- Added docs on the [`SHOW CREATE SEQUENCE`](../v2.0/show-create-sequence.html) statement. [#2406](https://github.com/cockroachdb/docs/pull/2406)
- Clarified that [password creation](../v2.0/create-and-manage-users.html#user-authentication) is only supported in secure clusters. [#2567](https://github.com/cockroachdb/docs/pull/2567)
- Added docs on [production monitoring tools](../v2.0/monitoring-and-alerting.html) and the critical events and metrics to alert on. [#2564](https://github.com/cockroachdb/docs/pull/2564)
- Added docs on the [`JSONB`](../v2.0/jsonb.html) data type. [#2561](https://github.com/cockroachdb/docs/pull/2561)
- Added docs on the `BETWEEN SYMMETRIC` [operator](../v2.0/functions-and-operators.html#operators). [#2551](https://github.com/cockroachdb/docs/pull/2551)
- Updated docs on [supporting castings for `ARRAY` values](../v2.0/array.html#supported-casting-conversionnew-in-v2-0). [#2549](https://github.com/cockroachdb/docs/pull/2549)
- Various improvements to docs on the [built-in SQL client](../v2.0/use-the-built-in-sql-client.html). [#2544](https://github.com/cockroachdb/docs/pull/2544)

<h3 id="v2.0-beta.20180305-contributors">Contributors</h3>

This release includes 430 merged PRs by 37 authors. We would like to thank all contributors from the CockroachDB community, with special thanks to first-time contributors noonan, Mark Wistrom, pocockn, and 何羿宏.

[#19306]: https://github.com/cockroachdb/cockroach/pull/19306
[#20290]: https://github.com/cockroachdb/cockroach/pull/20290
[#20450]: https://github.com/cockroachdb/cockroach/pull/20450
[#20647]: https://github.com/cockroachdb/cockroach/pull/20647
[#20790]: https://github.com/cockroachdb/cockroach/pull/20790
[#20835]: https://github.com/cockroachdb/cockroach/pull/20835
[#21140]: https://github.com/cockroachdb/cockroach/pull/21140
[#21437]: https://github.com/cockroachdb/cockroach/pull/21437
[#21477]: https://github.com/cockroachdb/cockroach/pull/21477
[#21609]: https://github.com/cockroachdb/cockroach/pull/21609
[#21684]: https://github.com/cockroachdb/cockroach/pull/21684
[#21712]: https://github.com/cockroachdb/cockroach/pull/21712
[#21716]: https://github.com/cockroachdb/cockroach/pull/21716
[#21717]: https://github.com/cockroachdb/cockroach/pull/21717
[#21754]: https://github.com/cockroachdb/cockroach/pull/21754
[#21767]: https://github.com/cockroachdb/cockroach/pull/21767
[#21768]: https://github.com/cockroachdb/cockroach/pull/21768
[#21771]: https://github.com/cockroachdb/cockroach/pull/21771
[#21774]: https://github.com/cockroachdb/cockroach/pull/21774
[#21777]: https://github.com/cockroachdb/cockroach/pull/21777
[#21778]: https://github.com/cockroachdb/cockroach/pull/21778
[#21780]: https://github.com/cockroachdb/cockroach/pull/21780
[#21793]: https://github.com/cockroachdb/cockroach/pull/21793
[#21799]: https://github.com/cockroachdb/cockroach/pull/21799
[#21813]: https://github.com/cockroachdb/cockroach/pull/21813
[#21816]: https://github.com/cockroachdb/cockroach/pull/21816
[#21820]: https://github.com/cockroachdb/cockroach/pull/21820
[#21823]: https://github.com/cockroachdb/cockroach/pull/21823
[#21829]: https://github.com/cockroachdb/cockroach/pull/21829
[#21830]: https://github.com/cockroachdb/cockroach/pull/21830
[#21842]: https://github.com/cockroachdb/cockroach/pull/21842
[#21847]: https://github.com/cockroachdb/cockroach/pull/21847
[#21859]: https://github.com/cockroachdb/cockroach/pull/21859
[#21864]: https://github.com/cockroachdb/cockroach/pull/21864
[#21866]: https://github.com/cockroachdb/cockroach/pull/21866
[#21894]: https://github.com/cockroachdb/cockroach/pull/21894
[#21895]: https://github.com/cockroachdb/cockroach/pull/21895
[#21896]: https://github.com/cockroachdb/cockroach/pull/21896
[#21900]: https://github.com/cockroachdb/cockroach/pull/21900
[#22205]: https://github.com/cockroachdb/cockroach/pull/22205
[#22210]: https://github.com/cockroachdb/cockroach/pull/22210
[#22217]: https://github.com/cockroachdb/cockroach/pull/22217
[#22218]: https://github.com/cockroachdb/cockroach/pull/22218
[#22220]: https://github.com/cockroachdb/cockroach/pull/22220
[#22221]: https://github.com/cockroachdb/cockroach/pull/22221
[#22222]: https://github.com/cockroachdb/cockroach/pull/22222
[#22230]: https://github.com/cockroachdb/cockroach/pull/22230
[#22235]: https://github.com/cockroachdb/cockroach/pull/22235
[#22237]: https://github.com/cockroachdb/cockroach/pull/22237
[#22242]: https://github.com/cockroachdb/cockroach/pull/22242
[#22244]: https://github.com/cockroachdb/cockroach/pull/22244
[#22245]: https://github.com/cockroachdb/cockroach/pull/22245
[#22278]: https://github.com/cockroachdb/cockroach/pull/22278
[#22281]: https://github.com/cockroachdb/cockroach/pull/22281
[#22284]: https://github.com/cockroachdb/cockroach/pull/22284
[#22291]: https://github.com/cockroachdb/cockroach/pull/22291
[#22307]: https://github.com/cockroachdb/cockroach/pull/22307
[#22309]: https://github.com/cockroachdb/cockroach/pull/22309
[#22310]: https://github.com/cockroachdb/cockroach/pull/22310
[#22314]: https://github.com/cockroachdb/cockroach/pull/22314
[#22316]: https://github.com/cockroachdb/cockroach/pull/22316
[#22319]: https://github.com/cockroachdb/cockroach/pull/22319
[#22323]: https://github.com/cockroachdb/cockroach/pull/22323
[#22324]: https://github.com/cockroachdb/cockroach/pull/22324
[#22325]: https://github.com/cockroachdb/cockroach/pull/22325
[#22326]: https://github.com/cockroachdb/cockroach/pull/22326
[#22327]: https://github.com/cockroachdb/cockroach/pull/22327
[#22338]: https://github.com/cockroachdb/cockroach/pull/22338
[#22365]: https://github.com/cockroachdb/cockroach/pull/22365
[#22375]: https://github.com/cockroachdb/cockroach/pull/22375
[#22389]: https://github.com/cockroachdb/cockroach/pull/22389
[#22391]: https://github.com/cockroachdb/cockroach/pull/22391
[#22392]: https://github.com/cockroachdb/cockroach/pull/22392
[#22393]: https://github.com/cockroachdb/cockroach/pull/22393
[#22397]: https://github.com/cockroachdb/cockroach/pull/22397
[#22398]: https://github.com/cockroachdb/cockroach/pull/22398
[#22401]: https://github.com/cockroachdb/cockroach/pull/22401
[#22402]: https://github.com/cockroachdb/cockroach/pull/22402
[#22404]: https://github.com/cockroachdb/cockroach/pull/22404
[#22416]: https://github.com/cockroachdb/cockroach/pull/22416
[#22429]: https://github.com/cockroachdb/cockroach/pull/22429
[#22433]: https://github.com/cockroachdb/cockroach/pull/22433
[#22438]: https://github.com/cockroachdb/cockroach/pull/22438
[#22442]: https://github.com/cockroachdb/cockroach/pull/22442
[#22449]: https://github.com/cockroachdb/cockroach/pull/22449
[#22455]: https://github.com/cockroachdb/cockroach/pull/22455
[#22460]: https://github.com/cockroachdb/cockroach/pull/22460
[#22470]: https://github.com/cockroachdb/cockroach/pull/22470
[#22471]: https://github.com/cockroachdb/cockroach/pull/22471
[#22474]: https://github.com/cockroachdb/cockroach/pull/22474
[#22487]: https://github.com/cockroachdb/cockroach/pull/22487
[#22495]: https://github.com/cockroachdb/cockroach/pull/22495
[#22500]: https://github.com/cockroachdb/cockroach/pull/22500
[#22502]: https://github.com/cockroachdb/cockroach/pull/22502
[#22507]: https://github.com/cockroachdb/cockroach/pull/22507
[#22511]: https://github.com/cockroachdb/cockroach/pull/22511
[#22514]: https://github.com/cockroachdb/cockroach/pull/22514
[#22516]: https://github.com/cockroachdb/cockroach/pull/22516
[#22517]: https://github.com/cockroachdb/cockroach/pull/22517
[#22518]: https://github.com/cockroachdb/cockroach/pull/22518
[#22531]: https://github.com/cockroachdb/cockroach/pull/22531
[#22534]: https://github.com/cockroachdb/cockroach/pull/22534
[#22535]: https://github.com/cockroachdb/cockroach/pull/22535
[#22542]: https://github.com/cockroachdb/cockroach/pull/22542
[#22549]: https://github.com/cockroachdb/cockroach/pull/22549
[#22551]: https://github.com/cockroachdb/cockroach/pull/22551
[#22552]: https://github.com/cockroachdb/cockroach/pull/22552
[#22570]: https://github.com/cockroachdb/cockroach/pull/22570
[#22577]: https://github.com/cockroachdb/cockroach/pull/22577
[#22601]: https://github.com/cockroachdb/cockroach/pull/22601
[#22608]: https://github.com/cockroachdb/cockroach/pull/22608
[#22614]: https://github.com/cockroachdb/cockroach/pull/22614
[#22619]: https://github.com/cockroachdb/cockroach/pull/22619
[#22620]: https://github.com/cockroachdb/cockroach/pull/22620
[#22626]: https://github.com/cockroachdb/cockroach/pull/22626
[#22627]: https://github.com/cockroachdb/cockroach/pull/22627
[#22637]: https://github.com/cockroachdb/cockroach/pull/22637
[#22648]: https://github.com/cockroachdb/cockroach/pull/22648
[#22653]: https://github.com/cockroachdb/cockroach/pull/22653
[#22658]: https://github.com/cockroachdb/cockroach/pull/22658
[#22659]: https://github.com/cockroachdb/cockroach/pull/22659
[#22667]: https://github.com/cockroachdb/cockroach/pull/22667
[#22672]: https://github.com/cockroachdb/cockroach/pull/22672
[#22674]: https://github.com/cockroachdb/cockroach/pull/22674
[#22679]: https://github.com/cockroachdb/cockroach/pull/22679
[#22683]: https://github.com/cockroachdb/cockroach/pull/22683
[#22684]: https://github.com/cockroachdb/cockroach/pull/22684
[#22690]: https://github.com/cockroachdb/cockroach/pull/22690
[#22693]: https://github.com/cockroachdb/cockroach/pull/22693
[#22703]: https://github.com/cockroachdb/cockroach/pull/22703
[#22705]: https://github.com/cockroachdb/cockroach/pull/22705
[#22709]: https://github.com/cockroachdb/cockroach/pull/22709
[#22711]: https://github.com/cockroachdb/cockroach/pull/22711
[#22718]: https://github.com/cockroachdb/cockroach/pull/22718
[#22728]: https://github.com/cockroachdb/cockroach/pull/22728
[#22729]: https://github.com/cockroachdb/cockroach/pull/22729
[#22735]: https://github.com/cockroachdb/cockroach/pull/22735
[#22746]: https://github.com/cockroachdb/cockroach/pull/22746
[#22753]: https://github.com/cockroachdb/cockroach/pull/22753
[#22848]: https://github.com/cockroachdb/cockroach/pull/22848
[#22881]: https://github.com/cockroachdb/cockroach/pull/22881
[#22894]: https://github.com/cockroachdb/cockroach/pull/22894
[#22897]: https://github.com/cockroachdb/cockroach/pull/22897
[#22903]: https://github.com/cockroachdb/cockroach/pull/22903
[#22906]: https://github.com/cockroachdb/cockroach/pull/22906
[#22935]: https://github.com/cockroachdb/cockroach/pull/22935
[#22948]: https://github.com/cockroachdb/cockroach/pull/22948
[#22971]: https://github.com/cockroachdb/cockroach/pull/22971
[#22983]: https://github.com/cockroachdb/cockroach/pull/22983
[#23003]: https://github.com/cockroachdb/cockroach/pull/23003
[#23013]: https://github.com/cockroachdb/cockroach/pull/23013
[#23019]: https://github.com/cockroachdb/cockroach/pull/23019
[#23024]: https://github.com/cockroachdb/cockroach/pull/23024
[#23041]: https://github.com/cockroachdb/cockroach/pull/23041
[#23046]: https://github.com/cockroachdb/cockroach/pull/23046
[#23062]: https://github.com/cockroachdb/cockroach/pull/23062
[#23081]: https://github.com/cockroachdb/cockroach/pull/23081
[#23089]: https://github.com/cockroachdb/cockroach/pull/23089
[#23090]: https://github.com/cockroachdb/cockroach/pull/23090
[#23150]: https://github.com/cockroachdb/cockroach/pull/23150
[#23153]: https://github.com/cockroachdb/cockroach/pull/23153
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

In this release, we’ve enhanced our debug pages to support graphing custom metrics, improved handling of large deletes, and fixed several bugs.

- Custom graph debug page [#23227](https://github.com/cockroachdb/cockroach/pull/23227)
- Improve handling of large deletes [#23289](https://github.com/cockroachdb/cockroach/pull/23289)

<h3 id="v2.0-beta.20180312-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0-beta.20180312.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0-beta.20180312.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0-beta.20180312.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.0-beta.20180312-build-changes">Build Changes</h3>

- Binaries are now built with Go 1.10 by default. [#23311][#23311]

<h3 id="v2.0-beta.20180312-general-changes">General Changes</h3>

- [Logging data](../v2.0/debug-and-error-logs.html) is now flushed to files every second to aid troubleshooting and monitoring. Synchronization to disk is performed separately every 30 seconds. [#23231][#23231]
- Disabling [diagnostics reporting](../v1.1/diagnostics-reporting.html) also disables new version notification checks. [#23007][#23007]
- Removed the `diagnostics.reporting.report_metrics` [cluster setting](../v2.0/cluster-settings.html), which is duplicative with the `COCKROACH_SKIP_ENABLING_DIAGNOSTIC_REPORTING` environment variable. [#23007][#23007]
- All internal error messages are now logged when logging is set to a high enough verbosity. [#23127][#23127]

<h3 id="v2.0-beta.20180312-sql-language-changes">SQL Language Changes</h3>

- Improved handling of large [`DELETE`](../v2.0/delete.html) statements. They are now either allowed to complete or exited with an error message indicating that the transaction is too large to complete. [#23289][#23289]
- The `pg_catalog` virtual tables, as well as the special casts `::regproc` and `::regclass`, can now only be queried by clients that [set a current database](../v2.0/set-vars.html). [#23148][#23148]

<h3 id="v2.0-beta.20180312-command-line-changes">Command-Line Changes</h3>

- When a node spends more than 30 seconds waiting for an `init` command or to join a cluster, a help message now gets prints to `stdout`. [#23181][#23181]

<h3 id="v2.0-beta.20180312-admin-ui-changes">Admin UI Changes</h3>

- Added a new debug page that allows users to create a "custom" graph displaying any combination of metrics. [#23227][#23227]
- In the geographical map on the homepage of the Admin UI enterprise version, node components now link to **Note Details** page. [#23283][#23283]
- Removed the **Keys Written per Second per Store** graph. [#23303][#23303]
- Added the **Lead Transferee** field to the **Range Debug** page. [#23241][#23241]

<h3 id="v2.0-beta.20180312-bug-fixes">Bug Fixes</h3>

- Fixed a correctness bug where some `ORDER BY` queries would not return the correct results. [#23541][#23541]
- The Admin UI no longer hangs after a node's network configuration has changed. [#23348][#23348]
- The binary format for [`JSONB`](../v2.0/jsonb.html) values is now supported. [#23215][#23215]
- A node now waits in an unready state for the length of time specified by the `server.shutdown.drain_wait` cluster setting before draining. This helps ensure that load balancers will not send client traffic to a node about to be drained. [#23319][#23319]
- Fixed a panic when using `UPSERT ... RETURNING` with `UNION`. [#23317][#23317]
- Prevented disruptions in performance when gracefully shutting down a node. [#23300][#23300]
- Hardened the [cluster version upgrade](../v2.0/upgrade-cockroach-version.html) mechanism. Rapid upgrades through more than two versions could sometimes fail recoverably. [#23287][#23287]
- Fixed a deadlock when tables are rapidly created or dropped. [#23288][#23288]
- Fixed a small memory leak in [`IMPORT`](../v2.0/import.html) CSV. [#23259][#23259]
- Prevented a panic in DistSQL under certain error conditions. [#23201][#23201]
- Added a [readiness endpoint](../v2.0/monitoring-and-alerting.html#health-ready-1) (`/health?ready=1`) for better integration with load balancers. [#23247][#23247]
- Fixed a zero QPS scenario when gracefully shutting down a node. [#23246][#23246]
- Secondary log files (e.g., the SQL execution log) are now periodically flushed to disk, in addition to the flush
  that occurs naturally when single log files are full (`--log-file-max-size`) and when the process terminates gracefully. Log file rotation is also now properly active for these files. [#23231][#23231]
- Previously, the `ranges` column in the `node status` command output only included ranges whose raft leader was on the node in question. It now includes the count of all ranges on the node, regardless of where the raft leader is. [#23180][#23180]
- Fixed a panic caused by empty `COCKROACH_UPDATE_CHECK_URL` or `COCKROACH_USAGE_REPORT_URL` environment variables. [#23008][#23008]
- Prevented stale reads caused by the system clock moving backwards while the `cockroach` process is not running. [#23122][#23122]
- Corrected the handling of cases where a replica fails to retrieve the last processed timestamp of a queue. [#23127][#23127]
- Fixed a bug where the liveness status would not always display correctly on the single-node page in the Admin UI. [#23193][#23193]
- Fixed a bug that showed incorrect descriptions on the **Jobs** page in the Admin UI. [#23256][#23256]

<h3 id="v2.0-beta.20180312-doc-updates">Doc Updates</h3>

- Updated the [GCE deployment tutorial](../v2.0/deploy-cockroachdb-on-google-cloud-platform.html) with guidance on increasing the backend timeout setting for TCP Proxy load balancers. [#2687](https://github.com/cockroachdb/docs/pull/2687)
- Documented [read refreshing](../v2.0/architecture/transaction-layer.html#read-refreshing) in the CockroachDB architecture documentation. [#2684](https://github.com/cockroachdb/docs/pull/2684)
- Updated the explanation of [automatic retries](../v2.0/transactions.html#automatic-retries). [#2680](https://github.com/cockroachdb/docs/pull/2680)
- Documented changes to the [built-in replication zone](../v2.0/configure-replication-zones.html#list-the-pre-configured-replication-zones). [#2677](https://github.com/cockroachdb/docs/pull/2677)
- Updated the [`information_schema`](../v2.0/information-schema.html) documentation to cover new views. [#2675](https://github.com/cockroachdb/docs/pull/2675) [#2673](https://github.com/cockroachdb/docs/pull/2673) [#2672](https://github.com/cockroachdb/docs/pull/2672) [#2668](https://github.com/cockroachdb/docs/pull/2668) [#2662](https://github.com/cockroachdb/docs/pull/2662) [#2654](https://github.com/cockroachdb/docs/pull/2654) [#2637](https://github.com/cockroachdb/docs/pull/2637)
- Clarified the target of the [`cockroach init`](../v2.0/initialize-a-cluster.html) command. [#2670](https://github.com/cockroachdb/docs/pull/2670)
- Added details about [how to monitor clock offsets](../v2.0/operational-faqs.html#how-can-i-tell-how-well-node-clocks-are-synchronized). [#2663](https://github.com/cockroachdb/docs/pull/2663)
- Documented how to [perform a rolling upgrade on a Kubernetes-orchestrated cluster](../v2.0/orchestrate-cockroachdb-with-kubernetes.html). [#2661](https://github.com/cockroachdb/docs/pull/2661)
- Updated the [Azure deployment tutorial](../v2.0/deploy-cockroachdb-on-microsoft-azure.html) with correct network security rule guidance. [#2653](https://github.com/cockroachdb/docs/pull/2653)  
- Improved the documentation of the [`cockroach node status`](../v2.0/view-node-details.html) command. [#2639](https://github.com/cockroachdb/docs/pull/2639)
- Clarified that the [`DROP COLUMN`](../v2.0/drop-column.html) statement now drops `CHECK` constraints. [#2638](https://github.com/cockroachdb/docs/pull/2638)
- Added details about [disk space usage after deletes and select performance on deleted rows](../v2.0/delete.html#disk-space-usage-after-deletes). [#2635](https://github.com/cockroachdb/docs/pull/2635)
- Clarified that [`DROP INDEX .. CASCADE`](../v2.0/drop-index.html) is required to drop a `UNIQUE` index. [#2633](https://github.com/cockroachdb/docs/pull/2633)
- Updated the [`EXPLAIN`](../v2.0/explain.html) documentation to identify all explainable statements, cover the new output structure, and better explain the contents of the `Ordering` column. [#2632](https://github.com/cockroachdb/docs/pull/2632) [#2682](https://github.com/cockroachdb/docs/pull/2682)
- Defined "range lease" in the [CockroachDB architecture overview](../v2.0/architecture/overview.html#terms). [#2625](https://github.com/cockroachdb/docs/pull/2625)
- Added an FAQ on [preparing for planned node maintenance](../v2.0/operational-faqs.html#how-do-i-prepare-for-planned-node-maintenance). [#2600](https://github.com/cockroachdb/docs/pull/2600)

<h3 id="v2.0-beta.20180312-contributors">Contributors</h3>

This release includes 44 merged PRs by 21 authors.

[#23007]: https://github.com/cockroachdb/cockroach/pull/23007
[#23122]: https://github.com/cockroachdb/cockroach/pull/23122
[#23127]: https://github.com/cockroachdb/cockroach/pull/23127
[#23148]: https://github.com/cockroachdb/cockroach/pull/23148
[#23180]: https://github.com/cockroachdb/cockroach/pull/23180
[#23181]: https://github.com/cockroachdb/cockroach/pull/23181
[#23193]: https://github.com/cockroachdb/cockroach/pull/23193
[#23201]: https://github.com/cockroachdb/cockroach/pull/23201
[#23215]: https://github.com/cockroachdb/cockroach/pull/23215
[#23227]: https://github.com/cockroachdb/cockroach/pull/23227
[#23231]: https://github.com/cockroachdb/cockroach/pull/23231
[#23241]: https://github.com/cockroachdb/cockroach/pull/23241
[#23246]: https://github.com/cockroachdb/cockroach/pull/23246
[#23247]: https://github.com/cockroachdb/cockroach/pull/23247
[#23256]: https://github.com/cockroachdb/cockroach/pull/23256
[#23259]: https://github.com/cockroachdb/cockroach/pull/23259
[#23283]: https://github.com/cockroachdb/cockroach/pull/23283
[#23287]: https://github.com/cockroachdb/cockroach/pull/23287
[#23288]: https://github.com/cockroachdb/cockroach/pull/23288
[#23289]: https://github.com/cockroachdb/cockroach/pull/23289
[#23300]: https://github.com/cockroachdb/cockroach/pull/23300
[#23303]: https://github.com/cockroachdb/cockroach/pull/23303
[#23311]: https://github.com/cockroachdb/cockroach/pull/23311
[#23317]: https://github.com/cockroachdb/cockroach/pull/23317
[#23319]: https://github.com/cockroachdb/cockroach/pull/23319
[#23348]: https://github.com/cockroachdb/cockroach/pull/23348
[#23372]: https://github.com/cockroachdb/cockroach/pull/23372
[#23541]: https://github.com/cockroachdb/cockroach/pull/23541
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

In this release, we’ve improved CockroachDB’s ability to run in orchestrated environments and closed several Postgres capability gaps.

- Better [`/health`](../v2.0/monitoring-and-alerting.html) behavior to support orchestrated deployments. [#23551][#23551]

<h3 id="v2.0-beta.20180319-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0-beta.20180319.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0-beta.20180319.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0-beta.20180319.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.0-beta.20180319-sql-language-changes">SQL Language Changes</h3>

- `NO CYCLE` and `CACHE 1` are now supported options during [sequence creation](../v2.0/create-sequence.html). [#23518][#23518]
- `ISNULL` and `NOTNULL` are now accepted as alternatives to `IS NULL` and `IS NOT NULL`. [#23518][#23518]

<h3 id="v2.0-beta.20180319-command-line-changes">Command-Line Changes</h3>

- Changed the `server.drain_max_wait` [cluster setting](../v2.0/cluster-settings.html) to `server.shutdown.query_wait` [#23629][#23629]
- The generated HAProxy config generated by [`cockroach gen haproxy`](../v2.0/generate-cockroachdb-resources.html) has been extended with readiness checks. [#23590][#23590]

<h3 id="v2.0-beta.20180319-admin-ui-changes">Admin UI Changes</h3>

- Implemented a spinner on the **Logs** page instead of saying "No Data" while loading. [#23556][#23556]
- Now using monospace font and rendering new lines on the **Logs** page. Also, packed lines together more tightly. [#23556][#23556]
- Moved the **Clock Offset** graph from the **Distributed** dashboard to the [Runtime dashboard](../v2.0/admin-ui-runtime-dashboard.html). Now displaying each node's clock offset independently rather than aggregating them together. [#23627][#23627]
- When [reporting anonymous usage details](../v2.0/diagnostics-reporting.html), locality tier names are now redacted. [#23588][#23588]
- Clicking on the entire node component is now allowed in the Node Map, not just the visible elements. [#23536][#23536]
- The Node Map now shows how long a node has been dead. [#23404][#23404]
- Correct liveness status text now displays on nodes in the Node Map. [#23404][#23404]

<h3 id="v2.0-beta.20180319-bug-fixes">Bug Fixes</h3>

- Fixed a bug in which the usable capacity of nodes was not added up correctly in the Admin UI. [#23695][#23695]
- An [`ARRAY`](../v2.0/array.html) can now be used with the PostgreSQL binary format. [#23467][#23467]
- Fixed a panic when a query would incorrectly attempt to use an aggregation or window function in [`ON CONFLICT DO UPDATE`](../v2.0/insert.html#update-values-on-conflict). [#23658][#23658]
- [`CREATE TABLE AS`](../v2.0/create-table-as.html) can now be used with [scalar subqueries](../v2.0/scalar-expressions.html#scalar-subqueries). [#23470][#23470]
- Connection attempts to former members of the cluster and the associated spurious log messages are now prevented. [#23605][#23605]
- Fixed a panic when executing `INSERT INTO ... SELECT` queries where the number of columns targeted for insertion does not match the number of columns returned by the [`SELECT`](../v2.0/select-clause.html). [#23642][#23642]
- Reduced the risk that a node in the process of crashing could serve inconsistent data. [#23616][#23616]
- Fixed a correctness bug where some `ORDER BY` queries would not return the correct results under concurrent transactional load. [#23602][#23602]
- `RETURNING NOTHING` now properly detects [parallel statement execution](../v2.0/parallel-statement-execution.html) opportunities against statements that contain data-modifying statements in subqueries. [#23524][#23524]
- The [`/health` HTTP endpoint](../v2.0/monitoring-and-alerting.html#health-endpoints) is now accessible before a node has successfully become part of an initialized cluster, meaning that it now accurately reflects the health of the process rather than the ability of the process to serve queries. This has been the intention all along, but it didn't work until the node had joined a cluster or had `cockroach init` run on it. [#23551][#23551]
- Fixed a panic that could occur with certain types of casts. [#23535][#23535]
- Prevented a hang while crashing when `stderr` is blocked. [#23484][#23484]
- Fixed panics related to distributed execution of queries with `REGCLASS` casts. [#23482][#23482]
- Fixed a panic with computed columns. [#23435][#23435]
- Added prevention against potential consistency issues when a node is stopped and restarted in rapid succession. [#23339][#23339]
- [Decommissioning a node](../v2.0/remove-nodes.html) that has already been terminated now works in all cases. Success previously depended on whether the gateway node "remembered" the absent decommissioned node. [#23378][#23378]

<h3 id="v2.0-beta.20180319-build-changes">Build Changes</h3>

- [Go 1.10](https://golang.org/dl/) is now the minimum required version necessary to build CockroachDB. [#23494][#23494]

<h3 id="v2.0-beta.20180319-doc-updates">Doc Updates</h3>

- Documented the [`SPLIT AT`](../v2.0/split-at.html) statement, which forces a key-value layer range split at a specified row in a table or index. [#2704](https://github.com/cockroachdb/docs/pull/2704)
- Various updates to the [`IMPORT`](../v2.0/import.html) documentation. [#2676](https://github.com/cockroachdb/docs/pull/2676)
- Various updates to the [`SHOW TRACE`](../v2.0/show-trace.html) documentation. [#2674](https://github.com/cockroachdb/docs/pull/2674)
- Clarified the upgrade path for [rolling upgrades](../v2.0/upgrade-cockroach-version.html). [#2627](https://github.com/cockroachdb/docs/pull/2627)
- Added more detailed documentation on [ordering query results](../v2.0/query-order.html) with `ORDER BY`. [#2658](https://github.com/cockroachdb/docs/pull/2658)
- Documented [inverted indexes](../v2.0/inverted-indexes.html) for [`JSONB`](../v2.0/jsonb.html) data. [#2608](https://github.com/cockroachdb/docs/pull/2608)

<h3 id="v2.0-beta.20180319-contributors">Contributors</h3>

This release includes 48 merged PRs by 21 authors.

[#23339]: https://github.com/cockroachdb/cockroach/pull/23339
[#23378]: https://github.com/cockroachdb/cockroach/pull/23378
[#23404]: https://github.com/cockroachdb/cockroach/pull/23404
[#23435]: https://github.com/cockroachdb/cockroach/pull/23435
[#23467]: https://github.com/cockroachdb/cockroach/pull/23467
[#23470]: https://github.com/cockroachdb/cockroach/pull/23470
[#23482]: https://github.com/cockroachdb/cockroach/pull/23482
[#23484]: https://github.com/cockroachdb/cockroach/pull/23484
[#23494]: https://github.com/cockroachdb/cockroach/pull/23494
[#23518]: https://github.com/cockroachdb/cockroach/pull/23518
[#23524]: https://github.com/cockroachdb/cockroach/pull/23524
[#23535]: https://github.com/cockroachdb/cockroach/pull/23535
[#23536]: https://github.com/cockroachdb/cockroach/pull/23536
[#23551]: https://github.com/cockroachdb/cockroach/pull/23551
[#23556]: https://github.com/cockroachdb/cockroach/pull/23556
[#23588]: https://github.com/cockroachdb/cockroach/pull/23588
[#23590]: https://github.com/cockroachdb/cockroach/pull/23590
[#23602]: https://github.com/cockroachdb/cockroach/pull/23602
[#23605]: https://github.com/cockroachdb/cockroach/pull/23605
[#23616]: https://github.com/cockroachdb/cockroach/pull/23616
[#23627]: https://github.com/cockroachdb/cockroach/pull/23627
[#23629]: https://github.com/cockroachdb/cockroach/pull/23629
[#23642]: https://github.com/cockroachdb/cockroach/pull/23642
[#23658]: https://github.com/cockroachdb/cockroach/pull/23658
[#23695]: https://github.com/cockroachdb/cockroach/pull/23695
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v2.0-beta.20180326-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0-beta.20180326.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0-beta.20180326.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0-beta.20180326.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.0-beta.20180326-general-changes">General Changes</h3>

- A CockroachDB process now flushes its logs upon receiving `SIGHUP` instead of `SIGUSR1` as it did earlier. This is aimed to simplify the automation of process monitoring, test, and backup tools. [#23783][#23783]
- Information about [zone config](../v2.0/configure-replication-zones.html) usage is now included in [diagnostic reports](../v2.0/diagnostics-reporting.html). [#23750][#23750]

<h3 id="v2.0-beta.20180326-enterprise-edition-changes">Enterprise Edition Changes</h3>

- Added the `cloudstorage.timeout` [cluster setting](../v2.0/cluster-settings.html) for import/export operations. [#23776][#23776]

<h3 id="v2.0-beta.20180326-sql-language-changes">SQL Language Changes</h3>

- SQL features introduced in CockroachDB v2.0 cannot be used in clusters that are not [upgraded fully to v2.0](../v2.0/upgrade-cockroach-version.html). [#24013][#24013]
- Added an `escape` option to the `encode()` and `decode()` [built-in functions](../v2.0/functions-and-operators.html). [#23781][#23781]
- Introduced a series of PostgreSQL-compatible, privilege-related [built-in functions](../v2.0/functions-and-operators.html). [#23839][#23839]
- Added the `pg_language` table to the `pg_catalog` virtual schema. [#23839][#23839]
- Added the `anyarray` type to the `pg_type` virtual schema. [#23836][#23836]
- [Retryable errors](../v2.0/transactions.html#error-handling) on schema change operations are now less likely to be returned to clients; more operations are retried internally. [#24050][#24050]

<h3 id="v2.0-beta.20180326-command-line-changes">Command-Line Changes</h3>

- Client commands now report a warning if the connection URL is specified by the `--url` as well as some other command-line flag. If you use the `--url` flag, other flags can fill in pieces missing from the URL.
- Added per-node heap profiles to the [`debug zip`](../v2.0/debug-zip.html) command output. [#23858][#23858]

<h3 id="v2.0-beta.20180326-admin-ui-changes">Admin UI Changes</h3>

- More debug pages are now locked down by the `server.remote_debugging.mode` [cluster setting](../v2.0/cluster-settings.html). [#24022][#24022]
- The **Network Diagnostics** report no longer crashes when the latencies are very small or on a single node cluster. [#23868][#23868]
- Fixed the flicker in the **Node Map** as data is being reloaded. [#23757][#23757]
- Fixed the text overflowing past the table cell boundaries on the **Jobs** page. [#23748][#23748]
- Updated the labels for the **Snapshots** graph on the **Replication** dashboard to be more specific. [#23742][#23742]
- Fixed a bug where graphs would not display on clusters with large numbers of nodes. [#24045][#24045]
- [Decommissioned nodes](../v2.0/remove-nodes.html) no longer appear in the node selection dropdown on the **Metrics** page. [#23800][#23800]
- Fixed a condition where a persistent trailing dip could appear in graphs for longer time periods. [#23874][#23874]

<h3 id="v2.0-beta.20180326-bug-fixes">Bug Fixes</h3>

- Redacted string values in debug API responses. [#24070][#24070]
- Old replicas are now garbage collected in a more timely fashion after a node has been offline for a long time (this bug only exists in recent v2.0 alpha/beta releases, not in v1.1). [#24066][#24066]
- Fixed a bug where some [inverted index](../v2.0/inverted-indexes.html) queries could return incorrect results. [#23968][#23968]
- Fixed the behavior of the `@>` operator with arrays and scalars. [#23969][#23969]
- [Inverted indexes](../v2.0/inverted-indexes.html) can no longer be hinted for inappropriate queries. [#23989][#23989]
- Enforced minimum privileges for the `admin` role. [#23935][#23935]
- A panic is now avoided if the SQL audit log directory does not exist when the node is started. [#23928][#23928]
- Supported Postgres syntax for `USING GIN`. [#23910][#23910]
- Fixed a bug where [`INSERT`](../v2.0/insert.html)/[`DELETE`](../v2.0/delete.html)/[`UPDATE`](../v2.0/update.html)/[`UPSERT`](../v2.0/upsert.html) may lose updates if run using `WITH` or the `[ ... ]` syntax. [#23895][#23895]
- Made sure that all built-in functions have a unique Postgres OID for compatibility. [#23880][#23880]
- Fixed an error message generated by the experimental SCRUB feature. [#23845][#23845]
- Fixed a bug where [`CREATE VIEW`](../v2.0/create-view.html) after [`ALTER TABLE ADD COLUMN`](../v2.0/add-column.html) would fail to register the dependency on the newly added column. [#23845][#23845]
- Fixed crashes or incorrect results when combining an `OUTER JOIN` with a `VALUES` clause that contains only `NULL` values on a column (or other subqueries which result in a `NULL` column). [#23838][#23838]
- Fixed rare nil pointer exception in rebalance target selection. [#23807][#23807]
- The [`cockroach zone set`](../v2.0/configure-replication-zones.html) command will now automatically retry if it encounters an error while setting zone configurations. [#23782][#23782]
- Fixed a bug where closing a connection in the middle of executing a query sometimes crashed the server. [#23761][#23761]
- Fixed a bug where expressions could be mistakenly considered equal, despite their types being different. [#23722][#23722]
- Fixed a bug where the `RANGE COUNT` metric on the Cluster Overview page of the Admin UI could significantly undercount the number of ranges. [#23746][#23746]
- The client URL reported upon [`cockroach start`](../v2.0/start-a-node.html) now does not include the option `application_name`. [#23894][#23894]

<h3 id="v2.0-beta.20180326-performance-improvements">Performance Improvements</h3>

- Improved cluster performance during overload scenarios. [#23884][#23884]

<h3 id="v2.0-beta.20180326-doc-updates">Doc Updates</h3>

- Added a local cluster tutorial demonstrating [JSON Support](../v2.0/demo-json-support.html). [#2716](https://github.com/cockroachdb/docs/pull/2716)
- Added full documentation for the [`VALIDATE CONSTRAINT`](../v2.0/validate-constraint.html) statement. [#2730](https://github.com/cockroachdb/docs/pull/2730)

<h3 id="v2.0-beta.20180326-contributors">Contributors</h3>

This release includes 64 merged PRs by 23 authors. We would like to thank the following contributors from the CockroachDB community, with special thanks to first-time contributors Bob Vawter.

[#23577]: https://github.com/cockroachdb/cockroach/pull/23577
[#23722]: https://github.com/cockroachdb/cockroach/pull/23722
[#23742]: https://github.com/cockroachdb/cockroach/pull/23742
[#23746]: https://github.com/cockroachdb/cockroach/pull/23746
[#23748]: https://github.com/cockroachdb/cockroach/pull/23748
[#23750]: https://github.com/cockroachdb/cockroach/pull/23750
[#23757]: https://github.com/cockroachdb/cockroach/pull/23757
[#23761]: https://github.com/cockroachdb/cockroach/pull/23761
[#23776]: https://github.com/cockroachdb/cockroach/pull/23776
[#23781]: https://github.com/cockroachdb/cockroach/pull/23781
[#23782]: https://github.com/cockroachdb/cockroach/pull/23782
[#23783]: https://github.com/cockroachdb/cockroach/pull/23783
[#23800]: https://github.com/cockroachdb/cockroach/pull/23800
[#23807]: https://github.com/cockroachdb/cockroach/pull/23807
[#23836]: https://github.com/cockroachdb/cockroach/pull/23836
[#23838]: https://github.com/cockroachdb/cockroach/pull/23838
[#23839]: https://github.com/cockroachdb/cockroach/pull/23839
[#23845]: https://github.com/cockroachdb/cockroach/pull/23845
[#23858]: https://github.com/cockroachdb/cockroach/pull/23858
[#23868]: https://github.com/cockroachdb/cockroach/pull/23868
[#23874]: https://github.com/cockroachdb/cockroach/pull/23874
[#23880]: https://github.com/cockroachdb/cockroach/pull/23880
[#23884]: https://github.com/cockroachdb/cockroach/pull/23884
[#23894]: https://github.com/cockroachdb/cockroach/pull/23894
[#23895]: https://github.com/cockroachdb/cockroach/pull/23895
[#23910]: https://github.com/cockroachdb/cockroach/pull/23910
[#23928]: https://github.com/cockroachdb/cockroach/pull/23928
[#23935]: https://github.com/cockroachdb/cockroach/pull/23935
[#23968]: https://github.com/cockroachdb/cockroach/pull/23968
[#23969]: https://github.com/cockroachdb/cockroach/pull/23969
[#23989]: https://github.com/cockroachdb/cockroach/pull/23989
[#24013]: https://github.com/cockroachdb/cockroach/pull/24013
[#24022]: https://github.com/cockroachdb/cockroach/pull/24022
[#24045]: https://github.com/cockroachdb/cockroach/pull/24045
[#24050]: https://github.com/cockroachdb/cockroach/pull/24050
[#24066]: https://github.com/cockroachdb/cockroach/pull/24066
[#24070]: https://github.com/cockroachdb/cockroach/pull/24070
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

This is the first release candidate for CockroachDB v2.0. All known bugs have either been fixed or pushed to a future release, with large bugs documented as [known limitations](../v2.0/known-limitations.html).  

- Improved the **Node Map** to provide guidance when an enterprise license or additional configuration is required. [#24271][#24271]
- Bug fixes and stability improvements.

<h3 id="v2.0-rc.1-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0-rc.1.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0-rc.1.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0-rc.1.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.0-rc.1-admin-ui-changes">Admin UI Changes</h3>

- Improved the **Node Map** to provide guidance when an enterprise license or additional configuration is required. [#24271][#24271]
- Added the available storage capacity to the **Cluster Overview** metrics. [#24254][#24254]

<h3 id="v2.0-rc.1-bug-fixes">Bug Fixes</h3>

- Fixed a bug in [`RESTORE`](../v2.0/restore.html) that could lead to missing rows if the `RESTORE` was interrupted. [#24089][#24089]
- New nodes running CockroachDB v2.0 can now join clusters that contain nodes running v1.1. [#24257][#24257]
- Fixed a crash in [`cockroach zone ls`](../v2.0/configure-replication-zones.html) that would happen if a table with a zone config on it had been deleted but not yet garbage collected. (This was broken in v2.0 alphas, not in v1.1.) [#24180][#24180]
- Fixed a bug where zooming on the **Node Map** could break after zooming out to the maximum extent. [#24183][#24183]
- Fixed a crash while performing rolling restarts. [#24260][#24260]
- Fixed a bug where [privileges](../v2.0/privileges.html) were sometimes set incorrectly after upgrading from an older release. [#24393][#24393]

<h3 id="v2.0-rc.1-contributors">Contributors</h3>

This release includes 11 merged PRs by 10 authors. We would like to thank all contributors from the CockroachDB community, with special thanks to first-time contributor Vijay Karthik.

[#24089]: https://github.com/cockroachdb/cockroach/pull/24089
[#24180]: https://github.com/cockroachdb/cockroach/pull/24180
[#24183]: https://github.com/cockroachdb/cockroach/pull/24183
[#24254]: https://github.com/cockroachdb/cockroach/pull/24254
[#24257]: https://github.com/cockroachdb/cockroach/pull/24257
[#24260]: https://github.com/cockroachdb/cockroach/pull/24260
[#24271]: https://github.com/cockroachdb/cockroach/pull/24271
[#24393]: https://github.com/cockroachdb/cockroach/pull/24393
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

With the release of CockroachDB v2.0, we’ve made significant performance improvements, expanded our PostgreSQL compatibility by adding support for JSON (among other types), and provided functionality for managing multi-regional clusters in production.  

- Read more about these changes in the [v2.0 blog post](https://www.cockroachlabs.com/blog/cockroachdb-2-0-release/).
- Check out a [summary of the most significant user-facing changes](#summary).
- Then [upgrade to CockroachDB v2.0](../v2.0/upgrade-cockroach-version.html).

<h3 id="v2.0.0-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0.0.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0.0.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0.0.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.0.0-summary">Summary</h3>

This section summarizes the most significant user-facing changes in v2.0.0. For a complete list of features and changes, including bug fixes and performance improvements, see the [release notes](index.html#testing-releases) for previous testing releases.

- [Enterprise Features](#enterprise-features)
- [Core Features](#core-features)
- [Backward-Incompatible Changes](#backward-incompatible-changes)
- [Known Limitations](#known-limitations)
- [Documentation Updates](#documentation-updates)

<style>
    table td:first-child {
        min-width: 225px;
    }
</style>

<h3 id="v2.0.0-enterprise-features">Enterprise Features</h3>

These new features require an [enterprise license](../v2.0/enterprise-licensing.html). Register for a 30-day trial license [here](https://www.cockroachlabs.com/pricing/start-trial/).

Feature | Description
--------|------------
[Table Partitioning](../v2.0/partitioning.html) | Table partitioning gives you row-level control of how and where your data is stored. This feature can be used to keep data close to users, thereby reducing latency, or to store infrequently-accessed data on slower and cheaper storage, thereby reducing costs.
[Node Map](../v2.0/enable-node-map.html) | The **Node Map** in the Admin UI visualizes the geographical configuration of a multi-region cluster by plotting the node localities on a world map. This feature provides real-time cluster metrics, with the ability to drill down to individual nodes to monitor and troubleshoot cluster health and performance.
[Role-Based Access Control](../v2.0/roles.html) | Roles simplify access control by letting you assign SQL privileges to groups of users rather than to individuals.  
[Point-in-time Backup/Restore](../v2.0/restore.html#point-in-time-restore-new-in-v2-0) (Beta) | Data can now be restored as it existed at a specific point-in-time within the [revision history of a backup](../v2.0/backup.html#backups-with-revision-history-new-in-v2-0).<br><br>This is a **beta** feature. It is currently undergoing continued testing. Please [file a Github issue](../v2.0/file-an-issue.html) with us if you identify a bug.

<h3 id="v2.0.0-core-features">Core Features</h3>

These new features are freely available in the core version and do not require an enterprise license.

<h3 id="v2.0.0-sql">SQL</h3>

Feature | Description
--------|------------
[JSON Support](../v2.0/demo-json-support.html) | The [`JSONB`](../v2.0/jsonb.html) data type and [inverted indexes](../v2.0/inverted-indexes.html) give you the flexibility to store and efficiently query  semi-structured data.
[Sequences](../v2.0/create-sequence.html) | Sequences generate sequential integers according to defined rules. They are generally used for creating numeric primary keys.   
[SQL Audit Logging](../v2.0/sql-audit-logging.html) (Experimental)| SQL audit logging gives you detailed information about queries being executed against your system. This feature is especially useful when you want to log all queries that are run against a table containing personally identifiable information (PII).<br><br>This is an **experimental** feature. Its interface and output are subject to change.
[Common Table Expressions](../v2.0/common-table-expressions.html) | Common Table Expressions (CTEs) simplify the definition and use of subqueries. They can be used in combination with [`SELECT` clauses](../v2.0/select-clause.html) and [`INSERT`](../v2.0/insert.html), [`DELETE`](../v2.0/delete.html), [`UPDATE`](../v2.0/update.html) and [`UPSERT`](../v2.0/upsert.html) statements.
[Computed Columns](../v2.0/computed-columns.html) | Computed columns store data generated from other columns by an expression that's included in the column definition. They are especially useful in combination with [table partitioning](../v2.0/partitioning.html), [`JSONB`](../v2.0/jsonb.html) columns, and [secondary indexes](../v2.0/indexes.html).
[Foreign Key Actions](../v2.0/foreign-key.html#foreign-key-actions-new-in-v2-0) | The `ON UPDATE` and `ON DELETE` foreign key actions control what happens to a constrained column when the column it's referencing (the foreign key) is deleted or updated.
[Virtual Schemas](../v2.0/sql-name-resolution.html#logical-schemas-and-namespaces) | For PostgreSQL compatibility, CockroachDB now supports a three-level structure for names: database name > virtual schema name > object name. The new [`SHOW SCHEMAS`](../v2.0/show-schemas.html) statement can be used to list all virtual schemas for a given database.
[`IMPORT`](../v2.0/import.html) | The `IMPORT` statement now imports tabular data in a fully distributed fashion, and import jobs can now be [paused](../v2.0/pause-job.html), [resumed](../v2.0/resume-job.html), and [cancelled](../v2.0/cancel-job.html).
[`INET`](../v2.0/inet.html) | The `INET` data type stores an IPv4 or IPv6 address.
[`TIME`](../v2.0/time.html) | The `TIME` data type stores the time of day without a time zone.

<h3 id="v2.0.0-operations">Operations</h3>

Feature | Description
--------|------------
[Node Readiness Endpoint](../v2.0/monitoring-and-alerting.html#health-ready-1) | The new `/health?ready=1` endpoint returns an `HTTP 503 Service Unavailable` status response code with an error when a node is being decommissioned or is in the process of shutting down and is therefore not able to accept SQL connections and execute queries. This is especially useful for making sure [load balancers](../v2.0/recommended-production-settings.html#load-balancing) do not direct traffic to nodes that are live but not "ready", which is a necessary check during [rolling upgrades](../v2.0/upgrade-cockroach-version.html).
[Node Decommissioning](../v2.0/remove-nodes.html) | Nodes that have been decommissioned and stopped no longer appear in Admin UI and command-line interface metrics.
[Per-Replica Constraints in Replication Zones](../v2.0/configure-replication-zones.html#scope-of-constraints) | When defining a replication zone, unique constraints can be defined for each affected replica, meaning you can effectively pick the exact location of each replica.
[Replication Zone for "Liveness" Range](../v2.0/configure-replication-zones.html#create-a-replication-zone-for-a-system-range) | Clusters now come with a pre-defined replication zone for the "liveness" range, which contains the authoritative information about which nodes are live at any given time.
[Timeseries Data Controls](../v2.0/operational-faqs.html#can-i-reduce-or-disable-the-storage-of-timeseries-data-new-in-v2-0) | It is now possible to reduce the amount of timeseries data stored by a CockroachDB cluster or to disable the storage of timeseries data entirely. The latter is recommended only when using a third-party tool such as Prometheus for timeseries monitoring.

<h3 id="v2.0.0-backward-incompatible-changes">Backward-Incompatible Changes</h3>

Change | Description
-------|------------
Replication Zones | [Positive replication zone constraints](../v2.0/configure-replication-zones.html#replication-constraints) no longer work. Any existing positive constraints will be ignored. This change should not impact existing deployments since positive constraints have not been documented or supported for some time.
Casts from `BYTES` to `STRING` | Casting between these types now works the same way as in PostgreSQL. New functions `encode()` and `decode()` are available to replace the former functionality.
`NaN` Comparisons | `NaN` comparisons have been redefined to be compatible with PostgreSQL. `NaN` is now equal to itself and sorts before all other non-NULL values.
[`DROP USER`](../v2.0/drop-user.html) | It is no longer possible to drop a user with grants; the user's grants must first be [revoked](../v2.0/revoke.html).
[Cluster Settings](../v2.0/cluster-settings.html) | The obsolete `kv.gc.batch_size` cluster setting has been removed.
Environment Variables | The `COCKROACH_METRICS_SAMPLE_INTERVAL` environment variable has been removed. Users that relied on it should reduce the value for the `timeseries.resolution_10s.storage_duration` [cluster setting](../v2.0/cluster-settings.html) instead.
[Sequences](../v2.0/create-sequence.html) | As of the [v1.2-alpha.20171113](../releases/v1.2-alpha.20171113.html) release, how sequences are stored in the key-value layer changed. Sequences created prior to that release must therefore be dropped and recreated. Since a sequence cannot be dropped while it is being used in a column's [`DEFAULT`](../v2.0/default-value.html) expression, those expressions must be dropped before the sequence is dropped, and recreated after the sequence is recreated. The `setval()` function can be used to set the value of a sequence to what it was previously.
[Reserved Keywords](../v2.0/sql-grammar.html#reserved_keyword) | `ROLE`, `VIRTUAL`, and `WORK` have been added as reserved keywords and are no longer allowed as [identifiers](../v2.0/keywords-and-identifiers.html).

<h3 id="v2.0.0-known-limitations">Known Limitations</h3>

For information about limitations we've identified in CockroachDB v2.0, with suggested workarounds where applicable, see [Known Limitations](../v2.0/known-limitations.html).

<h3 id="v2.0.0-documentation-updates">Documentation Updates</h3>

Topic | Description
------|------------
[Production Checklist](../v2.0/recommended-production-settings.html) | This topic now provides cloud-specific hardware, security, load balancing, monitoring and alerting, and clock synchronization recommendations as well as expanded cluster topology guidance. Related [deployment tutorials](../v2.0/manual-deployment.html) have been enhanced with much of this information as well.
[Monitoring and Alerting](../v2.0/monitoring-and-alerting.html) | This new topic explains available tools for monitoring the overall health and performance of a cluster and critical events and metrics to alert on.
[Common Errors](../v2.0/common-errors.html) | This new topic helps you understand and resolve errors you might encounter, including retryable and ambiguous errors for transactions.
[SQL Performance](../v2.0/performance-best-practices-overview.html) | This new topic provides best practices for optimizing SQL performance in CockroachDB.
[SQL Standard Comparison](../v2.0/sql-feature-support.html) | This new topic lists which SQL standard features are supported, partially-supported, and unsupported by CockroachDB.
[Selection Queries](../v2.0/selection-queries.html) | This new topic explains the function and syntax of queries and operations involved in reading and processing data in CockroachDB, alongside more detailed information about [ordering query results](../v2.0/query-order.html), [limiting query results](../v2.0/limit-offset.html), [subqueries](../v2.0/subqueries.html), and [join expressions](../v2.0/joins.html).
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v2.0.1-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0.1.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0.1.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0.1.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.0.1-general-changes">General Changes</h3>

- The new `server.clock.persist_upper_bound_interval` [cluster setting](../v2.0/cluster-settings.html) can be used to guarantees monotonic wall time across server restarts. [#24624][#24624]
- The new `server.clock.forward_jump_check_enabled` [cluster setting](../v2.0/cluster-settings.html) can be used to cause nodes to panic on clock jumps. [#24606][#24606]
- Prevented execution errors reporting a missing `libtinfo.so.5` on Linux systems. [#24531][#24531]

<h3 id="v2.0.1-enterprise-edition-changes">Enterprise Edition Changes</h3>

- It is now possible to [`RESTORE`](../v2.0/restore.html) views when using the `into_db` option. [#24590][#24590] {% comment %}doc{% endcomment %}
- The new `jobs.registry.leniency` [cluster setting](../v2.0/cluster-settings.html) can be used to allow long-running [`IMPORT`](../v2.0/import.html) jobs to survive temporary node saturation. [#24505][#24505]
- Relaxed the limitation on using [`BACKUP`](../v2.0/backup.html) in a mixed version cluster. [#24515][#24515]

<h3 id="v2.0.1-sql-language-changes">SQL Language Changes</h3>

- Improved the error message returned on object creation when no current database is set or only invalid schemas are in the `search_path`. [#24812][#24812]
- The `current_schema()` and `current_schemas()` [built-in functions](../v2.0/functions-and-operators.html) now only consider valid schemas, like PostgreSQL does. [#24758][#24758]
- The experimental SQL features `SHOW TESTING_RANGES` and `ALTER ... TESTING_RELOCATE` have been renamed [`SHOW EXPERIMENTAL_RANGES`](../v2.0/show-experimental-ranges.html) and `ALTER ... EXPERIMENTAL_RELOCATE`. [#24699][#24699]
- `ROLE`, `VIRTUAL`, and `WORK` are no longer reserved keywords and can again be used as unrestricted names. [#24665][#24665] [#24549][#24549]

<h3 id="v2.0.1-command-line-changes">Command-Line Changes</h3>

- When [`cockroach gen haproxy`](../v2.0/generate-cockroachdb-resources.html) is run, if an `haproxy.cfg` file already exists in the current directory, it now gets fully overwritten instead of potentially resulting in an unusable config. [#24336][#24336] {% comment %}doc{% endcomment %}

<h3 id="v2.0.1-bug-fixes">Bug Fixes</h3>

- Fixed a bug when using fractional units (e.g., `0.5GiB`) for the `--cache` and `--sql-max-memory` flags of [`cockroach start`](../v2.0/start-a-node.html). [#24388][#24388]
- Fixed the handling of role membership lookups within transactions. [#24334][#24334]
- Fixed a bug causing some lookup join queries to report incorrect type errors. [#24825][#24825]
- `ALTER INDEX ... RENAME` can now be used on the primary index. [#24777][#24777]
- Fixed a panic involving [inverted index](../v2.0/inverted-indexes.html) queries using the `->` operator. [#24596][#24596]
- Fix a panic involving [inverted index](../v2.0/inverted-indexes.html) queries over `NULL`. [#24566][#24566]
- Fixed a bug preventing [inverted index](../v2.0/inverted-indexes.html) queries that have a root with a single entry or element but multiple children overall. [#24376][#24376]
- [`JSONB`](../v2.0/jsonb.html) values can now be cast to [`STRING`](../v2.0/string.html) values. [#24553][#24553]
- Prevented executing distributed SQL operations on draining nodes. [#23916][#23916]
- Fixed a panic caused by a `WHERE` condition that requires a column to equal a specific value and at the same time equal another column. [#24517][#24517]
- Fixed a panic caused by passing a `Name` type to `has_database_privilege()`. [#24270][#24270]
- Fixed a bug causing index backfills to fail in a loop after exceeding the GC TTL of their source table. [#24427][#24427]
- Fixed a panic caused by null config zones in diagnostics reporting. [#24526][#24526]

<h3 id="v2.0.1-performance-improvements">Performance Improvements</h3>

- Some [`SELECT`s](../v2.0/select-clause.html) with limits no longer require a second low-level scan, resulting in much faster execution. [#24796][#24796]

<h3 id="v2.0.1-contributors">Contributors</h3>

This release includes 39 merged PRs by 16 authors. Special thanks to Vijay Karthik from the CockroachDB community.

[#23916]: https://github.com/cockroachdb/cockroach/pull/23916
[#24221]: https://github.com/cockroachdb/cockroach/pull/24221
[#24270]: https://github.com/cockroachdb/cockroach/pull/24270
[#24334]: https://github.com/cockroachdb/cockroach/pull/24334
[#24336]: https://github.com/cockroachdb/cockroach/pull/24336
[#24376]: https://github.com/cockroachdb/cockroach/pull/24376
[#24388]: https://github.com/cockroachdb/cockroach/pull/24388
[#24427]: https://github.com/cockroachdb/cockroach/pull/24427
[#24505]: https://github.com/cockroachdb/cockroach/pull/24505
[#24515]: https://github.com/cockroachdb/cockroach/pull/24515
[#24517]: https://github.com/cockroachdb/cockroach/pull/24517
[#24526]: https://github.com/cockroachdb/cockroach/pull/24526
[#24531]: https://github.com/cockroachdb/cockroach/pull/24531
[#24549]: https://github.com/cockroachdb/cockroach/pull/24549
[#24553]: https://github.com/cockroachdb/cockroach/pull/24553
[#24566]: https://github.com/cockroachdb/cockroach/pull/24566
[#24590]: https://github.com/cockroachdb/cockroach/pull/24590
[#24596]: https://github.com/cockroachdb/cockroach/pull/24596
[#24606]: https://github.com/cockroachdb/cockroach/pull/24606
[#24624]: https://github.com/cockroachdb/cockroach/pull/24624
[#24665]: https://github.com/cockroachdb/cockroach/pull/24665
[#24699]: https://github.com/cockroachdb/cockroach/pull/24699
[#24758]: https://github.com/cockroachdb/cockroach/pull/24758
[#24777]: https://github.com/cockroachdb/cockroach/pull/24777
[#24796]: https://github.com/cockroachdb/cockroach/pull/24796
[#24812]: https://github.com/cockroachdb/cockroach/pull/24812
[#24825]: https://github.com/cockroachdb/cockroach/pull/24825
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v2.0.2-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0.2.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0.2.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0.2.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.0.2-general-changes">General Changes</h3>

- The header of new log files generated by [`cockroach start`](../v2.0/start-a-node.html) will now include the cluster ID once it has been determined. [#24982][#24982]
- The cluster ID is now reported with tag `[config]` in the first log file, not only when log files are rotated. [#24982][#24982]
- Stopped spamming the server logs with "error closing gzip response writer" messages. [#25108][#25108]

<h3 id="v2.0.2-sql-language-changes">SQL Language Changes</h3>

- Added more ways to specify an index name for statements that require one (e.g., `DROP INDEX`, `ALTER INDEX ... RENAME`, etc.), improving PostgreSQL compatibility. [#24817][#24817] {% comment %}doc{% endcomment %}
- Clarified the error message produced upon accessing a virtual schema with no database prefix (e.g., when `database` is not set). [#24809][#24809]
- `STORED` is no longer a reserved keyword and can again be used as an unrestricted name for databases, tables and columns. [#24864][#24864] {% comment %}doc{% endcomment %}
- Errors detected by `SHOW SYNTAX` are now tracked internally like other SQL errors. [#24900][#24900]
- [`IMPORT`](../v2.0/import.html) now supports hex-encoded byte literals for [`BYTES`](../v2.0/bytes.html) columns. [#25063][#25063] {% comment %}doc{% endcomment %}
- [Collated strings](../v2.0/collate.html) can now be used in `WHERE` clauses on indexed columns. [#25175][#25175] {% comment %}doc{% endcomment %}
- The Level and Type columns of [`EXPLAIN (VERBOSE)`](../v2.0/explain.html) results are now hidden; if they are needed, they can be `SELECT`ed explicitly. [#25206][#25206] {% comment %}doc{% endcomment %}

<h3 id="v2.0.2-admin-ui-changes">Admin UI Changes</h3>

- Added RocksDB compactions/flushes to storage graphs. [#25457][#25457]

<h3 id="v2.0.2-bug-fixes">Bug Fixes</h3>

- It is once again possible to use a simply qualified table name in qualified stars (e.g., `SELECT mydb.kv.* FROM kv`) for compatibility with CockroachDB v1.x. [#24842][#24842]
- Fixed a scenario in which a node could deadlock while starting up. [#24831][#24831]
- Ranges in partitioned tables now properly split to respect their configured maximum size. [#24912][#24912]
- Some kinds of schema change errors that were stuck in a permanent loop now correctly fail. [#25015][#25015]
- When [adding a column](../v2.0/add-column.html), CockroachDB now verifies that the column is referenced by no more than one foreign key. Existing tables with a column that is used by multiple foreign key constraints should be manually changed to have at most one foreign key per column. [#25079][#25079]
- CockroachDB now properly reports an error when using the internal-only functions `final_variance()` and `final_stddev()` instead of causing a crash. [#25218][#25218]
- The `constraint_schema` column in `information_schema.constraint_column_usage` now displays the constraint's schema instead of its catalog. [#25220][#25220]
- Fix a panic caused by certain queries containing `OFFSET` and `ORDER BY`. [#25238][#25238]
- `BEGIN; RELEASE SAVEPOINT` now returns an error instead of causing a crash. [#25251][#25251]
- Fixed a rare `segfault` that occurred when reading from an invalid memory location returned from C++. [#25361][#25361]
- Fixed a bug with `IS DISTINCT FROM` not returning `NULL` values that pass the condition in some cases. [#25339][#25339]
- Restarting a CockroachDB server on Windows no longer fails due to file system locks in the store directory. [#25439][#25439]
- Prevented the consistency checker from deadlocking. This would previously manifest itself as a steady number of replicas queued for consistency checking on one or more nodes and would resolve by restarting the affected nodes. [#25474][#25474]
- Fixed problems with [`IMPORT`](../v2.0/import.html) sometimes failing after node decommissioning. [#25307][#25307]
- Fixed a bug causing `PREPARE` to hang when run in the same transaction as a `CREATE TABLE` statement. [#24874][#24874]

<h3 id="v2.0.2-build-changes">Build Changes</h3>

- Build metadata, like the commit SHA and build time, is properly injected into the binary when using Go 1.10 and building from a symlink. [#25062][#25062]

<h3 id="v2.0.2-doc-updates">Doc Updates</h3>

- Improved the documentation of the `now()`, `current_time()`, `current_date()`, `current_timestamp()`, `clock_timestamp()`, `statement_timestamp()`, `cluster_logical_timestamp()`, and `age()` [built-in functions](../v2.0/functions-and-operators.html). [#25383][#25383] [#25145][#25145]

<h3 id="v2.0.2-contributors">Contributors</h3>

This release includes 42 merged PRs by 16 authors. We would like to thank the following contributors from the CockroachDB community:

- Garvit Juniwal
- Jingguo Yao

[#24809]: https://github.com/cockroachdb/cockroach/pull/24809
[#24817]: https://github.com/cockroachdb/cockroach/pull/24817
[#24831]: https://github.com/cockroachdb/cockroach/pull/24831
[#24842]: https://github.com/cockroachdb/cockroach/pull/24842
[#24864]: https://github.com/cockroachdb/cockroach/pull/24864
[#24874]: https://github.com/cockroachdb/cockroach/pull/24874
[#24900]: https://github.com/cockroachdb/cockroach/pull/24900
[#24912]: https://github.com/cockroachdb/cockroach/pull/24912
[#24982]: https://github.com/cockroachdb/cockroach/pull/24982
[#25015]: https://github.com/cockroachdb/cockroach/pull/25015
[#25062]: https://github.com/cockroachdb/cockroach/pull/25062
[#25063]: https://github.com/cockroachdb/cockroach/pull/25063
[#25079]: https://github.com/cockroachdb/cockroach/pull/25079
[#25108]: https://github.com/cockroachdb/cockroach/pull/25108
[#25145]: https://github.com/cockroachdb/cockroach/pull/25145
[#25175]: https://github.com/cockroachdb/cockroach/pull/25175
[#25206]: https://github.com/cockroachdb/cockroach/pull/25206
[#25218]: https://github.com/cockroachdb/cockroach/pull/25218
[#25220]: https://github.com/cockroachdb/cockroach/pull/25220
[#25238]: https://github.com/cockroachdb/cockroach/pull/25238
[#25251]: https://github.com/cockroachdb/cockroach/pull/25251
[#25307]: https://github.com/cockroachdb/cockroach/pull/25307
[#25339]: https://github.com/cockroachdb/cockroach/pull/25339
[#25361]: https://github.com/cockroachdb/cockroach/pull/25361
[#25383]: https://github.com/cockroachdb/cockroach/pull/25383
[#25439]: https://github.com/cockroachdb/cockroach/pull/25439
[#25457]: https://github.com/cockroachdb/cockroach/pull/25457
[#25474]: https://github.com/cockroachdb/cockroach/pull/25474
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v2.0.3-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0.3.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0.3.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0.3.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.0.3-general-changes">General Changes</h3>

- The new `compactor.threshold_bytes` and `max_record_age` [cluster settings](../v2.0/cluster-settings.html) can be used to configure the compactor. [#25458][#25458]
- The new `cluster.preserve_downgrade_option` [cluster setting](../v2.0/cluster-settings.html) makes it possible to preserve the option to downgrade after [performing a rolling upgrade to v2.1](../v2.1/upgrade-cockroach-version.html). [#25811][#25811]

<h3 id="v2.0.3-sql-language-changes">SQL Language Changes</h3>

- Prevented [`DROP TABLE`](../v2.0/drop-table.html) from using too much CPU. [#25852][#25852]

<h3 id="v2.0.3-command-line-changes">Command-Line Changes</h3>

- The [`cockroach sql`](../v2.0/use-the-built-in-sql-client.html) command no longer prompts for a password when a certificate is provided. [#26232][#26232]
- The [`cockroach quit`](../v2.0/stop-a-node.html) command now prints warning messages to the standard error stream, not to standard output. [#26163][#26163]

<h3 id="v2.0.3-bug-fixes">Bug Fixes</h3>

- Prevented the internal gossip network from being partitioned by making it much less likely that nodes in the network could forget about each other. [#25521][#25521]
- Prevented spurious `BudgetExceededErrors` for some queries that read a lot of JSON data from disk. [#25719][#25719]
- Fixed a crash in some cases when using a `GROUP BY` with `HAVING`. [#25654][#25654]
- Fixed a crash caused by inserting data into a table with [computed columns](../v2.0/computed-columns.html) that reference other columns that weren't present in the `INSERT` statement. [#25807][#25807]
- [`UPSERT`](../v2.0/upsert.html) is now properly able to write `NULL` values to every column in tables containing more than one [column family](../v2.0/column-families.html). [#26181][#26181]
- Fixed a bug where a long-running query running from one day to the next would not always produce the right value for `current_date()`. [#26413][#26413]
- Fixed a bug where [`cockroach quit`](../v2.0/stop-a-node.html) would erroneously fail even though the node already successfully shut down. [#26163][#26163]
- Rows larger than 8192 bytes are now supported by the "copy from" protocol. [#26641][#26641]
- Trying to "copy from stdin" into a table that doesn't exist no longer drops the connection. [#26641][#26641]
- Previously, expired compactions could stay in the queue forever. Now, they are removed when they expire. [#26659][#26659]

<h3 id="v2.0.3-performance-improvements">Performance Improvements</h3>

- The performance impact of dropping a large table has been substantially reduced. [#26615][#26615]

<h3 id="v2.0.3-doc-updates">Doc Updates</h3>

- Documented [special syntax forms](../v2.0/functions-and-operators.html#special-syntax-forms) of built-in SQL functions and [conditional and function-like operators](../v2.0/functions-and-operators.html#conditional-and-function-like-operators), and updated the [SQL operator order of precedence](../v2.0/functions-and-operators.html#operators). [#3192][#3192]
- Added best practices on [understanding and avoiding transaction contention](../v2.0/performance-best-practices-overview.html#understanding-and-avoiding-transaction-contention) and a related [FAQ](../v2.0/operational-faqs.html#why-would-increasing-the-number-of-nodes-not-result-in-more-operations-per-second). [#3156][#3156]
- Improved the documentation of [`AS OF SYSTEM TIME`](../v2.0/as-of-system-time.html). [#3155][#3155]
- Expanded the [manual deployment](../v2.0/manual-deployment.html) guides to cover running a sample workload against a cluster. [#3149][#3149]
- Added FAQs on [generating unique, slowly increasing sequential numbers](../v2.0/sql-faqs.html#how-do-i-generate-unique-slowly-increasing-sequential-numbers-in-cockroachdb) and [the differences between `UUID`, sequences, and `unique_rowid()`](../v2.0/sql-faqs.html#what-are-the-differences-between-uuid-sequences-and-unique_rowid). [#3104][#3104]

<h3 id="v2.0.3-contributors">Contributors</h3>

This release includes 19 merged PRs by 14 authors.

[#25458]: https://github.com/cockroachdb/cockroach/pull/25458
[#25521]: https://github.com/cockroachdb/cockroach/pull/25521
[#25654]: https://github.com/cockroachdb/cockroach/pull/25654
[#25719]: https://github.com/cockroachdb/cockroach/pull/25719
[#25807]: https://github.com/cockroachdb/cockroach/pull/25807
[#25811]: https://github.com/cockroachdb/cockroach/pull/25811
[#25852]: https://github.com/cockroachdb/cockroach/pull/25852
[#26163]: https://github.com/cockroachdb/cockroach/pull/26163
[#26181]: https://github.com/cockroachdb/cockroach/pull/26181
[#26232]: https://github.com/cockroachdb/cockroach/pull/26232
[#26403]: https://github.com/cockroachdb/cockroach/pull/26403
[#26413]: https://github.com/cockroachdb/cockroach/pull/26413
[#26615]: https://github.com/cockroachdb/cockroach/pull/26615
[#26641]: https://github.com/cockroachdb/cockroach/pull/26641
[#26659]: https://github.com/cockroachdb/cockroach/pull/26659
[#3104]: https://github.com/cockroachdb/docs/pull/3104
[#3149]: https://github.com/cockroachdb/docs/pull/3149
[#3155]: https://github.com/cockroachdb/docs/pull/3155
[#3156]: https://github.com/cockroachdb/docs/pull/3156
[#3192]: https://github.com/cockroachdb/docs/pull/3192
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v2.0.4-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0.4.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0.4.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0.4.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.0.4-sql-language-changes">SQL Language Changes</h3>

- [`CHECK`](../v2.0/check.html) constraints are now checked when updating a conflicting row in [`INSERT ... ON CONFLICT DO UPDATE`](../v2.0/insert.html#update-values-on-conflict) statements. [#26699][#26699] {% comment %}doc{% endcomment %}
- An error is now returned to the user instead of panicking when trying to add a column with a [`UNIQUE`](../v2.0/unique.html) constraint when that column's type is not indexable. [#26728][#26728] {% comment %}doc{% endcomment %}

<h3 id="v2.0.4-command-line-changes">Command-Line Changes</h3>

- CockroachDB now computes the correct number of replicas on down nodes. Therefore, when [decommissioning nodes](../v2.0/remove-nodes.html) via the [`cockroach node decommission`](../v2.0/view-node-details.html) command, the `--wait=all` option no longer hangs indefinitely when there are down nodes. As a result, the `--wait=live` option is no longer necessary and has been deprecated. [#27158][#27158]

<h3 id="v2.0.4-bug-fixes">Bug Fixes</h3>

- Fixed a typo on **Node Map** screen of the Admin UI. [#27129][#27129]
- Fixed a rare crash on node [decommissioning](../v2.0/remove-nodes.html). [#26717][#26717]
- Joins across two [interleaved tables](../v2.0/interleave-in-parent.html) no longer return incorrect results under certain circumstances when the equality columns aren't all part of the interleaved columns. [#26832][#26832]
- Successes of time series maintenance queue operations are no longer counted as errors in the **Metrics** dashboard of the Admin UI. [#26820][#26820]
- Prevented a situation in which ranges repeatedly fail to perform a split. [#26944][#26944]
- Fixed a crash that could occur when distributed `LIMIT` queries were run on a cluster with at least one unhealthy node. [#26953][#26953]
- Failed [`IMPORT`](../v2.0/import.html)s now begin to clean up partially imported data immediately and in a faster manner. [#26986][#26986]
- Alleviated a scenario in which a large number of uncommitted Raft commands could cause memory pressure at startup time. [#27024][#27024]
- The pg-specific syntax `SET transaction_isolation` now supports settings other than `SNAPSHOT`. This bug did not affect the standard SQL `SET TRANSACTION
  ISOLATION LEVEL`. [#27047][#27047]
- The `DISTINCT ON` clause is now reported properly in statement statistics. [#27222][#27222]
- Fixed a crash when trying to plan certain `UNION ALL` queries. [#27233][#27233]
- Commands are now abandoned earlier once a deadline has been reached. [#27215][#27215]
- Fixed a panic in [`IMPORT`](../v2.0/import.html) when creating a table using a sequence operation (e.g., `nextval()`) in a column's [DEFAULT](../v2.0/default-value.html) expression. [#27294][#27294]

<h3 id="v2.0.4-doc-updates">Doc Updates</h3>

- Added a tutorial on [benchmarking CockroachDB with TPC-C](../v2.0/performance-benchmarking-with-tpc-c.html). [#3281][#3281]
- Added `systemd` configs and instructions to [deployment tutorials](../v2.0/manual-deployment.html). [#3268][#3268]
- Updated the [Kubernetes tutorials](../v2.0/orchestrate-cockroachdb-with-kubernetes.html) to reflect that pods aren't "Ready" before init. [#3291][#3291]

<h3 id="v2.0.4-contributors">Contributors</h3>

This release includes 22 merged PRs by 17 authors. We would like to thank the following contributors from the CockroachDB community, with special thanks to first-time contributors Emmanuel.

- Emmanuel
- neeral

[#26699]: https://github.com/cockroachdb/cockroach/pull/26699
[#26717]: https://github.com/cockroachdb/cockroach/pull/26717
[#26728]: https://github.com/cockroachdb/cockroach/pull/26728
[#26820]: https://github.com/cockroachdb/cockroach/pull/26820
[#26832]: https://github.com/cockroachdb/cockroach/pull/26832
[#26944]: https://github.com/cockroachdb/cockroach/pull/26944
[#26953]: https://github.com/cockroachdb/cockroach/pull/26953
[#26986]: https://github.com/cockroachdb/cockroach/pull/26986
[#27024]: https://github.com/cockroachdb/cockroach/pull/27024
[#27047]: https://github.com/cockroachdb/cockroach/pull/27047
[#27129]: https://github.com/cockroachdb/cockroach/pull/27129
[#27158]: https://github.com/cockroachdb/cockroach/pull/27158
[#27215]: https://github.com/cockroachdb/cockroach/pull/27215
[#27222]: https://github.com/cockroachdb/cockroach/pull/27222
[#27233]: https://github.com/cockroachdb/cockroach/pull/27233
[#27294]: https://github.com/cockroachdb/cockroach/pull/27294
[#3268]: https://github.com/cockroachdb/docs/pull/3268
[#3281]: https://github.com/cockroachdb/docs/pull/3281
[#3291]: https://github.com/cockroachdb/docs/pull/3291
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v2.0.5-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0.5.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0.5.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0.5.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.0.5-sql-language-changes">SQL language changes</h3>

- The binary Postgres wire format is now supported for [`INTERVAL`](../v2.0/interval.html) values. [#28135][#28135] {% comment %}doc{% endcomment %}

<h3 id="v2.0.5-bug-fixes">Bug fixes</h3>

- [`IMPORT`](../v2.0/import.html) no longer silently converts `rn` characters in CSV files into `n`. [#28225][#28225]
- Fixed a bug that could cause the row following a deleted row to be skipped during [`BACKUP`](../v2.0/backup.html). [#28196][#28196]
- Limited the size of "batch groups" when committing a batch to RocksDB to avoid rare scenarios in which multi-gigabyte batch groups are created, which can cause a server to run out of memory when replaying the RocksDB log at startup. [#28009][#28009]
- Prevented unbounded growth of the Raft log caused by a loss of quorum. [#27868][#27868]
- CockroachDB now properly reports an error when a query attempts to use `ORDER BY` within a function argument list,
  which is an unsupported feature. [#25147][#25147]

<h3 id="v2.0.5-doc-updates">Doc updates</h3>

- Added a [Performance Tuning tutorial](../v2.0/performance-tuning.html) that demonstrates essential techniques for getting fast reads and writes in CockroachDB, starting with a single-region deployment and expanding into multiple regions. [#3378][#3378]
- Expanded the [Production Checklist](../v2.0/recommended-production-settings.html#networking) to cover a detailed explanation of network flags and scenarios and updated [production deployment tutorials](../v2.0/manual-deployment.html) to encourage the use of `--advertise-host` on node start. [#3352][#3352]
- Expanded the [Kubernetes tutorials](../v2.0/orchestrate-cockroachdb-with-kubernetes.html) to include setting up monitoring and alerting with Prometheus and Alertmanager. [#3370][#3370]
- Updated the [OpenSSL certificate tutorial](../v2.0/create-security-certificates-openssl.html) to allow multiple node certificates with the same subject. [#3423][#3423]

<h3 id="v2.0.5-contributors">Contributors</h3>

This release includes 9 merged PRs by 7 authors. We would like to thank the following contributor from the CockroachDB community:

- neeral

[#25147]: https://github.com/cockroachdb/cockroach/pull/25147
[#27868]: https://github.com/cockroachdb/cockroach/pull/27868
[#28009]: https://github.com/cockroachdb/cockroach/pull/28009
[#28135]: https://github.com/cockroachdb/cockroach/pull/28135
[#28196]: https://github.com/cockroachdb/cockroach/pull/28196
[#28225]: https://github.com/cockroachdb/cockroach/pull/28225
[#3378]: https://github.com/cockroachdb/docs/pull/3378
[#3352]: https://github.com/cockroachdb/docs/pull/3352
[#3370]: https://github.com/cockroachdb/docs/pull/3370
[#3385]: https://github.com/cockroachdb/docs/pull/3385
[#3423]: https://github.com/cockroachdb/docs/pull/3423
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v2.0.6-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0.6.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0.6.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0.6.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.0.6-security-bug-fix">Security bug fix</h3>

- Fixed a vulnerability in which TLS certificates were not validated correctly for internal RPC interfaces. This vulnerability could allow an unauthenticated user with network access to read and write to the cluster. [#30821](https://github.com/cockroachdb/cockroach/issues/30821)

<h3 id="v2.0.6-command-line-changes">Command-line changes</h3>

- The [`cockroach zone`](../v2.0/configure-replication-zones.html) command is now compatible with CockroachDB v2.1. However, note that `cockroach zone` is also *deprecated* in CockroachDB v2.1 in favor of `ALTER ... CONFIGURE ZONE` and `SHOW ZONE CONFIGURATION` statements to update and view replication zones. [#29632][#29632]

<h3 id="v2.0.6-bug-fixes">Bug fixes</h3>

- The [**Jobs** page](../v2.0/admin-ui-jobs-page.html) now sorts by **Creation Time** by default instead of by **User**. [#30429][#30429]
- Fixed out-of-memory errors caused by very large raft logs. [#28398][#28398] [#28526][#28526]
- Fixed a rare scenario where the value written for one system key was seen when another system key was read, leading to the violation of internal invariants. [#28798][#28798]
- Fixed a memory leak when contended queries time out. [#29100][#29100]
- Fixed a bug causing index creation to fail under rare circumstances. [#29203][#29203]
- Fixed a panic that occurred when not all values were present in a composite foreign key. [#30154][#30154]
- The `ON DELETE CASCADE` and `ON UPDATE CASCADE` [foreign key actions](../v2.0/foreign-key.html#foreign-key-actions-new-in-v2-0) no longer cascade through `NULL`s. [#30129][#30129]
- Fixed the occasional improper processing of the `WITH` operand with `IMPORT`/`BACKUP`/`RESTORE` and [common table expressions](../v2.0/common-table-expressions.html). [#30199][#30199]
- Transaction size limit errors are no longer returned for transactions that have already committed. [#30309][#30309]
- Fixed a potential infinite loop when the merge joiner encountered an error or cancellation. [#30380][#30380]
- This release includes the following fixes to the [`cockroach sql`](../v2.0/use-the-built-in-sql-client.html) command:
    - The command now properly prints a warning when a `?` character is mistakenly used to receive contextual help in a non-interactive session, instead of crashing. [#28325][#28325]
    - The command now works properly even when the `TERM` environment variable is not set. [#28614][#28614]
    - The commands are now properly able to customize the prompt with `~/.editrc` on Linux. [#28614][#28614]
    - The commands once again support copy-pasting special unicode character from other documents. [#28614][#28614]

<h3 id="v2.0.6-performance-improvements">Performance improvements</h3>

- Greatly improved the performance of catching up followers that are behind when Raft logs are large. [#28526][#28526]

<h3 id="v2.0.6-contributors">Contributors</h3>

This release includes 26 merged PRs by 12 authors.

[#28325]: https://github.com/cockroachdb/cockroach/pull/28325
[#28398]: https://github.com/cockroachdb/cockroach/pull/28398
[#28526]: https://github.com/cockroachdb/cockroach/pull/28526
[#28614]: https://github.com/cockroachdb/cockroach/pull/28614
[#28798]: https://github.com/cockroachdb/cockroach/pull/28798
[#29100]: https://github.com/cockroachdb/cockroach/pull/29100
[#29203]: https://github.com/cockroachdb/cockroach/pull/29203
[#29632]: https://github.com/cockroachdb/cockroach/pull/29632
[#30129]: https://github.com/cockroachdb/cockroach/pull/30129
[#30154]: https://github.com/cockroachdb/cockroach/pull/30154
[#30199]: https://github.com/cockroachdb/cockroach/pull/30199
[#30309]: https://github.com/cockroachdb/cockroach/pull/30309
[#30380]: https://github.com/cockroachdb/cockroach/pull/30380
[#30429]: https://github.com/cockroachdb/cockroach/pull/30429
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v2.0.7-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0.7.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0.7.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.0.7.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.0.7-docker-image">Docker image</h3>

{% include copy-clipboard.html %}
~~~shell
$ docker pull cockroachdb/cockroach:v2.0.7
~~~

<h3 id="v2.0.7-bug-fixes">Bug fixes</h3>

- Fixed a security vulnerability in which data could be leaked from a cluster, or tampered with in a cluster, in secure mode. [#30823][#30823]
- Fixed a bug where queries could get stuck for seconds or minutes, usually following node restarts. [#31350][#31350]
- CockroachDB no longer crashes due to a `SIGTRAP` error soon after startup on macOS Mojave. [#31522][#31522]
- Fixed bug causing transactions to unnecessarily hit a "too large" error. [#31827][#31827]
- Fixed a bug causing transactions to appear partially committed. Occasionally, CockroachDB claimed to have failed to commit a transaction when some (or all) of its writes were actually persisted. [#32223][#32223]
- Fixed a bug where entry application on Raft followers could fall behind entry application on the leader, causing stalls during splits. [#32601][#32601]
- CockroachDB now properly rejects queries that use an invalid function (e.g., an aggregation) in the `SET` clause of an [`UPDATE`](../v2.0/update.html) statement. [#32507][#32507]

<h3 id="v2.0.7-build-changes">Build changes</h3>

- CockroachDB can now be built from source on macOS 10.14 (Mojave). [#31310][#31310]

<h3 id="v2.0.7-contributors">Contributors</h3>

This release includes 11 merged PRs by 6 authors.

[#30823]: https://github.com/cockroachdb/cockroach/pull/30823
[#31310]: https://github.com/cockroachdb/cockroach/pull/31310
[#31350]: https://github.com/cockroachdb/cockroach/pull/31350
[#31522]: https://github.com/cockroachdb/cockroach/pull/31522
[#31827]: https://github.com/cockroachdb/cockroach/pull/31827
[#32223]: https://github.com/cockroachdb/cockroach/pull/32223
[#32507]: https://github.com/cockroachdb/cockroach/pull/32507
[#32601]: https://github.com/cockroachdb/cockroach/pull/32601
[#32636]: https://github.com/cockroachdb/cockroach/pull/32636
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v2.1.0-alpha.20180416-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-alpha.20180416.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-alpha.20180416.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-alpha.20180416.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.1.0-alpha.20180416-general-changes">General Changes</h3>

- Prevent execution errors reporting a missing `libtinfo.so.5` on Linux systems. [#24513][#24513]
- A CockroachDB process will now flush its logs upon receiving `SIGHUP`.
- Added a [cluster setting](../v2.1/cluster-settings.html) for HLC to be monotonic across restarts [#23744][#23744] {% comment %}doc{% endcomment %}
- Added a [cluster setting](../v2.1/cluster-settings.html) for HLC to panic on clock jumps. [#23717][#23717] {% comment %}doc{% endcomment %}
- Statistics on the types of errors encountered are now included in [diagnostics reporting](../v2.1/diagnostics-reporting.html). [#22912][#22912] {% comment %}doc{% endcomment %}

<h3 id="v2.1.0-alpha.20180416-enterprise-edition-changes">Enterprise Edition Changes</h3>

- It is now possible to [`RESTORE`](../v2.1/restore.html) views when using the `into_db` option. [#24555][#24555] {% comment %}doc{% endcomment %}
- Relaxed the limitation on using [`BACKUP`](../v2.1/backup.html) in a mixed version cluster. [#24493][#24493]
- `BACKUP` and `RESTORE` are more resilient to non-URL-safe characters in query string authentication parameters. [#24300][#24300]
- The new `jobs.registry.leniency` [cluster setting](../v2.1/cluster-settings.html) can be used to allow long-running import jobs to survive temporary node saturation. [#23913][#23913] {% comment %}doc{% endcomment %}
- Added configurable limits on the number of `BACKUP`/`RESTORE` requests each store will process. [#23517][#23517] {% comment %}doc{% endcomment %}

<h3 id="v2.1.0-alpha.20180416-sql-language-changes">SQL Language Changes</h3>

- Added configurable limits on the number of [`IMPORT`](../v2.1/import.html) requests each store will process. [#23517][#23517] {% comment %}doc{% endcomment %}
- The new `ALTER TABLE ... INJECT STATS` command injects table statistics from a JSON object (which can be obtained via `SHOW HISTOGRAM USING JSON`). [#24488][#24488] {% comment %}doc{% endcomment %}
- The new `SHOW STATISTICS USING JSON` variant of `SHOW STATISTICS` outputs table statistics as a JSON object; it can be used to extract statistics from clusters to reproduce issues. [#24488][#24488] {% comment %}doc{% endcomment %}
- `VIRTUAL` and `WORK` are no longer reserved keywords and can again be used as unrestricted names. [#24491][#24491] {% comment %}doc{% endcomment %}
- Added the `CANCEL SESSION` statement as well as an `IF EXISTS` variant to `CANCEL QUERY`. [#23861][#23861] {% comment %}doc{% endcomment %}
- Added a new `session_id` column to the result of `SHOW SESSIONS`. [#23861][#23861] {% comment %}doc{% endcomment %}
- Added support for the `information_schema.pg_expandarray()` function. [#24422][#24422]
- `DROP DATABASE` and `ALTER DATABASE ... RENAME` now prevent the removal of a database name if that database is set as the current database (`SET database` / `USE`) and the session setting `sql_safe_updates` is also set. [#24246][#24246] {% comment %}doc{% endcomment %}
- Added support for naming array types via the `_type` form and quoted type names. [#24190][#24190]
- Added the `quote_ident()` built-in function for increased PostgreSQL compatibility. [#24190][#24190]
- The behavior of `UPSERT` and `INSERT ... ON CONFLICT` when a `RETURNING` clause is present is now more consistent when an update touches the same row twice or more. This is a CockroachDB-specific extension. [#23698][#23698]
- Added the `statement_timeout` session variable. [#23399][#23399] {% comment %}doc{% endcomment %}
- The type determined for constant `NULL` expressions has been renamed to "unknown" for better compatibility with PostgreSQL. [#23142][#23142]
- Attempts to modify virtual schemas with DDL statements now fail with a clearer error message. [#23044][#23044]
- CockroachDB now recognizes the special syntax `SET SCHEMA <name>` as an alias for `SET search_path = <name>` for better compatibility with PostgreSQL. [#22997][#22997] {% comment %}doc{% endcomment %}
- Added support for `pg_sleep()` function. [#22804][#22804]
- Division by zero now returns the correct error code. [#22912][#22912]
- The GC of table data after a `DROP TABLE` now respects changes to the GC TTL interval specified in the relevant [replication zone](../v2.1/configure-replication-zones.html). [#22774][#22774]
- The full names of tables/views/sequences are now properly logged in the system event log. [#22842][#22842]
- `current_role` is now recognized as an alias for `current_user` for better compatibility with PostgreSQL. [#22828][#22828]
- The special identifier `current_catalog` is now supported as an alias for `current_database()` for better compatibility with PostgreSQL. [#22828][#22828]
- Added the `skip` option to the `IMPORT` command. [#23466][#23466] {% comment %}doc{% endcomment %}
- The service latency tracked for SQL statements now includes the wait time of the execute message in the input queue. [#22880][#22880]

<h3 id="v2.1.0-alpha.20180416-command-line-changes">Command-Line Changes</h3>

- The `cockroach gen autocomplete` command can now generate zsh-compatible completion files by passing `zsh` as an argument. [#24400][#24400] {% comment %}doc{% endcomment %}
- Removed the `cockroach load csv` subcommand. [#24319][#24319]
- When `cockroach gen haproxy` is run, if an `haproxy.cfg` file already exists in the current directory, it now gets fully overwritten instead of potentially resulting in an unusable config. [#24332][#24332] {% comment %}doc{% endcomment %}
- The new `cockroach demo` command opens a SQL shell connected to a fully in-memory store, and an empty database named `demo`. It's useful for users or developers who wish to test out Cockroach's SQL dialect. [#24259][#24259] {% comment %}doc{% endcomment %}
- Replication zones now allow for specifying an ordered list of lease placement preferences. Whenever possible, CockroachDB will attempt to put the lease for a range on a store that satisfies the first set of constraints. If that's not possible, it'll attempt to put the lease on a store that satisfies the second set of constraints, and so on. If none of the preferences can be  met, the lease will be placed as it is today. [#23202][#23202]
- Bracketed pastes are requested from the terminal emulator when possible. Pasting text into the interactive SQL shell is more reliable as a result. [#23116][#23116]
- The `cockroach sql` command now reminds you about `SET database = ...` and `CREATE DATABASE` if started with no current database. [#23077][#23077]
- Per-replica constraints in replication zones no longer have to add up to the total number of replicas in a range. If all replicas aren't specified, then the remaining replicas will be allowed on any store. [#23057][#23057] {% comment %}doc{% endcomment %}

<h3 id="v2.1.0-alpha.20180416-admin-ui-changes">Admin UI Changes</h3>

- Removed explicit back links on **Events** and **Nodes** pages. [#23904][#23904]
- Added a new debug page to display all [cluster settings](../v2.1/cluster-settings.html). [#24064][#24064]
- While the **Logs** page loads, a spinner is now shown instead of a "no data" message. [#23496][#23496]
- The **Logs** page now uses a monospaced font, properly renders newlines, and packs lines together more tightly. [#23496][#23496]
- The **Node Map** now shows how long a node has been dead. [#23255][#23255] {% comment %}doc{% endcomment %}

<h3 id="v2.1.0-alpha.20180416-bug-fixes">Bug Fixes</h3>

- Fixed a bug when using fractional units (e.g., `0.5GiB`) for the `--cache` and `--sql-max-memory` flags of `cockroach start`. [#24381][#24381]
- Fixed the handling of role membership lookups within transactions. [#24284][#24284]
- Fixed a panic around inverted index queries using the `->` operator. [#24576][#24576]
- `JSONB` values can now be cast to `STRING` values. [#24518][#24518]
- Fixed a panic caused by a `WHERE` condition that requires a column to equal a specific value and at the same time equal another column. [#24506][#24506]
- Fixed panics resulting from distributed execution of queries with OID types. [#24431][#24431]
- Fixed a bug where an expected transaction heartbeat failure aborted the transaction. [#24134][#24134]
- Fixed a bug causing index backfills to fail in a loop after exceeding the GC TTL of their source table. [#24293][#24293]
- Inverted index queries involving `NULL` are now properly handled. [#24251][#24251]
- Fixed a bug involving Npgsql and array values. [#24227][#24227]
- Fixed a panic caused by passing a `Name` type to `has_database_privilege()`. [#24252][#24252]
- On-disk checksums are now correctly generated during `IMPORT`. If there is existing data created by `IMPORT` that cannot be recreated, use `cockroach dump` to rewrite any affected tables. [#24128][#24128]
- Attempts to `RESTORE` to a time later than that covered by the latest `BACKUP` are now rejected. [#23727][#23727]
- Fixed a bug that could prevent disk space from being reclaimed. [#23136][#23136]
- Replication zone configs no longer accept negative numbers as input. [#22870][#22870]
- Fixed the occasional selection of sub-optimal rebalance targets. [#23036][#23036]
- The `cockroach dump` command is now able to dump sequences with non-default parameters. [#23051][#23051] {% comment %}doc{% endcomment %}
- `SHOW TABLES` is once again able to inspect virtual schemas. [#22994][#22994] {% comment %}doc{% endcomment %}
- The `CREATE TABLE .. AS` statement now properly supports placeholders in the subquery. [#23006][#23006]
- Fixed a bug where ranges could get stuck in an infinite "removal pending" state and would refuse to accept new writes. [#22916][#22916]
- Arrays now support `IS [NOT] DISTINCT FROM` operators. [#23005][#23005]
- Fixed incorrect index constraints on primary key columns on unique indexes. [#22977][#22977]
- Fixed a bug that prevented joins on interleaved tables with certain layouts from working. [#22920][#22920]
- The conversion from `INTERVAL` to `FLOAT` now properly returns the number of seconds in the interval. [#22892][#22892]
- Fix a panic cause sometimes by Flush protocol messages. [#24119][#24119]

<h3 id="v2.1.0-alpha.20180416-performance-improvements">Performance Improvements</h3>

- Deleting many rows at once now consumes less memory. [#22991][#22991]
- Fewer disk writes are required for each database write, increasing write throughput and reducing
  write latency. [#22317][#22317]
- Reduced the amount of memory used during garbage collection of old versions. [#24209][#24209]
- Greatly improved the performance of the `DISTINCT` operator when its inputs are known to be sorted. [#24438][#24438] [#24148][#24148]
- Write requests that result in no-ops are no longer proposed through Raft. [#24345][#24345]

<h3 id="v2.1.0-alpha.20180416-build-changes">Build Changes</h3>

- Release binaries are now built with enough debug information to produce useful CPU profiles and backtraces. [#24296][#24296]

<h3 id="v2.1.0-alpha.20180416-contributors">Contributors</h3>

This release includes 732 merged PRs by 38 authors. We would like to thank the following contributors from the CockroachDB community:

- Mahmoud Al-Qudsi
- Vijay Karthik (first-time contributor)

[#21095]: https://github.com/cockroachdb/cockroach/pull/21095
[#22317]: https://github.com/cockroachdb/cockroach/pull/22317
[#22766]: https://github.com/cockroachdb/cockroach/pull/22766
[#22767]: https://github.com/cockroachdb/cockroach/pull/22767
[#22774]: https://github.com/cockroachdb/cockroach/pull/22774
[#22804]: https://github.com/cockroachdb/cockroach/pull/22804
[#22819]: https://github.com/cockroachdb/cockroach/pull/22819
[#22828]: https://github.com/cockroachdb/cockroach/pull/22828
[#22842]: https://github.com/cockroachdb/cockroach/pull/22842
[#22849]: https://github.com/cockroachdb/cockroach/pull/22849
[#22870]: https://github.com/cockroachdb/cockroach/pull/22870
[#22880]: https://github.com/cockroachdb/cockroach/pull/22880
[#22886]: https://github.com/cockroachdb/cockroach/pull/22886
[#22892]: https://github.com/cockroachdb/cockroach/pull/22892
[#22911]: https://github.com/cockroachdb/cockroach/pull/22911
[#22912]: https://github.com/cockroachdb/cockroach/pull/22912
[#22916]: https://github.com/cockroachdb/cockroach/pull/22916
[#22919]: https://github.com/cockroachdb/cockroach/pull/22919
[#22920]: https://github.com/cockroachdb/cockroach/pull/22920
[#22953]: https://github.com/cockroachdb/cockroach/pull/22953
[#22962]: https://github.com/cockroachdb/cockroach/pull/22962
[#22968]: https://github.com/cockroachdb/cockroach/pull/22968
[#22977]: https://github.com/cockroachdb/cockroach/pull/22977
[#22979]: https://github.com/cockroachdb/cockroach/pull/22979
[#22982]: https://github.com/cockroachdb/cockroach/pull/22982
[#22991]: https://github.com/cockroachdb/cockroach/pull/22991
[#22994]: https://github.com/cockroachdb/cockroach/pull/22994
[#22997]: https://github.com/cockroachdb/cockroach/pull/22997
[#22998]: https://github.com/cockroachdb/cockroach/pull/22998
[#23005]: https://github.com/cockroachdb/cockroach/pull/23005
[#23006]: https://github.com/cockroachdb/cockroach/pull/23006
[#23017]: https://github.com/cockroachdb/cockroach/pull/23017
[#23036]: https://github.com/cockroachdb/cockroach/pull/23036
[#23044]: https://github.com/cockroachdb/cockroach/pull/23044
[#23045]: https://github.com/cockroachdb/cockroach/pull/23045
[#23051]: https://github.com/cockroachdb/cockroach/pull/23051
[#23057]: https://github.com/cockroachdb/cockroach/pull/23057
[#23070]: https://github.com/cockroachdb/cockroach/pull/23070
[#23077]: https://github.com/cockroachdb/cockroach/pull/23077
[#23082]: https://github.com/cockroachdb/cockroach/pull/23082
[#23104]: https://github.com/cockroachdb/cockroach/pull/23104
[#23114]: https://github.com/cockroachdb/cockroach/pull/23114
[#23116]: https://github.com/cockroachdb/cockroach/pull/23116
[#23126]: https://github.com/cockroachdb/cockroach/pull/23126
[#23136]: https://github.com/cockroachdb/cockroach/pull/23136
[#23142]: https://github.com/cockroachdb/cockroach/pull/23142
[#23162]: https://github.com/cockroachdb/cockroach/pull/23162
[#23169]: https://github.com/cockroachdb/cockroach/pull/23169
[#23175]: https://github.com/cockroachdb/cockroach/pull/23175
[#23178]: https://github.com/cockroachdb/cockroach/pull/23178
[#23183]: https://github.com/cockroachdb/cockroach/pull/23183
[#23197]: https://github.com/cockroachdb/cockroach/pull/23197
[#23202]: https://github.com/cockroachdb/cockroach/pull/23202
[#23204]: https://github.com/cockroachdb/cockroach/pull/23204
[#23211]: https://github.com/cockroachdb/cockroach/pull/23211
[#23221]: https://github.com/cockroachdb/cockroach/pull/23221
[#23230]: https://github.com/cockroachdb/cockroach/pull/23230
[#23233]: https://github.com/cockroachdb/cockroach/pull/23233
[#23235]: https://github.com/cockroachdb/cockroach/pull/23235
[#23252]: https://github.com/cockroachdb/cockroach/pull/23252
[#23255]: https://github.com/cockroachdb/cockroach/pull/23255
[#23258]: https://github.com/cockroachdb/cockroach/pull/23258
[#23260]: https://github.com/cockroachdb/cockroach/pull/23260
[#23261]: https://github.com/cockroachdb/cockroach/pull/23261
[#23265]: https://github.com/cockroachdb/cockroach/pull/23265
[#23282]: https://github.com/cockroachdb/cockroach/pull/23282
[#23292]: https://github.com/cockroachdb/cockroach/pull/23292
[#23298]: https://github.com/cockroachdb/cockroach/pull/23298
[#23301]: https://github.com/cockroachdb/cockroach/pull/23301
[#23334]: https://github.com/cockroachdb/cockroach/pull/23334
[#23363]: https://github.com/cockroachdb/cockroach/pull/23363
[#23370]: https://github.com/cockroachdb/cockroach/pull/23370
[#23399]: https://github.com/cockroachdb/cockroach/pull/23399
[#23409]: https://github.com/cockroachdb/cockroach/pull/23409
[#23412]: https://github.com/cockroachdb/cockroach/pull/23412
[#23418]: https://github.com/cockroachdb/cockroach/pull/23418
[#23441]: https://github.com/cockroachdb/cockroach/pull/23441
[#23463]: https://github.com/cockroachdb/cockroach/pull/23463
[#23465]: https://github.com/cockroachdb/cockroach/pull/23465
[#23466]: https://github.com/cockroachdb/cockroach/pull/23466
[#23479]: https://github.com/cockroachdb/cockroach/pull/23479
[#23496]: https://github.com/cockroachdb/cockroach/pull/23496
[#23512]: https://github.com/cockroachdb/cockroach/pull/23512
[#23516]: https://github.com/cockroachdb/cockroach/pull/23516
[#23517]: https://github.com/cockroachdb/cockroach/pull/23517
[#23521]: https://github.com/cockroachdb/cockroach/pull/23521
[#23530]: https://github.com/cockroachdb/cockroach/pull/23530
[#23533]: https://github.com/cockroachdb/cockroach/pull/23533
[#23541]: https://github.com/cockroachdb/cockroach/pull/23541
[#23546]: https://github.com/cockroachdb/cockroach/pull/23546
[#23550]: https://github.com/cockroachdb/cockroach/pull/23550
[#23560]: https://github.com/cockroachdb/cockroach/pull/23560
[#23572]: https://github.com/cockroachdb/cockroach/pull/23572
[#23573]: https://github.com/cockroachdb/cockroach/pull/23573
[#23617]: https://github.com/cockroachdb/cockroach/pull/23617
[#23618]: https://github.com/cockroachdb/cockroach/pull/23618
[#23637]: https://github.com/cockroachdb/cockroach/pull/23637
[#23657]: https://github.com/cockroachdb/cockroach/pull/23657
[#23678]: https://github.com/cockroachdb/cockroach/pull/23678
[#23687]: https://github.com/cockroachdb/cockroach/pull/23687
[#23698]: https://github.com/cockroachdb/cockroach/pull/23698
[#23717]: https://github.com/cockroachdb/cockroach/pull/23717
[#23720]: https://github.com/cockroachdb/cockroach/pull/23720
[#23725]: https://github.com/cockroachdb/cockroach/pull/23725
[#23727]: https://github.com/cockroachdb/cockroach/pull/23727
[#23729]: https://github.com/cockroachdb/cockroach/pull/23729
[#23744]: https://github.com/cockroachdb/cockroach/pull/23744
[#23753]: https://github.com/cockroachdb/cockroach/pull/23753
[#23760]: https://github.com/cockroachdb/cockroach/pull/23760
[#23768]: https://github.com/cockroachdb/cockroach/pull/23768
[#23787]: https://github.com/cockroachdb/cockroach/pull/23787
[#23797]: https://github.com/cockroachdb/cockroach/pull/23797
[#23803]: https://github.com/cockroachdb/cockroach/pull/23803
[#23804]: https://github.com/cockroachdb/cockroach/pull/23804
[#23810]: https://github.com/cockroachdb/cockroach/pull/23810
[#23813]: https://github.com/cockroachdb/cockroach/pull/23813
[#23814]: https://github.com/cockroachdb/cockroach/pull/23814
[#23824]: https://github.com/cockroachdb/cockroach/pull/23824
[#23825]: https://github.com/cockroachdb/cockroach/pull/23825
[#23834]: https://github.com/cockroachdb/cockroach/pull/23834
[#23841]: https://github.com/cockroachdb/cockroach/pull/23841
[#23843]: https://github.com/cockroachdb/cockroach/pull/23843
[#23844]: https://github.com/cockroachdb/cockroach/pull/23844
[#23851]: https://github.com/cockroachdb/cockroach/pull/23851
[#23852]: https://github.com/cockroachdb/cockroach/pull/23852
[#23861]: https://github.com/cockroachdb/cockroach/pull/23861
[#23869]: https://github.com/cockroachdb/cockroach/pull/23869
[#23876]: https://github.com/cockroachdb/cockroach/pull/23876
[#23904]: https://github.com/cockroachdb/cockroach/pull/23904
[#23913]: https://github.com/cockroachdb/cockroach/pull/23913
[#23926]: https://github.com/cockroachdb/cockroach/pull/23926
[#23930]: https://github.com/cockroachdb/cockroach/pull/23930
[#23934]: https://github.com/cockroachdb/cockroach/pull/23934
[#23973]: https://github.com/cockroachdb/cockroach/pull/23973
[#23995]: https://github.com/cockroachdb/cockroach/pull/23995
[#24017]: https://github.com/cockroachdb/cockroach/pull/24017
[#24031]: https://github.com/cockroachdb/cockroach/pull/24031
[#24039]: https://github.com/cockroachdb/cockroach/pull/24039
[#24044]: https://github.com/cockroachdb/cockroach/pull/24044
[#24049]: https://github.com/cockroachdb/cockroach/pull/24049
[#24064]: https://github.com/cockroachdb/cockroach/pull/24064
[#24074]: https://github.com/cockroachdb/cockroach/pull/24074
[#24083]: https://github.com/cockroachdb/cockroach/pull/24083
[#24100]: https://github.com/cockroachdb/cockroach/pull/24100
[#24119]: https://github.com/cockroachdb/cockroach/pull/24119
[#24128]: https://github.com/cockroachdb/cockroach/pull/24128
[#24134]: https://github.com/cockroachdb/cockroach/pull/24134
[#24148]: https://github.com/cockroachdb/cockroach/pull/24148
[#24161]: https://github.com/cockroachdb/cockroach/pull/24161
[#24164]: https://github.com/cockroachdb/cockroach/pull/24164
[#24178]: https://github.com/cockroachdb/cockroach/pull/24178
[#24190]: https://github.com/cockroachdb/cockroach/pull/24190
[#24192]: https://github.com/cockroachdb/cockroach/pull/24192
[#24196]: https://github.com/cockroachdb/cockroach/pull/24196
[#24209]: https://github.com/cockroachdb/cockroach/pull/24209
[#24227]: https://github.com/cockroachdb/cockroach/pull/24227
[#24239]: https://github.com/cockroachdb/cockroach/pull/24239
[#24241]: https://github.com/cockroachdb/cockroach/pull/24241
[#24246]: https://github.com/cockroachdb/cockroach/pull/24246
[#24251]: https://github.com/cockroachdb/cockroach/pull/24251
[#24252]: https://github.com/cockroachdb/cockroach/pull/24252
[#24253]: https://github.com/cockroachdb/cockroach/pull/24253
[#24259]: https://github.com/cockroachdb/cockroach/pull/24259
[#24284]: https://github.com/cockroachdb/cockroach/pull/24284
[#24293]: https://github.com/cockroachdb/cockroach/pull/24293
[#24296]: https://github.com/cockroachdb/cockroach/pull/24296
[#24300]: https://github.com/cockroachdb/cockroach/pull/24300
[#24319]: https://github.com/cockroachdb/cockroach/pull/24319
[#24332]: https://github.com/cockroachdb/cockroach/pull/24332
[#24345]: https://github.com/cockroachdb/cockroach/pull/24345
[#24354]: https://github.com/cockroachdb/cockroach/pull/24354
[#24373]: https://github.com/cockroachdb/cockroach/pull/24373
[#24381]: https://github.com/cockroachdb/cockroach/pull/24381
[#24390]: https://github.com/cockroachdb/cockroach/pull/24390
[#24400]: https://github.com/cockroachdb/cockroach/pull/24400
[#24422]: https://github.com/cockroachdb/cockroach/pull/24422
[#24431]: https://github.com/cockroachdb/cockroach/pull/24431
[#24438]: https://github.com/cockroachdb/cockroach/pull/24438
[#24488]: https://github.com/cockroachdb/cockroach/pull/24488
[#24491]: https://github.com/cockroachdb/cockroach/pull/24491
[#24493]: https://github.com/cockroachdb/cockroach/pull/24493
[#24506]: https://github.com/cockroachdb/cockroach/pull/24506
[#24510]: https://github.com/cockroachdb/cockroach/pull/24510
[#24513]: https://github.com/cockroachdb/cockroach/pull/24513
[#24518]: https://github.com/cockroachdb/cockroach/pull/24518
[#24555]: https://github.com/cockroachdb/cockroach/pull/24555
[#24576]: https://github.com/cockroachdb/cockroach/pull/24576
[#24594]: https://github.com/cockroachdb/cockroach/pull/24594
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

This release includes usability enhancements, PostgreSQL compatibility improvements, and general bug fixes.

{{site.data.alerts.callout_success}}The <a href="../v2.1/export.html"><code>EXPORT CSV</code></a> feature in this release allows you to quickly get data out of CockroachDB and into a format that can be ingested by downstream systems. Unlike the existing ability to export data via a <code>SELECT</code> that outputs to a CSV file, <code>EXPORT</code> uses all nodes in the cluster to parallelize CSV creation for significantly faster processing. Note that this is a prototype feature, so we’d love for you to try it out and create issues if you’d like any enhancements or find any bugs.{{site.data.alerts.end}}

<h3 id="v2.1.0-alpha.20180507-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-alpha.20180507.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-alpha.20180507.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-alpha.20180507.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.1.0-alpha.20180507-general-changes">General Changes</h3>

- Added a `/_status/diagnostics/{node_id}` debug endpoint, which returns an [anonymized diagnostics report](../v2.1/diagnostics-reporting.html). [#24813][#24813] [#24997][#24997]{% comment %}doc{% endcomment %}
- The header of new log files generated by [`cockroach start`](../v2.1/start-a-node.html) now includes the cluster ID once it has been determined. [#24926][#24926]
- The cluster ID is now reported with tag `[config]` in the first log file, not only when log files are rotated. [#24993][#24993]
- Stopped spamming the server logs with "error closing gzip response writer" messages. [#25106][#25106]
- Enforced stricter validation of [security certificates](../v2.1/create-security-certificates.html). [#24687][#24687]

<h3 id="v2.1.0-alpha.20180507-enterprise-edition-changes">Enterprise Edition Changes</h3>

- Added alpha support for [`EXPORT CSV`](../v2.1/export.html). [#25075][#25075]

<h3 id="v2.1.0-alpha.20180507-sql-language-changes">SQL Language Changes</h3>

- `ROLE` and `STORED` are no longer reserved keywords and can again be used as unrestricted names for databases, tables and columns. [#24629][#24629] [#24554][#24554] {% comment %}doc{% endcomment %}
- The experimental SQL features `SHOW TESTING_RANGES` and `ALTER ... TESTING_RELOCATE` have been renamed `SHOW EXPERIMENTAL_RANGES` and `ALTER ... EXPERIMENTAL_RELOCATE`. [#24696][#24696] {% comment %}doc{% endcomment %}
- The `current_schema()` and `current_schemas()` built-in functions now only consider valid schemas, like PostgreSQL does. [#24718][#24718]
- Clarified the error message produced upon accessing a virtual schema with no database prefix (e.g., when `database` is not set). [#24772][#24772]
- Improved the error message returned on object creation when no current database is set or only invalid schemas are in the `search_path`. [#24770][#24770]
- Added more ways to specify an index name for statements that require one (e.g., [`DROP INDEX`](../v2.1/drop-index.html), [`ALTER INDEX ... RENAME`](../v2.1/rename-index.html), etc.), improving PostgreSQL compatibility. [#24778][#24778] {% comment %}doc{% endcomment %}
- Errors detected by `SHOW SYNTAX` are now tracked internally like other SQL errors. [#24819][#24819]
- Added support for `lpad()` and `rpad()` string functions. [#24891][#24891] {% comment %}doc{% endcomment %}
- [Computed columns](../v2.1/computed-columns.html) can now be added with [`ALTER TABLE ... ADD COLUMN`](../v2.1/add-column.html). [#24464][#24464] {% comment %}doc{% endcomment %}
- Added the `TIMETZ` column type and datum. [#24343][#24343]
- The [`EXPLAIN`](../v2.1/explain.html) output for [`UPDATE`](../v2.1/update.html) statements now also report [`CHECK`](../v2.1/check.html) expressions, for consistency with `INSERT`. [#23373][#23373] {% comment %}doc{% endcomment %}
- Reduced the amount of RAM used when a query performs further computations on the result of a mutation statement (`INSERT`/`DELETE`/`UPSERT`/`UPSERT`) combined with `RETURNING`. [#23373][#23373]
- Added the 'base64' option to the `encode()` and `decode()` built-in functions. [#25002][#25002] {% comment %}doc{% endcomment %}
- [`IMPORT`](../v2.1/import.html) now supports hex-encoded byte literals for [`BYTES`](../v2.1/bytes.html) columns. [#24859][#24859]
- Set Returning Functions (SRF) can now be accessed using `(SRF).x`, where `x` is the name of a column returned from the SRF or a `*`. For example, `SELECT (information_schema._pg_expandarray(ARRAY['c', 'b', 'a'])).x` and `SELECT (information_schema._pg_expandarray(ARRAY['c', 'b', 'a'])).*` are now both valid. Also, the naming of the resulting columns from SRFs now provide more information about the resulting tuple. [#24832][#24832] {% comment %}doc{% endcomment %}
- Removed the `METADATA`, `QUALIFY`, and `EXPRS` options for [`EXPLAIN`](../v2.1/explain.html). [#25101][#25101] {% comment %}doc{% endcomment %}
- CockroachDB now properly reports an error when a query attempts to use `ORDER BY` within a function argument list, which is an unsupported feature. [#25146][#25146]
- `AS OF SYSTEM TIME` queries now accept a negative interval to produce a relative time from the statement's `statement_timestamp()` time. [#24768][#24768]

<h3 id="v2.1.0-alpha.20180507-command-line-changes">Command-Line Changes</h3>

- The `cockroach demo` command now shows the Admin UI URL on startup. [#24738][#24738]
- [`cockroach dump`](../v2.1/sql-dump.html) now supports self and cyclic foreign key references. [#24716][#24716] {% comment %}doc{% endcomment %}

<h3 id="v2.1.0-alpha.20180507-admin-ui-changes">Admin UI Changes</h3>

- Updated the window title for each page to make browser history more useful. [#24634][#24634]
- Changed the label "bytes" to "used capacity" in the **Nodes** table. [#24843][#24843]
- The names of dropped schema objects on `DROP DATABASE ... CASCADE` are now displayed. [#24852][#24852]
- The **Cluster Overview** now adjusts to take the advantage of the size of the screen. [#24849][#24849]
- Fixed a bug where the **Node List** could get cut off. [#24849][#24849]
- Improve responsiveness of the Prometheus metrics endpoint on very overloaded nodes. [#25083][#25083]
- Time series charts now display data points at more consistent timestamps. [#24856][#24856]

<h3 id="v2.1.0-alpha.20180507-bug-fixes">Bug Fixes</h3>

- Converted a panic related to an unsupported type to an error. [#24688][#24688]
- [`ALTER INDEX ... RENAME`](../v2.1/rename-index.html) can now be used on the primary index. [#24776][#24776] {% comment %}doc{% endcomment %}
- Fixed a scenario in which a node could deadlock while starting up. [#24808][#24808]
- It is once again possible to use a simply qualified table name in qualified stars (e.g., `SELECT mydb.kv.* FROM kv`) for compatibility with CockroachDB v1.x. [#24811][#24811] {% comment %}doc{% endcomment %}
- Ranges in [partitioned tables](../v2.1/partitioning.html) now properly split to respect their configured maximum size. [#24896][#24896]
- Fixed a bug where `SELECT * FROM [DELETE FROM ... RETURNING ...] LIMIT 1` or `WITH d AS (DELETE FROM ... RETURNING ...) SELECT * FROM d LIMIT 1` would fail to properly delete some rows. The is fixed for `SELECT * FROM [INSERT ... RETURNING ...] LIMIT 1` or `WITH d AS (INSERT ... RETURNING ...) SELECT * FROM d LIMIT 1` as well. [#23373][#23373]
- Removed a limitation where `UPDATE`, `INSERT`, or `UPSERT` would fail if the number of modified rows was too large. [#23373][#23373] {% comment %}doc{% endcomment %}
- [`UPSERT`](../v2.1/upsert.html) now properly reports the count of modified rows when `RETURNING` is not specified. [#23373][#23373]
- When [adding a column](../v2.1/add-column.html), CockroachDB now verifies that the column is reference by no more than one foreign key. Existing tables with a column that is used by multiple foreign key constraints should be manually changed to have at most one foreign key per column. [#25060][#25060] {% comment %}doc{% endcomment %}
- Corrected the documentation for the `age()` [built-in function](../v2.1/functions-and-operators.html). [#25132][#25132] {% comment %}doc{% endcomment %}
- Fixed a bug cuasing `PREPARE` to hang when run in the same transaction as a `CREATE TABLE` statement. [#23816][#23816]

<h3 id="v2.1.0-alpha.20180507-performance-improvements">Performance Improvements</h3>

- Improved the performance of hash joins. [#24577][#24577]
- Aggregations are now streamed based on the ordering on the `GROUP BY` columns. [#24113][#24113]
- Some `SELECT`s with limits no longer require a second low-level scan, resulting in much faster execution. [#24790][#24790]

<h3 id="v2.1.0-alpha.20180507-build-changes">Build Changes</h3>

- Build metadata, like the commit SHA and build time, is now properly injected into the binary when using Go 1.10 and building from a symlink. [#25008][#25008]

<h3 id="v2.1.0-alpha.20180507-doc-updates">Doc Updates</h3>

- Added a [performance tuning guide](../v2.1/kubernetes-performance.html) for running CockroachDB in Kubernetes. [#2896][#2896]
- Clarified [replication zone levels](../v2.1/configure-replication-zones.html#replication-zone-levels) and added a warning about increasing the default replication factor without increasing the replication factor of system ranges. [#2901][#2901]
- Updated the [`cockroach start`](../v2.1/start-a-node.html) documentation to recommend decimal notation for flags that accept percentages. [#3056][#3056]
- Documented how to use the [`server.shutdown.drain_wait`](../v2.1/operational-faqs.html#how-do-i-prepare-for-planned-node-maintenance) cluster setting to prevent a load balancer from sending client traffic to a node about to be shut down. [#2903][#2903]
- Documented the [`intervalstyle`](../v2.1/set-vars.html) session variable. [#2904][#2904]
- Added documentation on the [`SHOW EXPERIMENTAL_RANGES`](../v2.1/show-experimental-ranges.html) statement. [#2930][#2930]
- Update the [Node Map](../v2.1/enable-node-map.html#location-coordinates-for-reference) documentation to provide location coordinates for AWS, Azure, and Google Cloud. [#2942][#2942]
- Updated the `SPLIT AT` documentation to show how to [split a table with a composite primary key](../v2.1/split-at.html#split-a-table-with-a-composite-primary-key). [#2950][#2950]
- Documented the `--temp-dir` flag for [`cockroach start`](../v2.1/start-a-node.html). [#2955][#2955]
- Expanded the [Production Checklist](../v2.1/recommended-production-settings.html) to recommend a higher replication factor when using local disks rather than a cloud providers' network-attached disks that are often replicated underneath the covers. [#3001][#3001]

<h3 id="v2.1.0-alpha.20180507-contributors">Contributors</h3>

This release includes 224 merged PRs by 37 authors. We would like to thank the following contributors from the CockroachDB community, with special thanks to first-time contributors Bob Potter, Karan Vaidya, dchenk, and phelanm.

- Bob Potter
- Brett Snyder
- Jingguo Yao
- Karan Vaidya
- Vijay Karthik
- dchenk
- phelanm

[#2896]: https://github.com/cockroachdb/docs/pull/2896
[#2901]: https://github.com/cockroachdb/docs/pull/2901
[#2903]: https://github.com/cockroachdb/docs/pull/2903
[#2904]: https://github.com/cockroachdb/docs/pull/2904
[#2930]: https://github.com/cockroachdb/docs/pull/2930
[#2942]: https://github.com/cockroachdb/docs/pull/2942
[#2950]: https://github.com/cockroachdb/docs/pull/2950
[#2955]: https://github.com/cockroachdb/docs/pull/2955
[#3001]: https://github.com/cockroachdb/docs/pull/3001
[#3056]: https://github.com/cockroachdb/docs/pull/3056
[#19693]: https://github.com/cockroachdb/cockroach/pull/19693
[#23373]: https://github.com/cockroachdb/cockroach/pull/23373
[#23816]: https://github.com/cockroachdb/cockroach/pull/23816
[#24113]: https://github.com/cockroachdb/cockroach/pull/24113
[#24343]: https://github.com/cockroachdb/cockroach/pull/24343
[#24464]: https://github.com/cockroachdb/cockroach/pull/24464
[#24554]: https://github.com/cockroachdb/cockroach/pull/24554
[#24577]: https://github.com/cockroachdb/cockroach/pull/24577
[#24629]: https://github.com/cockroachdb/cockroach/pull/24629
[#24634]: https://github.com/cockroachdb/cockroach/pull/24634
[#24687]: https://github.com/cockroachdb/cockroach/pull/24687
[#24688]: https://github.com/cockroachdb/cockroach/pull/24688
[#24696]: https://github.com/cockroachdb/cockroach/pull/24696
[#24716]: https://github.com/cockroachdb/cockroach/pull/24716
[#24718]: https://github.com/cockroachdb/cockroach/pull/24718
[#24738]: https://github.com/cockroachdb/cockroach/pull/24738
[#24768]: https://github.com/cockroachdb/cockroach/pull/24768
[#24770]: https://github.com/cockroachdb/cockroach/pull/24770
[#24772]: https://github.com/cockroachdb/cockroach/pull/24772
[#24776]: https://github.com/cockroachdb/cockroach/pull/24776
[#24778]: https://github.com/cockroachdb/cockroach/pull/24778
[#24790]: https://github.com/cockroachdb/cockroach/pull/24790
[#24799]: https://github.com/cockroachdb/cockroach/pull/24799
[#24808]: https://github.com/cockroachdb/cockroach/pull/24808
[#24811]: https://github.com/cockroachdb/cockroach/pull/24811
[#24813]: https://github.com/cockroachdb/cockroach/pull/24813
[#24819]: https://github.com/cockroachdb/cockroach/pull/24819
[#24832]: https://github.com/cockroachdb/cockroach/pull/24832
[#24843]: https://github.com/cockroachdb/cockroach/pull/24843
[#24849]: https://github.com/cockroachdb/cockroach/pull/24849
[#24852]: https://github.com/cockroachdb/cockroach/pull/24852
[#24856]: https://github.com/cockroachdb/cockroach/pull/24856
[#24859]: https://github.com/cockroachdb/cockroach/pull/24859
[#24891]: https://github.com/cockroachdb/cockroach/pull/24891
[#24896]: https://github.com/cockroachdb/cockroach/pull/24896
[#24926]: https://github.com/cockroachdb/cockroach/pull/24926
[#24993]: https://github.com/cockroachdb/cockroach/pull/24993
[#24997]: https://github.com/cockroachdb/cockroach/pull/24997
[#25002]: https://github.com/cockroachdb/cockroach/pull/25002
[#25008]: https://github.com/cockroachdb/cockroach/pull/25008
[#25057]: https://github.com/cockroachdb/cockroach/pull/25057
[#25060]: https://github.com/cockroachdb/cockroach/pull/25060
[#25075]: https://github.com/cockroachdb/cockroach/pull/25075
[#25082]: https://github.com/cockroachdb/cockroach/pull/25082
[#25083]: https://github.com/cockroachdb/cockroach/pull/25083
[#25101]: https://github.com/cockroachdb/cockroach/pull/25101
[#25106]: https://github.com/cockroachdb/cockroach/pull/25106
[#25132]: https://github.com/cockroachdb/cockroach/pull/25132
[#25146]: https://github.com/cockroachdb/cockroach/pull/25146
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

This release includes general usability enhancements and bug fixes as well as:

- [**Easier data migrations from MySQL**](../v2.1/import-data.html): The `IMPORT` feature now supports a subset of MySQL export formats. We will continue to make migrations easier in the alphas leading up to 2.1.

Please give this feature and the ones below a try. If you see something that can be improved, we’d love to hear from you on [GitHub](https://github.com/cockroachdb/cockroach/issues) or the [Forum](https://forum.cockroachlabs.com/).

<h3 id="v2.1.0-alpha.20180604-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-alpha.20180604.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-alpha.20180604.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-alpha.20180604.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.1.0-alpha.20180604-general-changes">General Changes</h3>

- New clusters and existing clusters [upgraded](../v2.1/upgrade-cockroach-version.html) to this version of CockroachDB will include two new empty databases, `defaultdb` and `postgres`. The `defaultdb` database is automatically used for clients that connect without a current database set (e.g., without a database component in the connection URL). The `postgres` database is provided for compatibility with PostgreSQL client frameworks that require it to exist when the database server has been freshly installed. Both new databases behave like any other regular database and, if deemed unnecessary, can be [manually deleted](../v2.1/drop-database.html). [#24735][#24735] {% comment %}doc{% endcomment %}
- The new `compactor.threshold_bytes` and `max_record_age` [cluster settings](../v2.1/cluster-settings.html) can be used to configure the compactor. [#25397][#25397] {% comment %}doc{% endcomment %}
- After [upgrading a cluster](../v2.1/upgrade-cockroach-version.html) from v2.0 to v2.1, it is no longer necessary to manually finalize the upgrade. [#24987][#24987]

<h3 id="v2.1.0-alpha.20180604-sql-language-changes">SQL Language Changes</h3>

- [Collated strings](../v2.1/collate.html) can now be used in `WHERE` clauses on indexed columns. [#25169][#25169]
- The new `CANCEL QUERIES` and `CANCEL SESSIONS` variants of the [`CANCEL QUERY`](../v2.1/cancel-query.html) and [`CANCEL SESSION`](../v2.1/cancel-session.html) statements cancel multiple queries or sessions at once. Likewise, the new `CANCEL/PAUSE/RESUME JOBS` variants of the [`CANCEL JOB`](../v2.1/cancel-job.html), [`PAUSE JOB`](../v2.1/pause-job.html), and [`RESUME JOB`](../v2.1/resume-job.html) statements operate on multiple jobs at once. [#25157][#25157] {% comment %}doc{% endcomment %}
- The `Level` and `Type` columns of [`EXPLAIN (VERBOSE)`](../v2.1/explain.html) results are now hidden; if they are needed, they can be `SELECT`ed explicitly. [#25172][#25172] {% comment %}doc{% endcomment %}
- All users now automatically belong to the new `public` role. This role makes it possible to grant privileges on an object for all users at once, e.g., `GRANT SELECT ON mytable TO public;`. [#25099][#25099]
- The binary Postgres wire format is now supported for [`INTERVAL`](../v2.1/interval.html) values. [#25242][#25242] {% comment %}doc{% endcomment %}
- Prevented [`DROP TABLE`](../v2.1/drop-table.html) from using too much CPU. [#24983][#24983]
- Improved [`SET TRACING`](../v2.1/set-vars.html#set-tracing) so that a client can more easily trace around a statement that produce errors. [#25262][#25262]
- Added the `generate_subscripts()` [built-in function](../v2.1/functions-and-operators.html). [#25295][#25295] {% comment %}doc{% endcomment %}
- Improved the documentation of the `now()`, `current_time()`, `current_date()`, `current_timestamp()`,
`clock_timestamp()`, `statement_timestamp()`, and `cluster_logical_timestamp()` [built-in functions](../v2.1/functions-and-operators.html). [#25327][#25327] {% comment %}doc{% endcomment %}
- Running [`TRUNCATE`](../v2.1/truncate.html) without `CASCADE` on a table that has interleaved table children now returns an error instead of proceeding to delete both tables. [#25265][#25265] {% comment %}doc{% endcomment %}
- Tuples can now be labeled using the new grammar `((1,2,3) AS a,b,c)`. [#25283][#25283] {% comment %}doc{% endcomment %}
- Labeled tuples can now be accessed using their labels, but doing so requires an extra level of parentheses, e.g., `SELECT (((1,'2',true) AS a, b, c)).a`. [#25810][#25810]
- [`SHOW TRACE FOR <stmt>`](../v2.1/) now runs `<stmt>` through the [DistSQL](../v2.1/architecture/sql-layer.html#distsql) execution engine, if supported. `SHOW KV TRACE FOR <stmt>` still runs `<stmt>` through local SQL. [#24709][#24709] {% comment %}doc{% endcomment %}
- Introduced two experimental scalar operators, `IFERROR()` and `ISERROR()`. They may be documented for public use in the future. [#25304][#25304]
- The `server.time_until_store_dead` [cluster setting](../v2.1/cluster-settings.html) can no longer be set to less than `1m15s`. Setting it to lower values was previously allowed but not safe, since it can cause bad rebalancing behavior. [#25598][#25598] {% comment %}doc{% endcomment %}
- [`CANCEL JOB`](../v2.1/cancel-job.html) can now be executed on long-running schema change jobs, causing them to terminate early and roll back. [#25571][#25571] {% comment %}doc{% endcomment %}
- Added the `array_to_string()` [built-in function](../v2.1/functions-and-operators.html). [#25681][#25681] {% comment %}doc{% endcomment %}
- [`IMPORT`](../v2.1/import.html) now supports MySQL's tabbed `OUTFILE` format. [#25615][#25615] {% comment %}doc{% endcomment %}
- [`IMPORT`](../v2.1/import.html) now supports `mysqldump` SQL as a data format. [#25783][#25783] {% comment %}doc{% endcomment %}
- The experimental lookup join feature now supports secondary indexes. [#25628][#25628] {% comment %}doc{% endcomment %}
- Stored, computed columns can now be converted to regular columns by running `ALTER TABLE t ALTER COLUMN c DROP STORED`. [#25819][#25819] {% comment %}doc{% endcomment %}
- The experimental lookup join feature now supports left outer joins. [#25644][#25644] {% comment %}doc{% endcomment %}
- [`TRUNCATE`](../v2.1/truncate.html) commands are now logged in the event log. [#25868][#25868]
- Improved [`IMPORT`](../v2.1/import.html) error messages. [#26032][#26032]

<h3 id="v2.1.0-alpha.20180604-command-line-changes">Command-Line Changes</h3>

- Changing or removing a [replication zone](../v2.1/configure-replication-zones.html) config now causes events to be written to the system event log. [#25250][#25250]
- Messages that refer to an invoked command (e.g., "Failed running start") are no longer confused by the presence of flags before the first argument (e.g., `cockroach --no-color start`). [#25246][#25246]
- Typos in [replication zone constraints](../v2.1/configure-replication-zones.html#replication-constraints) are now validated. When they are set, required attributes and localities must match at least one node in the cluster. [#25421][#25421] {% comment %}doc{% endcomment %}

<h3 id="v2.1.0-alpha.20180604-admin-ui-changes">Admin UI Changes</h3>

- Running unit tests for the Admin UI now depends on the installation of Google Chrome. [#25140][#25140]
- Added RocksDB compactions/flushes to Storage graphs. [#25428][#25428]
- Added a Stores report page, including encryption status. [#26040][#26040]
- Removed time selectors and tier labels during [Node Map](../v2.1/enable-node-map.html) setup. [#25280][#25280]

<h3 id="v2.1.0-alpha.20180604-bug-fixes">Bug Fixes</h3>

- The [`cockroach sql`](../v2.1/use-the-built-in-sql-client.html) command once again does not prompt for a password when a certificate is provided. [#25252][#25252]
- Corrected the behavior of `GREATEST` and `LEAST` built-ins when they have a leading `NULL` argument. [#25882][#25882]
- CockroachDB now properly reports an error when using the internal-only functions `final_variance()` and `final_stddev()` instead of causing a crash. [#25158][#25158]
- The `constraint_schema` column in `information_schema.constraint_column_usage` now displays the constraint's schema instead of its catalog. [#25190][#25190] {% comment %}doc{% endcomment %}
- `BEGIN; RELEASE SAVEPOINT;` now returns and error instead of causing a crash. [#25247][#25247]
- Fix a bug where the sessions endpoint on the Admin UI would return an error when there was an active transaction. [#25249][#25249]
- Corrected the CockroachDB-specific, currently undocumented conversion from [`INTERVAL`](../v2.1/interval.html) to/from numeric types. [#25257][#25257]
- Fixed problems with [`IMPORT`](../v2.1/import.html) sometimes failing after node decommissioning. [#25162][#25162]
- Prevented queries that use placeholders for tuple types from causing a crash. [#25269][#25269]
- Fixed a rare `segfault` that occurred when reading from an invalid memory location returned from C++. [#25347][#25347]
- Fixed a bug with `IS DISTINCT FROM` not returning `NULL` values that pass the condition in some cases. [#25336][#25336]
- Restarting a CockroachDB server on Windows no longer fails due to file system locks in the store directory. [#25267][#25267]
- Prevented the consistency checker from deadlocking. This would previously manifest itself as a steady number of replicas queued for consistency checking on one or more nodes and would resolve by restarting the affected nodes. [#25456][#25456]
- Fixed a crash in some cases when using a `GROUP BY` with `HAVING`. [#25574][#25574]
- Fixed a nil pointer dereference when importing data containing date values. [#25661][#25661]
- Numeric literal values no longer silently lose information after a certain precision. [#25597][#25597]
- Prevented spurious `BudgetExceededErrors` for some queries that read a lot of [`JSON`](../v2.1/jsonb.html) data from disk. [#25679][#25679]
- Fixed query errors in some cases involving a `NULL` constant that is cast to a specific type. [#25735][#25735]
- Fixed a crash when trying to plan certain `UNION ALL` queries. [#25747][#25747]
- Fixed a crash caused by inserting data into a table with [computed columns](../v2.1/computed-columns.html) that reference other columns not present in the `INSERT` statement. [#25682][#25682]
- `EXPLAIN (DISTSQL)` now properly reports that plans containing subqueries cannot be run through the [DistSQL execution engine](../v2.1/architecture/sql-layer.html#distsql). [#25618][#25618]
- CockroachDB no longer crashes if the control statements `CANCEL`/`PAUSE`/`RESUME` are given values using special PostgreSQL types (e.g., `NAME`). [#25844][#25844]
- Fixed a panic when using unordered aggregations. [#26042][#26042]
- Fixed an error caused by [`INET`](../v2.1/inet.html) constants in some rare cases. [#26086][#26086]
- Fixed an error caused by empty arrays in some cases. [#26090][#26090]
- Previously, expired compactions could stay in the queue forever. Now, they are removed when they expire. [#26039][#26039]
- Fixed problems using tables with [foreign key](../v2.1/foreign-key.html) or [interleaved](../v2.1/interleave-in-parent.html) references to other tables when the tables were created in the same transaction. [#25786][#25786]

<h3 id="v2.1.0-alpha.20180604-doc-updates">Doc Updates</h3>

- Documented [special syntax forms](../v2.1/functions-and-operators.html#special-syntax-forms) of built-in SQL functions and [conditional and function-like operators](../v2.1/functions-and-operators.html#conditional-and-function-like-operators), and updated the [SQL operator order of precedence](../v2.1/functions-and-operators.html#operators). [#3192][#3192]
- Added best practices on [understanding and avoiding transaction contention](../v2.1/performance-best-practices-overview.html#understanding-and-avoiding-transaction-contention) and a related [FAQ](../v2.1/operational-faqs.html#why-would-increasing-the-number-of-nodes-not-result-in-more-operations-per-second). [#3156][#3156]
- Improved the documentation of [`AS OF SYSTEM TIME`](../v2.1/as-of-system-time.html). [#3155][#3155]
- Expanded the [manual deployment](../v2.1/manual-deployment.html) guides to cover running a sample workload against a cluster. [#3149][#3149]
- Documented the [`TIMETZ`](../v2.1/time.html) data type. [#3102][#3102]
- Added FAQs on [generating unique, slowly increasing sequential numbers](../v2.1/sql-faqs.html#how-do-i-generate-unique-slowly-increasing-sequential-numbers-in-cockroachdb) and [the differences between `UUID`, sequences, and `unique_rowid()`](../v2.1/sql-faqs.html#what-are-the-differences-between-uuid-sequences-and-unique_rowid). [#3104][#3104]

<h3 id="v2.1.0-alpha.20180604-contributors">Contributors</h3>

This release includes 304 merged PRs by 38 authors. We would like to thank the following contributors from the CockroachDB community, with special thanks to first-time contributors Nishant Gupta, wabada, and yuzefovich.

- Garvit Juniwal
- Gustav Paul
- Karan Vaidya
- Nishant Gupta
- Vijay Karthik
- wabada
- Yahor Yuzefovich

[#24709]: https://github.com/cockroachdb/cockroach/pull/24709
[#24735]: https://github.com/cockroachdb/cockroach/pull/24735
[#24956]: https://github.com/cockroachdb/cockroach/pull/24956
[#24983]: https://github.com/cockroachdb/cockroach/pull/24983
[#24987]: https://github.com/cockroachdb/cockroach/pull/24987
[#25099]: https://github.com/cockroachdb/cockroach/pull/25099
[#25140]: https://github.com/cockroachdb/cockroach/pull/25140
[#25157]: https://github.com/cockroachdb/cockroach/pull/25157
[#25158]: https://github.com/cockroachdb/cockroach/pull/25158
[#25162]: https://github.com/cockroachdb/cockroach/pull/25162
[#25169]: https://github.com/cockroachdb/cockroach/pull/25169
[#25172]: https://github.com/cockroachdb/cockroach/pull/25172
[#25190]: https://github.com/cockroachdb/cockroach/pull/25190
[#25211]: https://github.com/cockroachdb/cockroach/pull/25211
[#25242]: https://github.com/cockroachdb/cockroach/pull/25242
[#25246]: https://github.com/cockroachdb/cockroach/pull/25246
[#25247]: https://github.com/cockroachdb/cockroach/pull/25247
[#25249]: https://github.com/cockroachdb/cockroach/pull/25249
[#25250]: https://github.com/cockroachdb/cockroach/pull/25250
[#25252]: https://github.com/cockroachdb/cockroach/pull/25252
[#25257]: https://github.com/cockroachdb/cockroach/pull/25257
[#25262]: https://github.com/cockroachdb/cockroach/pull/25262
[#25265]: https://github.com/cockroachdb/cockroach/pull/25265
[#25267]: https://github.com/cockroachdb/cockroach/pull/25267
[#25269]: https://github.com/cockroachdb/cockroach/pull/25269
[#25280]: https://github.com/cockroachdb/cockroach/pull/25280
[#25283]: https://github.com/cockroachdb/cockroach/pull/25283
[#25295]: https://github.com/cockroachdb/cockroach/pull/25295
[#25304]: https://github.com/cockroachdb/cockroach/pull/25304
[#25327]: https://github.com/cockroachdb/cockroach/pull/25327
[#25336]: https://github.com/cockroachdb/cockroach/pull/25336
[#25347]: https://github.com/cockroachdb/cockroach/pull/25347
[#25397]: https://github.com/cockroachdb/cockroach/pull/25397
[#25421]: https://github.com/cockroachdb/cockroach/pull/25421
[#25428]: https://github.com/cockroachdb/cockroach/pull/25428
[#25456]: https://github.com/cockroachdb/cockroach/pull/25456
[#25539]: https://github.com/cockroachdb/cockroach/pull/25539
[#25571]: https://github.com/cockroachdb/cockroach/pull/25571
[#25574]: https://github.com/cockroachdb/cockroach/pull/25574
[#25597]: https://github.com/cockroachdb/cockroach/pull/25597
[#25598]: https://github.com/cockroachdb/cockroach/pull/25598
[#25615]: https://github.com/cockroachdb/cockroach/pull/25615
[#25618]: https://github.com/cockroachdb/cockroach/pull/25618
[#25628]: https://github.com/cockroachdb/cockroach/pull/25628
[#25644]: https://github.com/cockroachdb/cockroach/pull/25644
[#25661]: https://github.com/cockroachdb/cockroach/pull/25661
[#25679]: https://github.com/cockroachdb/cockroach/pull/25679
[#25681]: https://github.com/cockroachdb/cockroach/pull/25681
[#25682]: https://github.com/cockroachdb/cockroach/pull/25682
[#25735]: https://github.com/cockroachdb/cockroach/pull/25735
[#25747]: https://github.com/cockroachdb/cockroach/pull/25747
[#25768]: https://github.com/cockroachdb/cockroach/pull/25768
[#25769]: https://github.com/cockroachdb/cockroach/pull/25769
[#25783]: https://github.com/cockroachdb/cockroach/pull/25783
[#25786]: https://github.com/cockroachdb/cockroach/pull/25786
[#25810]: https://github.com/cockroachdb/cockroach/pull/25810
[#25819]: https://github.com/cockroachdb/cockroach/pull/25819
[#25844]: https://github.com/cockroachdb/cockroach/pull/25844
[#25868]: https://github.com/cockroachdb/cockroach/pull/25868
[#25882]: https://github.com/cockroachdb/cockroach/pull/25882
[#26032]: https://github.com/cockroachdb/cockroach/pull/26032
[#26039]: https://github.com/cockroachdb/cockroach/pull/26039
[#26040]: https://github.com/cockroachdb/cockroach/pull/26040
[#26042]: https://github.com/cockroachdb/cockroach/pull/26042
[#26061]: https://github.com/cockroachdb/cockroach/pull/26061
[#26086]: https://github.com/cockroachdb/cockroach/pull/26086
[#26090]: https://github.com/cockroachdb/cockroach/pull/26090
[#3102]: https://github.com/cockroachdb/docs/pull/3102
[#3104]: https://github.com/cockroachdb/docs/pull/3104
[#3149]: https://github.com/cockroachdb/docs/pull/3149
[#3155]: https://github.com/cockroachdb/docs/pull/3155
[#3156]: https://github.com/cockroachdb/docs/pull/3156
[#3192]: https://github.com/cockroachdb/docs/pull/3192
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

For our July 2nd alpha release, in addition to PostgreSQL compatibility enhancements, general usability improvements, and bug fixes, we want to highlight a few major benefits:

- [**Get visibility into query performance with the Statements pages**](../v2.1/admin-ui-statements-page.html) - The Web UI can now surface statistics about queries along with visualizations to help identify application problems quickly.
- [**Get up and running faster with `IMPORT MYSQLDUMP/PGDUMP`**](../v2.1/import-data.html) - It is now much easier to transfer existing databases to CockroachDB.
- [**Improved data security with Encryption at Rest (enterprise)**](../v2.1/encryption.html) - With this enhancement, you can now encrypt your CockroachDB files on disk, rotate keys, and monitor encryption status without having to make changes to your application code.
- [**Stream changes to Kafka with CDC (enterprise)**](../v2.1/change-data-capture.html) - CockroachDB can now stream changes into Apache Kafka to support downstream processing such as reporting, caching, or full-text indexing.
- **Secure your Web UI with User Authentication** - A login page can now be enabled to control who can access the Web UI in secure clusters.

Please give these features and the ones below a try. If you see something that can be improved, we’d love to hear from you on [GitHub](https://github.com/cockroachdb/cockroach/issues) or the [Forum](https://forum.cockroachlabs.com/).

<h3 id="v2.1.0-alpha.20180702-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-alpha.20180702.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-alpha.20180702.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-alpha.20180702.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.1.0-alpha.20180702-backward-incompatible-changes">Backward-incompatible changes</h3>

- CockroachDB now uses a different algorithm to generate column names for complex expressions in [`SELECT`](../v2.1/select-clause.html) clauses when `AS` is not used. The results are more compatible with PostgreSQL but may appear different to client applications. This does not impact most uses of SQL, where the rendered expressions are sufficiently simple (simple function applications, reuses of existing columns) or when `AS` is used explicitly. [#26550][#26550]
- The output columns for the statement [`SHOW CONSTRAINTS`](../v2.1/show-constraints.html) were changed. The previous interface was experimental; the new interface will now be considered stable. [#26478][#26478] {% comment %}doc{% endcomment %}

<h3 id="v2.1.0-alpha.20180702-general-changes">General changes</h3>

- Metrics can now be sent to a Graphite endpoint specified using the `external.graphite.endpoint` [cluster setting](../v2.1/cluster-settings.html). The `external.graphite.interval` setting controls the interval at which this happens. [#25227][#25227]
- Added a [config file and instructions](https://github.com/cockroachdb/cockroach/blob/master/cloud/kubernetes/performance/cockroachdb-daemonset-secure.yaml) for running CockroachDB in secure mode in a Kubernetes DaemonSet. [#26816][#26816] {% comment %}doc{% endcomment %}

<h3 id="v2.1.0-alpha.20180702-enterprise-edition-changes">Enterprise edition changes</h3>

- The new `SHOW BACKUP RANGES` and `SHOW BACKUP FILES` statements show details about the ranges and files, respectively, that comprise a backup. [#26450][#26450] {% comment %}doc{% endcomment %}

<h3 id="v2.1.0-alpha.20180702-sql-language-changes">SQL language changes</h3>

- If a computed column's expression results in an error, the name of the computed column is now added to the error returned to the user. This makes it easier for users to understand why an otherwise valid operation might fail. [#26054][#26054]
- Implemented the minus operation between a JSON Object and a text array. [#26183][#26183] {% comment %}doc{% endcomment %}
- Fixed some error messages to more closely match PostgreSQL error messages, including the corresponding PostgreSQL
  error codes. [#26290][#26290]
- Added an empty `pg_stat_activity` virtual table for compatibility with DBeaver and other SQL clients that require it. [#26249][#26249]
- The new `EXPLAIN (DISTSQL, ANALYZE)` statement annotates DistSQL execution plans with collected execution statistics. [#25849][#25849] {% comment %}doc{% endcomment %}
- [`IMPORT`](../v2.1/import.html) now supports the PostgreSQL `COPY` format. [#26334][#26334] {% comment %}doc{% endcomment %}
- The output of [`SHOW SESSIONS`](../v2.1/show-sessions.html) now includes the number of currently allocated bytes by the session, and the maximum number of allocated bytes that the session ever owned at once. Note that these numbers do not include the bytes allocated for the session by remote nodes. [#25395][#25395] {% comment %}doc{% endcomment %}
- The `bytea_output` [session variable](../v2.1/set-vars.html) now controls how byte arrays are converted to strings and reported back to clients, for compatibility with PostgreSQL. [#25835][#25835] {% comment %}doc{% endcomment %}
- Added placeholder `information_schema.routines` and `information_schema.parameters` for compatibility with Navicat, PGAdmin, and other clients that require them. [#26327][#26327] {% comment %}doc{% endcomment %}
- CockroachDB now recognizes aggregates in `ORDER BY` clauses even when there is no `GROUP BY` clause nor aggregation performed, for compatibility with PostgreSQL. [#26425][#26425] {% comment %}doc{% endcomment %}
- Added the `pg_is_in_recovery()` [function](../v2.1/functions-and-operators.html) for compatibility with PostgreSQL tools. [#26445][#26445] {% comment %}doc{% endcomment %}
- CockroachDB now supports simple forms of PostgreSQL's `ROWS FROM(...)` syntax. [#26223][#26223] {% comment %}doc{% endcomment %}
- CockroachDB now generates a simple column name when using an SRF that produces multiple columns. [#26223][#26223]
- CockroachDB now properly handles some uses of multiple SRFs in the same `SELECT` clause in a way compatible with
  PostgreSQL. [#26223][#26223]
- Added the `pg_is_xlog_replay_paused()` [function](../v2.1/functions-and-operators.html) for compatibility with PostgreSQL tools. [#26462][#26462] {% comment %}doc{% endcomment %}
- Added the `pg_catalog.pg_seclabel` and `pg_catalog.pg_shseclabel` tables for compatibility with Postgres tools. Note that we do not support adding security labels. [#26515][#26515]
- CockroachDB now supports [`INSERT ... ON CONFLICT DO NOTHING`](../v2.1/insert.html) without any specified columns; on a conflict with any [`UNIQUE`](../v2.1/unique.html) column, the insert will not continue. [#26465][#26465] {% comment %}doc{% endcomment %}
- CockroachDB now supports the `bit_length()`, `quote_ident()`, `quote_literal()`, and `quote_nullable()` [built-in functions](../v2.1/functions-and-operators.html), and the aliases `char_length()` and `character_length()` for `length()`, for compatibility with PostgreSQL. [#26586][#26586] {% comment %}doc{% endcomment %}
- If a function name is typed in with an invalid schema or invalid case, the error message now tries to provides a suggestion for alternate spelling. [#26588][#26588]
- CockroachDB now can evaluate set-generating functions with arguments that refer to the `FROM` clause. In particular, this makes it possible to use functions like `json_each()` and `json_object_keys()` over [`JSONB`](../v2.1/jsonb.html) columns. [#26503][#26503] {% comment %}doc{% endcomment %}
- Added prototype support for [`IMPORT ... MYSQLDUMP`](../v2.1/import.html), including the ability to import entire (multi-table) mysqldump files. [#26164][#26164] {% comment %}doc{% endcomment %}
- [`CHECK`](../v2.1/check.html) constraints are now checked when updating a conflicting row in [`INSERT ... ON CONFLICT DO UPDATE`](../v2.1/insert.html) statements. [#26642][#26642] {% comment %}doc{% endcomment %}
- Labeled tuples can now be accessed using their labels (e.g., `SELECT (x).word FROM (SELECT pg_expand_keywords() AS x)` or a star (e.g., `SELECT (x).* FROM (SELECT pg_expand_keywords() AS x)`). [#26628][#26628] {% comment %}doc{% endcomment %}
- An error is now returned to the user instead of panicking when trying to add a column with a [`UNIQUE`](../v2.1/unique.html) constraint when that column's type is not indexable. [#26684][#26684] {% comment %}doc{% endcomment %}
- Introduced the `sql.failure.count` metric, which counts the number of queries that result in an error. [#26731][#26731]
- Added support for de-compressing [`IMPORT`](../v2.1/import.html) files with gzip or bzip. [#26796][#26796] {% comment %}doc{% endcomment %}
- Added initial support for `IMPORT` with pg_dump files. [#26740][#26740] {% comment %}doc{% endcomment %}
- Added the `like_escape()`, `ilike_escape()`, `not_like_escape()`, `not_ilike_escape()`, `similar_escape()`, and `not_similar_escape()` [built-in functions](../v2.1/functions-and-operators.html) for use when an optional `ESCAPE` clause is present. [#26176][#26176] {% comment %}doc{% endcomment %}
- Added support for set-returning functions in distributed SQL execution. [#26739][#26739]
- Added a cluster setting to enable the experimental cost-based optimizer. [#26299][#26299]
- Added the `pg_catalog.pg_shdescription` table for compatibility with PostgreSQL tools. Note that CockroachDB does not support adding descriptions to shared database objects. [#26474][#26474]

<h3 id="v2.1.0-alpha.20180702-command-line-changes">Command-line changes</h3>

- [`cockroach quit`](../v2.1/stop-a-node.html) now emits warning messages on its standard error stream, not standard output. [#26158][#26158] {% comment %}doc{% endcomment %}
- [`cockroach sql`](../v2.1/use-the-built-in-sql-client.html) now recognizes the values `on`, `off`, `0`, `1`, `true` and `false` to set client-side boolean parameters with `set`. [#26287][#26287] {% comment %}doc{% endcomment %}
- [`cockroach sql`](../v2.1/use-the-built-in-sql-client.html) now recognizes `set option=value` as an alias to `set option value`. [#26287][#26287] {% comment %}doc{% endcomment %}
- `cockroach demo` now supports more options also supported by `cockroach sql`, including `--execute`, `--format`,
  `--echo-sql` and `--safe-updates`. [#26287][#26287] {% comment %}doc{% endcomment %}
- `cockroach demo` includes the welcome messages also printed by `cockroach sql`. [#26287][#26287]
- `cockroach demo` now uses the standard `defaultdb` database instead of creating its own `demo` database. [#26287][#26287] {% comment %}doc{% endcomment %}
- [`cockroach sql`](../v2.1/use-the-built-in-sql-client.html) and `cockroach demo` now accept `--set` to run `set` commands prior to starting the shell
  or running commands via `-e`. [#26287][#26287] {% comment %}doc{% endcomment %}

<h3 id="v2.1.0-alpha.20180702-admin-ui-changes">Admin UI changes</h3>

- Authentication in the Admin UI can now be enabled for secure clusters by setting the environment variable `COCKROACH_EXPERIMENTAL_REQUIRE_WEB_LOGIN=TRUE`. [#25005][#25005]
- System databases are now listed after all user databases on the [**Databases** page](../v2.1/admin-ui-databases-page.html). [#25817][#25817] {% comment %}doc{% endcomment %}
- Added **Statements** and **Statement Details** pages showing fingerprints of incoming statements and basic statistics about them. [#24485][#24485]
- Lease transfers are now shown in the **Range Operations** graph on the [**Replication** dashboard](../v2.1/admin-ui-replication-dashboard.html). [#26653][#26653] {% comment %}doc{% endcomment %}
- Add a debug page showing how table data is distributed across nodes, as well as the zone configs which are affecting that distribution. [#24855][#24855] {% comment %}doc{% endcomment %}

<h3 id="v2.1.0-alpha.20180702-bug-fixes">Bug fixes</h3>

- Fixed an issue where the Table details page in the Admin UI would become unresponsive after some time. [#26636][#26636]
- Fix a bug where [`cockroach quit`](../v2.1/stop-a-node.html) would erroneously fail even though the node already successfully shut down. [#26158][#26158]
- [`UPSERT`](../v2.1/upsert.html) is now properly able to write `NULL` values to every column in tables containing more than one column family. [#26169][#26169]
- Fixed a bug causing index creation to fail under rare circumstances. [#26265][#26265]
- Corrected `NULL` handling during [`IMPORT`](../v2.1/import.html) of `MYSQLOUTFILE`. [#26275][#26275]
- Fixed concurrent access to the same file when using encryption. [#26377][#26377]
- Fixed a bug where a prepared query would not produce the right value for `current_date()` if prepared on one day and executed on the next. [#26370][#26370]
- Rows larger than 8192 bytes are now supported by the "copy from" protocol. [#26345][#26345]
- Trying to "copy from stdin" into a table that doesn't exist no longer drops the connection. [#26345][#26345]
- CockroachDB now produces a clearer message when special functions (e.g., `generate_series()`) are used in an invalid context (e.g., `LIMIT`). [#26425][#26425]
- Fixed a rare crash on node [decommissioning](../v2.1/remove-nodes.html). [#26706][#26706]
- Commands are now abandoned earlier once a deadline has been reached. [#26643][#26643]
- Using [`SHOW TRACE FOR SESSION`](../v2.1/show-trace.html) multiple times without an intervening `SET tracing` statement now properly outputs the trace without introducing extraneous duplicate rows. [#26746][#26746]
- The output of debug and tracing commands is no longer corrupted when byte array values contain invalid UTF-8 sequences. [#26769][#26769]
- Joins across two [interleaved tables](../v2.1/interleave-in-parent.html) no longer return incorrect results under certain circumstances when the equality columns aren't all part of the interleaved columns. [#26756][#26756]
- Prepared statements using [`RETURNING NOTHING`](../v2.1/parallel-statement-execution.html) that are executed using the `EXECUTE` statement are now properly parallelized. [#26668][#26668]
- The pretty-print code for `SHOW` now properly quotes the variable name, and the pretty-printing code for an index definition inside `CREATE TABLE` now properly indicates whether the index was inverted. [#26923][#26923]
- Within a [transaction](../v2.1/transactions.html), DML statements are now allowed after a [`TRUNCATE`](../v2.1/truncate.html). [#26051][#26051]

<h3 id="v2.1.0-alpha.20180702-performance-improvements">Performance improvements</h3>

- Improved the throughput of highly contended writes with the new `contentionQueue`. [#25014][#25014]
- The performance impact of dropping a large table has been substantially reduced. [#26449][#26449]
- Using tuples in a query no longer reverts you to single node local SQL execution. [#25860][#25860]
- CockroachDB's internal monitoring time series are now encoded using a more efficient on-disk format to provide considerable space savings. Monitoring data written in the old format will not be converted but will still be queryable. [#26614][#26614]
- Improved the performance of the `sortChunks` processor. [#26874][#26874]

<h3 id="v2.1.0-alpha.20180702-build-changes">Build Changes</h3>

- Release binaries are now built with runtime AES detection. [#26649][#26649]

<h3 id="v2.1.0-alpha.20180702-doc-updates">Doc updates</h3>

- Added `systemd` configs and instructions to [deployment tutorials](../v2.1/manual-deployment.html). [#3268][#3268]
- Added instructions for [importing data from Postgres dump files](../v2.1/import-data.html). [#3306][#3306]
- Expanded the first level of the 2.1 docs sidenav by default. [#3270][#3270]
- Updated the [Kubernetes tutorials](../v2.1/orchestrate-cockroachdb-with-kubernetes.html) to reflect that pods aren't "Ready" before init. [#3291][#3291]

<h3 id="v2.1.0-alpha.20180702-contributors">Contributors</h3>

This release includes 328 merged PRs by 35 authors. We would like to thank the following contributors from the CockroachDB community, with special thanks to first-time contributors Chris Seto and Emmanuel.

- Chris Seto
- Emmanuel
- neeral

[#24485]: https://github.com/cockroachdb/cockroach/pull/24485
[#24855]: https://github.com/cockroachdb/cockroach/pull/24855
[#25005]: https://github.com/cockroachdb/cockroach/pull/25005
[#25014]: https://github.com/cockroachdb/cockroach/pull/25014
[#25227]: https://github.com/cockroachdb/cockroach/pull/25227
[#25395]: https://github.com/cockroachdb/cockroach/pull/25395
[#25817]: https://github.com/cockroachdb/cockroach/pull/25817
[#25835]: https://github.com/cockroachdb/cockroach/pull/25835
[#25849]: https://github.com/cockroachdb/cockroach/pull/25849
[#25860]: https://github.com/cockroachdb/cockroach/pull/25860
[#26051]: https://github.com/cockroachdb/cockroach/pull/26051
[#26054]: https://github.com/cockroachdb/cockroach/pull/26054
[#26158]: https://github.com/cockroachdb/cockroach/pull/26158
[#26164]: https://github.com/cockroachdb/cockroach/pull/26164
[#26169]: https://github.com/cockroachdb/cockroach/pull/26169
[#26176]: https://github.com/cockroachdb/cockroach/pull/26176
[#26183]: https://github.com/cockroachdb/cockroach/pull/26183
[#26223]: https://github.com/cockroachdb/cockroach/pull/26223
[#26249]: https://github.com/cockroachdb/cockroach/pull/26249
[#26260]: https://github.com/cockroachdb/cockroach/pull/26260
[#26265]: https://github.com/cockroachdb/cockroach/pull/26265
[#26275]: https://github.com/cockroachdb/cockroach/pull/26275
[#26287]: https://github.com/cockroachdb/cockroach/pull/26287
[#26290]: https://github.com/cockroachdb/cockroach/pull/26290
[#26299]: https://github.com/cockroachdb/cockroach/pull/26299
[#26327]: https://github.com/cockroachdb/cockroach/pull/26327
[#26334]: https://github.com/cockroachdb/cockroach/pull/26334
[#26345]: https://github.com/cockroachdb/cockroach/pull/26345
[#26355]: https://github.com/cockroachdb/cockroach/pull/26355
[#26370]: https://github.com/cockroachdb/cockroach/pull/26370
[#26377]: https://github.com/cockroachdb/cockroach/pull/26377
[#26425]: https://github.com/cockroachdb/cockroach/pull/26425
[#26445]: https://github.com/cockroachdb/cockroach/pull/26445
[#26447]: https://github.com/cockroachdb/cockroach/pull/26447
[#26449]: https://github.com/cockroachdb/cockroach/pull/26449
[#26450]: https://github.com/cockroachdb/cockroach/pull/26450
[#26462]: https://github.com/cockroachdb/cockroach/pull/26462
[#26465]: https://github.com/cockroachdb/cockroach/pull/26465
[#26468]: https://github.com/cockroachdb/cockroach/pull/26468
[#26474]: https://github.com/cockroachdb/cockroach/pull/26474
[#26478]: https://github.com/cockroachdb/cockroach/pull/26478
[#26503]: https://github.com/cockroachdb/cockroach/pull/26503
[#26515]: https://github.com/cockroachdb/cockroach/pull/26515
[#26550]: https://github.com/cockroachdb/cockroach/pull/26550
[#26586]: https://github.com/cockroachdb/cockroach/pull/26586
[#26588]: https://github.com/cockroachdb/cockroach/pull/26588
[#26614]: https://github.com/cockroachdb/cockroach/pull/26614
[#26628]: https://github.com/cockroachdb/cockroach/pull/26628
[#26636]: https://github.com/cockroachdb/cockroach/pull/26636
[#26642]: https://github.com/cockroachdb/cockroach/pull/26642
[#26643]: https://github.com/cockroachdb/cockroach/pull/26643
[#26649]: https://github.com/cockroachdb/cockroach/pull/26649
[#26653]: https://github.com/cockroachdb/cockroach/pull/26653
[#26668]: https://github.com/cockroachdb/cockroach/pull/26668
[#26684]: https://github.com/cockroachdb/cockroach/pull/26684
[#26706]: https://github.com/cockroachdb/cockroach/pull/26706
[#26711]: https://github.com/cockroachdb/cockroach/pull/26711
[#26731]: https://github.com/cockroachdb/cockroach/pull/26731
[#26739]: https://github.com/cockroachdb/cockroach/pull/26739
[#26740]: https://github.com/cockroachdb/cockroach/pull/26740
[#26746]: https://github.com/cockroachdb/cockroach/pull/26746
[#26756]: https://github.com/cockroachdb/cockroach/pull/26756
[#26769]: https://github.com/cockroachdb/cockroach/pull/26769
[#26776]: https://github.com/cockroachdb/cockroach/pull/26776
[#26796]: https://github.com/cockroachdb/cockroach/pull/26796
[#26816]: https://github.com/cockroachdb/cockroach/pull/26816
[#26874]: https://github.com/cockroachdb/cockroach/pull/26874
[#26923]: https://github.com/cockroachdb/cockroach/pull/26923
[#3268]: https://github.com/cockroachdb/docs/pull/3268
[#3270]: https://github.com/cockroachdb/docs/pull/3270
[#3291]: https://github.com/cockroachdb/docs/pull/3291
[#3306]: https://github.com/cockroachdb/docs/pull/3306
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

For our July 30th alpha release, in addition to PostgreSQL compatibility enhancements, general usability improvements, and bug fixes, we want to highlight some major benefits:

- [**Troubleshoot performance problems with hardware metrics**](../v2.1/admin-ui-hardware-dashboard.html) - The new Web UI **Hardware** dashboard provides more visibility into how cluster CPU, networking, disk, and memory resources are being utilized so you can quickly identify and remove performance bottlenecks.
- [**Easier PostgreSQL migration**](../v2.1/import-data.html) - We’ve made further enhancements to reduce PostgreSQL migration friction. Notable improvements include support for foreign keys, sequences, and `COPY` in `IMPORT ... PGDUMP`.
- [**Monitor Kubernetes-orchestrated clusters with Prometheus**](../v2.1/orchestrate-cockroachdb-with-kubernetes.html) - We expanded our guides for running CockroachDB on Kubernetes in production to include setting up monitoring and alerting with Prometheus and Alertmanager.

Please give these features and the ones below a try. If you see something that can be improved, we’d love to hear from you on [GitHub](https://github.com/cockroachdb/cockroach/issues) or the [Forum](https://forum.cockroachlabs.com/).

<h3 id="v2.1.0-alpha.20180730-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-alpha.20180730.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-alpha.20180730.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-alpha.20180730.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.1.0-alpha.20180730-general-changes">General changes</h3>

- The [cost-based optimizer](../v2.1/cost-based-optimizer.html) is now on by default. [#26893][#26893]
- The time series system used by CockroachDB to store internal monitoring data now utilizes pre-computed rollups to significantly increase the duration for which monitoring data is available while using less storage. Monitoring data will be available for up to a year by default; however, data older than seven days will be stored at a reduced resolution, and thus will only be able to give details about 30 minute intervals. [#27121][#27121]
- Building CockroachDB from source now requires yarn at version 1.7.0 or above. [#27262][#27262]
- Added support for signing server and client certificates by different CAs. [#27636][#27636]

<h3 id="v2.1.0-alpha.20180730-enterprise-edition-changes">Enterprise edition changes</h3>

- Core dumps are now disabled when [encryption](../v2.1/encryption.html) is enabled. [#27426][#27426]
- [`CHANGEFEED`s](../v2.1/change-data-capture.html) now use an asynchronous Kafka producer, increasing throughput. [#27421][#27421]

<h3 id="v2.1.0-alpha.20180730-sql-language-changes">SQL language changes</h3>

- CockroachDB now supports custom frame specification for [window functions](../v2.1/window-functions.html) using `ROWS` (fully-supported) and `RANGE` modes. For `RANGE`, `<value> PRECEDING` and `<value> FOLLOWING` are not supported. [#26666][#26666]
- The `SNAPSHOT` [isolation level](../v2.1/transactions.html#isolation-levels) has been removed. Transactions that request to use it are now mapped to `SERIALIZABLE`. [#27040][#27040].
- When the cost-based optimizer is enabled, it will also affect prepared queries. [#27034][#27034]
- Upon failing to gather data from other nodes, the [`SHOW CLUSTER QUERIES`](../v2.1/show-queries.html) and [`SHOW CLUSTER SESSIONS`](../v2.1/show-sessions.html) statements now report the details of the error. [#26821][#26821]
- Improved the description for the `age()` [built-in function](../v2.1/functions-and-operators.html). [#27082][#27082]
- The `pg_get_indexdef()` built-in function now supports 3 arguments. [#27161][#27161]
- Added `COPY` support to `IMPORT .. . PGDUMP`. [#27062][#27062]
- The new `max_row_size` option overrides default limits on line size for `IMPORT ... PGDUMP` and `PGCOPY`. [#27062][#27062]
- The `SHOW TRACE FOR <stmt>` statement was incomplete and incorrect and has thus been removed. To turn on tracing, use `SET tracing = ...` and `SHOW SESSION TRACE`, or enable the new `auto_trace` client-side option for `cockroach sql`. [#26729][#26729] [#27805][#27805]
- `SET tracing` accepts a new option `results`, which causes result rows and row counts to be copied to the session trace. This was previously implicit with option `kv` but must now be specified explicitly when desired. [#26729][#26729]
- The word `view` is now supported as an identifier like in PostgreSQL. [#27204][#27204]
- `IMPORT ... PGDUMP` no longer requires the `--no-owner` flag. [#27268][#27268]
- `AS OF SYSTEM TIME` can now use some more complex expressions to compute the desired timestamp. [#27206][#27206]
- Added support for the `convert_from()` and `convert_to()` built-in functions, for compatibility with PostgreSQL.  For `convert_from()`, however, in contrast with PostgreSQL, the function in CockroachDB accepts NUL in the input, because null characters are valid in CockroachDB strings. [#27328][#27328]
- The `ALTER ... EXPERIMENTAL CONFIGURE ZONE` statement now accepts arbitrary scalar expressions (including possibly containing sub-queries) to compute the YAML operand. [#27213][#27213]
- CockroachDB now recognizes PostgreSQL's abbreviated time units when converting strings to intervals. [#27393][#27393]
- Sorting with a limit and/or input ordering now falls back to disk. [#27083][#27083]
- CockroachDB now reports a hint in the error message if it encounters a correlated query that it does not
  support yet. [#27396][#27396]
- The new `EXPERIMENTAL_RELOCATE LEASE` command for `ALTER TABLE` and `ALTER INDEX` allows manually transferring the leases for specific ranges to specific stores. [#26436][#26436]
- Added the `sql.distsql.flow_stream_timeout` and `sql.distsql.max_running_flows` [cluster settings](../v2.1/cluster-settings.html) to fine-tune flow setup [#27404][#27404]
- `IMPORT` now supports a `WITH oversample = ...` option to decrease variance in data distribution during processing. [#27341][#27341]
- `IMPORT ... PGDUMP` now supports foreign keys. [#27425][#27425]
- `IMPORT ... PGDUMP` now supports sequences. [#27739][#27739]
- `IMPORT ... PGDUMP` now supports empty and public schemas. [#27782][#27782]
- `SHOW JOBS` now reports results even when a job entry is incomplete or incorrect. [#27430][#27430]
- The column labels in the output of `EXPLAIN` and all `SHOW` statements have been renamed for consistency. [#27098][#27098]
- The column labels in the output of `SHOW COLUMNS` have been renamed for consistency with `information_schema`. The new `generation_expression` column reports the expression used for computed columns. [#27098][#27098]
- The `SHOW CREATE` statement has been simplified and can be used equivalently on tables, views, and sequences without having to specify the type of object to inspect. [#27098][#27098]
- Added the `chr()` built-in function (the inverse of `ascii()`). [#27278][#27278]
- Added support for skipping foreign keys in `IMPORT`s that support them. [#27606][#27606]
- The new `sql.optimizer.count` metric has been added to track the number of queries with the experimental
  cost-based optimizer. [#26981][#26981]
- More statement types are now reported in the collected statement statistics in the web UI and diagnostics reporting. [#27646][#27646]
- Added support for KV traces (`SHOW KV TRACE FOR SESSION`) on DistSQL-executed queries. [#27802][#27802]
- The return type of single-column generator functions has been changed from `tuple{columnType}` to `columnType`. This is a compatibility change to match the behavior of PostgreSQL. [#27773][#27773]

<h3 id="v2.1.0-alpha.20180730-command-line-changes">Command-line changes</h3>

- CockroachDB now computes the correct number of replicas on down nodes. Therefore, when [decommissioning nodes](../v2.1/remove-nodes.html) via the [`cockroach node decommission`](../v2.0/view-node-details.html) command, the `--wait=all` option no longer hangs indefinitely when there are down nodes. As a result, the `--wait=live` option is no longer necessary and has been deprecated. The `--wait=all` option is now the default. [#27027][#27027]
- Added the `cockroach sqlfmt` command for formatting SQL statements. [#27240][#27240]
- The output labels of `cockroach user ls` and `cockroach user get` have been renamed for consistency with the SQL `SHOW USERS` statement. Also, to reduce inadvertent data leaks, the output of `cockroach user get` no longer includes hashed passwords. [#27098][#27098]
- The new client-side option `prompt1` can be used to customize the `cockroach sql` interactive prompt. [#27803][#27803]
- The new `auto_trace` client-side option can be use to turn on tracing for a `cockroach sql` session. [#27805][#27805]

<h3 id="v2.1.0-alpha.20180730-web-ui-changes">Web UI changes</h3>

- The new **Hardware** dashboard displays time series data about CPU, memory, and disk and network IO. [#27626][#27626]
- Time series metric metadata is now available at `<Web UI>/_admin/metricmetada`. [#25359][#25359]
- Encryption progress is now reported on `<Web UI>/#/reports/stores/local` debug page. [#26802][#26802]
- Statement statistics can now be filtered by app on the **Statements** page. [#26949][#26949] {% comment %}doc{% endcomment %}
- Improved the readability of the mean and standard deviation bar chart on the **Statement Details** page. [#26949][#26949] {% comment %}doc{% endcomment %}
- Added a visualization of the standard deviation of the latency of statements to the **Statements** page. [#26949][#26949] {% comment %}doc{% endcomment %}
- The **Statements** page now shows statements that executed on all nodes in the cluster, not just the gateway node. [#26605][#26605] {% comment %}doc{% endcomment %}
- The **Statement Details** page now includes a table showing statistics broken down by which node was the gateway node. [#26605][#26605] {% comment %}doc{% endcomment %}

<h3 id="v2.1.0-alpha.20180730-bug-fixes">Bug fixes</h3>

- Fixed the ordering of columns in the [`cockroach node status`](../v2.1/view-node-details.html) output. [#27042][#27042]
- Fixed a bug that would make the **Statement Details** page in the Web UI break if a statement wasn't found. [#27105][#27105]
- Fixed some incorrectly typed columns in the `pg_index` virtual table. [#27723][#27723]
- Fixed permissions and audit logging issues with the optimizer. [#27108][#27108]
- Prevented a situation in which ranges repeatedly fail to perform a split. [#26934][#26934]
- Fixed a crash that could occur when distributed `LIMIT` queries were run on a cluster with at least one unhealthy node. [#26950][#26950]
- Failed [`IMPORT`s](../v2.1/import.html) now begin to clean up partially imported data immediately and in a faster manner. [#26959][#26959]
- `IMPORT` now detects node failure and will restart instead of fail. [#26881][#26881]
- Fixed a panic in the optimizer with `IN` filters. [#27053][#27053]
- Fixed a panic that could occur when renaming a scalar function used as a data source. [#27039][#27039]
- The server will not finalize a version upgrade automatically and erroneously if there are nodes temporarily inactive in the cluster. [#26821][#26821] {% comment %}doc{% endcomment %}
- The `DISTINCT ON` clause is now reported properly in statement statistics. [#27221][#27221]
- Fixed a panic in [`IMPORT`](../v2.0/import.html) when creating a table using a sequence operation (e.g., `nextval()`) in a column's [DEFAULT](../v2.0/default-value.html) expression.  [#27122][#27122]
- `SET` now properly rejects attempts to use
  invalid variable names starting with `tracing.`. [#27216][#27216]
- Fixed `NULL` equality handling in the experimental lookup join feature. [#27336][#27336]
- `ALTER ... EXPERIMENTAL CONFIGURE ZONE` is now properly tracked in statement statistics. [#27213][#27213]
- Invalid uses of set-generating functions in `FROM` clauses are now reported with the same error code as PostgreSQL. [#27390][#27390]
- The number of `COPY` columns is now correctly verified during `IMPORT ... PGDUMP`. [#27345][#27345]
- `CHANGFEED`s now correctly emit all versions of quickly changing rows. [#27612][#27612]
- Alleviated a scenario in which a large number of uncommitted Raft commands could cause memory pressure at startup time. [#27009][#27009]
- Prevented the unbounded growth of the Raft log caused by a loss of quorum. [#27774][#27774]
- Foreign key references in `IMPORT ... PGDUMP` are now processed in the correct order. [#27782][#27782]

<h3 id="v2.1.0-alpha.20180730-performance-improvements">Performance improvements</h3>

- Transactional writes are now pipelined when being replicated and when being written to disk, dramatically reducing the latency of transactions that perform multiple writes. This can be disabled using the new `kv.transaction.write_pipelining_enabled` [cluster setting](../v2.1/cluster-settings.html). [#26599][#26599] {% comment %}doc{% endcomment %}
- Reduced CPU utilization in clusters with many ranges, also during periods of lease rebalancing. [#26910][#26910] [#26907][#26907]
- Reduced the memory size of commonly used Request and Response objects. [#27112][#27112]
- Improved low-level iteration performance. [#27299][#27299]
- Prevented a scenario when dropping a table could cause excessive compaction activity that would degrade performance significantly. [#27353][#27353]
- Limited the scanner from running incessantly on stores with 100s of thousands of replicas. [#27441][#27441]
- Prevented dead nodes in clusters with many ranges from causing unnecessarily high CPU usage. [#26911][#26911]
- Significantly reduce CPU usage when a large number of ranges are deleted from a node. [#27520][#27520]
- Min, max, sum, and avg now take linear time when used for aggregation as window functions for all supported window frame options. [#26988][#26988]
- `CHANGEFEED`s no longer hold all data for each poll in memory at once, increasing scalability. [#27612][#27612] {% comment %}doc{% endcomment %}

<h3 id="v2.1.0-alpha.20180730-build-changes">Build changes</h3>

- Upgraded protobuf to 3.6.0 [#26935][#26935]

<h3 id="v2.1.0-alpha.20180730-doc-updates">Doc updates</h3>

- Added a tutorial on [benchmarking CockroachDB with TPC-C](../v2.1/performance-benchmarking-with-tpc-c.html). [#3281][#3281]
- Expanded the [Production Checklist](../v2.1/recommended-production-settings.html#networking) to cover a detailed explanation of network flags and scenarios and updated [production deployment tutorials](../v2.1/manual-deployment.html) to encourage the use of `--advertise-host` on node start. [#3352][#3352]
- Expanded the [Kubernetes tutorials](../v2.1/orchestrate-cockroachdb-with-kubernetes.html) to include setting up monitoring and alerting with Prometheus and Alertmanager. [#3370][#3370]
- Updated the [rolling upgrade tutorial](../v2.1/upgrade-cockroach-version.html) with explicit `systemd` commands. [#3396][#3396]
- Updated the [OpenSSL certificate tutorial](../v2.1/create-security-certificates-openssl.html) to allow multiple node certificates with the same subject. [#3423][#3423]
- Added an example on [editing SQL statements in an external editor from within the built-in SQL shell](../v2.1/use-the-built-in-sql-client.html#edit-sql-statements-in-an-external-editor). [#3425][#3425]

<h3 id="v2.1.0-alpha.20180730-contributors">Contributors</h3>

This release includes 328 merged PRs by 42 authors. We would like to thank the following contributors from the CockroachDB community, with special thanks to first-time contributors Art Nikpal, Ivan Kozik, Tarek Badr, and nexdrew.

- Art Nikpal
- Brett Snyder
- Ivan Kozik
- Nishant Gupta
- Tarek Badr
- neeral
- nexdrew

[#25112]: https://github.com/cockroachdb/cockroach/pull/25112
[#25359]: https://github.com/cockroachdb/cockroach/pull/25359
[#25412]: https://github.com/cockroachdb/cockroach/pull/25412
[#26436]: https://github.com/cockroachdb/cockroach/pull/26436
[#26599]: https://github.com/cockroachdb/cockroach/pull/26599
[#26605]: https://github.com/cockroachdb/cockroach/pull/26605
[#26666]: https://github.com/cockroachdb/cockroach/pull/26666
[#26729]: https://github.com/cockroachdb/cockroach/pull/26729
[#26802]: https://github.com/cockroachdb/cockroach/pull/26802
[#26821]: https://github.com/cockroachdb/cockroach/pull/26821
[#26881]: https://github.com/cockroachdb/cockroach/pull/26881
[#26893]: https://github.com/cockroachdb/cockroach/pull/26893
[#26905]: https://github.com/cockroachdb/cockroach/pull/26905
[#26907]: https://github.com/cockroachdb/cockroach/pull/26907
[#26910]: https://github.com/cockroachdb/cockroach/pull/26910
[#26911]: https://github.com/cockroachdb/cockroach/pull/26911
[#26934]: https://github.com/cockroachdb/cockroach/pull/26934
[#26935]: https://github.com/cockroachdb/cockroach/pull/26935
[#26939]: https://github.com/cockroachdb/cockroach/pull/26939
[#26949]: https://github.com/cockroachdb/cockroach/pull/26949
[#26950]: https://github.com/cockroachdb/cockroach/pull/26950
[#26959]: https://github.com/cockroachdb/cockroach/pull/26959
[#26981]: https://github.com/cockroachdb/cockroach/pull/26981
[#26988]: https://github.com/cockroachdb/cockroach/pull/26988
[#27009]: https://github.com/cockroachdb/cockroach/pull/27009
[#27027]: https://github.com/cockroachdb/cockroach/pull/27027
[#27034]: https://github.com/cockroachdb/cockroach/pull/27034
[#27039]: https://github.com/cockroachdb/cockroach/pull/27039
[#27040]: https://github.com/cockroachdb/cockroach/pull/27040
[#27042]: https://github.com/cockroachdb/cockroach/pull/27042
[#27053]: https://github.com/cockroachdb/cockroach/pull/27053
[#27062]: https://github.com/cockroachdb/cockroach/pull/27062
[#27082]: https://github.com/cockroachdb/cockroach/pull/27082
[#27083]: https://github.com/cockroachdb/cockroach/pull/27083
[#27098]: https://github.com/cockroachdb/cockroach/pull/27098
[#27105]: https://github.com/cockroachdb/cockroach/pull/27105
[#27108]: https://github.com/cockroachdb/cockroach/pull/27108
[#27112]: https://github.com/cockroachdb/cockroach/pull/27112
[#27121]: https://github.com/cockroachdb/cockroach/pull/27121
[#27122]: https://github.com/cockroachdb/cockroach/pull/27122
[#27128]: https://github.com/cockroachdb/cockroach/pull/27128
[#27137]: https://github.com/cockroachdb/cockroach/pull/27137
[#27149]: https://github.com/cockroachdb/cockroach/pull/27149
[#27161]: https://github.com/cockroachdb/cockroach/pull/27161
[#27204]: https://github.com/cockroachdb/cockroach/pull/27204
[#27206]: https://github.com/cockroachdb/cockroach/pull/27206
[#27213]: https://github.com/cockroachdb/cockroach/pull/27213
[#27216]: https://github.com/cockroachdb/cockroach/pull/27216
[#27221]: https://github.com/cockroachdb/cockroach/pull/27221
[#27240]: https://github.com/cockroachdb/cockroach/pull/27240
[#27262]: https://github.com/cockroachdb/cockroach/pull/27262
[#27268]: https://github.com/cockroachdb/cockroach/pull/27268
[#27278]: https://github.com/cockroachdb/cockroach/pull/27278
[#27286]: https://github.com/cockroachdb/cockroach/pull/27286
[#27299]: https://github.com/cockroachdb/cockroach/pull/27299
[#27328]: https://github.com/cockroachdb/cockroach/pull/27328
[#27336]: https://github.com/cockroachdb/cockroach/pull/27336
[#27341]: https://github.com/cockroachdb/cockroach/pull/27341
[#27345]: https://github.com/cockroachdb/cockroach/pull/27345
[#27353]: https://github.com/cockroachdb/cockroach/pull/27353
[#27390]: https://github.com/cockroachdb/cockroach/pull/27390
[#27393]: https://github.com/cockroachdb/cockroach/pull/27393
[#27396]: https://github.com/cockroachdb/cockroach/pull/27396
[#27404]: https://github.com/cockroachdb/cockroach/pull/27404
[#27421]: https://github.com/cockroachdb/cockroach/pull/27421
[#27425]: https://github.com/cockroachdb/cockroach/pull/27425
[#27426]: https://github.com/cockroachdb/cockroach/pull/27426
[#27430]: https://github.com/cockroachdb/cockroach/pull/27430
[#27441]: https://github.com/cockroachdb/cockroach/pull/27441
[#27520]: https://github.com/cockroachdb/cockroach/pull/27520
[#27606]: https://github.com/cockroachdb/cockroach/pull/27606
[#27612]: https://github.com/cockroachdb/cockroach/pull/27612
[#27626]: https://github.com/cockroachdb/cockroach/pull/27626
[#27636]: https://github.com/cockroachdb/cockroach/pull/27636
[#27646]: https://github.com/cockroachdb/cockroach/pull/27646
[#27719]: https://github.com/cockroachdb/cockroach/pull/27719
[#27723]: https://github.com/cockroachdb/cockroach/pull/27723
[#27733]: https://github.com/cockroachdb/cockroach/pull/27733
[#27739]: https://github.com/cockroachdb/cockroach/pull/27739
[#27773]: https://github.com/cockroachdb/cockroach/pull/27773
[#27774]: https://github.com/cockroachdb/cockroach/pull/27774
[#27782]: https://github.com/cockroachdb/cockroach/pull/27782
[#27802]: https://github.com/cockroachdb/cockroach/pull/27802
[#27803]: https://github.com/cockroachdb/cockroach/pull/27803
[#27805]: https://github.com/cockroachdb/cockroach/pull/27805
[#3370]: https://github.com/cockroachdb/docs/pull/3370
[#3385]: https://github.com/cockroachdb/docs/pull/3385
[#3396]: https://github.com/cockroachdb/docs/pull/3396
[#3423]: https://github.com/cockroachdb/docs/pull/3423
[#3352]: https://github.com/cockroachdb/docs/pull/3352
[#3425]: https://github.com/cockroachdb/docs/pull/3425
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

We have now transitioned into the CockroachDB 2.1 Beta phase and will be releasing weekly until the GA release. This week's release includes PostgreSQL compatibility enhancements, general usability improvements, performance improvements, and bug fixes. In addition, we want to highlight a few major benefits:

- **Automatic performance optimizations** - Range leases are now automatically rebalanced throughout the cluster to even out the amount of QPS being handled by each server.
- **Better controls for geo-distributed clusters** - We’ve added more sophisticated support for controlling the network interfaces to use in certain situations, so nodes can prefer local, private IPs for inter-DC communication, and only use public IPs when making hops that must go over the open internet. See the `--locality-advertise-addr` flag of the [`cockroach start`](../v2.1/start-a-node.html) command for more details.

<h3 id="v2.1.0-beta.20180827-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-beta.20180827.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-beta.20180827.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-beta.20180827.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.1.0-beta.20180827-backward-incompatible-changes">Backward-incompatible changes</h3>

- Support for PostgreSQL's `TIMETZ` data type has been removed due to incomplete/incorrect implementation. This
feature was available only in previous 2.1 alpha releases. Before upgrading to this release, tables with the `TIMETZ` type must be dropped entirely; it is not possible to convert the data or drop a single `TIMETZ` column. [#28095][#28095] {% comment %}doc{% endcomment %}
- Support for the `BIT` data type has been removed due to incorrect implementation and incompatibility with some client apps. Tables with the `BIT` type will continue to work but will see their type automatically changed to `INT` in the output of `SHOW TABLES`, `information_schema`, etc. This is backward-compatible insofar that the previous `BIT` type in CockroachDB was actually a simple integer. A PostgreSQL-compatible replacement will likely be added at a later time. [#28814][#28814] {% comment %}doc{% endcomment %}

<h3 id="v2.1.0-beta.20180827-general-changes">General changes</h3>

- CockroachDB now supports a separate CA (`ca-ui.crt`) and certificate (`ui.crt`) for the Web UI. [#27916][#27916] {% comment %}doc{% endcomment %}
- The ability to set lease placement preferences in [replication zones](../v2.1/configure-replication-zones.html) is now fully supported. Existing lease placement preferences will continue to function as in v2.0. [#28261][#28261] {% comment %}doc{% endcomment %}
- The new `/_admin/v1/enqueue_range` admin server endpoint runs a specified range through a specified internal queue on one or all nodes. The `skip_should_queue` parameter can also be specified to tell the system to blindly run without first checking whether it needs to be run. This endpoint is intended primarily for debugging purposes. [#26554][#26554] {% comment %}doc{% endcomment %}
- If enabled, anonymous [diagnostics reporting](../v2.1/diagnostics-reporting.html) now includes hardware and OS information as well as basic stats about the size of `IMPORT` jobs. [#28676][#28676] [#28726][#28726] {% comment %}doc{% endcomment %}

<h3 id="v2.1.0-beta.20180827-enterprise-edition-changes">Enterprise edition changes</h3>

- This release includes several changes to the [Change Data Capture](../v2.1/change-data-capture.html) feature:
    - `CHANGEFEED`s now support interleaved tables [#27991][#27991] {% comment %}doc{% endcomment %}
    - `CREATE CHANGEFEED` now requires an enterprise license when used with Kafka. [#27962][#27962] {% comment %}doc{% endcomment %}
    - `CHANGEFEED`s now produce an error when column families are added (instead of returning incorrect results) and when targeting `system` tables (instead of operating with undefined behavior). [#27962][#27962] {% comment %}doc{% endcomment %}
    - `CREATE CHANGEFEED` is now restricted to superusers. [#27962][#27962] {% comment %}doc{% endcomment %}
    - `CHANGEFEED` job descriptions now substitute values for SQL placeholders. [#28220][#28220] {% comment %}doc{% endcomment %}
    - `CHANGEFEED`s can now only target lists of physical tables. [#27996][#27996] {% comment %}doc{% endcomment %}
    - `CHANGEFEED`s now produce an error when a watched table is truncated, dropped, or renamed. [#28204][#28204] {% comment %}doc{% endcomment %}
    - `CHANGEFEED` Kafka tunings have been adjusted for faster flushes, improving throughput. [#28586][#28586]
    - `CHANGEFEED`s now checkpoint progress more granularly. [#28319][#28319]
    - `CHANGEFEED`s now export metrics for production monitoring. [#28162][#28162] {% comment %}doc{% endcomment %}
    - The `CHANGEFEED` `timestamp` option has been split into `updated` and `resolved`. [#28733][#28733] {% comment %}doc{% endcomment %}
    - `CHANGEFEED`s are now executed using our distributed SQL framework. [#28555][#28555] {% comment %}doc{% endcomment %}
- This release includes the following changes to the [Encryption At Rest](../v2.1/encryption.html) feature:
    - The status of encryption is now written to [debug logs](../v2.1/debug-and-error-logs.html). [#27880][#27880] {% comment %}doc{% endcomment %}
    - Data keys are now rotated while nodes are running. [#28148][#28148] {% comment %}doc{% endcomment %}
    - The new `cockroach debug encryption-status` command displays encryption key information. [#28582][#28582] {% comment %}doc{% endcomment %}

<h3 id="v2.1.0-beta.20180827-sql-language-changes">SQL language changes</h3>

- Added foreign key support to [`IMPORT ... MYSQLDUMP`](../v2.1/import.html). [#27861][#27861] {% comment %}doc{% endcomment %}
- The output of [`SHOW GRANTS`](../v2.1/show-grants.html) is now fully sorted. [#27884][#27884] {% comment %}doc{% endcomment %}
- Reads from Google Cloud Storage for [`IMPORT`](../v2.1/import.html) or [`BACKUP`](../v2.1/backup.html) jobs are now more resilient to quota limits. [#27862][#27862]
- The [`ORDER BY INDEX`](../v2.1/query-order.html#sorting-in-index-order) notation now implies an ordering by the implicit primary key columns appended to an index. [#27812][#27812] {% comment %}doc{% endcomment %}
- Added the `server_encoding` [session variable](../v2.1/show-vars.html) and protocol status parameter, for compatibility with PostgreSQL. It is set to `UTF8` and cannot be changed. [#27943][#27943] {% comment %}doc{% endcomment %}
- Extended support of the `extra_float_digits` [session variable](../v2.1/show-vars.html), for compatibility with PostgreSQL. [#27952][#27952] {% comment %}doc{% endcomment %}
- Improved the handling of [`SET`](../v2.1/set-vars.html), [`RESET`](../v2.1/reset-vars.html) and [`SHOW`](../v2.1/show-vars.html), for better compatibility with PostgreSQL. [#27947][#27947] {% comment %}doc{% endcomment %}
- Exposed the `integer_datetimes` session variable in `SHOW` and `pg_settings`, for compatibility with PostgreSQL. [#27947][#27947] {% comment %}doc{% endcomment %}
- The default values of the `client_min_messages` and `extra_float_digits` [session variables](../v2.1/show-vars.html) now match PostgreSQL. [#27947][#27947] {% comment %}doc{% endcomment %}
- Corrected the `oids` and formatting of some columns in the `pg_catalog.pg_index` table. [#27961][#27961]
- The distribution of queries that use the `repeat()` [built-in function](../v2.1/functions-and-operators.html) are now permitted. [#28039][#28039]
- Statement statistics are now grouped separately for queries using the [cost-based optimizer](../v2.1/cost-based-optimizer.html) and heuristic planner. [#27806][#27806]
- CockroachDB now supports empty tuples with the syntax `()`, 1-valued tuples with the syntax `(x,)` in addition to `row(x)`, and the ability to use `IN` with an empty tuple as right operand. This is a CockroachDB extension. [#28143][#28143] {% comment %}doc{% endcomment %}
- CockroachDB now supports constructing array values using parentheses, for example `ARRAY(1,2,3,4)`. This is a CockroachDB extension; the standard PostgreSQL syntax `ARRAY[1,2,3,4]` remains supported. [#28238][#28238] {% comment %}doc{% endcomment %}
- CockroachDB now supports converting arrays and tuples to strings, for compatibility with PostgreSQL. [#28183][#28183] {% comment %}doc{% endcomment %}
- `ANY`/`ALL`/`SOME` comparisons are now more permissive about the types of their input expressions, and comparisons with empty tuples are now allowed. [#28226][#28226]
- Improved the handling of decimal 0s. Specifically, -0 is coerced to 0 and values like 0.00 retain the digits after the decimal point. [#27978][#27978]
- Arrays of arrays are no longer allowed, even as intermediate results. [#28116][#28116]
- [`IMPORT ... PGDUMP`](../v2.1/import.html) now supports CockroachDB dump files. [#28359][#28359] {% comment %}doc{% endcomment %}
- The decimal variants of the `ceil()` and `ceiling()` functions now return 0 where they would have returned -0 previously. [#28366][#28366]
- Improved support for S3-compatible endpoints in [`BACKUP`](../v2.1/backup.html), [`RESTORE`](../v2.1/restore.html), and [`IMPORT`](../v2.1/import.html). The `AWS_REGION` parameter is no longer required. Services like Digital Ocean Spaces and Minio now work correctly. [#28394][#28394] {% comment %}doc{% endcomment %}
- CockroachDB now supports an optional `FILTER` clause with aggregates when used as [window functions](../v2.1/window-functions.html). [#28357][#28357]
- Normalized the case of table names imported via [`IMPORT ... MYSQLDUMP`](../v2.1/import.html). [#28397][#28397] {% comment %}doc{% endcomment %}
- All queries now run through the DistSQL execution engine. [#27863][#27863]
- It is now an error to specify both `FORCE_INDEX` and `NO_INDEX_JOIN` hints at the same time. [#28411][#28411]
- Added `numeric_precision_radix` to the `information_schema.columns` table. [#28467][#28467] {% comment %}doc{% endcomment %}
- Added the `schemachanger.lease.duration` and `schemachanger.lease.renew_fraction` [cluster settings](../v2.1/cluster-settings.html) to control the schema change lease. [#28342][#28342] {% comment %}doc{% endcomment %}
- Added the `string_agg()` aggregation function, which concats a collection of strings into a single string and separates them with a specified delimiter. [#28392][#28392] {% comment %}doc{% endcomment %}
- CockroachDB now fully supports the `RANGE` mode for specification of [window function frames](../v2.1/window-functions.html). [#27022][#27022] {% comment %}doc{% endcomment %}
- CockroachDB now supports the `GROUPS` mode for specification of [window function frames](../v2.1/window-functions.html). [#28244][#28244] {% comment %}doc{% endcomment %}
- CockroachDB now supports the `ARRAY()` operator and comparisons with sub-queries on the right side of the comparison, when they appear themselves in sub-queries. [#28618][#28618]
- CockroachDB now supports two experimental compatibility modes with how PostgreSQL handles [`SERIAL`](../v2.1/serial.html) and [sequences](../v2.1/create-sequence.html), to ease reuse of 3rd party frameworks or apps developed for PostgreSQL. These modes can be enabled with the `experimental_serial_normalization` session variable (per client) and `sql.defaults.serial_normalization` cluster setting (cluster-wide). The first mode, `virtual_sequence`, enables compatibility with many applications using `SERIAL` with maximum performance and scalability. The second mode, `sql_sequence`, enables maximum PostgreSQL compatibility but uses regular SQL sequences and is thus subject to performance constraints. [#28575][#28575] {% comment %}doc{% endcomment %}
- The output of [`SHOW COLUMNS`](../v2.1/show-columns.html) now indicates which columns are hidden. [#28750][#28750] {% comment %}doc{% endcomment %}
- [`SHOW CREATE`](../v2.1/show-create.html) now reports the `FLOAT` column types as `FLOAT4` and `FLOAT8` (the default) instead of `REAL` and `FLOAT`. [#28776][#28776]

<h3 id="v2.1.0-beta.20180827-command-line-changes">Command-line changes</h3>

- This release includes the following changes to the [`cockroach start`](../v2.1/start-a-node.html) command:
    - The new `--listen-addr` flag recognizes both a hostname/address and port and replaces the `--host` and `--port` flags, which are now deprecated for `cockroach start` but remain valid for other *client* commands. The port portion of `--listen-addr` can be either a service name or numeric value; when specified as `0`, a port number is automatically allocated. [#27800][#27800] [#28373][#28373] [#28502][#28502] {% comment %}doc{% endcomment %}
    - The new `--advertise-addr` flag recognizes both a hostname/address and port and replaces the `--advertise-host` and `--advertise-port` flags, which are now deprecated.  The port portion of `--advertise-addr` can be either a service name or numeric value; when specified as `0`, a port number is automatically allocated. [#27800][#27800] [#28373][#28373] [#28502][#28502] {% comment %}doc{% endcomment %}
    - The new `--http-addr` flag recognizes both a hostname/address and port and replaces the `--http-host` flag, which is now deprecated. The port portion of `--http-addr` can be either a service name or numeric value; when specified as `0`, a port number is automatically allocated. [#28373][#28373] [#28502][#28502] {% comment %}doc{% endcomment %}
    - The new `--locality-advertise-addr` flag can be used advertise a hostname/address and port to other CockroachDB nodes for specific [localities](../v2.1/start-a-node.html#locality). This is useful in deployments with "local" or "private" interfaces that are only accessible by a subset of the nodes and "global" or "public" interfaces that are slower or more expensive but accessible by any node. In such cases, `--locality-advertise-addr` can be used to route traffic over the local interface whenever possible. [#28531][#28531]
    - The command now reports the URL of the web UI with the prefix "`webui:`", not `admin:`. [#28038][#28038] {% comment %}doc{% endcomment %}
    - The command now reports a warning if more than 75% of available RAM is reserved by `--cache` and `--max-sql-memory`. [#28199][#28199] {% comment %}doc{% endcomment %}
    - The command now suggests which command-line flags to use to access the newly started node in client commands (e.g., `cockroach quit`, etc.). [#28198][#28198] [`cockroach start`](../v2.1/start-a-node.html) {% comment %}doc{% endcomment %}
- This release includes the following changes to `cockroach` client commands:
    - Client commands now better attempt to inform the user about why a connection is failing. [#28200][#28200] {% comment %}doc{% endcomment %}
    - Client commands that print out SQL results now issue a warning if more than 10000 result rows are buffered in the `table` formatter. [#28490][#28490]
    - Client commands that use a SQL connection (e.g., `cockroach sql`, `cockroach node`, `cockroach user`) now produce an error if a connection could not be established within 5 seconds instead of waiting forever.  [#28326][#28326] {% comment %}doc{% endcomment %}
    - The [`cockroach sql`](../v2.1/use-the-built-in-sql-client.html) command and other client commands that display SQL results now use the new `table` result formatter by default, replacing the previous formatter called `pretty`. This provides more compact and more reusable results. [#28465][#28465] {% comment %}doc{% endcomment %}
    - The [`cockroach sql`](../v2.1/use-the-built-in-sql-client.html) command and other client commands that display SQL results containing byte arrays now print them as if they were converted by a SQL cast to the `STRING` type. [#28494][#28494] {% comment %}doc{% endcomment %}
    - The `--host` flag and `COCKROACH_HOST` environment variable for client commands now recognize both a hostname/address and port number. The `--port` flag is still recognized but no longer documented; `--host` is now preferred. The `COCKROACH_PORT` environment variable is now deprecated in favor of `COCKROACH_HOST`. Also, the syntax to specify IPv6 addresses has been changed to use square brackets, for example, `--host=[::1]` instead of just `--host=::1`; the previous syntax is still recognized for backward compatibility but is deprecated. [#28373][#28373] {% comment %}doc{% endcomment %}
- The new `timeseries.storage.10s_resolution_ttl` and `timeseries.storage.30m_resolution_ttl` [cluster settings](../v2.1/cluster-settings.html) control how long time series data is retained on the cluster. They work with the recently added "roll-ups" to allow longer retention of time series data while consuming considerably less disk space. [#28169][#28169] {% comment %}doc{% endcomment %}    
- The [`cockroach demo`](../v2.1/cockroach-demo.html) command now supports starting with one of various datasets loaded. [#28383][#28383] {% comment %}doc{% endcomment %}
- The file generated by running `cockroach debug zip` now contains the contents of the `system.rangelog` table, which is a record of range splits and rebalances in the cluster. The problem ranges report is now included as well. [#28396][#28396] [#28253][#28253] {% comment %}doc{% endcomment %}
- The `cockroach node status` command now works on unavailable/broken clusters. [#28249][#28249] {% comment %}doc{% endcomment %}
- CockroachDB now reports a non-zero exit status if an attempt is made to use a non-existent command. [#28492][#28492]
- CockroachDB now attempts to inform the operator if the names and IP addresses listed in the configured certificates do not match the server configuration. [#28502][#28502] {% comment %}doc{% endcomment %}
- Added a locality filter for the `cockroach gen haproxy` command [#28649][#28649] {% comment %}doc{% endcomment %}

<h3 id="v2.1.0-beta.20180827-web-ui-changes">Web UI changes</h3>

- Added disk read and write time charts to the [**Hardware** dashboard](../v2.1/admin-ui-hardware-dashboard.html). [#27977][#27977] [#28594][#28594] {% comment %}doc{% endcomment %}
- The [**Hardware** dashboard](../v2.1/admin-ui-hardware-dashboard.html) now shows system and user CPU summed instead of separately, and normalized by number of CPUs. [#28596][#28596] {% comment %}doc{% endcomment %}
- Added a link to the [**Statements** page](../v2.1/admin-ui-statements-page.html) from the sidebar. [#27928][#27928] {% comment %}doc{% endcomment %}
- The [**Statements** page](../v2.1/admin-ui-statements-page.html) now reveals whether a SQL query used the new cost-based optimizer. [#28094][#28094] {% comment %}doc{% endcomment %}
- Added the number of CPUs and percentages of memory and disk usage to the [**Node List**](../v2.1/admin-ui-overview-dashboard.html). [#28189][#28189] {% comment %}doc{% endcomment %}
- Removed "distsql reads" time series from the [**SQL** dashboard](../v2.1/admin-ui-sql-dashboard.html), since execution engines are being merged. [#28350][#28350] {% comment %}doc{% endcomment %}
- The **Problem Ranges** report now shows the number of replicas that have an excessively large log. [#28034][#28034] {% comment %}doc{% endcomment %}
- The **Stores** report now shows encryption statistics. [#26890][#26890] {% comment %}doc{% endcomment %}
- Login is now required by default on secure clusters. [#28416][#28416] {% comment %}doc{% endcomment %}
- Enlarged the clickable area on dropdown components to include entirety of the surrounding container. [#28331][#28331]
- The [**Jobs** page](../v2.1/admin-ui-jobs-page.html) now supports indefinitely-running job types that have a "highwater timestamp", instead of the "fraction completed" used by jobs with a finite task. [#28535][#28535] {% comment %}doc{% endcomment %}
- Improved the alert text that is displayed when the Web UI connection is lost. [#28838][#28838]

<h3 id="v2.1.0-beta.20180827-bug-fixes">Bug fixes</h3>

- Fixed a bug where the [**Statements** page](../v2.1/admin-ui-statements-page.html) in the Web UI blanked out after reloading itself. [#28108][#28108]
- CockroachDB no longer erroneously allows generator functions, aggregates, and window functions in the `ON` clause of joins. [#28839][#28839]
- Fixed an `index-id does not exist` error that could happen on [`ADD COLUMN`](../v2.1/add-column.html) or [`DROP COLUMN`](../v2.1/drop-column.html). [#28803][#28803]
- Fixed row counts in the output of [`IMPORT`](../v2.1/import.html). [#28469][#28469] {% comment %}doc{% endcomment %}
- Fixed various problems related to the rollback of [schema changes](../v2.1/online-schema-changes.html).[#28014][#28014] [#28050][#28050]
- Prevented a node from freezing after `DROP DATABASE` when the command aborts, and fixed the rare use of an older descriptor after [`DROP INDEX`](../v2.1/drop-index.html). [#28381][#28381]
- Fixed the handling of regular aggregations combined with window functions and columns "as-is". [#27897][#27897]
- Fixed a panic caused by key-value tracing a plan that uses an index joiner. [#27942][#27942]
- The `bytea_output` [session variable](../v2.1/set-vars.html) is now properly effective for distributed queries. [#27951][#27951]
- Limited the size of "batch groups" when committing a batch to RocksDB to avoid rare scenarios in which multi-gigabyte batch groups are created, which can cause a server to run out of memory when replaying the RocksDB log at startup. [#27895][#27895]
- Fixed the round-tripping of cast expression formatting in the presence of [collated strings](../v2.1/collate.html). [#27941][#27941]
- Prevented spurious query errors when planning some complex correlated SRFs through the distributed execution engine. [#27995][#27995]
- Fixed the handling of frame boundary offsets in `WINDOW` clauses. [#27933][#27933]
- Fixed the formatting of time datatypes in some circumstances. [#28040][#28040]
- Fixed the behavior of `crdb_internal.cluster_id()` in distributed queries. [#28042][#28042]
- Fixed incorrect `NULL` handling in the distributed implementations of `INTERSECT` and `EXCEPT`. [#28097][#28097]
- Corrected erroneous failures of privileged built-ins in queries run through the distributed execution engine. [#28107][#28107]
- Ensured that the [`TIMESTAMP`](../v2.1/timestamp.html) data type never retains a timezone and renders consistently across a distributed computation flow. [#28112][#28112]
- Corrected casts and binary operators between `TIMESTAMPTZ` and `TIMESTAMP` in some cases. [#28128][#28128]
- Prevented some [sequence built-ins](../v2.1/functions-and-operators.html#sequence-functions) from incorrectly running in distributed flows. [#28114][#28114]
- Corrected the round-trip formatting of negative floats and decimals in the context of other expressions when executing in a distributed flow. [#28129][#28129]
- Fixed bug that could skip the row following a deleted row during [`BACKUP`](../v2.1/backup.html). [#28172][#28172]
- The [`cockroach user set --password`](../v2.1/create-and-manage-users.html) command can now change the password of existing users. [#28197][#28197] {% comment %}doc{% endcomment %}
- CockroachDB now supports a wider range of tuple and array values in query results. [#28151][#28151]
- This release includes the following fixes to the [`cockroach sql`](../v2.1/use-the-built-in-sql-client.html) and [`cockroach demo`](../v2.1/cockroach-demo.html) command:
    - The commands are now properly able to customize the prompt with `~/.editrc` on Linux. [#28233][#28233] {% comment %}doc{% endcomment %}
    - The commands once again support copy-pasting special unicode character from other documents. [#28233][#28233] {% comment %}doc{% endcomment %}
    - The commands once again properly handle copy-pasting a mixture of client-side commands (e.g., `set`) and SQL statements. [#28235][#28235]
    - The commands now properly print a warning when a `?` character is mistakenly used to receive contextual help in a non-interactive session, instead of crashing. [#28324][#28324]
    - The commands now work properly even when the `TERM` environment variable is not set. [#28613][#28613]
- Generator built-ins now correctly return no rows instead of `NULL` when given `NULL` arguments. [#28252][#28252]
- Fixed out-of-memory errors caused by very large raft logs. [#28293][#28293] [#28511][#28511]
- Certain queries that use empty arrays constructed from subqueries no longer spuriously fail when executed via the distributed execution engine. [#28391][#28391]
- `SHOW JOBS` now uses placeholder values for `BACKUP` and `RESTORE` job descriptions. [#28321][#28321]
- CockroachDB now handles negative `FLOAT` zeros properly in more cases. [#28569][#28569]
- CockroachDB now correctly handles computation of `array_agg()` when used as a [window function](../v2.1/window-functions.html). [#28291][#28291]
- [Decommissioning multiple nodes](../v2.1/remove-nodes.html) is now possible without posing a risk to cluster health. Recommissioning a node no longer requires a restart of the target node to take effect. [#28707][#28707] {% comment %}doc{% endcomment %}
- Fixed a rare scenario where the value written for one system key was seen when another system key was read, leading to the violation of internal invariants. [#28794][#28794]
- Hidden columns are now listed in `information_schema` and `pg_catalog` tables, for better compatibility with PostgreSQL. [#28750][#28750] {% comment %}doc{% endcomment %}
- Casting arrays now correctly preserves `NULL` values. [#28860][#28860]
- `IMPORT` no longer silently converts `rn` characters in CSV files into `n`. [#28181][#28181]
- Fixed initial poor latencies introduced in a recent release. [#28599][#28599]

<h3 id="v2.1.0-beta.20180827-performance-improvements">Performance improvements</h3>

- CockroachDB now periodically refreshes table leases to avoid initial latency on tables that have not been accessed recently. [#28725][#28725] {% comment %}doc{% endcomment %}
- Improved the fixed cost of running distributed sql queries. [#27899][#27899]
- Prevent large buffer allocation for DML statements with `RETURNING` clauses. [#27944][#27944]
- Improved low-level iteration performance in the presence of range tombstones. [#27904][#27904]
- Data ingested with `RESTORE` and `IMPORT` is now eligible for a performance optimization used in incremental `BACKUP` and `CHANGEFEED`s. [#27966][#27966]
- Reduced lock contention in `RemoteClockMonitor`. [#28000][#28000]
- Reduced lock contention in the Replica write path. [#24990][#24990]
- Reduced lock contention in the Gossip server. [#28001][#28001] [#28127][#28127]
- Reduced lock contention and avoided allocations in `raftEntryCache`. [#27997][#27997]
- Fixed a batch commit performance regression that reduced write performance by 20%. [#28163][#28163]
- Greatly improved the performance of catching up followers that are behind when Raft logs are large. [#28511][#28511]
- Slightly improved the performance of the `nextval()` [sequence function](../v2.1/functions-and-operators.html#sequence-functions). [#28576][#28576]
- Reduced the cost of Raft log truncations and increased single-range throughput. [#28126][#28126]
- Subqueries are now run through the distributed execution engine. [#28580][#28580]
- Range leases are now automatically rebalanced throughout the cluster to even out the amount of QPS being handled by each node. [#28340][#28340] {% comment %}doc{% endcomment %}
- Greatly improved the performance of deleting from interleaved tables that have `ON DELETE CASCADE` clauses. [#28330][#28330]

<h3 id="v2.1.0-beta.20180827-doc-updates">Doc updates</h3>

- Added a tutorial on [orchestrating CockroachDB across multiple Kubernetes clusters in different regions](../v2.1/orchestrate-cockroachdb-with-kubernetes-multi-cluster.html). [#3558](https://github.com/cockroachdb/docs/pull/3558)
- Expanded the [Build an App](../v2.1/build-an-app-with-cockroachdb.html) tutorials for most languages to offer instructions and code samples for secure clusters. [#3557](https://github.com/cockroachdb/docs/pull/3557)
- Significantly expanded the documentation on [Window Functions](../v2.1/window-functions.html). [#3426](https://github.com/cockroachdb/docs/pull/3426)
- Added a conceptual explanation of [Online Schema Changes](../v2.1/online-schema-changes.html), with examples and current limitations. [#3492](https://github.com/cockroachdb/docs/pull/3492)
- Streamlined instructions for essential [enterprise and core backup and restore tasks](../v2.1/backup-and-restore.html), including a bash script for automated backups. [#3489](https://github.com/cockroachdb/docs/pull/3489)
- Expanded the [TPC-C Performance Benchmarking](../v2.1/performance-benchmarking-with-tpc-c.html) tutorial to cover benchmarking large clusters. [#3281][#3281]
- Documented the `skip` option for [`IMPORT`](../v2.1/import.html) as well as support for decompressing input files. [#3510](https://github.com/cockroachdb/docs/pull/3510)
- Documented the `ANALYZE`, `OPT`, and `DISTSQL` option for [`EXPLAIN`](../v2.1/explain.html). [#3427](https://github.com/cockroachdb/docs/pull/3427)
- Documented how to [add a computed column to an existing table](../v2.1/computed-columns.html#add-a-computed-column-to-an-existing-table) and [convert a computed column into a regular column](../v2.1/computed-columns.html#convert-a-computed-column-into-a-regular-column). [#3501](https://github.com/cockroachdb/docs/pull/3501) [#3538](https://github.com/cockroachdb/docs/pull/3538)
- Documented the abbreviated PostgreSQL [`INTERVAL`](../v2.1/interval.html) format. [#3503](https://github.com/cockroachdb/docs/pull/3503)
- Documented the `auto_trace` [session variable](../v2.1/set-vars.html), which replaces the `SHOW TRACE` statement. [#3508](https://github.com/cockroachdb/docs/pull/3508)
- Various updates to the [Information Schema](../v2.1/information-schema.html) documentation. [#3531](https://github.com/cockroachdb/docs/pull/3531)
- Documented the new [default databases](../v2.1/show-databases.html#default-databases). [#3506](https://github.com/cockroachdb/docs/pull/3506)
- Cleaned up the output of all `SHOW` statements; combined the `SHOW CREATE TABLE`, `SHOW CREATE VIEW`, and `SHOW CREATE SEQUENCE` pages into a single [`SHOW
CREATE`](../v2.1/show-create.html) page; and removed the experimental status from [`SHOW CONSTRAINTS`](../v2.1/show-constraints.html). [#3523](https://github.com/cockroachdb/docs/pull/3523)
- Documented the [`cockroach demo`](../v2.1/cockroach-demo.html) command. [#3509](https://github.com/cockroachdb/docs/pull/3509)
- Various updates to the [`cockroach sql`](../v2.1/use-the-built-in-sql-client.html) documentation. [#3499](https://github.com/cockroachdb/docs/pull/3499)

<h3 id="v2.1.0-beta.20180827-contributors">Contributors</h3>

This release includes 493 merged PRs by 39 authors.
We would like to thank the following contributors from the CockroachDB community:

- Constantine Peresypkin
- Garvit Juniwal
- Joseph Lowinske (first-time contributor, CockroachDB team member)
- Song Hao
- Takuya Kuwahara
- Tim O'Brien (first-time contributor, CockroachDB team member)
- neeral

[#24990]: https://github.com/cockroachdb/cockroach/pull/24990
[#26554]: https://github.com/cockroachdb/cockroach/pull/26554
[#26806]: https://github.com/cockroachdb/cockroach/pull/26806
[#26890]: https://github.com/cockroachdb/cockroach/pull/26890
[#27022]: https://github.com/cockroachdb/cockroach/pull/27022
[#27752]: https://github.com/cockroachdb/cockroach/pull/27752
[#27800]: https://github.com/cockroachdb/cockroach/pull/27800
[#27806]: https://github.com/cockroachdb/cockroach/pull/27806
[#27812]: https://github.com/cockroachdb/cockroach/pull/27812
[#27829]: https://github.com/cockroachdb/cockroach/pull/27829
[#27861]: https://github.com/cockroachdb/cockroach/pull/27861
[#27862]: https://github.com/cockroachdb/cockroach/pull/27862
[#27863]: https://github.com/cockroachdb/cockroach/pull/27863
[#27880]: https://github.com/cockroachdb/cockroach/pull/27880
[#27884]: https://github.com/cockroachdb/cockroach/pull/27884
[#27895]: https://github.com/cockroachdb/cockroach/pull/27895
[#27897]: https://github.com/cockroachdb/cockroach/pull/27897
[#27899]: https://github.com/cockroachdb/cockroach/pull/27899
[#27904]: https://github.com/cockroachdb/cockroach/pull/27904
[#27916]: https://github.com/cockroachdb/cockroach/pull/27916
[#27928]: https://github.com/cockroachdb/cockroach/pull/27928
[#27933]: https://github.com/cockroachdb/cockroach/pull/27933
[#27941]: https://github.com/cockroachdb/cockroach/pull/27941
[#27942]: https://github.com/cockroachdb/cockroach/pull/27942
[#27943]: https://github.com/cockroachdb/cockroach/pull/27943
[#27944]: https://github.com/cockroachdb/cockroach/pull/27944
[#27947]: https://github.com/cockroachdb/cockroach/pull/27947
[#27951]: https://github.com/cockroachdb/cockroach/pull/27951
[#27952]: https://github.com/cockroachdb/cockroach/pull/27952
[#27959]: https://github.com/cockroachdb/cockroach/pull/27959
[#27961]: https://github.com/cockroachdb/cockroach/pull/27961
[#27962]: https://github.com/cockroachdb/cockroach/pull/27962
[#27966]: https://github.com/cockroachdb/cockroach/pull/27966
[#27977]: https://github.com/cockroachdb/cockroach/pull/27977
[#27978]: https://github.com/cockroachdb/cockroach/pull/27978
[#27991]: https://github.com/cockroachdb/cockroach/pull/27991
[#27995]: https://github.com/cockroachdb/cockroach/pull/27995
[#27996]: https://github.com/cockroachdb/cockroach/pull/27996
[#27997]: https://github.com/cockroachdb/cockroach/pull/27997
[#28000]: https://github.com/cockroachdb/cockroach/pull/28000
[#28001]: https://github.com/cockroachdb/cockroach/pull/28001
[#28007]: https://github.com/cockroachdb/cockroach/pull/28007
[#28014]: https://github.com/cockroachdb/cockroach/pull/28014
[#28034]: https://github.com/cockroachdb/cockroach/pull/28034
[#28038]: https://github.com/cockroachdb/cockroach/pull/28038
[#28039]: https://github.com/cockroachdb/cockroach/pull/28039
[#28040]: https://github.com/cockroachdb/cockroach/pull/28040
[#28042]: https://github.com/cockroachdb/cockroach/pull/28042
[#28050]: https://github.com/cockroachdb/cockroach/pull/28050
[#28085]: https://github.com/cockroachdb/cockroach/pull/28085
[#28094]: https://github.com/cockroachdb/cockroach/pull/28094
[#28095]: https://github.com/cockroachdb/cockroach/pull/28095
[#28097]: https://github.com/cockroachdb/cockroach/pull/28097
[#28107]: https://github.com/cockroachdb/cockroach/pull/28107
[#28108]: https://github.com/cockroachdb/cockroach/pull/28108
[#28112]: https://github.com/cockroachdb/cockroach/pull/28112
[#28114]: https://github.com/cockroachdb/cockroach/pull/28114
[#28116]: https://github.com/cockroachdb/cockroach/pull/28116
[#28126]: https://github.com/cockroachdb/cockroach/pull/28126
[#28127]: https://github.com/cockroachdb/cockroach/pull/28127
[#28128]: https://github.com/cockroachdb/cockroach/pull/28128
[#28129]: https://github.com/cockroachdb/cockroach/pull/28129
[#28143]: https://github.com/cockroachdb/cockroach/pull/28143
[#28148]: https://github.com/cockroachdb/cockroach/pull/28148
[#28151]: https://github.com/cockroachdb/cockroach/pull/28151
[#28159]: https://github.com/cockroachdb/cockroach/pull/28159
[#28162]: https://github.com/cockroachdb/cockroach/pull/28162
[#28163]: https://github.com/cockroachdb/cockroach/pull/28163
[#28169]: https://github.com/cockroachdb/cockroach/pull/28169
[#28172]: https://github.com/cockroachdb/cockroach/pull/28172
[#28181]: https://github.com/cockroachdb/cockroach/pull/28181
[#28183]: https://github.com/cockroachdb/cockroach/pull/28183
[#28189]: https://github.com/cockroachdb/cockroach/pull/28189
[#28197]: https://github.com/cockroachdb/cockroach/pull/28197
[#28198]: https://github.com/cockroachdb/cockroach/pull/28198
[#28199]: https://github.com/cockroachdb/cockroach/pull/28199
[#28200]: https://github.com/cockroachdb/cockroach/pull/28200
[#28204]: https://github.com/cockroachdb/cockroach/pull/28204
[#28220]: https://github.com/cockroachdb/cockroach/pull/28220
[#28226]: https://github.com/cockroachdb/cockroach/pull/28226
[#28233]: https://github.com/cockroachdb/cockroach/pull/28233
[#28235]: https://github.com/cockroachdb/cockroach/pull/28235
[#28238]: https://github.com/cockroachdb/cockroach/pull/28238
[#28244]: https://github.com/cockroachdb/cockroach/pull/28244
[#28249]: https://github.com/cockroachdb/cockroach/pull/28249
[#28252]: https://github.com/cockroachdb/cockroach/pull/28252
[#28253]: https://github.com/cockroachdb/cockroach/pull/28253
[#28261]: https://github.com/cockroachdb/cockroach/pull/28261
[#28291]: https://github.com/cockroachdb/cockroach/pull/28291
[#28293]: https://github.com/cockroachdb/cockroach/pull/28293
[#28319]: https://github.com/cockroachdb/cockroach/pull/28319
[#28321]: https://github.com/cockroachdb/cockroach/pull/28321
[#28324]: https://github.com/cockroachdb/cockroach/pull/28324
[#28326]: https://github.com/cockroachdb/cockroach/pull/28326
[#28330]: https://github.com/cockroachdb/cockroach/pull/28330
[#28331]: https://github.com/cockroachdb/cockroach/pull/28331
[#28340]: https://github.com/cockroachdb/cockroach/pull/28340
[#28342]: https://github.com/cockroachdb/cockroach/pull/28342
[#28350]: https://github.com/cockroachdb/cockroach/pull/28350
[#28357]: https://github.com/cockroachdb/cockroach/pull/28357
[#28359]: https://github.com/cockroachdb/cockroach/pull/28359
[#28366]: https://github.com/cockroachdb/cockroach/pull/28366
[#28373]: https://github.com/cockroachdb/cockroach/pull/28373
[#28381]: https://github.com/cockroachdb/cockroach/pull/28381
[#28383]: https://github.com/cockroachdb/cockroach/pull/28383
[#28391]: https://github.com/cockroachdb/cockroach/pull/28391
[#28392]: https://github.com/cockroachdb/cockroach/pull/28392
[#28394]: https://github.com/cockroachdb/cockroach/pull/28394
[#28396]: https://github.com/cockroachdb/cockroach/pull/28396
[#28397]: https://github.com/cockroachdb/cockroach/pull/28397
[#28411]: https://github.com/cockroachdb/cockroach/pull/28411
[#28416]: https://github.com/cockroachdb/cockroach/pull/28416
[#28465]: https://github.com/cockroachdb/cockroach/pull/28465
[#28467]: https://github.com/cockroachdb/cockroach/pull/28467
[#28469]: https://github.com/cockroachdb/cockroach/pull/28469
[#28490]: https://github.com/cockroachdb/cockroach/pull/28490
[#28492]: https://github.com/cockroachdb/cockroach/pull/28492
[#28494]: https://github.com/cockroachdb/cockroach/pull/28494
[#28502]: https://github.com/cockroachdb/cockroach/pull/28502
[#28511]: https://github.com/cockroachdb/cockroach/pull/28511
[#28514]: https://github.com/cockroachdb/cockroach/pull/28514
[#28531]: https://github.com/cockroachdb/cockroach/pull/28531
[#28533]: https://github.com/cockroachdb/cockroach/pull/28533
[#28535]: https://github.com/cockroachdb/cockroach/pull/28535
[#28555]: https://github.com/cockroachdb/cockroach/pull/28555
[#28569]: https://github.com/cockroachdb/cockroach/pull/28569
[#28575]: https://github.com/cockroachdb/cockroach/pull/28575
[#28576]: https://github.com/cockroachdb/cockroach/pull/28576
[#28580]: https://github.com/cockroachdb/cockroach/pull/28580
[#28582]: https://github.com/cockroachdb/cockroach/pull/28582
[#28586]: https://github.com/cockroachdb/cockroach/pull/28586
[#28594]: https://github.com/cockroachdb/cockroach/pull/28594
[#28596]: https://github.com/cockroachdb/cockroach/pull/28596
[#28599]: https://github.com/cockroachdb/cockroach/pull/28599
[#28613]: https://github.com/cockroachdb/cockroach/pull/28613
[#28618]: https://github.com/cockroachdb/cockroach/pull/28618
[#28632]: https://github.com/cockroachdb/cockroach/pull/28632
[#28649]: https://github.com/cockroachdb/cockroach/pull/28649
[#28676]: https://github.com/cockroachdb/cockroach/pull/28676
[#28707]: https://github.com/cockroachdb/cockroach/pull/28707
[#28725]: https://github.com/cockroachdb/cockroach/pull/28725
[#28726]: https://github.com/cockroachdb/cockroach/pull/28726
[#28733]: https://github.com/cockroachdb/cockroach/pull/28733
[#28750]: https://github.com/cockroachdb/cockroach/pull/28750
[#28776]: https://github.com/cockroachdb/cockroach/pull/28776
[#28794]: https://github.com/cockroachdb/cockroach/pull/28794
[#28803]: https://github.com/cockroachdb/cockroach/pull/28803
[#28814]: https://github.com/cockroachdb/cockroach/pull/28814
[#28838]: https://github.com/cockroachdb/cockroach/pull/28838
[#28839]: https://github.com/cockroachdb/cockroach/pull/28839
[#28856]: https://github.com/cockroachdb/cockroach/pull/28856
[#28860]: https://github.com/cockroachdb/cockroach/pull/28860
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v2.1.0-beta.20180904-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-beta.20180904.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-beta.20180904.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-beta.20180904.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.1.0-beta.20180904-enterprise-edition-changes">Enterprise edition changes</h3>

- Added additional monitoring metrics for [`CHANGEFEED`s](../v2.1/create-changefeed.html). [#28923][#28923]

<h3 id="v2.1.0-beta.20180904-sql-language-changes">SQL language changes</h3>

- CockroachDB now hides more information from the statement statistics in [diagnostics reporting](../v2.1/diagnostics-reporting.html). [#28906][#28906] {% comment %}doc{% endcomment %}
- CockroachDB now preserves the distinction between different column types for string values like in PostgreSQL, for compatibility with 3rd party tools and ORMs. [#29006][#29006] {% comment %}doc{% endcomment %}
- The [`SET CLUSTER SETTING`](../v2.1/set-cluster-setting.html) statement can no longer be used inside a [transaction](../v2.1/transactions.html). It also now attempts to wait until the change has been gossiped before allowing subsequent statements. [#29082][#29082] {% comment %}doc{% endcomment %}
- The [`ALTER TABLE ... SPLIT AT`](../v2.1/split-at.html) statement now produces an error if executed while the merge queue is enabled, as the merge queue is likely to immediately discard any splits created by the statement. [#29082][#29082] {% comment %}doc{% endcomment %}

<h3 id="v2.1.0-beta.20180904-command-line-changes">Command-line changes</h3>

- Improved the error message printed when [`cockroach quit`](../v2.1/stop-a-node.html) is run on a node that has not yet been initialized. [#29152][#29152]
- The [`cockroach start`](../v2.1/start-a-node.html) command now emits the PID of the server process to the file specified by the `--pid-file` flag as soon as it is ready to accept network connections but possibly before it is done bootstrapping (i.e., before [`cockroach init`](../v2.1/initialize-a-cluster.html) completes). To wait for SQL readiness, use the `--listen-url-file` flag instead. [#29160][#29160] {% comment %}doc{% endcomment %}

<h3 id="v2.1.0-beta.20180904-bug-fixes">Bug fixes</h3>

- CockroachDB now populates the `data_type` column of `information_schema.columns` like PostgreSQL, for compatibility with 3rd party tools and ORMs. [#29006][#29006] {% comment %}doc{% endcomment %}
- The [`cockroach dump`](../v2.1/sql-dump.html) command can once again operate across multiple CockroachDB versions. [#29006][#29006]
- CockroachDB now distinguishes `CHAR` and `VARCHAR`, as mandated by the SQL standard and PostgreSQL compatibility. When a width is not specified (e.g., `CHAR(3)`), the maximum width of `VARCHAR` remains unconstrained whereas the maximum width of `CHAR` is 1 character. [#29006][#29006] {% comment %}doc{% endcomment %}
- CockroachDB now properly checks the width of strings inserted in a [collated string](../v2.1/collate.html) column with a specified width. [#29006][#29006]
- Improve the handling of jobs run prior to a [cluster upgrade](../v2.1/upgrade-cockroach-version.html). [#29019][#29019]
- CockroachDB once again prefers using an IPv4 listen address if a hostname with both IPv4 and IPv6 addresses is provided to `--host`/`--listen-addr`/`--advertise-addr`. [#29158][#29158]
- Fixed a memory leak when contended queries time out. [#29099][#29099]
- When the `--background` flag is specified, the [`cockroach start`](../v2.1/start-a-node.html) command now avoids printing messages to standard output after it has detached to the background. [#29160][#29160]

<h3 id="v2.1.0-beta.20180904-contributors">Contributors</h3>

This release includes 41 merged PRs by 16 authors.

[#28906]: https://github.com/cockroachdb/cockroach/pull/28906
[#28923]: https://github.com/cockroachdb/cockroach/pull/28923
[#28978]: https://github.com/cockroachdb/cockroach/pull/28978
[#29006]: https://github.com/cockroachdb/cockroach/pull/29006
[#29019]: https://github.com/cockroachdb/cockroach/pull/29019
[#29082]: https://github.com/cockroachdb/cockroach/pull/29082
[#29099]: https://github.com/cockroachdb/cockroach/pull/29099
[#29152]: https://github.com/cockroachdb/cockroach/pull/29152
[#29158]: https://github.com/cockroachdb/cockroach/pull/29158
[#29160]: https://github.com/cockroachdb/cockroach/pull/29160
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v2.1.0-beta.20180910-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-beta.20180910.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-beta.20180910.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-beta.20180910.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.1.0-beta.20180910-general-changes">General changes</h3>

- CockroachDB no longer checks key usage attributes in [security certificates](../v2.1/create-security-certificates.html). [#29223][#29223]

<h3 id="v2.1.0-beta.20180910-sql-language-changes">SQL language changes</h3>

- In a mixed-version cluster, nodes running v2.0 no longer schedule distributed SQL work on nodes running v2.1. [#29168][#29168]
- When [`TRUNCATE`](../v2.1/truncate.html) or [`DROP TABLE`](../v2.1/drop-table.html) is run while a [schema change](../v2.1/online-schema-changes.html) like `CREATE INDEX` is being processed, the schema change job no longer runs indefinitely. [#29262][#29262]
- [View](../v2.1/create-view.html) and [table](../v2.1/create-table.html) names are now recycled quickly after [`DROP VIEW`](../v2.1/drop-view.html) and [`DROP TABLE`](../v2.1/drop-table.html).

<h3 id="v2.1.0-beta.20180910-command-line-changes">Command-line changes</h3>

- The new `cockroach workload` command provides various generators for data and query loads. [#28978][#28978]
- The `csv` and `tsv` formats for `cockroach` commands that output result rows now buffer data for a maximum of 5 seconds. This makes it possible to, for example, view SQL [`CHANGEFEED`s](../v2.1/create-changefeed.html) interactively with [`cockroach sql`](../v2.1/use-the-built-in-sql-client.html) and [`cockroach demo`](../v2.1/cockroach-demo.html). [#29445][#29445]

<h3 id="v2.1.0-beta.20180910-bug-fixes">Bug fixes</h3>

- Fixed support for the `--http-host` flag, which was broken in previous 2.1 beta releases. [#29220][#29220]
- Reduced the duration of partitions in the gossip network when a node crashes to eliminate a cause of temporary data unavailability. [#29317][#29317]
- The `unnest` and `_pg_expandarray` [functions](../v2.1/functions-and-operators.html) now return an error when called with NULL as the first argument. [#29385][#29385]
- Fixed a crash caused by JSON values and operations that use [arrays](../v2.1/array.html). [#29432][#29432]
- Fixed a rare crash with the message `no err but aborted txn proto`. [#29456][#29456]
- Fixed a crash caused by SQL statements containing `->(NULL::STRING)`. [#29414][#29414]
- Fixed table descriptor corruption when [`TRUNCATE`](../v2.1/truncate.html) is run while [`DROP COLUMN`](../v2.1/drop-column.html) is being processed. [#29262][#29262]

<h3 id="v2.1.0-beta.20180910-doc-updates">Doc updates</h3>

- Updated the [Data Replication](../v2.1/demo-data-replication.html) tutorial and the [Production Checklist](../v2.1/recommended-production-settings.html) to emphasize the importance of manually increasing the replication factor for important internal data when doing so for the `.default` replication zone. [#3702](https://github.com/cockroachdb/docs/pull/3702)

<h3 id="v2.1.0-beta.20180910-contributors">Contributors</h3>

This release includes 65 merged PRs by 20 authors.

[#28978]: https://github.com/cockroachdb/cockroach/pull/28978
[#29168]: https://github.com/cockroachdb/cockroach/pull/29168
[#29220]: https://github.com/cockroachdb/cockroach/pull/29220
[#29223]: https://github.com/cockroachdb/cockroach/pull/29223
[#29262]: https://github.com/cockroachdb/cockroach/pull/29262
[#29294]: https://github.com/cockroachdb/cockroach/pull/29294
[#29317]: https://github.com/cockroachdb/cockroach/pull/29317
[#29352]: https://github.com/cockroachdb/cockroach/pull/29352
[#29385]: https://github.com/cockroachdb/cockroach/pull/29385
[#29414]: https://github.com/cockroachdb/cockroach/pull/29414
[#29432]: https://github.com/cockroachdb/cockroach/pull/29432
[#29445]: https://github.com/cockroachdb/cockroach/pull/29445
[#29456]: https://github.com/cockroachdb/cockroach/pull/29456
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v2.1.0-beta.20180917-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-beta.20180917.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-beta.20180917.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-beta.20180917.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.1.0-beta.20180917-backward-incompatible-changes">Backward-incompatible changes</h3>

- [`CHANGEFEED`s](../v2.1/change-data-capture.html) created with previous betas and alphas will not work with this version. [#29559][#29559]
- The experimental, non-recommended `kv.allocator.stat_based_rebalancing.enabled` and `kv.allocator.stat_rebalance_threshold` [cluster settings](../v2.1/cluster-settings.html) have been replaced by an improved approach to load-based rebalancing that can be controlled via the new `kv.allocator.load_based_rebalancing` [cluster setting](../v2.1/cluster-settings.html). By default, leases will be rebalanced within a cluster to achieve better QPS balance. [#29663][#29663]

<h3 id="v2.1.0-beta.20180917-sql-language-changes">SQL language changes</h3>

- Renamed the `EXPERIMENTAL_OPT` [session setting](../v2.1/set-vars.html) to `OPTIMIZER`. The default value is `ON`, as before. [#29530][#29530]
- Special characters, such as newlines, are now formatted using `octal`, instead of `hex`, for compatibility with PostgreSQL. [#29593][#29593]

<h3 id="v2.1.0-beta.20180917-command-line-changes">Command-line changes</h3>

- All `cockroach` client sub-commands (except for `cockroach workload`) now support the `--url` flag. [#29621][#29621]
- Removed `--log-backtrace-at` and `--verbosity` flags, which were documented as being only useful by CockroachDB developers yet never actually used by CockroachDB developers. [#30092][#30092]

<h3 id="v2.1.0-beta.20180917-admin-ui-changes">Admin UI changes</h3>

- Long table rows now wrap, when necessary. [#29551][#29551]
- [Diagnostics](../v2.1/diagnostics-reporting.html) requests are now proxied through Cockroach Labs to prevent exposing user IP addresses. [#29194][#29194]
- Added attributes to the login form to allow LastPass to properly recognize it. [#29561][#29561]
- Custom and regular charts now have the same width. [#30083][#30083]
- Improved the UX of the [**Custom Chart**](../v2.1/admin-ui-custom-chart-debug-page.html) page, and added the ability to configure multiple independent charts. [#30118][#30118]
- Improved the design and accessibility of tooltips. [#30115][#30115]
- Various improvements to the [**Statements**](../v2.1/admin-ui-statements-page.html) pages. [#30115][#30115]
    - Simplified and cleaned-up the appearance.
    - Added statement retries.
    - Right-aligned all numeric stats.
    - Added more tooltips, including for the **By Gateway Node** table on the **Statement Details** page.
    - Improved tooltips by adding a legend detailing the parts of the bar chart.
    - Highlighted summary rows.
    - Improved table headers.
    - Reordered tables to highlight the most useful data.
    - Widened bar charts.
    - Summarized [`SET`](../v2.1/set-vars.html) statements.
    - When a statement fingerprint has sometimes failed, used the optimizer, or been distributed, the number of matching executions is now shown.

<h3 id="v2.1.0-beta.20180917-bug-fixes">Bug fixes</h3>

- Fixed a bug that would allow the cluster summary text in the Admin UI to overflow its space. [#29548][#29548]
- Corrected the behavior of `INSERT INTO t DEFAULT VALUES` when there are active schema changes. [#29496][#29496]
- Fixed a race condition in [`IMPORT`](../v2.1/import.html) with a column that was a [collated string](../v2.1/collate.html). [#29386][#29386]
- Fixed crash caused by certain kinds of [`UPSERT ... RETURNING`](../v2.1/upsert.html) statements on tables with active schema changes. [#29543][#29543]
- [`CHANGEFEED`s](../v2.1/change-data-capture.html) now error when a watched table backfills (instead of undefined behavior). [#29559][#29559]
- Fixed a panic that occurs when verbose logging is enabled. [#29534][#29534]
- Fixed a panic caused by inserting values of the wrong type into columns depended on by [computed columns](../v2.1/computed-columns.html). [#29598][#29598]
- Fixed an issue where, under severe load, clients were sometimes receiving [retryable errors](../v2.1/transactions.html#error-handling) with a non-retryable error code. [#29614][#29614]
- The [`cockroach gen haproxy`](../v2.1/generate-cockroachdb-resources.html) command now recognizes nodes that specify the HTTP port number using `--http-addr` instead of `--http-port`. [#29536][#29536]
- Fixed a panic in SQL execution. [#29669][#29669]
- Fixed a panic caused by malformed UTF-8 SQL strings. [#29668][#29668]
- Corrected the Postgres `oid` type returned for collated string columns. [#29674][#29674]
- Enterprise [`CHANGEFEED`s](../v2.1/change-data-capture.html) now correctly skip the initial scan when started with the `cursor=` option. [#29613][#29613]
- Hash functions with `NULL` input now return `NULL`. [#29974][#29974]
- Prevented a very rare premature failure in [`CHANGEFEED`s](../v2.1/change-data-capture.html) caused by a race condition with range splits. [#30009][#30009]
- Fixed a crash when `SELECT MIN(NULL)` was run with the [SQL optimizer](../v2.1/cost-based-optimizer.html) enabled. [#30014][#30014]
- Fixed a rare crash with the message `retryable error for the wrong txn`. [#30046][#30046]
- Fixed a bug where certain queries, like merge joins, would appear to run out of memory due to incorrect memory accounting and fail. [#30087][#30087]
- The `string_agg()` [function](../v2.1/functions-and-operators.html) can now accept a `NULL` as a delimiter. [#30076][#30076]

<h3 id="v2.1.0-beta.20180917-performance-improvements">Performance improvements</h3>

- Range replicas are now automatically rebalanced throughout the cluster to even out the amount of QPS being handled by each node. [#29663][#29663]
- Prevented allocation when checking RPC connection health. [#30055][#30055]

<h3 id="v2.1.0-beta.20180917-doc-updates">Doc updates</h3>

- Updated the description of [correlated subqueries](../v2.1/subqueries.html#correlated-subqueries). More updates coming soon. [#3714](https://github.com/cockroachdb/docs/pull/3714)
- Update the description of [`cockroach` client connection parameters](../v2.1/connection-parameters.html). [#3715](https://github.com/cockroachdb/docs/pull/3715)
- Added documentation of the `public` role, which all users belong to. [#3722](https://github.com/cockroachdb/docs/pull/3722)
- Update the [Diagnostics Reporting](../v2.1/diagnostics-reporting.html) page with a summary of details reported and how to view the details yourself. [#3737](https://github.com/cockroachdb/docs/pull/3737)

<h3 id="v2.1.0-beta.20180917-contributors">Contributors</h3>

This release includes 87 merged PRs by 23 authors. We would like to thank the following contributors from the CockroachDB community:

- Sankt Petersbug (first-time contributor)

[#29194]: https://github.com/cockroachdb/cockroach/pull/29194
[#29386]: https://github.com/cockroachdb/cockroach/pull/29386
[#29496]: https://github.com/cockroachdb/cockroach/pull/29496
[#29530]: https://github.com/cockroachdb/cockroach/pull/29530
[#29534]: https://github.com/cockroachdb/cockroach/pull/29534
[#29536]: https://github.com/cockroachdb/cockroach/pull/29536
[#29543]: https://github.com/cockroachdb/cockroach/pull/29543
[#29548]: https://github.com/cockroachdb/cockroach/pull/29548
[#29551]: https://github.com/cockroachdb/cockroach/pull/29551
[#29559]: https://github.com/cockroachdb/cockroach/pull/29559
[#29561]: https://github.com/cockroachdb/cockroach/pull/29561
[#29593]: https://github.com/cockroachdb/cockroach/pull/29593
[#29598]: https://github.com/cockroachdb/cockroach/pull/29598
[#29613]: https://github.com/cockroachdb/cockroach/pull/29613
[#29614]: https://github.com/cockroachdb/cockroach/pull/29614
[#29621]: https://github.com/cockroachdb/cockroach/pull/29621
[#29663]: https://github.com/cockroachdb/cockroach/pull/29663
[#29668]: https://github.com/cockroachdb/cockroach/pull/29668
[#29669]: https://github.com/cockroachdb/cockroach/pull/29669
[#29674]: https://github.com/cockroachdb/cockroach/pull/29674
[#29974]: https://github.com/cockroachdb/cockroach/pull/29974
[#30009]: https://github.com/cockroachdb/cockroach/pull/30009
[#30014]: https://github.com/cockroachdb/cockroach/pull/30014
[#30046]: https://github.com/cockroachdb/cockroach/pull/30046
[#30055]: https://github.com/cockroachdb/cockroach/pull/30055
[#30076]: https://github.com/cockroachdb/cockroach/pull/30076
[#30083]: https://github.com/cockroachdb/cockroach/pull/30083
[#30087]: https://github.com/cockroachdb/cockroach/pull/30087
[#30092]: https://github.com/cockroachdb/cockroach/pull/30092
[#30115]: https://github.com/cockroachdb/cockroach/pull/30115
[#30118]: https://github.com/cockroachdb/cockroach/pull/30118
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v2.1.0-beta.20180924-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-beta.20180924.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-beta.20180924.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-beta.20180924.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.1.0-beta.20180924-sql-language-changes">SQL language changes</h3>

- [`CHANGEFEED`s](../v2.1/change-data-capture.html) will retry, rather than abort, in certain cases when failing to emit to a sink. [#30157][#30157]
- The new `ALTER ... CONFIGURE ZONE` statement can be used to add, modify, reset, and remove [replication zones](../v2.1/configure-replication-zones.html), with support for placeholders (`$1`, etc.) and for multiple executions. The new `SHOW ZONE CONFIGURATION` statement can be used to view existing replication zones. Clients should use these SQL statements instead of the `cockroach zone` sub-commands, which are now deprecated and will be removed in a future version of CockroachDB. [#30173][#30173]
- Added the `2.0` value for both the `distsql` [session setting](../v2.1/set-vars.html) and the `sql.defaults.distsql` [cluster setting](../v2.1/cluster-settings.html), which instructs the database to use the 2.0 `auto` behavior for determining whether queries are distributed or run through the gateway node. [#30209][#30209]

<h3 id="v2.1.0-beta.20180924-command-line-changes">Command-line changes</h3>

- The various `cockroach zone` sub-commands are now deprecated and will be removed in a future version of CockroachDB. Clients should use the SQL interface instead via `SHOW ZONE CONFIGURATION` and `ALTER ... CONFIGURE ZONE`. [#30173][#30173]
- Improved the output of [`cockroach node status`](../v2.1/view-node-details.html) to include separate `is_available` and `is_live` columns. [#30268][#30268]
- The [`cockroach debug zip`](../v2.1/debug-zip.html) command now also collects heap profiles that were generated and stored when there was high memory usage [#30281][#30281]

<h3 id="v2.1.0-beta.20180924-bug-fixes">Bug fixes</h3>

- The `ON DELETE CASCADE` and `ON UPDATE CASCADE` [foreign key actions](../v2.1/foreign-key.html#foreign-key-actions) no longer cascade through `NULL`s. [#30122][#30122]
- Fixed the evaluation of `<tuple> IS NOT NULL` and `<tuple> IS NULL` comparison operations involving a non-null constant tuple to return `true` or `false` rather than `NULL`. [#30184][#30184]
- Fixed the occasional improper processing of the `WITH` operand with `IMPORT`/`EXPORT`/`BACKUP`/`RESTORE` and [common table expressions](../v2.1/common-table-expressions.html). [#30198][#30198]
- Fixed the return type of an array built from the results of a subquery to be `elementType[]` rather than `tuple{elementType}[]`. [#30237][#30237]
- Fixed a panic that was occurring when the cost-based optimizer was disabled and an array built from the results of a subquery was used in the `WHERE` clause of an outer query. [#30237][#30237]
- Fixed a panic that occurred when not all values were present in a composite foreign key. [#30153][#30153]
- Transaction size limit errors are no longer returned for transactions that have already committed. [#30304][#30304]

<h3 id="v2.1.0-beta.20180924-performance-improvements">Performance improvements</h3>

- Avoided unnecessary allocations when parsing prepared statement placeholders. [#30299][#30299]
- 1PC transactions now avoid writing transaction record and intents when pushed due to reads at a higher timestamp. [#30298][#30298]

<h3 id="v2.1.0-beta.20180924-contributors">Contributors</h3>

This release includes 46 merged PRs by 20 authors.

[#30122]: https://github.com/cockroachdb/cockroach/pull/30122
[#30153]: https://github.com/cockroachdb/cockroach/pull/30153
[#30157]: https://github.com/cockroachdb/cockroach/pull/30157
[#30173]: https://github.com/cockroachdb/cockroach/pull/30173
[#30184]: https://github.com/cockroachdb/cockroach/pull/30184
[#30198]: https://github.com/cockroachdb/cockroach/pull/30198
[#30209]: https://github.com/cockroachdb/cockroach/pull/30209
[#30237]: https://github.com/cockroachdb/cockroach/pull/30237
[#30268]: https://github.com/cockroachdb/cockroach/pull/30268
[#30281]: https://github.com/cockroachdb/cockroach/pull/30281
[#30298]: https://github.com/cockroachdb/cockroach/pull/30298
[#30299]: https://github.com/cockroachdb/cockroach/pull/30299
[#30304]: https://github.com/cockroachdb/cockroach/pull/30304
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v2.1.0-beta.20181001-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-beta.20181001.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-beta.20181001.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-beta.20181001.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.1.0-beta.20181001-security-bug-fix">Security bug fix</h3>

- Fixed a vulnerability in which TLS certificates were not validated correctly for internal RPC interfaces. This vulnerability could allow an unauthenticated user with network access to read and write to the cluster. [#30821](https://github.com/cockroachdb/cockroach/issues/30821)

<h3 id="v2.1.0-beta.20181001-sql-language-changes">SQL language changes</h3>

- The entries in the `replicas` column of the `crdb_internal.ranges` virtual table are now always sorted by store
ID.
- The `EXPERIMENTAL_RELOCATE` statement no longer temporarily increases the number of replicas in a range more than one above the range's replication factor, preventing rare edge cases of unavailability.

<h3 id="v2.1.0-beta.20181001-command-line-changes">Command-line changes</h3>

- The `--log-dir`, `--log-dir-max-size`, `--log-file-max-size`, and `--log-file-verbosity` flags are now only available for the [`cockroach start`](../v2.1/start-a-node.html) and [`cockroach demo`](../v2.1/cockroach-demo.html) commands. Previously, these flags were available for other commands but rarely used or functional. [#30341][#30341] {% comment %}doc{% endcomment %}

<h3 id="v2.1.0-beta.20181001-admin-ui-changes">Admin UI changes</h3>

- The new **SQL Query Errors** graph on the [**SQL** dashboard](../v2.1/admin-ui-sql-dashboard.html) shows the number of queries that returned a runtime or execution error. [#30371][#30371] {% comment %}doc{% endcomment %}
- Hovering over a truncated entry in the [**Events** panel](../v2.1/admin-ui-access-and-navigate.html#events-panel) now shows the full description of the event. [#30391][#30391]

<h3 id="v2.1.0-beta.20181001-bug-fixes">Bug fixes</h3>

- The [`cockroach demo`](../v2.1/cockroach-demo.html) command now runs with replication disabled. [#30517][#30517]
- The [**Jobs** page](../v2.1/admin-ui-jobs-page.html) now sorts by **Creation Time** by default instead of by **User**. [#30428][#30428]
- Fixed a panic in the [optimizer](../v2.1/cost-based-optimizer.html) code when generator functions such as `generate_series()` are used as the argument to an aggregate function. [#30362][#30362]
- Corrected the help text for [`EXPORT`](../v2.1/export.html). [#30425][#30425]
- Ignored more unsupported clauses in [`IMPORT ... PGDUMP`](../v2.1/import.html). [#30425][#30425]
- Fixed [`IMPORT`](../v2.1/import.html) of empty or small tables under rare conditions. [#30425][#30425]
- Fixed a panic when generator functions such as `unnest()` are used in the [`SELECT`](../v2.1/select-clause.html) list
  with `GROUP BY`. [#30462][#30462]
- Fixed a panic caused by columns being reordered when using [`UPSERT`](../v2.1/upsert.html) with a `RETURNING` clause. [#30467][#30467]
- Fixed a panic when a [correlated subquery](../v2.1/subqueries.html#correlated-subqueries) in the `WHERE` clause contains an aggregate function referencing the outer query. This now causes an error since aggregates are not allowed in `WHERE`. [#30522][#30522]
- Corrected the list of permitted values printed when a non-permitted value is set for the `distsql` [session variable](../v2.1/set-vars.html). [#30631][#30631]

<h3 id="v2.1.0-beta.20181001-performance-improvements">Performance improvements</h3>

- Removed unnecessary synchronous disk writes caused by erroneous logic in the Raft implementation. [#30459][#30459]
- Range replicas are now automatically rebalanced throughout the cluster to even out the amount of QPS being handled by each node by default. Previously, this was available as a cluster setting but was not the default behavior. [#30649][#30649] {% comment %}doc{% endcomment %}

<h3 id="v2.1.0-beta.20181001-contributors">Contributors</h3>

This release includes 56 merged PRs by 19 authors.

[#30341]: https://github.com/cockroachdb/cockroach/pull/30341
[#30362]: https://github.com/cockroachdb/cockroach/pull/30362
[#30371]: https://github.com/cockroachdb/cockroach/pull/30371
[#30391]: https://github.com/cockroachdb/cockroach/pull/30391
[#30425]: https://github.com/cockroachdb/cockroach/pull/30425
[#30428]: https://github.com/cockroachdb/cockroach/pull/30428
[#30459]: https://github.com/cockroachdb/cockroach/pull/30459
[#30461]: https://github.com/cockroachdb/cockroach/pull/30461
[#30462]: https://github.com/cockroachdb/cockroach/pull/30462
[#30467]: https://github.com/cockroachdb/cockroach/pull/30467
[#30517]: https://github.com/cockroachdb/cockroach/pull/30517
[#30522]: https://github.com/cockroachdb/cockroach/pull/30522
[#30631]: https://github.com/cockroachdb/cockroach/pull/30631
[#30649]: https://github.com/cockroachdb/cockroach/pull/30649
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v2.1.0-beta.20181008-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-beta.20181008.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-beta.20181008.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-beta.20181008.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.1.0-beta.20181008-sql-language-changes">SQL language changes</h3>

- `EXECUTE` is no longer an [explainable statement](../v2.1/explain.html). As an alternative, it is possible to `PREPARE ... AS EXPLAIN ...` and then execute the prepared statement to see the plan for a prepared query. [#30725][#30725]

<h3 id="v2.1.0-beta.20181008-admin-ui-changes">Admin UI changes</h3>

- Removed read and write graphs from the [Hardware Dashboard](../v2.1/admin-ui-hardware-dashboard.html). [#30655][#30655]

<h3 id="v2.1.0-beta.20181008-bug-fixes">Bug fixes</h3>

- `EXPLAIN ALTER DATABASE ... RENAME` no longer renames the target database. [#30661][#30661]
- `EXPLAIN ALTER TABLE ... RENAME` no longer renames the target table. [#30661][#30661]
- `EXPLAIN ALTER TABLE ... RENAME COLUMN` no longer renames the target column. [#30661][#30661]
- `EXPLAIN ALTER INDEX ... RENAME` no longer renames the target index. [#30661][#30661]
- It is once again possible to use [`EXPLAIN`](../v2.1/explain.html) for all preparable statements, and prepare all explainable statements. [#30661][#30661]
- [`TRUNCATE`](../v2.1/truncate.html) is now properly restricted in SQL transactions like other DDL statements. [#30661][#30661]
- [`TRUNCATE`](../v2.1/truncate.html) can now be used with [`EXPLAIN`](../v2.1/explain.html) and as a prepared statement. [#30661][#30661]
- The default unit for converting a string value when setting the `statement_timeout` [session variable](../v2.1/set-vars.html) is now milliseconds for compatibility with PostgreSQL. [#30654][#30654]

<h3 id="v2.1.0-beta.20181008-doc-updates">Doc updates</h3>

- Added a [Migration Overview](../v2.1/migration-overview.html) and specific guides for [Migrating from Postgres](../v2.1/migrate-from-postgres.html), [Migrating from MySQL](../v2.1/migrate-from-mysql.html), and [Migrating from CSV](../v2.1/migrate-from-csv.html). [#3766](https://github.com/cockroachdb/docs/pull/3766)
- Called out performance-optimized configuration files for [Kubernetes single-cluster deployments](../v2.1/orchestrate-cockroachdb-with-kubernetes.html). [#3827](https://github.com/cockroachdb/docs/pull/3827) [#3838](https://github.com/cockroachdb/docs/pull/3838)
- Documented [how replication zones affect secondary indexes](../v2.1/configure-replication-zones.html#replication-zone-levels). [#3818](https://github.com/cockroachdb/docs/pull/3818)
- Clarified that [per-replica constraints in replication zones](../v2.1/configure-replication-zones.html#scope-of-constraints) do not need to add up to total replicas. [#3812](https://github.com/cockroachdb/docs/pull/3812)
- Clarified a [known limitation about schema changes inside transactions](../v2.1/known-limitations.html#schema-changes-within-transactions). [#3814](https://github.com/cockroachdb/docs/pull/3814)
- Updated the [`ARRAY`](../v2.1/array.html) documentation to cover casting from array to `STRING` values. [#3813](https://github.com/cockroachdb/docs/pull/3813)
- Documented the use of `--locality` when using [`cockroach gen haproxy`](../v2.1/generate-cockroachdb-resources.html#haproxy) to generate an HAProxy config file. [#3809](https://github.com/cockroachdb/docs/pull/3809)
- Updated the [session variables](../v2.1/set-vars.html) documentation. [#3799](https://github.com/cockroachdb/docs/pull/3799)
- Updated the list of information included in a [`debug zip`](../v2.1/debug-zip.html). [#3796](https://github.com/cockroachdb/docs/pull/3796)

<h3 id="v2.1.0-beta.20181008-contributors">Contributors</h3>

This release includes 31 merged PRs by 15 authors.

[#30531]: https://github.com/cockroachdb/cockroach/pull/30531
[#30603]: https://github.com/cockroachdb/cockroach/pull/30603
[#30650]: https://github.com/cockroachdb/cockroach/pull/30650
[#30654]: https://github.com/cockroachdb/cockroach/pull/30654
[#30655]: https://github.com/cockroachdb/cockroach/pull/30655
[#30661]: https://github.com/cockroachdb/cockroach/pull/30661
[#30668]: https://github.com/cockroachdb/cockroach/pull/30668
[#30674]: https://github.com/cockroachdb/cockroach/pull/30674
[#30680]: https://github.com/cockroachdb/cockroach/pull/30680
[#30681]: https://github.com/cockroachdb/cockroach/pull/30681
[#30684]: https://github.com/cockroachdb/cockroach/pull/30684
[#30694]: https://github.com/cockroachdb/cockroach/pull/30694
[#30704]: https://github.com/cockroachdb/cockroach/pull/30704
[#30714]: https://github.com/cockroachdb/cockroach/pull/30714
[#30715]: https://github.com/cockroachdb/cockroach/pull/30715
[#30724]: https://github.com/cockroachdb/cockroach/pull/30724
[#30725]: https://github.com/cockroachdb/cockroach/pull/30725
[#30733]: https://github.com/cockroachdb/cockroach/pull/30733
[#30737]: https://github.com/cockroachdb/cockroach/pull/30737
[#30738]: https://github.com/cockroachdb/cockroach/pull/30738
[#30739]: https://github.com/cockroachdb/cockroach/pull/30739
[#30763]: https://github.com/cockroachdb/cockroach/pull/30763
[#30764]: https://github.com/cockroachdb/cockroach/pull/30764
[#30779]: https://github.com/cockroachdb/cockroach/pull/30779
[#30782]: https://github.com/cockroachdb/cockroach/pull/30782
[#30788]: https://github.com/cockroachdb/cockroach/pull/30788
[#30789]: https://github.com/cockroachdb/cockroach/pull/30789
[#30794]: https://github.com/cockroachdb/cockroach/pull/30794
[#30799]: https://github.com/cockroachdb/cockroach/pull/30799
[#30808]: https://github.com/cockroachdb/cockroach/pull/30808
[#30829]: https://github.com/cockroachdb/cockroach/pull/30829
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v2.1.0-beta.20181015-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-beta.20181015.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-beta.20181015.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-beta.20181015.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.1.0-beta.20181015-sql-language-changes">SQL language changes</h3>

- The output of [`SHOW JOBS`](../v2.1/show-jobs.html) now reports ongoing jobs first in start time order, followed by completed jobs in finished time order. [#31005][#31005] 
- CockroachDB now supports more customizations from PostgreSQL client drivers when initially setting up the client connection. [#31021][#31021]
- Columns that are part of a table's [`PRIMARY KEY`](../v2.1/primary-key.html) can no longer be specified as [`STORING` columns](../v2.1/create-index.html#store-columns) in secondary indexes on the table. [#31032][#31032]
- The output of `SHOW ZONE CONFIGURATIONS` and `SHOW ZONE CONFIGURATION FOR` now only shows the zone name and the SQL representation of the config. [#31089][#31089]

<h3 id="v2.1.0-beta.20181015-command-line-changes">Command-line changes</h3>

- It is now possible to provide initial/default values for any customizable [session variable](../v2.1/set-vars.html) in the client connection URL. [#31021][#31021]

<h3 id="v2.1.0-beta.20181015-admin-ui-changes">Admin UI changes</h3>

- Leveraged PopperJS positioning engine to automate the positioning of tooltips. [#30476][#30476]
- Added a graph of the average QPS per store to the [**Replication** dashboard](../v2.1/admin-ui-replication-dashboard.html). Note that this uses an exponentially weighted moving average, not an instantaneous measurement. It is primarily of interest because it's the data that's used when making load-based rebalancing decisions. [#30889][#30889]
- Added a bar chart to the memory and capacity usage columns on the [**Node List**](../v2.1/admin-ui-cluster-overview-page.html#node-list). These columns sort by percentage used. [#31070][#31070]
- Added a debug page with a form that lets users manually enqueue a range in one of the various store-level replica queues on a specified store. This feature is intended for advanced users only. [#31092][#31092]

<h3 id="v2.1.0-beta.20181015-bug-fixes">Bug fixes</h3>

- Lookup joins no longer omit rows in certain circumstances during limit queries. [#30836][#30836]
- Fixed a panic due to malformed placeholder values. [#30860][#30860]
- The [`cockroach start`](../v2.1/start-a-node.html) command now prints a hint about waiting for a join or [`cockroach init`](../v2.1/initialize-a-cluster.html) only when starting nodes for a new cluster, not when adding nodes to an existing cluster. [#30953][#30953]
- Fixed a possible crash when using filters with `<tuple> IN <tuples>` expressions. [#30968][#30968]
- Prevented an edge case in load-based rebalancing where the cluster could transfer the lease for a range to a replica that isn't keeping up with the other replicas, causing brief periods where no replicas think they're leaseholder for the range and thus no requests can be processed for the range. [#30972][#30972]
- CockroachDB now properly ignores non-alphanumeric characters in encoding names passed to [functions](../v2.1/functions-and-operators.html) like `convert_from()` and `client_encoding()`, for compatibility with PostgreSQL. [#31021][#31021]
- CockroachDB now properly recognizes the value of `extra_float_digits` provided by clients as a [connection parameter](../v2.1/connection-parameters.html). [#31021][#31021]
- CockroachDB now properly recognizes two-part values for the `DateStyle` [session variable](../v2.1/set-vars.html) and [connection parameter](../v2.1/connection-parameters.html), for compatibility with PostgreSQL. [#31021][#31021]
- CockroachDB now reports all server status parameters supported by PostgreSQL when setting up a session. This is expected to improve compatibility with some drivers. [#31021][#31021]
- CockroachDB now properly uses the client-provided default values when using the [`RESET`](../v2.1/reset-vars.html) statement (or `SET ... = DEFAULT`). [#31021][#31021]
- CockroachDB now properly fills the columns `boot_val` and `reset_val` in `pg_catalog.pg_settings`, for better compatibility with PostgreSQL. [#31021][#31021]
- CockroachDB now properly supports renaming a column that's also stored in an index. [#31074][#31074]
- During password login, "user does not exist" and "invalid password" cases now produce the same error message. [#30935][#30935]

<h3 id="v2.1.0-beta.20181015-performance-improvements">Performance improvements</h3>

- CockroachDB now avoids acquiring an exclusive lock when checking replica status in the write proposal path. [#30920][#30920]

<h3 id="v2.1.0-beta.20181015-doc-updates">Doc updates</h3>

- Added a tutorial demonstrating essential [performance tuning tutorial](../v2.1/performance-tuning.html) techniques for getting fast reads and writes in CockroachDB, starting with a single-region deployment and expanding into multiple regions. [#3854](https://github.com/cockroachdb/docs/pull/3854)
- Added a tutorial demonstrating the importances of [serializable transactions](../v2.1/demo-serializable.html). [#3844](https://github.com/cockroachdb/docs/pull/3844)
- Added documentation on [index name resolution](../v2.1/sql-name-resolution.html#index-name-resolution). [#3830](https://github.com/cockroachdb/docs/pull/3830).
- Updated the documentation on [set-returning functions (SRFs)](../v2.1/table-expressions.html#table-generator-functions). [#3810](https://github.com/cockroachdb/docs/pull/3810)
- Update the example on how [auto-incrementing is not always sequential](../v2.1/serial.html#auto-incrementing-is-not-always-sequential). [#3832](https://github.com/cockroachdb/docs/pull/3832)

<h3 id="v2.1.0-beta.20181015-contributors">Contributors</h3>

This release includes 40 merged PRs by 19 authors.

[#30476]: https://github.com/cockroachdb/cockroach/pull/30476
[#30836]: https://github.com/cockroachdb/cockroach/pull/30836
[#30860]: https://github.com/cockroachdb/cockroach/pull/30860
[#30889]: https://github.com/cockroachdb/cockroach/pull/30889
[#30920]: https://github.com/cockroachdb/cockroach/pull/30920
[#30935]: https://github.com/cockroachdb/cockroach/pull/30935
[#30953]: https://github.com/cockroachdb/cockroach/pull/30953
[#30968]: https://github.com/cockroachdb/cockroach/pull/30968
[#30972]: https://github.com/cockroachdb/cockroach/pull/30972
[#31005]: https://github.com/cockroachdb/cockroach/pull/31005
[#31021]: https://github.com/cockroachdb/cockroach/pull/31021
[#31032]: https://github.com/cockroachdb/cockroach/pull/31032
[#31070]: https://github.com/cockroachdb/cockroach/pull/31070
[#31074]: https://github.com/cockroachdb/cockroach/pull/31074
[#31089]: https://github.com/cockroachdb/cockroach/pull/31089
[#31092]: https://github.com/cockroachdb/cockroach/pull/31092
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="v2.1.0-rc.1-downloads">Downloads</h3>

<div id="os-tabs" class="clearfix os-tabs_button-outline-primary">
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-rc.1.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-rc.1.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-v2.1.0-rc.1.src.tgz"><button id="source" data-eventcategory="source-release-notes">Source</button></a>
</div>

<h3 id="v2.1.0-rc.1-docker-image">Docker Image</h3>

{% include copy-clipboard.html %}
~~~ shell
$ docker pull cockroachdb/cockroach-unstable:v2.1.0-rc.1
~~~

<h3 id="v2.1.0-rc.1-enterprise-edition-changes">Enterprise edition changes</h3>

- [`CHANGEFEED`s](../v2.1/change-data-capture.html) can now be configured with a minimum duration between emitted resolved timestamps. [#31008][#31008]
- [`CHANGEFEED`s](../v2.1/change-data-capture.html) now have limited and experimental support for the `AVRO` format. [#31143][#31143]
- [`CHANGEFEED`s](../v2.1/change-data-capture.html) now continue running when watched tables are [`ALTER`ed](../v2.1/alter-table.html) in ways that require a backfill. [#31165][#31165]

<h3 id="v2.1.0-rc.1-sql-language-changes">SQL language changes</h3>

- [`EXPLAIN`](../v2.1/explain.html) now always shows filter and join conditions. [#31186][#31186]
- CockroachDB now supports CTEs inside [views](../v2.1/views.html). [#31051][#31051]
- CockroachDB now hints that internal errors should be [reported as bugs by users](../v2.1/file-an-issue.html). Additionally, internal errors are now collected internally and submitted (anonymized) with other node statistics when statistic collection is enabled. [#31272][#31272]
- It is now possible to force a specific index for `DELETE` or `UPDATE`. [#31279][#31279]
- Handle binary fields dumped by `mysqldump v5.7.23` with `_binary` prefix. [#31305][#31305]
- `EXPLAIN ANALYZE <statement>` is now a valid equivalent of [`EXPLAIN ANALYZE (DISTSQL) <statement>`](../v2.1/explain-analyze.html) [#31278][#31278]
- When a query references a table in [`information_schema`](../v2.1/information-schema.html) and `pg_catalog` that is not yet implemented, this will be reported as telemetry if statistics reporting is enabled. This will help determine which features should be implemented next for compatibility. [#31357][#31357]

<h3 id="v2.1.0-rc.1-admin-ui-changes">Admin UI changes</h3>

- The **Service latency: {90,99}th percentile** graphs on the [**Overview**](../v2.1/admin-ui-overview-dashboard.html) and [**SQL**](../v2.1/admin-ui-sql-dashboard.html) dashboards, as well as the P50 and P99 latency numbers in the time series area sidebar, now reflect latencies of both local and distributed queries. Previously, they only included local queries. [#31116][#31116]
- Links to documentation pages now open in a new tab. [#31132][#31132]
- Improved the view of databases with no tables. [#31231][#31231]
- Updated [**Jobs**](../v2.1/admin-ui-jobs-page.html) dashboard to make each row expandable, allowing the user to see the error message for failed jobs. [#31237][#31237]

<h3 id="v2.1.0-rc.1-bug-fixes">Bug fixes</h3>

- Fixed schema change rollback caused by GC TTL threshold error. [#31153][#31153]
- Fixed the `_admin/v1/enqueue_range` debug endpoint to always respect its `node_id` parameter. [#31087][#31087]
- CockroachDB now reports an unimplemented error when a common table expression containing [`INSERT`](../v2.1/insert.html)/[`UPDATE`](../v2.1/update.html)/[`UPSERT`](../v2.1/upsert.html)/[`DELETE`](../v2.1/delete.html) is not otherwise used in the remainder of the query. [#31051][#31051]
- CockroachDB does not silently ignore `WITH` clauses within parentheses anymore. [#31051][#31051]
- Fixed a rare scenario where a [backup](../v2.1/backup.html) could incorrectly include a key for an aborted transaction. [#31316][#31316]
- CockroachDB now avoids repeatedly trying a replica that was found to be in the process of being added. [#31250][#31250]
- CockroachDB will no longer fail in unexpected ways or write invalid data when the type of input values provided to [`INSERT`](../v2.1/insert.html)/[`UPSERT`](../v2.1/upsert.html) does not match the type of the target columns. [#31280][#31280]
- [`UPDATE`](../v2.1/update.html) now verifies the column constraints before [`CHECK`](../v2.1/check.html) constraints, for compatibility with PostgreSQL. [#31280][#31280]
- It is no longer possible to use not-fully-added-yet columns in the `RETURNING` clause of [`UPDATE`](../v2.1/update.html) statements. [#31280][#31280]
- CockroachDB no longer (incorrectly and silently) accepts a [computed column](../v2.1/computed-columns.html) on the left side of the assignment in an [`ON CONFLICT`](../v2.1/insert.html#on-conflict-clause) clause. [#31280][#31280]
- CockroachDB no longer (incorrectly and silently) accepts a not-fully-added-yet column on the left side of the assignment in an [`ON CONFLICT`](../v2.1/insert.html#on-conflict-clause) clause. [#31280][#31280]
- CockroachDB no longer (incorrectly and silently) ignores the `HAVING` clause on [`SELECT`](../v2.1/select-clause.html) without `FROM`. [#31347][#31347]
- The **Range Debug** page now handle cases in which there is no lease start or expiration time. [#31367][#31367]

<h3 id="v2.1.0-rc.1-build-changes">Build changes</h3>

- CockroachDB can now be built from source on macOS 10.14 (Mojave). [#31308][#31308]

<h3 id="v2.1.0-rc.1-doc-updates">Doc Updates</h3>

- Updated the documentation for [encryption at rest](../v2.1/encryption.html). [#3848](https://github.com/cockroachdb/docs/pull/3848)
- Updated the documentation on how to [orchestrate CockroachDB across multiple Kubernetes clusters](../v2.1/orchestrate-cockroachdb-with-kubernetes-multi-cluster.html). [#3845](https://github.com/cockroachdb/docs/pull/3845) [#3847](https://github.com/cockroachdb/docs/pull/3847)
- Updated the documentation on the [cost-based optimizer](../v2.1/cost-based-optimizer.html). [#3784](https://github.com/cockroachdb/docs/pull/3784)
- Added documentation for [fast path deletes for interleaved tables](../v2.1/interleave-in-parent.html). [#3834](https://github.com/cockroachdb/docs/pull/3834)

<h3 id="v2.1.0-rc.1-contributors">Contributors</h3>

This release includes 55 merged PRs by 21 authors.

[#31008]: https://github.com/cockroachdb/cockroach/pull/31008
[#31051]: https://github.com/cockroachdb/cockroach/pull/31051
[#31087]: https://github.com/cockroachdb/cockroach/pull/31087
[#31116]: https://github.com/cockroachdb/cockroach/pull/31116
[#31132]: https://github.com/cockroachdb/cockroach/pull/31132
[#31143]: https://github.com/cockroachdb/cockroach/pull/31143
[#31153]: https://github.com/cockroachdb/cockroach/pull/31153
[#31165]: https://github.com/cockroachdb/cockroach/pull/31165
[#31186]: https://github.com/cockroachdb/cockroach/pull/31186
[#31231]: https://github.com/cockroachdb/cockroach/pull/31231
[#31237]: https://github.com/cockroachdb/cockroach/pull/31237
[#31250]: https://github.com/cockroachdb/cockroach/pull/31250
[#31272]: https://github.com/cockroachdb/cockroach/pull/31272
[#31278]: https://github.com/cockroachdb/cockroach/pull/31278
[#31279]: https://github.com/cockroachdb/cockroach/pull/31279
[#31280]: https://github.com/cockroachdb/cockroach/pull/31280
[#31305]: https://github.com/cockroachdb/cockroach/pull/31305
[#31308]: https://github.com/cockroachdb/cockroach/pull/31308
[#31316]: https://github.com/cockroachdb/cockroach/pull/31316
[#31347]: https://github.com/cockroachdb/cockroach/pull/31347
[#31357]: https://github.com/cockroachdb/cockroach/pull/31357
