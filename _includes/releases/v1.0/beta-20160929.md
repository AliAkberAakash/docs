<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160407-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160407.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160407.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160407-backwards-incompatible-changes">Backwards-incompatible Changes</h3>

* Any databases using the [`DECIMAL`](../v1.0/decimal.html) type will need to be deleted and
  created from scratch. Columns of this type were encoded incorrectly
  by `beta-20160330`.
  [#5820](https://github.com/cockroachdb/cockroach/pull/5820)
* [`SELECT`](../v1.0/select.html) statements must now specify one or more columns or
  expressions. Previously, statements such as `SELECT FROM t` were
  allowed but the results would confuse many clients.
  [#5859](https://github.com/cockroachdb/cockroach/pull/5859)
* It is now an error to insert a value that is too large into a column
  with a type of limited length such as [`VARCHAR(n)`](../v1.0/string.html).
  [#5750](https://github.com/cockroachdb/cockroach/pull/5750)

<h3 id="beta-20160407-compatibility">Compatibility</h3>

* Added support for the "flush" message in the PostgreSQL network
  protocol, which improves compatibility with the [node.js driver](../v1.0/install-client-drivers.html).
  [#5740](https://github.com/cockroachdb/cockroach/pull/5740)
* Fixed a panic when handling certain queries sent by the PHP PDO
  library. [#5783](https://github.com/cockroachdb/cockroach/pull/5783)
* Improved parsing of timestamps for compatibility with the Go
  `lib/pq` client library.
  [#5877](https://github.com/cockroachdb/cockroach/pull/5877)

<h3 id="beta-20160407-new-features">New Features</h3>

* Index hints: `SELECT FROM tbl@idx` or `SELECT FROM
  tbl@{FORCE_INDEX=idx}` instructs the query planner to use the given
  index. [#5785](https://github.com/cockroachdb/cockroach/pull/5785)
  and [#5806](https://github.com/cockroachdb/cockroach/pull/5806)
* The `cockroach` command-line client now accepts environment
  variables as default values for many command-line flags. See
  `--help` for details.
  [#5430](https://github.com/cockroachdb/cockroach/pull/5430)
* Added SQL `version()` [function](../v1.0/functions-and-operators.html).
  [#5763](https://github.com/cockroachdb/cockroach/pull/5763)
* Added compiler and platform information to `cockroach version`
  output. [#5766](https://github.com/cockroachdb/cockroach/pull/5766)
* Debugging tools show fractional seconds in timestamps.
  [#5736](https://github.com/cockroachdb/cockroach/pull/5736)
* In secure mode, plain HTTP requests to the [`http-port`](../v1.0/start-a-node.html) used by the
  admin UI are now redirected to HTTPS.
  [#5746](https://github.com/cockroachdb/cockroach/pull/5746)
* Links to debugging pages are available on the HTTP port at
  `/debug/`.
  [#5795](https://github.com/cockroachdb/cockroach/pull/5795)
* The [`cockroach zone set`](../v1.0/configure-replication-zones.html) command now echos the new configuration.
  [#5829](https://github.com/cockroachdb/cockroach/pull/5829)

<h3 id="beta-20160407-bug-fixes">Bug Fixes</h3>

* Improved flow control for raft snapshots, fixing an issue that could
  lead to nodes running out of memory.
  [#5721](https://github.com/cockroachdb/cockroach/pull/5721)
* Fixed a deadlock scenario in which two conflicting transactions
  would both be unable to make progress.
  [#5710](https://github.com/cockroachdb/cockroach/pull/5710)
* Fixed a panic while executing certain [`DELETE`](../v1.0/delete.html) statements.
  [#5840](https://github.com/cockroachdb/cockroach/pull/5840)

<h3 id="beta-20160407-internal-changes">Internal Changes</h3>

* Clock offsets are now measured continuously.
  [#5512](https://github.com/cockroachdb/cockroach/pull/5512)
* Improved caching to avoid redundant range descriptor lookups.
  [#5627](https://github.com/cockroachdb/cockroach/pull/5627)
* Reduced log spam when nodes are down.
  [#5883](https://github.com/cockroachdb/cockroach/pull/5883)

<h3 id="beta-20160407-contributors">Contributors</h3>

This release includes 77 merged PRs by 18 authors. We would like to
thank the following contributors from the CockroachDB community,
especially
[first-time contributor Seif Lotfy](https://github.com/cockroachdb/cockroach/pull/5747).

* Kenji Kaneda
* Seif Lotfy
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160414-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160414.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160414.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160414-backwards-incompatible-changes">Backwards-incompatible Changes</h3>

* Any databases using the [`DECIMAL`](../v1.0/decimal.html) type will need to be deleted and created from scratch. Columns of this type were encoded incorrectly in older beta releases. (Again! We apologize for the inconvenience.) [#5994](https://github.com/cockroachdb/cockroach/pull/5994)
* The [SQL function](../v1.0/functions-and-operators.html) `transaction_timestamp_unique` has been removed in favor of the new `cluster_logical_timestamp` function described below.

<h3 id="beta-20160414-new-features">New Features</h3>

* [`ALTER TABLE`](../v1.0/alter-table.html) supports several new operations: `ADD COLUMN` with a
  default value
  ([#5759](https://github.com/cockroachdb/cockroach/pull/5759)),
  `ALTER COLUMN SET DEFAULT`, `ALTER COLUMN DROP DEFAULT`, and `ALTER
  COLUMN DROP NOT NULL`
  ([#5947](https://github.com/cockroachdb/cockroach/pull/5947))
* The `TIMESTAMPTZ` type is now accepted as an alias for [`TIMESTAMP`](../v1.0/timestamp.html)
  for compatibility with PostgreSQL; our `TIMESTAMP` type already
  supports time zones in the same way as PostgreSQL's `TIMESTAMPTZ`.
  [#5893](https://github.com/cockroachdb/cockroach/pull/5893)
* The [`STRING`](../v1.0/string.html) type now accepts a length parameter (e.g.,
  `STRING(50)`), similar to `CHAR` and `VARCHAR`.
  [#5918](https://github.com/cockroachdb/cockroach/pull/5918)
* The `LIMIT` clause now accepts placeholders.
  [#5977](https://github.com/cockroachdb/cockroach/pull/5977)
* The `RETURNING` clause of [`INSERT`](../v1.0/insert.html), [`DELETE`](../v1.0/delete.html), and [`UPDATE`](../v1.0/update.html)
  statements now accepts placeholders.
  [#5934](https://github.com/cockroachdb/cockroach/pull/5934)
* When sending queries to the `cockroach sql` tool via `stdin`, a
  terminating semicolon is not required and instructions for
  interactive mode are no longer printed (similar to the existing
  behavior of `-e`).
  [#5988](https://github.com/cockroachdb/cockroach/pull/5988)
* The `experimental_uuid_v4()` [SQL function](../v1.0/functions-and-operators.html) has been renamed to
  `uuid_v4()`. The old name remains as a deprecated alias.
  [#5886](https://github.com/cockroachdb/cockroach/pull/5886)

<h3 id="beta-20160414-performance-improvements">Performance Improvements</h3>

* Reduced the number of files created in the data directory, and fixed
  issues in which the process could run out of file descriptors.
  [#5888](https://github.com/cockroachdb/cockroach/pull/5888)
* Introduced a special fast path for transactions that are contained
  entirely within one range. [#5966](https://github.com/cockroachdb/cockroach/pull/5966)
* Reduced the number of unnecessary network round trips by ensuring
  that the range lease holder and the raft leader coincide.
  [#5973](https://github.com/cockroachdb/cockroach/pull/5973)

<h3 id="beta-20160414-bug-fixes">Bug Fixes</h3>

* The gossip system no longer recommends redundant forwarding
  addresses, which could prevent the cluster from fully connecting.
  [#5901](https://github.com/cockroachdb/cockroach/pull/5901)
* Timestamps are now correctly reported in the network protocol as
  having time zone offsets.
  [#5909](https://github.com/cockroachdb/cockroach/pull/5909)
* Buffered data is now flushed to the network immediately on error.
  [#5909](https://github.com/cockroachdb/cockroach/pull/5909)
* Timeseries data no longer diverges across replicas.
  [#5905](https://github.com/cockroachdb/cockroach/pull/5905)

<h3 id="beta-20160414-internal-changes">Internal Changes</h3>

* [SQL functions](../v1.0/functions-and-operators.html) related to the current time (`now`,
  `current_timestamp`, `statement_timestamp`, `statement_timestamp`)
  now use the clock of the node that executed them instead of a
  timestamp derived from the internal hybrid logical clock. This means
  that these functions are less likely to produce duplicate values,
  but it is more likely for one transaction to see a timestamp that is
  less than a timestamp already seen in another transaction.
  Applications that require a globally monotonic timestamp-like value
  can use the new function `cluster_logical_timestamp` instead.
  [#5805](https://github.com/cockroachdb/cockroach/pull/5805)
* New HTTP endpoint `/debug/metrics` exposes internal metric data in
  JSON format.
  [#5894](https://github.com/cockroachdb/cockroach/pull/5894)
* [Logs](../v1.0/debug-and-error-logs.html) are no longer written to `stderr` by default, only to the
  `logs` subdirectory of the data directory.
  [#5979](https://github.com/cockroachdb/cockroach/pull/5979)

<h3 id="beta-20160414-contributors">Contributors</h3>

This release includes 58 merged PRs by 18 authors. We would like to
thank the following contributors from the CockroachDB community,
especially
[first-time contributor Andrey Shinkevich](https://github.com/cockroachdb/cockroach/pull/5956).

* Andrey Shinkevich
* Kenji Kaneda
* Seif Lotfy
* es-chow
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160421-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160421.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160421.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160421-upgrade-procedure">Upgrade Procedure</h3>

* This release cannot be run concurrently with older beta releases.
  Please stop all nodes running older releases before restarting any
  node with this version.

<h3 id="beta-20160421-new-features">New Features</h3>

* [`UPDATE`](../v1.0/update.html) statements may now set columns which are part of the
  primary key.
  [#6043](https://github.com/cockroachdb/cockroach/pull/6043)
* `CHECK` constraints can now be defined when creating tables and will
  be enforced for [`INSERT`](../v1.0/insert.html) statements (but not yet for [`UPDATE`](../v1.0/update.html)
  statements).
  [#6044](https://github.com/cockroachdb/cockroach/pull/6044)
* The `pow()` and `exp()` [functions](../v1.0/functions-and-operators.html) on `DECIMAL` values no longer lose
  precision.
  [#6170](https://github.com/cockroachdb/cockroach/pull/6170)
* In the [`cockroach sql`](../v1.0/use-the-built-in-sql-client.html) shell, the special command `!` can now be used
  to execute a system command and display its output. `|` executes a
  system command and runs its output as a SQL statement.
  [#5961](https://github.com/cockroachdb/cockroach/pull/5961)
* Added `SHOW CREATE TABLE`.
  [#6158](https://github.com/cockroachdb/cockroach/pull/6158)
* The `RETURNING` clause of [`INSERT`](../v1.0/insert.html) statements can now refer to tables
  by aliases defined with `AS`.
  [#5903](https://github.com/cockroachdb/cockroach/pull/5903)
* The SQL parser now accepts the `CASCADE` and `RESTRICT` keywords in
  the [`DROP INDEX`](../v1.0/drop-index.html), [`TRUNCATE TABLE`](../v1.0/truncate.html), [`ALTER TABLE DROP COLUMN`](../v1.0/alter-table.html), and [`ALTER TABLE DROP CONSTRAINT`](../v1.0/alter-table.html) statements. These keywords relate to
  features we have not yet implemented, so they do nothing, but this change
  improves compatibility with frameworks that like to send these
  keywords.
  [#5957](https://github.com/cockroachdb/cockroach/pull/5957)

<h3 id="beta-20160421-admin-ui">Admin UI</h3>

* The time scale used for graphs can now be changed.
  [#6145](https://github.com/cockroachdb/cockroach/pull/6145)
* Some UI elements now include tooltips with additional explanations.
  [#6006](https://github.com/cockroachdb/cockroach/pull/6006)
* A warning is displayed when the cluster is unreachable.
  [#6042](https://github.com/cockroachdb/cockroach/pull/6042)
* There are now fewer unnecessary scrollbars.
  [#6018](https://github.com/cockroachdb/cockroach/pull/6018)

<h3 id="beta-20160421-bug-fixes">Bug fixes</h3>

* The rebalancer is now better at distributing ranges across the nodes
  in a cluster.
  [#6133](https://github.com/cockroachdb/cockroach/pull/6133)
* Fixed a major cause of "timestamp in future" errors.
  [#5845](https://github.com/cockroachdb/cockroach/pull/5845)
* Fixed several potential panics.
  [#6111](https://github.com/cockroachdb/cockroach/pull/6111)
  [#6143](https://github.com/cockroachdb/cockroach/pull/6143)

<h3 id="beta-20160421-performance-improvements">Performance Improvements</h3>

* Improved the performance of schema changes while data is being
  modified.
  [#5996](https://github.com/cockroachdb/cockroach/pull/5996)
* The RPC subsystem is now bypassed for requests to the local node.
  [#6021](https://github.com/cockroachdb/cockroach/pull/6021)
* Information about completed transactions is now cleaned up more
  efficiently.
  [#5882](https://github.com/cockroachdb/cockroach/pull/5882)
* Fixed a leak of goroutines.
  [#6010](https://github.com/cockroachdb/cockroach/pull/6010)
* Reduced memory allocations on the critical path.
  [#6117](https://github.com/cockroachdb/cockroach/pull/6117)
  [#6119](https://github.com/cockroachdb/cockroach/pull/6119)
  [#6140](https://github.com/cockroachdb/cockroach/pull/6140)
  [#6141](https://github.com/cockroachdb/cockroach/pull/6141)
  [#6142](https://github.com/cockroachdb/cockroach/pull/6142)

<h3 id="beta-20160421-doc-improvements">Doc Improvements</h3>

* Overview of [SQL privileges](../v1.0/privileges.html).
* Summaries and required privileges for all supported [SQL statements](../v1.0/sql-statements.html).
* Reference docs for [`DROP DATABASE`](../v1.0/drop-database.html), [`DROP TABLE`](../v1.0/drop-table.html), [`GRANT`](../v1.0/grant.html), [`RENAME DATABASE`](../v1.0/rename-database.html), [`RENAME TABLE`](../v1.0/rename-table.html), [`REVOKE`](../v1.0/revoke.html), and [`SHOW INDEX`](../v1.0/show-index.html).

<h3 id="beta-20160421-contributors">Contributors</h3>

This release includes 74 merged PRs by 21 authors. We would like to
thank the following contributors from the CockroachDB community,
especially first-time contributor
[Andrew NS Yeow](https://github.com/cockroachdb/cockroach/pull/6109).

* Andrew NS Yeow
* Kenji Kaneda
* Kenjiro Nakayama
* Lu Guanqun
* Seif Lotfy
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160428-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160428.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160428.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160428-backwards-incompatible-changes">Backwards-Incompatible Changes</h3>

* Time zone offsets are no longer shown when querying columns of type
  `TIMESTAMP`; the new type `TIMESTAMP WITH TIME ZONE` should be used
  instead. This is more consistent with other databases.
  [#6165](https://github.com/cockroachdb/cockroach/pull/6165)

<h3 id="beta-20160428-new-features">New Features</h3>

* `INTERVAL` values accept two new formats: ISO8601 (`P2H30M`) and the
  PostgreSQL format (`2 hours 30 minutes`) in addition to the existing
  Go style (`2h30m`).
  [#6216](https://github.com/cockroachdb/cockroach/pull/6216)
* Tuples can now be compared in SQL expressions.
  [#6217](https://github.com/cockroachdb/cockroach/pull/6217)
* The server now implements the `systemd` `NOTIFY_SOCKET` protocol.
  [#6268](https://github.com/cockroachdb/cockroach/pull/6268)
* The new flag `cockroach start --background` can be used to start a
  server in the background. This is better than appending `&` because
  the process doesn't return until it is ready to receive traffic.
  [#6268](https://github.com/cockroachdb/cockroach/pull/6268)

<h3 id="beta-20160428-bug-fixes">Bug fixes</h3>

* The SQL shell can once again be suspended with `ctrl-z`.
  [#6171](https://github.com/cockroachdb/cockroach/pull/6171)
* Fixed an error in the SQL shell when the history file contains empty
  lines. [#6192](https://github.com/cockroachdb/cockroach/pull/6192)
* The `--store` and `--key-size` command-line flags are no longer
  marked as required.
  [#6229](https://github.com/cockroachdb/cockroach/pull/6229)
* The command line interface is better about printing errors to
  `stderr`, not just the log file.
  [#6258](https://github.com/cockroachdb/cockroach/pull/6258)
* The `INFO` log file is now created in the correct default location
  (`cockroach-data/logs`) instead of `$TMPDIR`.
  [#6265](https://github.com/cockroachdb/cockroach/pull/6265)
* Fixed errors that could be introduced by updating tables while a
  schema change is in progress.
  [#6160](https://github.com/cockroachdb/cockroach/pull/6160)
* Fixed several potential panics.
  [#6187](https://github.com/cockroachdb/cockroach/pull/6187),
  [#6235](https://github.com/cockroachdb/cockroach/pull/6235),
  [#6242](https://github.com/cockroachdb/cockroach/pull/6242)

<h3 id="beta-20160428-performance-improvements">Performance Improvements</h3>

* Raft processing is no longer blocked while generating a snapshot for
  a new replica.
  [#6253](https://github.com/cockroachdb/cockroach/pull/6253)

<h3 id="beta-20160428-contributors">Contributors</h3>

This release includes 89 merged PRs by 19 authors. We would like to
thank the following contributors from the CockroachDB community,
especially first-time contributor
[Karl Southern](https://github.com/cockroachdb/cockroach/pull/4858).

* Karl Southern
* Kenjiro Nakayama
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160505-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160505.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160505.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160505-new-features">New Features</h3>

* New SQL command `UPSERT` is available. This is syntactically similar
  to `INSERT` but will update the row with the supplied columns if
  there is a conflicting row for the primary key.
  [#6456](https://github.com/cockroachdb/cockroach/pull/6456)
* The SQL type system has been overhauled, reducing the number of
  explicit casts required.
  [RFC](https://github.com/cockroachdb/cockroach/blob/master/docs/RFCS/20160203_typing.md)
* Tuples are now considered for index selection, so `SELECT * FROM t
  WHERE (a, b) > ($1, $2)` can use an index defined on `(a, b)`.
  [#6332](https://github.com/cockroachdb/cockroach/pull/6332)

<h3 id="beta-20160505-performance-improvements">Performance improvements</h3>

* Bulk inserts to previously-empty table spans are now faster.
  [#6375](https://github.com/cockroachdb/cockroach/pull/6375),
  [#6414](https://github.com/cockroachdb/cockroach/pull/6414)
* Ranges that have grown above the target size are now split before
  being rebalanced, reducing memory usage.
  [#6447](https://github.com/cockroachdb/cockroach/pull/6447)
* Reduced rapid memory growth during partitions.
  [#6448](https://github.com/cockroachdb/cockroach/pull/6448)
* [`ALTER TABLE`](../v1.0/alter-table.html) now performs backfill operations in chunks.
  [#6056](https://github.com/cockroachdb/cockroach/pull/6056)
* [`DROP TABLE`](../v1.0/drop-table.html) now uses the schema change mechanism intead of
  synchronously deleting all data.
  [#6336](https://github.com/cockroachdb/cockroach/pull/6336)
* Scanning over records that have only one MVCC version is faster.
  [#6351](https://github.com/cockroachdb/cockroach/pull/6351)
* The command queue now uses coarse-grained spans until a conflict has
  occurred.
  [#6412](https://github.com/cockroachdb/cockroach/pull/6412)
* When a replica is rebalanced from one node to another, the old node
  no longer triggers unnecessary Raft elections.
  [#6423](https://github.com/cockroachdb/cockroach/pull/6423)

<h3 id="beta-20160505-production">Production</h3>

* Servers now attempt to drain more gracefully when restarted.
  [#6313](https://github.com/cockroachdb/cockroach/pull/6313)
* Metrics on lease requests are now available internally.
  [#5596](https://github.com/cockroachdb/cockroach/pull/5596)
* The RocksDB cache will no longer use all available memory if
  `cgroups` reports a limit higher than physical memory.
  [#6379](https://github.com/cockroachdb/cockroach/pull/6379)

<h3 id="beta-20160505-bug-fixes">Bug Fixes</h3>

* The range descriptor cache is now invalidated correctly, fixing a
  bug in which requests could be retried repeatedly on the wrong node.
  [#6425](https://github.com/cockroachdb/cockroach/pull/6425)
* Fixed a bug with some queries using aggregate functions like `MIN()`
  and `MAX()`. [#6380](https://github.com/cockroachdb/cockroach/pull/6380)
* Tuple comparisons now work correctly when one tuple contains `NULL`.
  [#6370](https://github.com/cockroachdb/cockroach/pull/6370)

<h3 id="beta-20160505-doc-updates">Doc Updates</h3>

* Community-supported docs and configuration files for [running CockroachDB inside a single VirtualBox virtual machine](http://uptimedba.github.io/cockroach-vb-single/cockroach-vb-single/home.html). [#263](https://github.com/cockroachdb/docs/pull/263)
* Docs on using [environment variables](../v1.0/cockroach-commands.html#environment-variables) as default values for command-line flags. [#235](https://github.com/cockroachdb/docs/pull/235)
* Docs on using the [`version`](../v1.0/view-version-details.html) and [`node`](../v1.0/view-node-details.html) commands.

<h3 id="beta-20160505-contributors">Contributors</h3>

This release includes 66 merged PRs by 18 authors. We would like to
thank the following contributors from the CockroachDB community, especially first-time contributor [Paul Steffensen](https://github.com/uptimeDBA).

* Bogdan Batog
* il9ue
* Kenji Kaneda
* Paul Steffensen
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160512-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160512.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160512.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160512-upgrade-procedure">Upgrade Procedure</h3>

- This release cannot be run concurrently with older beta releases. Please stop all nodes running older releases before restarting any node with this version.

<h3 id="beta-20160512-new-features">New Features</h3>

- The [`INSERT`](../v1.0/insert.html) statement now accepts an `ON CONFLICT` clause, for a more flexible alternative to `UPSERT`. [#6591](https://github.com/cockroachdb/cockroach/pull/6591)
- The new [`EXPLAIN (TYPES)`](../v1.0/explain.html) subcommand prints information about the types of expressions in a statement. [#6482](https://github.com/cockroachdb/cockroach/pull/6482)
- Added the aggregate functions [`BOOL_AND()`](../v1.0/functions-and-operators.html) and [`BOOL_OR()`](../v1.0/functions-and-operators.html). [#6535](https://github.com/cockroachdb/cockroach/pull/6535)
- The aggregate functions [`SUM(INT)`](../v1.0/functions-and-operators.html) and [`AVG(INT)`](../v1.0/functions-and-operators.html) now return `DECIMAL` instead of `INT` and `FLOAT` respectively. [#6532](https://github.com/cockroachdb/cockroach/pull/6532)
- The new command-line flag [`--raft-tick-interval`](../v1.0/start-a-node.html) allows the raft heartbeat frequency to be changed in high-latency deployments. [#6615](https://github.com/cockroachdb/cockroach/pull/6615)
- [`TIMESTAMP`](../v1.0/timestamp.html) values can now be cast to type `STRING`. [#6605](https://github.com/cockroachdb/cockroach/pull/6605)
- The [`CREATE DATABASE`](../v1.0/create-database.html) statement now accepts an `ENCODING` option for compatibility with PostgreSQL, although `UTF8` is the only supported encoding. [#6614](https://github.com/cockroachdb/cockroach/pull/6614)

<h3 id="beta-20160512-bug-fixes">Bug Fixes</h3>

- Fixed a bug when a single [`INSERT`](../v1.0/insert.html) statement inserts multiple values for the same primary key. [#6564](https://github.com/cockroachdb/cockroach/pull/6564)
- Fixed an inconsistency that could occur when a transaction in [`SNAPSHOT` isolation](../v1.0/transactions.html#isolation-levels) used the internal `DeleteRange` operation. [#6548](https://github.com/cockroachdb/cockroach/pull/6548)
- Fixed an integer underflow that could result in log messages like `transport: http2Server received 4294965918-bytes`. [#6567](https://github.com/cockroachdb/cockroach/pull/6567)
- Long-running transactions are no longer allowed to exceed their table descriptor lease. [#6418](https://github.com/cockroachdb/cockroach/pull/6418)
- Subtracting an `INTERVAL` from a `TIMESTAMP WITH TIME ZONE` returns a `TIMESTAMP WITH TIME ZONE` instead of one without a time zone. [#6540](https://github.com/cockroachdb/cockroach/pull/6540)
- Improved type checking of comparisons involving tuples. [#6517](https://github.com/cockroachdb/cockroach/pull/6517)
- [`CREATE TABLE`](../v1.0/create-table.html), [`ALTER TABLE`](../v1.0/alter-table.html), and [`DROP INDEX`](../v1.0/drop-index.html) now do more validation of their arguments. [#6492](https://github.com/cockroachdb/cockroach/pull/6492)

<h3 id="beta-20160512-performance-improvments">Performance improvments</h3>

- Improved tracking of keys modified during a transaction, improving performance of bulk inserts. [#6611](https://github.com/cockroachdb/cockroach/pull/6611)
- Schema changes can now continue past transient errors. [#6552](https://github.com/cockroachdb/cockroach/pull/6552)

<h3 id="beta-20160512-doc-updates">Doc Updates</h3>

- The new [Tech Talks](https://www.cockroachlabs.com/community/tech-talks/) page links to recordings and slides from talks by CockroachDB founders and engineers.
- Docs for the [built-in SQL client](../v1.0/use-the-built-in-sql-client.html) now demonstrate various ways to execute SQL statements from the command line and run external commands from the interactive shell.
- [Data type](../v1.0/data-types.html) docs now provide details about storage size.
- Although it's not possible to access CockroachDB's key-value store directly, the [FAQ](../v1.0/frequently-asked-questions.html#can-i-use-cockroachdb-as-a-key-value-store) now suggests a SQL alternative.
- [Replication recommendations](../v1.0/configure-replication-zones.html#node-replica-recommendations) now address cross-datacenter scenarios.

<h3 id="beta-20160512-contributors">Contributors</h3>

This release includes 87 merged PRs by 18 authors. We would like to
thank the following contributor from the CockroachDB community:

* Kenji Kaneda
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160519-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160519.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160519.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160519-backwards-incompatible-changes">Backwards-Incompatible Changes</h3>

- [`TIMESTAMP`](../v1.0/timestamp.html) values are now truncated to microsecond resolution when sent over the network for compatibility with the PostgreSQL protocol. The `format_timestamp_ns(ts)` or `extract(nanosecond from ts)` [functions](../v1.0/functions-and-operators.html) can be used to access the full nanosecond precision of a timestamp. The `now()`, `current_timestamp()`, and `statement_timestamp()` functions are truncated to microsecond resolution to avoid confusion when timestamp values are used in unique indexes; the new `current_timestamp_ns()` function can be used to get a non-truncated timestamp. [#6604](https://github.com/cockroachdb/cockroach/pull/6604)

<h3 id="beta-20160519-new-features">New Features</h3>

- `DO NOTHING` is now supported in [`INSERT ... ON CONFLICT`](../v1.0/insert.html) statements. [#6633](https://github.com/cockroachdb/cockroach/pull/6633)
- [`CHECK`](../v1.0/check.html) constraints can now be specified at the table level. [#6625](https://github.com/cockroachdb/cockroach/pull/6625)
- Binary encoding is now supported in the network protocol for `BOOL`, `FLOAT`, `DECIMAL`, and `STRING` types, improving compatiblity with some PostgreSQL drivers. [#6661](https://github.com/cockroachdb/cockroach/pull/6661)
- The new `cockroach freeze-cluster` [command](../v1.0/cockroach-commands.html) has been added to the command-line interface; it will be used in the upgrade process for a future beta release. [#6675](https://github.com/cockroachdb/cockroach/pull/6675)

<h3 id="beta-20160519-bug-fixes">Bug Fixes</h3>

- [`EXPLAIN DELETE`](../v1.0/explain.html) no longer executes the `DELETE` statement. [#6622](https://github.com/cockroachdb/cockroach/pull/6622)
- [`CHECK`](../v1.0/check.html) constraints are now enforced during [`UPDATE`](../v1.0/update.html) statements. [#6753](https://github.com/cockroachdb/cockroach/pull/6753)
- [`CHECK`](../v1.0/check.html) constraints now work correctly when columns have been dropped. [#6730](https://github.com/cockroachdb/cockroach/pull/6730)
- Tuples and the `DEFAULT` keyword now work in [`INSERT ... ON CONFLICT DO UPDATE`](../v1.0/insert.html) statements. [#6636](https://github.com/cockroachdb/cockroach/pull/6636)
- Errors are now reported with standard PostgreSQL error codes in more places. [#6652](https://github.com/cockroachdb/cockroach/pull/6652), [#6554](https://github.com/cockroachdb/cockroach/pull/6554)
- Fixed a panic while a node is attempting a clean shutdown. [#6677](https://github.com/cockroachdb/cockroach/pull/6677)
- Internal retry logic has been improved so requests are no longer stuck retrying endlessly on the wrong replica. [#6688](https://github.com/cockroachdb/cockroach/pull/6688)

<h3 id="beta-20160519-performance-improvements">Performance Improvements</h3>

- Snapshot generation is now throttled to reduce peak memory consumption.
  [#6632](https://github.com/cockroachdb/cockroach/pull/6632)
- Improved performance for transactions with low contention. [#6413](https://github.com/cockroachdb/cockroach/pull/6413)
- Improved performance for `UPSERT` statements (and the equivalent [`INSERT ... ON CONFLICT DO UPDATE`](../v1.0/insert.html) statements) when the table has no secondary indexes and values are supplied for all columns in the table. [#6673](https://github.com/cockroachdb/cockroach/pull/6673)

<h3 id="beta-20160519-doc-updates">Doc Updates</h3>

- [SQL Grammar](../v1.0/sql-grammar.html) diagrams have been streamlined to reduce unnecessary duplication.   
- Docs on SQL [Constraints](../v1.0/constraints.html) are now available. [#280](https://github.com/cockroachdb/docs/pull/280)
- Docs on the [`CREATE TABLE`](../v1.0/create-table.html) statement are now available. [#296](https://github.com/cockroachdb/docs/pull/296)

<h3 id="beta-20160519-contributors">Contributors</h3>

This release includes 65 merged PRs by 18 authors. We would like to
thank the following contributor from the CockroachDB community:

* Kenji Kaneda
* Paul Steffensen
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160526-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160526.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160526.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160526-backwards-incompatible-changes">Backwards-Incompatible Changes</h3>

- Numeric literals containing a decimal point are now treated as type [`DECIMAL`](../v1.0/decimal.html) instead of type [`FLOAT`](../v1.0/float.html), unless type inference determines that `FLOAT` should be used. In some cases, an explicit `CAST(x AS FLOAT)` may be needed. [#6752](https://github.com/cockroachdb/cockroach/pull/6752)
- The custom error codes `CR000` (indicating a transaction needs to be [retried](../v1.0/transactions.html#transaction-retries)) and `CR001` (indicating a transaction is in an invalid state) have been replaced with the PostgreSQL standard error codes `40001` (serialization failure) and `25000` (invalid transaction state), respectively. [#6797](https://github.com/cockroachdb/cockroach/pull/6797)

<h3 id="beta-20160526-bug-fixes">Bug Fixes</h3>

- Fixed problems when tables are renamed or dropped and recreated in rapid succession. [#6595](https://github.com/cockroachdb/cockroach/pull/6595)
- [`DROP DATABASE`](../v1.0/drop-database.html) now works correctly with quoted names. [#6851](https://github.com/cockroachdb/cockroach/pull/6851)
- Gracefully shutting down a node now completes faster. [#6777](https://github.com/cockroachdb/cockroach/pull/6777)
- [`INSERT ... ON CONFLICT DO NOTHING`](../v1.0/insert.html) no longer crashes the server when no conflicting index is given. [#6795](https://github.com/cockroachdb/cockroach/pull/6795)
- [`INSERT ... ON CONFLICT DO NOTHING`](../v1.0/insert.html) now requires only the `INSERT` permission instead of both `INSERT` and `UPDATE`. [#6827](https://github.com/cockroachdb/cockroach/pull/6827)
- Numeric literals in scientific notation are now case-insensitive. [#6864](https://github.com/cockroachdb/cockroach/pull/6864)
- `TIMESTAMP WITHOUT TIME ZONE` is now recognized as a synonym for [`TIMESTAMP`](../v1.0/timestamp.html). [#6888](https://github.com/cockroachdb/cockroach/pull/6888)
- Attempting to access a database that does not exist now returns PostgreSQL error code `3D000` ("invalid catalog name") instead of a generic error. [#6680](https://github.com/cockroachdb/cockroach/pull/6680)

<h3 id="beta-20160526-internal-changes">Internal Changes</h3>

- Most of the `/_status/` HTTP endpoints now use GRPC internally. [#6702](https://github.com/cockroachdb/cockroach/pull/6702) [#6788](https://github.com/cockroachdb/cockroach/pull/6788)
- The `cockroach exterminate` command (which did not work) has been removed. [#6780](https://github.com/cockroachdb/cockroach/pull/6780)
- Garbage collection now retains the first value outside the configured interval, since it was the current value at the start of the interval. [#6778](https://github.com/cockroachdb/cockroach/pull/6778)

<h3 id="beta-20160526-doc-updates">Doc Updates</h3>

- Docs on the [`INSERT`](../v1.0/insert.html) statement are now available. [#308](https://github.com/cockroachdb/docs/pull/308)
- Docs on the [`UPSERT`](../v1.0/upsert.html) statement are now available. [#308](https://github.com/cockroachdb/docs/pull/308)

<h3 id="beta-20160526-contributors">Contributors</h3>

This release includes 58 merged PRs by 16 authors. We would like to
thank the following contributor from the CockroachDB community:

* Kenji Kaneda
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160602-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160602.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160602.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160602-new-features">New Features</h3>

- String literals can now be parsed as [`DATE`](../v1.0/date.html), [`TIMESTAMP`](../v1.0/timestamp.html), [`TIMESTAMPTZ`](../v1.0/timestamp.html), or [`INTERVAL`](../v1.0/interval.html) without an explicit cast. [#6925](https://github.com/cockroachdb/cockroach/pull/6925)
- Floor division is now supported with a new [operator](../v1.0/functions-and-operators.html#operators), `//`. [#6642](https://github.com/cockroachdb/cockroach/pull/6642)
- Sub-queries are now allowed in `LIMIT`, `OFFSET`, and `RETURNING` expressions. [#6735](https://github.com/cockroachdb/cockroach/pull/6735)

<h3 id="beta-20160602-bug-fixes">Bug Fixes</h3>

- Fixed a missing error check that could result in inconsistencies when transactions conflict. [#6899](https://github.com/cockroachdb/cockroach/pull/6899)

<h3 id="beta-20160602-performance-improvements">Performance Improvements</h3>

- Improved performance of one-phase transactions. [#6857](https://github.com/cockroachdb/cockroach/pull/6857), [#6861](https://github.com/cockroachdb/cockroach/pull/6861)
- Improved the ability of `MIN()` and `MAX()` [functions](../v1.0/functions-and-operators.html) to detect the ordering of the data and read only a single row. [#6891](https://github.com/cockroachdb/cockroach/pull/6891)

<h3 id="beta-20160602-doc-updates">Doc Updates</h3>

- Added a tutorial on [building an Application with CockroachDB and SQLAlchemy](https://www.cockroachlabs.com/blog/building-application-cockroachdb-sqlalchemy-2/)
- Added docs on [how CockroachDB handles `NULL` values](../v1.0/null-handling.html) in various contexts. [#333](https://github.com/cockroachdb/docs/pull/333)
- Improved guidance on [Contributing to CockroachDB docs](https://github.com/cockroachdb/docs/blob/master/CONTRIBUTING.md). [#344](https://github.com/cockroachdb/docs/pull/344)
- Improved [zone configuration examples](../v1.0/configure-replication-zones.html#basic-examples). [#327](https://github.com/cockroachdb/docs/pull/327)

<h3 id="beta-20160602-contributors">Contributors</h3>

This release includes 55 merged PRs by 18 authors. We would like to
thank the following contributors from the CockroachDB community, especially first-time contributors, Sean Loiselle and Thonakom Sangnetra:

- Sean Loiselle
- Thanakom Sangnetra
- Paul Steffensen
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160609-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160609.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160609.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160609-new-features">New Features</h3>

- The [`SERIAL`](../v1.0/serial.html) column type is now supported as an alias for `INT DEFAULT unique_rowid()`. In CockroachDB, this type defaults to a unique 64-bit signed integer that is the combination of the insert timestamp and the ID of the node executing the insert. It therefore differs from similar types in PostgreSQL and MySQL, which auto-increment integers in an approximate sequence. [#7032](https://github.com/cockroachdb/cockroach/pull/7032)
- For client-side [transaction retries](../v1.0/transactions.html#transaction-retries), reissuing the original `SAVEPOINT cockroach_restart` now has the same effect as `ROLLBACK TO SAVEPOINT cockroach_restart`. This improves compatibility with some client drivers. [#6955](https://github.com/cockroachdb/cockroach/pull/6955)
- `FAMILY` is now a reserved word in the SQL dialect in preparation for a future feature. [#7069](https://github.com/cockroachdb/cockroach/pull/7069)

<h3 id="beta-20160609-bug-fixes">Bug Fixes</h3>

- The [command-line SQL shell](../v1.0/use-the-built-in-sql-client.html) is now able to print non-ASCII characters. [#7045](https://github.com/cockroachdb/cockroach/pull/7045), [#7048](https://github.com/cockroachdb/cockroach/pull/7048)
- Commands issued with a timestamp outside the garbage collection window will now always fail. [#6992](https://github.com/cockroachdb/cockroach/pull/6992)
- All aggregate functions now return `NULL` when run on a table with no rows. [#7043](https://github.com/cockroachdb/cockroach/pull/7043)

<h3 id="beta-20160609-performance-improvements">Performance Improvements</h3>

- <a href="http://www.canonware.com/jemalloc/" data-proofer-ignore><code>jemalloc</code></a> is now used as the memory allocator for the C++ portions of the server. The build tag `stdmalloc` can be used to switch back to the standard `malloc`. [#7006](https://github.com/cockroachdb/cockroach/pull/7006)
- Raft logs are now garbage collected more aggressively. This should generally make snapshots smaller, reducing memory pressure, but sometimes it may cause more snapshots to be sent. [#7040](https://github.com/cockroachdb/cockroach/pull/7040)
- Reduced allocations in [`INSERT`](../v1.0/insert.html) and [`UPDATE`](../v1.0/update.html) statements involving secondary indexes. [#7011](https://github.com/cockroachdb/cockroach/pull/7011)
- Improved performance of conditional puts with no existing value. [#7016](https://github.com/cockroachdb/cockroach/pull/7016)
- Improved performance of small transactions. [#7015](https://github.com/cockroachdb/cockroach/pull/7015)

<h3 id="beta-20160609-doc-updates">Doc Updates</h3>

- The [Build an App](../v1.0/build-a-rust-app-with-cockroachdb.html) tutorial now demonstrates connecting to CockroachDB from the [Rust Postgres driver](../v1.0/install-client-drivers.html).
- Docs on the [`CREATE TABLE`](../v1.0/create-table.html) statement now offer both basic and expanded grammar diagrams. [#347](https://github.com/cockroachdb/docs/pull/347)
- Docs on [constraints](../v1.0/constraints.html) now include diagrams of all table-level and row-level constraints. [#361](https://github.com/cockroachdb/docs/pull/361)

<h3 id="beta-20160609-contributors">Contributors</h3>

This release includes 56 merged PRs by 17 authors. We would like to
thank the following contributors from the CockroachDB community, especially first-time contributor Alex Robinson:

- Alex Robinson
- Kenji Kaneda
- Paul Steffensen
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160616-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160616.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160616.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160616-deprecation-notice">Deprecation Notice</h3>

- Integers with a leading zero (e.g., `0755`) are currently treated as octal. In a future release, leading zeros will be ignored and the numbers will be treated as decimal. [#7205](https://github.com/cockroachdb/cockroach/pull/7205)

<h3 id="beta-20160616-new-features">New Features</h3>

- `SELECT` statements now accept an `AS OF SYSTEM TIME` clause to read values from the recent past (up to the GC policy set in the [zone configuration](../v1.0/configure-replication-zones.html)). [#7139](https://github.com/cockroachdb/cockroach/pull/7139)
- [Hexadecimal byte string literals](../v1.0/string.html) of the form `x'f00d'` can now be used to create byte strings containing arbitrary characters. [#7138](https://github.com/cockroachdb/cockroach/pull/7138)
- `BIGSERIAL` and `SMALLSERIAL` are now supported as aliases for [`SERIAL`](../v1.0/serial.html). All three types use the same 64-bit value size. [#7187](https://github.com/cockroachdb/cockroach/pull/7187)

<h3 id="beta-20160616-bug-fixes">Bug Fixes</h3>

- Fixed a panic in some uses of subqueries. [#6994](https://github.com/cockroachdb/cockroach/pull/6994), [#7146](https://github.com/cockroachdb/cockroach/pull/7146)
- [`ALTER TABLE ADD COLUMN`](../v1.0/alter-table.html) now allows the addition of columns with a uniqueness constraint only when the table is empty. [#7094](https://github.com/cockroachdb/cockroach/pull/7094)
- Improved availability when [`--raft-tick-interval`](../v1.0/start-a-node.html#flags) is increased from its default value. [#7086](https://github.com/cockroachdb/cockroach/pull/7086)
- Improved reporting of errors from single statements run outside transactions. [#7080](https://github.com/cockroachdb/cockroach/pull/7080)
- Invalid octal literals (e.g., `09`) no longer crash the server. [#7134](https://github.com/cockroachdb/cockroach/pull/7134)
- When [`ALTER TABLE`](../v1.0/alter-table.html) fails, it now rolls back dependent items in the correct order. [#6789](https://github.com/cockroachdb/cockroach/pull/6789)
- [Aggregate functions](../v1.0/functions-and-operators.html#aggregate-functions) like `SUM()` are no longer allowed in `CHECK` or `DEFAULT` expressions. [#7221](https://github.com/cockroachdb/cockroach/pull/7221)

<h3 id="beta-20160616-performance-improvements">Performance Improvements</h3>

- Improved rate limiting of snapshots during rebalancing, reducing memory usage and improving availability. [#6878](https://github.com/cockroachdb/cockroach/pull/6878)
- Splitting a range that has grown beyond the target size is now faster. [#7118](https://github.com/cockroachdb/cockroach/pull/7118)
- Raft elections are now initiated lazily instead of shortly after server startup. [#7085](https://github.com/cockroachdb/cockroach/pull/7085)
- The raft log is now garbage-collected more eagerly. [#7125](https://github.com/cockroachdb/cockroach/pull/7125)
- Increased RocksDB block size, which reduces memory usage. [#7219](https://github.com/cockroachdb/cockroach/pull/7219)

<h3 id="beta-20160616-doc-updates">Doc Updates</h3>

- Docs on the [Built-in SQL client](../v1.0/use-the-built-in-sql-client.html) now cover pretty-printing to the standard output when executing SQL from the command line. The examples have been improved as well. [#373](https://github.com/cockroachdb/docs/pull/373)
- Docs on the [`STRING`](../v1.0/string.html) and [`INT`](../v1.0/int.html) data types now cover hexadecimal-encoded literal format. Also, the `STRING` docs now cover escape string format. [#392](https://github.com/cockroachdb/docs/pull/392)
- On [Functions and Operators](../v1.0/functions-and-operators.html), functions are now identified as "built-in" or "aggregate". Also, function categorization has been improved. [#379](https://github.com/cockroachdb/docs/pull/379), [#387](https://github.com/cockroachdb/docs/pull/387)
- On [`CREATE INDEX`](../v1.0/create-index.html), the syntax diagram has been clarified and expanded. [#382](https://github.com/cockroachdb/docs/pull/382)

<h3 id="beta-20160616-contributors">Contributors</h3>

This release includes 80 merged PRs by 19 authors. We would like to
thank the following contributors from the CockroachDB community:

- Kenji Kaneda
- Paul Steffensen
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160629-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160629.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160629.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160629-new-features">New Features</h3>

- A prototype implementation of `JOIN` (non-optimized) is now available. [#7202](https://github.com/cockroachdb/cockroach/pull/7202)
- [Column Families](../v1.0/column-families.html) are a new, more efficient representation of SQL tables. Each column family is a group of columns in a table that are stored as a single underlying key-value pair. New tables created with multi-column families will not be compatible with versions of CockroachDB earlier than `beta-20160629`. However, no migration of existing tables is necessary; the previous format corresponds to a separate column family for each column in the table. [#7466](https://github.com/cockroachdb/cockroach/pull/7466), [#7408](https://github.com/cockroachdb/cockroach/pull/7408), [RFC](https://github.com/cockroachdb/cockroach/blob/master/docs/RFCS/20151214_sql_column_families.md)
- [`EXPLAIN`](../v1.0/explain.html) can now be used with `CREATE`, `DROP`, and `ALTER` statements. [#7269](https://github.com/cockroachdb/cockroach/pull/7269)
- The [built-in SQL client](../v1.0/use-the-built-in-sql-client.html) now prints tab-separated values instead of ASCII-art tables when `stdout` is not a TTY (unless `--pretty` is used). [#7268](https://github.com/cockroachdb/cockroach/pull/7268)
- In interactive mode, the [built-in SQL client](../v1.0/use-the-built-in-sql-client.html) now prints the number of rows at the end of a result set. [#7266](https://github.com/cockroachdb/cockroach/pull/7266)
- Prepared statements can now be deallocated with the `DEALLOCATE` command. [#7367](https://github.com/cockroachdb/cockroach/pull/7367)
- Added support for interval types in placeholders. [#7382](https://github.com/cockroachdb/cockroach/pull/7382)
- Added support for hexadecimal-encoded [`STRING`](../v1.0/string.html) literals. [#7138](https://github.com/cockroachdb/cockroach/pull/7138)

<h3 id="beta-20160629-performance-improvements">Performance Improvements</h3>

- The load balancing system now operates at a steadier pace, reducing spikes in memory usage and reaching equilibrium more quickly. [#7147](https://github.com/cockroachdb/cockroach/pull/7147)
- The block cache is now shared across stores on the same node. [#7496](https://github.com/cockroachdb/cockroach/pull/7496)
- Initial replication in a new cluster is now significantly faster. [#7355](https://github.com/cockroachdb/cockroach/pull/7355)
- The Raft log is now more aggressively truncated. [#7125](https://github.com/cockroachdb/cockroach/pull/7125)
- The RocksDB block-size is now set to a more reasonable value. [#7276](https://github.com/cockroachdb/cockroach/pull/7276)
- A new reservation system now ensures that there is enough free space and not too many existing reservations before trying to replicate a range to a new store. This stops the thundering herd that can occur when adding a new node to a cluster. [#7147](https://github.com/cockroachdb/cockroach/pull/7147)
- Miscellaneous performance improvements in the underlying data distribution and replication protocol.

<h3 id="beta-20160629-bug-fixes">Bug Fixes</h3>

- Fixed a bug that could cause a server crash on startup. [#7447](https://github.com/cockroachdb/cockroach/pull/7447)
- Improved the handling of `NULL` values in arithmetic and comparison operations. [#7341](https://github.com/cockroachdb/cockroach/pull/7341)
- Fixed a crash when session arguments could not be parsed. [#7231](https://github.com/cockroachdb/cockroach/pull/7231)
- Improved error messages for parts of the PostgreSQL protocol we do not support. [#7233](https://github.com/cockroachdb/cockroach/pull/7233)
- `AS OF SYSTEM TIME` can now be used in prepared statements. [#7251](https://github.com/cockroachdb/cockroach/pull/7251)
- Raft messages are no longer canceled due to unrelated errors. [#7252](https://github.com/cockroachdb/cockroach/pull/7252)
- [Constraint](../v1.0/constraints.html) names that are specified at the column level are now preserved. [#7271](https://github.com/cockroachdb/cockroach/pull/7271)
- When [`COMMIT`](../v1.0/commit-transaction.html) returns an error, the transaction is considered closed and a separate `ROLLBACK` is no longer necessary. [#7282](https://github.com/cockroachdb/cockroach/pull/7282)
- The [built-in SQL client](../v1.0/use-the-built-in-sql-client.html) now escapes strings in a format that the SQL parser will accept. [#7294](https://github.com/cockroachdb/cockroach/pull/7294)
- Fixed issues when two snapshots were being sent simultaneously. [#7299](https://github.com/cockroachdb/cockroach/pull/7299)
- When a column is [renamed](../v1.0/rename-column.html), any `CHECK` constraints referring to that column are now updated. [#7311](https://github.com/cockroachdb/cockroach/pull/7311)
- When piping commands into the [built-in SQL client](../v1.0/use-the-built-in-sql-client.html), the last line was previously ignored. Now it will be executed if it ends with a semicolon, or report an error if it is non-empty but not a complete statement. [#7328](https://github.com/cockroachdb/cockroach/pull/7328)
- When [`cockroach quit`](../v1.0/stop-a-node.html) fails to drain a node, it is now forced to quit. [#7483](https://github.com/cockroachdb/cockroach/pull/7483)
- Fixed a case in which a removed replica could prevent the rebalance queue from making progress. [#7507](https://github.com/cockroachdb/cockroach/pull/7507)
- Fixed a bug that slowed down population of new replicas. [#7252](https://github.com/cockroachdb/cockroach/pull/7252)

<h3 id="beta-20160629-internal-changes">Internal Changes</h3>

- The Admin UI has been rewritten in a new framework. [#7242](https://github.com/cockroachdb/cockroach/pull/7242)
- The Admin UI now uses serialized protocol buffers when communicating with CockroachDB servers. [#7178](https://github.com/cockroachdb/cockroach/pull/7178), [#7242](https://github.com/cockroachdb/cockroach/pull/7242)

<h3 id="beta-20160629-contributors">Contributors</h3>

This release includes 160 merged PRs by 22 authors. We would like to
thank the following contributors from the CockroachDB community, especially first-time contributor [phynalle](https://github.com/cockroachdb/cockroach/pull/7361):

- Jingguo Yao
- Kenji Kaneda
- phynalle
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160714-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160714.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160714.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160714-upgrade-notes">Upgrade Notes</h3>

- This release cannot be run concurrently with older beta releases. Please stop all nodes running older releases before restarting any node with this version.
- After running this release, it is impossible to downgrade to any release older than [`beta-20160629`](beta-20160629.html).
- This release uses more open file descriptors than older releases. It is recommended to set the process's file descriptor limit to at least 10000. See [Recommended Production Settings](../v1.0/recommended-production-settings.html) for more details.

<h3 id="beta-20160714-new-features">New Features</h3>

- The `cockroach dump` command can now be used to back up the contents of a table. The output of `dump` is a series of SQL statements that can be used to recreate the table. [#7511](https://github.com/cockroachdb/cockroach/pull/7511)
- The `ILIKE` [operator](../v1.0/functions-and-operators.html) for case-insensitive matching is now supported. [#7635](https://github.com/cockroachdb/cockroach/pull/7635)
- Four new [operators](../v1.0/functions-and-operators.html) for regular expression matches are now supported: `~` (regex match), `!~` (negated regex match), `~*` (case-insensitive regex match), `!~*` (negated case-insensitive regex matcH). [#7686](https://github.com/cockroachdb/cockroach/pull/7686)
- The new `SHOW CONSTRAINTS` statement can be used to show the constraints on a table. [#7584](https://github.com/cockroachdb/cockroach/pull/7584)
- `FOREIGN KEY` constraints can now have names. [#7627](https://github.com/cockroachdb/cockroach/pull/7627)
- The [`--http-addr`](../v1.0/start-a-node.html) flag can be used to control the network interface used for the web UI. [#7475](https://github.com/cockroachdb/cockroach/pull/7475)
- [`ALTER TABLE ADD COLUMN`](../v1.0/alter-table.html) can now be used to create [column families](../v1.0/column-families.html). [#7711](https://github.com/cockroachdb/cockroach/pull/7711)
- CockroachDB can now be built on FreeBSD. See this [blog post](https://www.cockroachlabs.com/blog/critters-in-a-jar-running-cockroachdb-in-a-freebsd-jail/) for details. [#7545](https://github.com/cockroachdb/cockroach/pull/7545)
- The `uidebug` `Makefile` target, used for development of the web UI, has been replaced with the environment variable `COCKROACH_DEBUG_UI=1`. [#7601](https://github.com/cockroachdb/cockroach/pull/7601)

<h3 id="beta-20160714-performance-improvements">Performance Improvements</h3>

- [Column families](../v1.0/column-families.html) are now used by default, improving performance of all tables created in this release and beyond. [#7623](https://github.com/cockroachdb/cockroach/pull/7623)
- Removed replicas are now garbage collected more quickly. [#7533](https://github.com/cockroachdb/cockroach/pull/7533)
- RocksDB is now configured to use more, smaller files. This improves performance by reducing the amount of data rewritten during compactions, but increases the number of open file descriptors used by the process. [#7532](https://github.com/cockroachdb/cockroach/pull/7532)
- The server now increases its soft file descriptor limit if it is too low and this is allowed by the hard limit. [#7747](https://github.com/cockroachdb/cockroach/pull/7747)
- The raft log can now be truncated even if a replica is behind, reducing the size of snapshots that must be transmitted over the network (but somewhat increasing the likelihood that a snapshot will be needed instead of replaying the log). [#7438](https://github.com/cockroachdb/cockroach/pull/7438)
- Raft-related messages are now sent in separate streams for each range. [#7534](https://github.com/cockroachdb/cockroach/pull/7534)
- Raft commands for queries that have been abandoned by the client are no longer retried internally. [#7605](https://github.com/cockroachdb/cockroach/pull/7605)
- Table leases are now released when connections are closed, allowing schema changes to proceed without waiting for leases to expire. [#7661](https://github.com/cockroachdb/cockroach/pull/7661)

<h3 id="beta-20160714-bug-fixes">Bug Fixes</h3>

- The [command-line SQL client](../v1.0/use-the-built-in-sql-client.html) is now smarter about semicolons and `` commands inside string literals. [#7510](https://github.com/cockroachdb/cockroach/pull/7510)
- `LIMIT` is now applied correctly on queries that use `JOIN`. [#7546](https://github.com/cockroachdb/cockroach/pull/7546)
- The "CGo Calls" graph in the web UI is now displayed as a rate instead of a cumulative total. [#7597](https://github.com/cockroachdb/cockroach/pull/7597)
- The [`cockroach quit`](../v1.0/stop-a-node.html) command now waits for the server to stop before returning. [#7603](https://github.com/cockroachdb/cockroach/pull/7603)
- Building CockroachDB in a Docker container on Linux with `build/builder.sh` no longer requires the container and host toolchains to be the same. [#7626](https://github.com/cockroachdb/cockroach/pull/7626)
- Fixed a deadlock in table lease acquisition. [#7504](https://github.com/cockroachdb/cockroach/pull/7504)
- The [`TIMESTAMP WITH TIME ZONE`](../v1.0/timestamp.html) type is now reported correctly in the network protocol. [#7642](https://github.com/cockroachdb/cockroach/pull/7642)
- [Constraint](../v1.0/constraints.html) names are now required to be unique. [#7629](https://github.com/cockroachdb/cockroach/pull/7629)
- The "Events" tab in the web UI now includes events for schema changes. [#7571](https://github.com/cockroachdb/cockroach/pull/7571)
- Fixed several server panics in expression normalization. [#7512](https://github.com/cockroachdb/cockroach/pull/7512)
- Fixed a data race when a transaction is abandoned by the client. [#7738](https://github.com/cockroachdb/cockroach/pull/7738)
- Fixed a scenario in which intents could not be resolved. [#7744](https://github.com/cockroachdb/cockroach/pull/7744)
- RocksDB is no longer allowed to use all available file descriptors. [#7747](https://github.com/cockroachdb/cockroach/pull/7747)
- Using `*` as an argument to functions other than `COUNT(*)` no longer causes the server to panic. [#7751](https://github.com/cockroachdb/cockroach/pull/7751)
- Fixed a deadlock during shutdown. [#7770](https://github.com/cockroachdb/cockroach/pull/7770)

<h3 id="beta-20160714-doc-updates">Doc Updates</h3>

- Docs on [installing CockroachDB in Docker](../v1.0/install-cockroachdb.html) now recommend using the new Docker applications for Mac and Windows.
- The new [Start a Cluster in Docker](../v1.0/start-a-local-cluster-in-docker.html) page demonstrates how to run a multi-node cluster across multiple Docker containers on a single host, using Docker volumes to persist node data.
- Docs on the [`DELETE`](../v1.0/delete.html) statement are now available.

<h3 id="beta-20160714-contributors">Contributors</h3>

This release includes 131 merged PRs by 25 authors. We would like to
thank the following contributors from the CockroachDB community, especially first-time contributor [songhao](https://github.com/cockroachdb/cockroach/pull/7692):

- Jason E. Aten
- Jingguo Yao
- Kenji Kaneda
- Sean Loiselle
- songhao
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160721-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160721.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160721.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160721-new-features">New Features</h3>

- Metrics are now exported on `/_status/vars` in a format suitable for aggregation by Prometheus. [#7895](https://github.com/cockroachdb/cockroach/pull/7895)

<h3 id="beta-20160721-build-changes">Build Changes</h3>

- Go 1.6.3 and 1.7rc2 are now supported. [#7811](https://github.com/cockroachdb/cockroach/pull/7811)
- The versions of Docker built for Mac and Windows are now supported. Users of a `docker-machine` VM may need to set environment variables by hand as this case is no longer detected automatically. [#7820](https://github.com/cockroachdb/cockroach/pull/7820)

<h3 id="beta-20160721-ui-changes">UI Changes</h3>

- The Admin UI now displays a warning when there are fewer than three nodes. [#7783](https://github.com/cockroachdb/cockroach/pull/7783)

<h3 id="beta-20160721-performance-improvements">Performance Improvements</h3>

- Writes to different ranges are now performed in parallel. [#7860](https://github.com/cockroachdb/cockroach/pull/7860)
- The first range descriptor is kept more up-to-date. [#7766](https://github.com/cockroachdb/cockroach/pull/7766)
- Ranges are now considered for splits after any replication or rebalancing change. [#7800](https://github.com/cockroachdb/cockroach/pull/7800)
- An existing table lease can now be reused without writing to the lease table as long as it has enough time left before expiration. [#7781](https://github.com/cockroachdb/cockroach/pull/7781)
- The rebalancing system now avoids moving the current leader of a range. [#7918](https://github.com/cockroachdb/cockroach/pull/7918)
- Transaction records related to splits are now garbage-collected promptly. [#7903](https://github.com/cockroachdb/cockroach/pull/7903)

<h3 id="beta-20160721-bug-fixes">Bug Fixes</h3>

- Command history works again in the [command-line SQL interface](../v1.0/use-the-built-in-sql-client.html). [#7818](https://github.com/cockroachdb/cockroach/pull/7818)
- The [`cockroach dump`](../v1.0/sql-dump.html) command now works with tables that have [`DECIMAL`](../v1.0/decimal.html) columns that specify a precision and scale. [#7842](https://github.com/cockroachdb/cockroach/pull/7842)
- Fixed several panics when handling invalid SQL commands. [#7867](https://github.com/cockroachdb/cockroach/pull/7867) [#7868](https://github.com/cockroachdb/cockroach/pull/7868)
- [`ALTER TABLE ADD COLUMN`](../v1.0/alter-table.html) now supports the `IF NOT EXISTS` modifier. [#7898](https://github.com/cockroachdb/cockroach/pull/7898)
- Fixed a race in gossip status logging. [#7836](https://github.com/cockroachdb/cockroach/pull/7836)

<h3 id="beta-20160721-doc-updates">Doc Updates</h3>

- Feedback can now be submitted from the bottom of any page of our docs. [#467](https://github.com/cockroachdb/docs/pull/467)
- Updated [Recommended Production Settings](../v1.0/recommended-production-settings.html) to provide OS-specific instructions for increasing the file descriptors limit. [#459](https://github.com/cockroachdb/docs/pull/459)
- Updated [INTERVAL](../v1.0/interval.html) to cover all supported interval formats: Golang, Traditional Postgres, and ISO 8601. [#462](https://github.com/cockroachdb/docs/pull/462)
- Updated [Start a Cluster in Docker](../v1.0/start-a-local-cluster-in-docker.html) to work for Docker on Windows. [#457](https://github.com/cockroachdb/docs/pull/457)

<h3 id="beta-20160721-contributors">Contributors</h3>

This release includes 76 merged PRs by 21 authors. We would especially like to
thank first-time contributors [Christian Meunier](https://github.com/cockroachdb/cockroach/pull/7937) and [Dharmesh Kakadia](https://github.com/dharmeshkakadia) from the CockroachDB community.
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160728-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160728.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160728.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160728-new-features">New Features</h3>

- Foreign keys can now reference multiple columns. [#8033](https://github.com/cockroachdb/cockroach/pull/8033)
- The [`dump`](../v1.0/sql-dump.html) command can now be run by any user with `SELECT` privilege on the table. [#7974](https://github.com/cockroachdb/cockroach/pull/7974)
- [`INTEGER`](../v1.0/int.html) and [`DECIMAL`](../v1.0/decimal.html) types can now be mixed in arithmetic expressions without casts. [#7756](https://github.com/cockroachdb/cockroach/pull/7756)
- The [`--join`](../v1.0/start-a-node.html) flag can now be specified multiple times, as an alternative to specifying a comma-separated list. [#7876](https://github.com/cockroachdb/cockroach/pull/7876)

<h3 id="beta-20160728-bug-fixes">Bug Fixes</h3>

- Range leases are now preserved across splits, fixing a source of inconsistent reads. [#7955](https://github.com/cockroachdb/cockroach/pull/7955)
- Fixed a panic when single-statement [transactions](../v1.0/transactions.html) were aborted after an automatic retry. [#8010](https://github.com/cockroachdb/cockroach/pull/8010)
- Parsing of time zone offsets is now more lenient, improving compatibility with JDBC drivers. [#7929](https://github.com/cockroachdb/cockroach/pull/7929)
- Unbounded columns are now allowed in empty [column families](../v1.0/column-families.html). [#7969](https://github.com/cockroachdb/cockroach/pull/7969)
- The target columns of [`INSERT`](../v1.0/insert.html) and [`UPDATE`](../v1.0/update.html) statements are now required to be given in unqualified form. [#7911](https://github.com/cockroachdb/cockroach/pull/7911)
- Fixed a potential deadlock in the gossip subsystem and SQL leases. [#8011](https://github.com/cockroachdb/cockroach/pull/8011), [#8019](https://github.com/cockroachdb/cockroach/pull/8019)

<h3 id="beta-20160728-performance-improvements">Performance Improvements</h3>

- Snapshots are now sent prior to the Raft configuration change, minimizing the window of reduced availability. [#7833](https://github.com/cockroachdb/cockroach/pull/7833)

<h3 id="beta-20160728-doc-updates">Doc Updates</h3>

- Added docs on the [`cockroach dump`](../v1.0/sql-dump.html) command. [#472](https://github.com/cockroachdb/docs/pull/472)
- Updated [Recommended Production Settings](../v1.0/recommended-production-settings.html) to clarify how CockroachDB allocates file descriptors when the limit is under the recommended amount. [#480](https://github.com/cockroachdb/docs/pull/480)
- [SQL statements](../v1.0/sql-statements.html), [data types](../v1.0/data-types.html), and data definition topics are now available at-a-glance in the sidebar. [#483](https://github.com/cockroachdb/docs/pull/483)

<h3 id="beta-20160728-contributors">Contributors</h3>

This release includes 63 merged PRs by 17 authors. We would like to thank first-time contributor [Rushi Agrawal](https://github.com/cockroachdb/cockroach/pull/7876) from the CockroachDB community.
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160829-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160829.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160829.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160829-general-changes">General Changes</h3>

- CockroachDB now uses Go 1.7. [#8579](https://github.com/cockroachdb/cockroach/pull/8579)
- CockroachDB now uses RocksDB 4.9. [#8815](https://github.com/cockroachdb/cockroach/pull/8815)

<h3 id="beta-20160829-command-line-interface-changes">Command-Line Interface Changes</h3>

- The [`cockroach zone set`](../v1.0/configure-replication-zones.html) command no longer takes its input directly on the command line. Instead, it accepts a `--file` flag to read from a file, or `--file=-` to read from standard input. [#7953](https://github.com/cockroachdb/cockroach/pull/7953)

<h3 id="beta-20160829-new-features">New Features</h3>

- `AS OF SYSTEM TIME` can now be used with `JOIN` queries. [#8198](https://github.com/cockroachdb/cockroach/pull/8198)
- The type `BIT` now works correctly (as a shorthand for `BIT(1)`). The length limit is now enforced. [#8326](https://github.com/cockroachdb/cockroach/pull/8326)
- The `SHOW` commands now only show tables that the current user has permission to access. [#8070](https://github.com/cockroachdb/cockroach/pull/8070)
- [Foreign keys](../v1.0/foreign-key.html) can now use a prefix of an index. [#8059](https://github.com/cockroachdb/cockroach/pull/8059)
- The standard `information_schema` database is now partially supported. New tables will be added to this database in future beta releases. [#7965](https://github.com/cockroachdb/cockroach/pull/7965), [#8119](https://github.com/cockroachdb/cockroach/pull/8119)

<h3 id="beta-20160829-bug-fixes">Bug Fixes</h3>

- Clusters with a large number of ranges no longer experience persistently broken connections on node restarts. [#8828](https://github.com/cockroachdb/cockroach/pull/8828)
- The `RENAME` command now requires the `DROP` privilege on the table or database. It is no longer possible to rename the `system` database. [#7998](https://github.com/cockroachdb/cockroach/pull/7998)
- The `repeat()` and `substr()` [functions](../v1.0/functions-and-operators.html) with very large numeric arguments will no longer crash the server as easily. [#8073](https://github.com/cockroachdb/cockroach/pull/8073), [#8078](https://github.com/cockroachdb/cockroach/pull/8078)
- Certain errors now cause a replica to be marked as corrupt so the corruption will not be replicated to other nodes. [#7684](https://github.com/cockroachdb/cockroach/pull/7684)
- A `CloseComplete` packet is now sent in response to a `Close` command, improving compatibility with come PostgreSQL client drivers (including the Elixir driver). [#8309](https://github.com/cockroachdb/cockroach/pull/8309)
- SQL name parsing has been improved to fix several panics and allow foreign key constraints that span databases. [#8152](https://github.com/cockroachdb/cockroach/pull/8152)
- Fixed some panics. [#8283](https://github.com/cockroachdb/cockroach/pull/8283), [#8282](https://github.com/cockroachdb/cockroach/pull/8282)
- Fixed a deadlock if a range grew too large. [#8387](https://github.com/cockroachdb/cockroach/pull/8387)
- Fixed a race in which multiple conflicting snapshots could be accepted at the same time. [#8365](https://github.com/cockroachdb/cockroach/pull/8365)
- Decimal values are now represented correctly in the binary protocol. [#8319](https://github.com/cockroachdb/cockroach/pull/8319)

<h3 id="beta-20160829-performance-improvements">Performance Improvements</h3>

- Snapshots are now sent synchronously during replica changes. This controls the rate of the replication process and prevents spikes in memory usage that often caused servers to crash. [#8613](https://github.com/cockroachdb/cockroach/pull/8613)
- Raft logs are now truncated less aggressively, reducing the chance that replication will need to send a snapshot instead of the log. [#8343](https://github.com/cockroachdb/cockroach/pull/8343), [#8629](https://github.com/cockroachdb/cockroach/pull/8629), [#8656](https://github.com/cockroachdb/cockroach/pull/8656)
- Snapshots and the raft log are now written more efficiently. [#8644](https://github.com/cockroachdb/cockroach/pull/8644)
- Raft log entries are now cached. [#8494](https://github.com/cockroachdb/cockroach/pull/8494)
- Raft groups are now created lazily at startup. [#8592](https://github.com/cockroachdb/cockroach/pull/8592)
- Raft heartbeats are now sent less often by default. [#8695](https://github.com/cockroachdb/cockroach/pull/8695)
- Improved performance and reliability of clusters with large numbers of ranges. [#8125](https://github.com/cockroachdb/cockroach/pull/8125), [#8162](https://github.com/cockroachdb/cockroach/pull/8162), [#8495](https://github.com/cockroachdb/cockroach/pull/8495)
- The heuristics used by the rebalancing system have been improved. [#8124](https://github.com/cockroachdb/cockroach/pull/8124)
- Some noisy log messages have been removed or reduced. [#8071](https://github.com/cockroachdb/cockroach/pull/8071), [#8021](https://github.com/cockroachdb/cockroach/pull/8021), [#8240](https://github.com/cockroachdb/cockroach/pull/8240), [#8292](https://github.com/cockroachdb/cockroach/pull/8292), [#8529](https://github.com/cockroachdb/cockroach/pull/8529), [#8687](https://github.com/cockroachdb/cockroach/pull/8687), [#8689](https://github.com/cockroachdb/cockroach/pull/8689)
- The gossip network reconnects more reliably after a failure. [#8128](https://github.com/cockroachdb/cockroach/pull/8128)
- RPC connections to failed nodes are now detected sooner. [#8163](https://github.com/cockroachdb/cockroach/pull/8163)
- The cache of the first range descriptor is now properly invalidated. [#8163](https://github.com/cockroachdb/cockroach/pull/8163)
- Removed replicas are now garbage-collected sooner in many cases. [#8172](https://github.com/cockroachdb/cockroach/pull/8172)
- The resolution of the block profiler has been reduced, saving CPU. [#8384](https://github.com/cockroachdb/cockroach/pull/8384)
- Range lease extensions no longer block concurrent reads. [#8352](https://github.com/cockroachdb/cockroach/pull/8352)

<h3 id="beta-20160829-ui-changes">UI Changes</h3>

- The "capacity used" is now computed correctly. [#8048](https://github.com/cockroachdb/cockroach/pull/8048)
- The CPU and garbage-collection graphs now display averages. [#8048](https://github.com/cockroachdb/cockroach/pull/8048)
- The Databases section now includes more details. [#8364](https://github.com/cockroachdb/cockroach/pull/8364)

<h3 id="beta-20160829-doc-updates">Doc Updates</h3>

- The new [SQL Feature Support](../v1.0/sql-feature-support.html) page explains which standard SQL features are supported by CockroachDB. [#550](https://github.com/cockroachdb/docs/pull/550)
- The new Features on Develop Branch page tracks features that are available on the `develop` branch but not yet on `master`. [#552](https://github.com/cockroachdb/docs/pull/552) (Page no longer available.)
- Added docs on [foreign key constraints](../v1.0/foreign-key.html). [#528](https://github.com/cockroachdb/docs/pull/528)
- Added docs on the [`TRUNCATE`](../v1.0/truncate.html) statement. [#542](https://github.com/cockroachdb/docs/pull/542)
- Updated [Recommended Production Settings](../v1.0/recommended-production-settings.html) to include cache size recommendations for machines running multiple applications and `systemd`-specific instructions for increasing the file descriptors limit. [#532](https://github.com/cockroachdb/docs/pull/532), [#554](https://github.com/cockroachdb/docs/pull/554)
- Fixed errors in the commands for [starting CockroachDB in Docker](../v1.0/start-a-local-cluster-in-docker.html). [#567](https://github.com/cockroachdb/docs/pull/567)

<h3 id="beta-20160829-contributors">Contributors</h3>

This release includes 280 merged PRs by 26 authors. We would like to thank the following contributors from the CockroachDB community:

- Christian Koep
- Dolf Schimmel
- songhao
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160908-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160908.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160908.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160908-general-changes">General Changes</h3>

- CockroachDB has reverted to RocksDB 4.8. [#9118](https://github.com/cockroachdb/cockroach/pull/9118)
- The logging format has changed to include a goroutine ID. [#8977](https://github.com/cockroachdb/cockroach/pull/8977)
- CockroachDB now builds correctly when Git worktrees are used; as a consequence Git version 2.5 or newer is now required when [building from source](../v1.0/install-cockroachdb.html). [#9072](https://github.com/cockroachdb/cockroach/pull/9072)

<h3 id="beta-20160908-command-line-interface-changes">Command-Line Interface Changes</h3>

- The `--from` and `--to` arguments of debugging commands now support backslash-escaped keys. [#8903](https://github.com/cockroachdb/cockroach/pull/8903)
- If any [environment variables](../v1.0/cockroach-commands.html#environment-variables) are used to configure the server, the names of those variables are printed to the logs. [#9069](https://github.com/cockroachdb/cockroach/pull/9069)

<h3 id="beta-20160908-bug-fixes">Bug fixes</h3>

- Fixed a bug that would result in the server locking up after a few hours on a machine or VM with only one CPU. [#8908](https://github.com/cockroachdb/cockroach/pull/8908)
- Fixed another cause of persistently broken connections on node restarts. [#8947](https://github.com/cockroachdb/cockroach/pull/8947)
- [`CREATE TABLE`](../v1.0/create-table.html) now reports errors correctly instead of failing silently. [#9011](https://github.com/cockroachdb/cockroach/pull/9011)
- The replica garbage collection process is no longer confused by uninitialized replicas. [#9021](https://github.com/cockroachdb/cockroach/pull/9021)
- Fixed various data races. [#8865](https://github.com/cockroachdb/cockroach/pull/8865), [#8933](https://github.com/cockroachdb/cockroach/pull/8933)
- Fixed a panic in the time-series query system. [#9038](https://github.com/cockroachdb/cockroach/pull/9038)

<h3 id="beta-20160908-performance-improvements">Performance Improvements</h3>

- Internal locking mechanisms have been refactored to improve parallelism. [#8941](https://github.com/cockroachdb/cockroach/pull/8941)
- GRPC request tracing has been disabled due to its memory cost. [#9113](https://github.com/cockroachdb/cockroach/pull/9113)
- Raft leadership is more reliably transferred to coincide with the range lease. [#8932](https://github.com/cockroachdb/cockroach/pull/8932)
- Raft snapshots are now limited to one at a time on both the receiving and sending nodes. [#8974](https://github.com/cockroachdb/cockroach/pull/8974)
- Node startup time has been improved. [#9020](https://github.com/cockroachdb/cockroach/pull/9020)
- Reduced memory usage of the timestamp cache. [#9102](https://github.com/cockroachdb/cockroach/pull/9102)
- Old replicas are now garbage-collected with higher priority. [#9019](https://github.com/cockroachdb/cockroach/pull/9019)
- Transaction records for splits and replica changes are now garbage-collected sooner. [#9036](https://github.com/cockroachdb/cockroach/pull/9036)

<h3 id="beta-20160908-doc-updates">Doc Updates</h3>

- Added docs on [deploying CockroachDB on Google Cloud Platform GCE](../v1.0/deploy-cockroachdb-on-google-cloud-platform.html). [#574](https://github.com/cockroachdb/docs/pull/574)
- Added docs on [orchestrating CockroachDB with Kubernetes](../v1.0/orchestrate-cockroachdb-with-kubernetes.html). [#584](https://github.com/cockroachdb/docs/pull/584)
- Updated [troubleshooting](../v1.0/troubleshoot.html) docs to cover cases when nodes will not join a cluster. [#610](https://github.com/cockroachdb/docs/pull/610)
- Each version's release notes now link to the corresponding Mac and Linux binaries. [#604](https://github.com/cockroachdb/docs/pull/604)
- Updated docs on [secure local](../v1.0/secure-a-cluster.html) and [secure distributed](../v1.0/manual-deployment.html) deployment to show how to stop nodes. [#619](https://github.com/cockroachdb/docs/pull/619)  

<h3 id="beta-20160908-contributors">Contributors</h3>

This release includes 180 merged PRs by 17 authors. We would like to thank first-time contributor [Henry Escobar](https://github.com/HenryEscobar) from the CockroachDB community.
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160915-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160915.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160915.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160915-general-changes">General Changes</h3>

- CockroachDB is now built with Go 1.7.1. [#9288](https://github.com/cockroachdb/cockroach/pull/9288)
- CockroachDB no longer requires Git 2.5; the minimum supported version is now 1.8. [#9325](https://github.com/cockroachdb/cockroach/pull/9325)

<h3 id="beta-20160915-bug-fixes">Bug Fixes</h3>

- Fixed an inconsistency that could occur when two conflicting transactions were assigned the same timestamp. [#9100](https://github.com/cockroachdb/cockroach/pull/9100)
- Nodes with multiple stores now export metrics in a format that works with Prometheus. [#9322](https://github.com/cockroachdb/cockroach/pull/9322)

<h3 id="beta-20160915-performance-improvements">Performance Improvements</h3>

- Improved concurrency of Raft processing so snapshots and replica garbage collection do not block other ranges. [#9176](https://github.com/cockroachdb/cockroach/pull/9176) [#9299](https://github.com/cockroachdb/cockroach/pull/9299)
- The rebalancing system is now more tolerant of small imbalances, making the range distribution more likely to reach a steady state. [#9230](https://github.com/cockroachdb/cockroach/pull/9230)
- Reduced memory used by debugging traces. [#9258](https://github.com/cockroachdb/cockroach/pull/9258)
- Ranges now become responsive sooner after startup. [#9276](https://github.com/cockroachdb/cockroach/pull/9276)
- Removed an internal timeout that caused unnecessary retry loops. [#9234](https://github.com/cockroachdb/cockroach/pull/9234)
- Try harder to ensure that the range lease and raft leadership are co-located. [#8834](https://github.com/cockroachdb/cockroach/pull/8834)
- Reduced memory used by Raft. [#9193](https://github.com/cockroachdb/cockroach/pull/9193)
- The consistency checker now uses less memory when an inconsistency is found. [#9159](https://github.com/cockroachdb/cockroach/pull/9159)
- The internal replica queues can now time out and recover from a replica that gets stuck. [#9312](https://github.com/cockroachdb/cockroach/pull/9312)
- Removed a redundant verification process that periodically scanned over all data. [#9333](https://github.com/cockroachdb/cockroach/pull/9333)

<h3 id="beta-20160915-doc-updates">Doc Updates</h3>

- Added docs for [deploying CockroachDB on AWS](../v1.0/deploy-cockroachdb-on-aws.html). [#640](https://github.com/cockroachdb/docs/pull/640)
- Added a "back to top" feature to improve the usability of longer pages. [#638](https://github.com/cockroachdb/docs/pull/638)
- Updated [Start a Local Cluster](../v1.0/start-a-local-cluster.html) to suggest manually setting each node's cache size to avoid memory errors when testing against a local cluster in a serious way. [#652](https://github.com/cockroachdb/docs/pull/652)
- Updated docs on [transaction retries](../v1.0/transactions.html#transaction-retries) to provide the correct error code. [#647](https://github.com/cockroachdb/docs/pull/647)

<h3 id="beta-20160915-contributors">Contributors</h3>

This release includes 66 merged PRs by 17 authors.
<h2 id="{{ include.release | slugify }}">{{ include.release }}</h2>

Release Date: {{ include.release_date | date: "%B %-d, %Y" }}

<h3 id="beta-20160929-binaries">Binaries</h3>

<div id="os-tabs" class="clearfix">
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160929.darwin-10.9-amd64.tgz"><button id="mac" data-eventcategory="mac-binary-release-notes">Mac</button></a>
    <a href="https://binaries.cockroachdb.com/cockroach-beta-20160929.linux-amd64.tgz"><button id="linux" data-eventcategory="linux-binary-release-notes">Linux</button></a>
</div>

<h3 id="beta-20160929-new-features">New Features</h3>

- The [`--advertise-host`](../v1.0/start-a-node.html#flags) flag can now be used to override the address to advertise to other CockroachDB nodes. [#9503](https://github.com/cockroachdb/cockroach/pull/9503)
- The [`--http-host`](../v1.0/start-a-node.html#flags) flag sets the address to bind to for HTTP requests. Together with `--http-port`, it will replace `--http-addr` in a future release. [#9573](https://github.com/cockroachdb/cockroach/pull/9573)
- More metrics are now exported about the internal garbage collection of deleted values. [#9571](https://github.com/cockroachdb/cockroach/pull/9571)
- More metrics are now exported about file descriptor usage. [#9582](https://github.com/cockroachdb/cockroach/pull/9582)
- The system now uses OpenTracing's new key-value style logging APIs. [#9578](https://github.com/cockroachdb/cockroach/pull/9578)

<h3 id="beta-20160929-bug-fixes">Bug Fixes</h3>

- Fixed an inconsistency that could occur when transactions race with garbage collection. [#9377](https://github.com/cockroachdb/cockroach/pull/9377)
- Retried `BeginTransaction` operations no longer leak internal errors to the client. [#9305](https://github.com/cockroachdb/cockroach/pull/9305)
- Brief service interruptions are now avoided after shard splits. [#9550](https://github.com/cockroachdb/cockroach/pull/9550)

<h3 id="beta-20160929-ui-changes">UI Changes</h3>

- The UI no longer crashes when a tab is reopened after being in the background for a long time. [#9042](https://github.com/cockroachdb/cockroach/pull/9042)

<h3 id="beta-20160929-performance-improvements">Performance Improvements</h3>

- Ranges which are not receiving traffic now stop sending raft heartbeats. [#9383](https://github.com/cockroachdb/cockroach/pull/9383)
- Raft snapshots are now sent as a stream instead of one large message. [#9292](https://github.com/cockroachdb/cockroach/pull/9292)
- The rebalancer is now better about noticing under-full stores. [#9415](https://github.com/cockroachdb/cockroach/pull/9415)
- Raft messages are now sent in batches. [#9485](https://github.com/cockroachdb/cockroach/pull/9485)
- Nodes are now quicker to fail over to other replicas when one is unresponsive. [#9239](https://github.com/cockroachdb/cockroach/pull/9239)
- Dropping a table or index is now faster. [#9419](https://github.com/cockroachdb/cockroach/pull/9419)
- Re-enabled consensus-level optimizations for network i/o. [#9606](https://github.com/cockroachdb/cockroach/pull/9606)

<h3 id="beta-20160929-doc-updates">Doc Updates</h3>

- Improved the SQL docs for granting privileges on databases and tables: [`GRANT`](../v1.0/grant.html). [#687](https://github.com/cockroachdb/docs/pull/687)
- Completed the SQL docs for:
    - Getting user privileges on databases and tables: [`SHOW GRANTS`](../v1.0/show-grants.html). [#687](https://github.com/cockroachdb/docs/pull/687)
    - Setting and getting the default database for a session: [`SET DATABASE`](../v1.0/set-vars.html) and [`SHOW DATABASE`](../v1.0/show-vars.html). [#671](https://github.com/cockroachdb/docs/pull/671), [#683](https://github.com/cockroachdb/docs/pull/683)
    - Setting and getting the default time zone for a session: [`SET TIME ZONE`](../v1.0/set-vars.html) and [`SHOW TIME ZONE`](../v1.0/show-vars.html). [#680](https://github.com/cockroachdb/docs/pull/680)
    - Changing the name of a table column or index: [`RENAME COLUMN`](../v1.0/rename-column.html) and [`RENAME INDEX`](../v1.0/rename-index.html). [#678](https://github.com/cockroachdb/docs/pull/678), [#679](https://github.com/cockroachdb/docs/pull/679)
- Updated high-level overviews of primary [CockroachDB features](../v1.0/strong-consistency.html) and added related links. [#699](https://github.com/cockroachdb/docs/pull/699)

<h3 id="beta-20160929-contributors">Contributors</h3>

This release includes 78 merged PRs by 19 authors. We would like to thank the following contributors from the CockroachDB community, especially first-time contributor Haines Chan:

- Haines Chan
